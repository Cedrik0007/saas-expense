function u0(s,a){for(var r=0;r<a.length;r++){const o=a[r];if(typeof o!="string"&&!Array.isArray(o)){for(const d in o)if(d!=="default"&&!(d in s)){const c=Object.getOwnPropertyDescriptor(o,d);c&&Object.defineProperty(s,d,c.get?c:{enumerable:!0,get:()=>o[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(d){if(d.ep)return;d.ep=!0;const c=r(d);fetch(d.href,c)}})();var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ap(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fu={exports:{}},Uc={},Ru={exports:{}},_n={};var zh;function f0(){if(zh)return _n;zh=1;var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.iterator;function R(se){return se===null||typeof se!="object"?null:(se=A&&se[A]||se["@@iterator"],typeof se=="function"?se:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,F={};function D(se,C,K){this.props=se,this.context=C,this.refs=F,this.updater=K||w}D.prototype.isReactComponent={},D.prototype.setState=function(se,C){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,C,"setState")},D.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function _(){}_.prototype=D.prototype;function Y(se,C,K){this.props=se,this.context=C,this.refs=F,this.updater=K||w}var ee=Y.prototype=new _;ee.constructor=Y,$(ee,D.prototype),ee.isPureReactComponent=!0;var G=Array.isArray,fe=Object.prototype.hasOwnProperty,he={current:null},Be={key:!0,ref:!0,__self:!0,__source:!0};function ge(se,C,K){var Z,ce={},oe=null,je=null;if(C!=null)for(Z in C.ref!==void 0&&(je=C.ref),C.key!==void 0&&(oe=""+C.key),C)fe.call(C,Z)&&!Be.hasOwnProperty(Z)&&(ce[Z]=C[Z]);var Fe=arguments.length-2;if(Fe===1)ce.children=K;else if(1<Fe){for(var Oe=Array(Fe),Ye=0;Ye<Fe;Ye++)Oe[Ye]=arguments[Ye+2];ce.children=Oe}if(se&&se.defaultProps)for(Z in Fe=se.defaultProps,Fe)ce[Z]===void 0&&(ce[Z]=Fe[Z]);return{$$typeof:s,type:se,key:oe,ref:je,props:ce,_owner:he.current}}function te(se,C){return{$$typeof:s,type:se.type,key:C,ref:se.ref,props:se.props,_owner:se._owner}}function ye(se){return typeof se=="object"&&se!==null&&se.$$typeof===s}function z(se){var C={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(K){return C[K]})}var H=/\/+/g;function de(se,C){return typeof se=="object"&&se!==null&&se.key!=null?z(""+se.key):C.toString(36)}function ie(se,C,K,Z,ce){var oe=typeof se;(oe==="undefined"||oe==="boolean")&&(se=null);var je=!1;if(se===null)je=!0;else switch(oe){case"string":case"number":je=!0;break;case"object":switch(se.$$typeof){case s:case a:je=!0}}if(je)return je=se,ce=ce(je),se=Z===""?"."+de(je,0):Z,G(ce)?(K="",se!=null&&(K=se.replace(H,"$&/")+"/"),ie(ce,C,K,"",function(Ye){return Ye})):ce!=null&&(ye(ce)&&(ce=te(ce,K+(!ce.key||je&&je.key===ce.key?"":(""+ce.key).replace(H,"$&/")+"/")+se)),C.push(ce)),1;if(je=0,Z=Z===""?".":Z+":",G(se))for(var Fe=0;Fe<se.length;Fe++){oe=se[Fe];var Oe=Z+de(oe,Fe);je+=ie(oe,C,K,Oe,ce)}else if(Oe=R(se),typeof Oe=="function")for(se=Oe.call(se),Fe=0;!(oe=se.next()).done;)oe=oe.value,Oe=Z+de(oe,Fe++),je+=ie(oe,C,K,Oe,ce);else if(oe==="object")throw C=String(se),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return je}function ke(se,C,K){if(se==null)return se;var Z=[],ce=0;return ie(se,Z,"","",function(oe){return C.call(K,oe,ce++)}),Z}function Me(se){if(se._status===-1){var C=se._result;C=C(),C.then(function(K){(se._status===0||se._status===-1)&&(se._status=1,se._result=K)},function(K){(se._status===0||se._status===-1)&&(se._status=2,se._result=K)}),se._status===-1&&(se._status=0,se._result=C)}if(se._status===1)return se._result.default;throw se._result}var Ee={current:null},me={transition:null},Ie={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:me,ReactCurrentOwner:he};function Ue(){throw Error("act(...) is not supported in production builds of React.")}return _n.Children={map:ke,forEach:function(se,C,K){ke(se,function(){C.apply(this,arguments)},K)},count:function(se){var C=0;return ke(se,function(){C++}),C},toArray:function(se){return ke(se,function(C){return C})||[]},only:function(se){if(!ye(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},_n.Component=D,_n.Fragment=r,_n.Profiler=d,_n.PureComponent=Y,_n.StrictMode=o,_n.Suspense=g,_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,_n.act=Ue,_n.cloneElement=function(se,C,K){if(se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+se+".");var Z=$({},se.props),ce=se.key,oe=se.ref,je=se._owner;if(C!=null){if(C.ref!==void 0&&(oe=C.ref,je=he.current),C.key!==void 0&&(ce=""+C.key),se.type&&se.type.defaultProps)var Fe=se.type.defaultProps;for(Oe in C)fe.call(C,Oe)&&!Be.hasOwnProperty(Oe)&&(Z[Oe]=C[Oe]===void 0&&Fe!==void 0?Fe[Oe]:C[Oe])}var Oe=arguments.length-2;if(Oe===1)Z.children=K;else if(1<Oe){Fe=Array(Oe);for(var Ye=0;Ye<Oe;Ye++)Fe[Ye]=arguments[Ye+2];Z.children=Fe}return{$$typeof:s,type:se.type,key:ce,ref:oe,props:Z,_owner:je}},_n.createContext=function(se){return se={$$typeof:p,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},se.Provider={$$typeof:c,_context:se},se.Consumer=se},_n.createElement=ge,_n.createFactory=function(se){var C=ge.bind(null,se);return C.type=se,C},_n.createRef=function(){return{current:null}},_n.forwardRef=function(se){return{$$typeof:m,render:se}},_n.isValidElement=ye,_n.lazy=function(se){return{$$typeof:j,_payload:{_status:-1,_result:se},_init:Me}},_n.memo=function(se,C){return{$$typeof:v,type:se,compare:C===void 0?null:C}},_n.startTransition=function(se){var C=me.transition;me.transition={};try{se()}finally{me.transition=C}},_n.unstable_act=Ue,_n.useCallback=function(se,C){return Ee.current.useCallback(se,C)},_n.useContext=function(se){return Ee.current.useContext(se)},_n.useDebugValue=function(){},_n.useDeferredValue=function(se){return Ee.current.useDeferredValue(se)},_n.useEffect=function(se,C){return Ee.current.useEffect(se,C)},_n.useId=function(){return Ee.current.useId()},_n.useImperativeHandle=function(se,C,K){return Ee.current.useImperativeHandle(se,C,K)},_n.useInsertionEffect=function(se,C){return Ee.current.useInsertionEffect(se,C)},_n.useLayoutEffect=function(se,C){return Ee.current.useLayoutEffect(se,C)},_n.useMemo=function(se,C){return Ee.current.useMemo(se,C)},_n.useReducer=function(se,C,K){return Ee.current.useReducer(se,C,K)},_n.useRef=function(se){return Ee.current.useRef(se)},_n.useState=function(se){return Ee.current.useState(se)},_n.useSyncExternalStore=function(se,C,K){return Ee.current.useSyncExternalStore(se,C,K)},_n.useTransition=function(){return Ee.current.useTransition()},_n.version="18.3.1",_n}var Uh;function Af(){return Uh||(Uh=1,Ru.exports=f0()),Ru.exports}var qh;function h0(){if(qh)return Uc;qh=1;var s=Af(),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(m,g,v){var j,A={},R=null,w=null;v!==void 0&&(R=""+v),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(w=g.ref);for(j in g)o.call(g,j)&&!c.hasOwnProperty(j)&&(A[j]=g[j]);if(m&&m.defaultProps)for(j in g=m.defaultProps,g)A[j]===void 0&&(A[j]=g[j]);return{$$typeof:a,type:m,key:R,ref:w,props:A,_owner:d.current}}return Uc.Fragment=r,Uc.jsx=p,Uc.jsxs=p,Uc}var $h;function m0(){return $h||($h=1,Fu.exports=h0()),Fu.exports}var e=m0(),q=Af();const Cf=Ap(q),p0=u0({__proto__:null,default:Cf},[q]);var Pd={},Tu={exports:{}},yi={},Ou={exports:{}},Bu={};var Wh;function g0(){return Wh||(Wh=1,(function(s){function a(me,Ie){var Ue=me.length;me.push(Ie);e:for(;0<Ue;){var se=Ue-1>>>1,C=me[se];if(0<d(C,Ie))me[se]=Ie,me[Ue]=C,Ue=se;else break e}}function r(me){return me.length===0?null:me[0]}function o(me){if(me.length===0)return null;var Ie=me[0],Ue=me.pop();if(Ue!==Ie){me[0]=Ue;e:for(var se=0,C=me.length,K=C>>>1;se<K;){var Z=2*(se+1)-1,ce=me[Z],oe=Z+1,je=me[oe];if(0>d(ce,Ue))oe<C&&0>d(je,ce)?(me[se]=je,me[oe]=Ue,se=oe):(me[se]=ce,me[Z]=Ue,se=Z);else if(oe<C&&0>d(je,Ue))me[se]=je,me[oe]=Ue,se=oe;else break e}}return Ie}function d(me,Ie){var Ue=me.sortIndex-Ie.sortIndex;return Ue!==0?Ue:me.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var p=Date,m=p.now();s.unstable_now=function(){return p.now()-m}}var g=[],v=[],j=1,A=null,R=3,w=!1,$=!1,F=!1,D=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(me){for(var Ie=r(v);Ie!==null;){if(Ie.callback===null)o(v);else if(Ie.startTime<=me)o(v),Ie.sortIndex=Ie.expirationTime,a(g,Ie);else break;Ie=r(v)}}function G(me){if(F=!1,ee(me),!$)if(r(g)!==null)$=!0,Me(fe);else{var Ie=r(v);Ie!==null&&Ee(G,Ie.startTime-me)}}function fe(me,Ie){$=!1,F&&(F=!1,_(ge),ge=-1),w=!0;var Ue=R;try{for(ee(Ie),A=r(g);A!==null&&(!(A.expirationTime>Ie)||me&&!z());){var se=A.callback;if(typeof se=="function"){A.callback=null,R=A.priorityLevel;var C=se(A.expirationTime<=Ie);Ie=s.unstable_now(),typeof C=="function"?A.callback=C:A===r(g)&&o(g),ee(Ie)}else o(g);A=r(g)}if(A!==null)var K=!0;else{var Z=r(v);Z!==null&&Ee(G,Z.startTime-Ie),K=!1}return K}finally{A=null,R=Ue,w=!1}}var he=!1,Be=null,ge=-1,te=5,ye=-1;function z(){return!(s.unstable_now()-ye<te)}function H(){if(Be!==null){var me=s.unstable_now();ye=me;var Ie=!0;try{Ie=Be(!0,me)}finally{Ie?de():(he=!1,Be=null)}}else he=!1}var de;if(typeof Y=="function")de=function(){Y(H)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ke=ie.port2;ie.port1.onmessage=H,de=function(){ke.postMessage(null)}}else de=function(){D(H,0)};function Me(me){Be=me,he||(he=!0,de())}function Ee(me,Ie){ge=D(function(){me(s.unstable_now())},Ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(me){me.callback=null},s.unstable_continueExecution=function(){$||w||($=!0,Me(fe))},s.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<me?Math.floor(1e3/me):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return r(g)},s.unstable_next=function(me){switch(R){case 1:case 2:case 3:var Ie=3;break;default:Ie=R}var Ue=R;R=Ie;try{return me()}finally{R=Ue}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(me,Ie){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ue=R;R=me;try{return Ie()}finally{R=Ue}},s.unstable_scheduleCallback=function(me,Ie,Ue){var se=s.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?se+Ue:se):Ue=se,me){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Ue+C,me={id:j++,callback:Ie,priorityLevel:me,startTime:Ue,expirationTime:C,sortIndex:-1},Ue>se?(me.sortIndex=Ue,a(v,me),r(g)===null&&me===r(v)&&(F?(_(ge),ge=-1):F=!0,Ee(G,Ue-se))):(me.sortIndex=C,a(g,me),$||w||($=!0,Me(fe))),me},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(me){var Ie=R;return function(){var Ue=R;R=Ie;try{return me.apply(this,arguments)}finally{R=Ue}}}})(Bu)),Bu}var Vh;function x0(){return Vh||(Vh=1,Ou.exports=g0()),Ou.exports}var Hh;function y0(){if(Hh)return yi;Hh=1;var s=Af(),a=x0();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,d={};function c(t,n){p(t,n),p(t+"Capture",n)}function p(t,n){for(d[t]=n,t=0;t<n.length;t++)o.add(n[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},A={};function R(t){return g.call(A,t)?!0:g.call(j,t)?!1:v.test(t)?A[t]=!0:(j[t]=!0,!1)}function w(t,n,i,f){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return f?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $(t,n,i,f){if(n===null||typeof n>"u"||w(t,n,i,f))return!0;if(f)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function F(t,n,i,f,y,S,T){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=S,this.removeEmptyString=T}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){D[t]=new F(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];D[n]=new F(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){D[t]=new F(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){D[t]=new F(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){D[t]=new F(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){D[t]=new F(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){D[t]=new F(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){D[t]=new F(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){D[t]=new F(t,5,!1,t.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(_,Y);D[n]=new F(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(_,Y);D[n]=new F(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(_,Y);D[n]=new F(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){D[t]=new F(t,1,!1,t.toLowerCase(),null,!1,!1)}),D.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){D[t]=new F(t,1,!1,t.toLowerCase(),null,!0,!0)});function ee(t,n,i,f){var y=D.hasOwnProperty(n)?D[n]:null;(y!==null?y.type!==0:f||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&($(n,i,y,f)&&(i=null),f||y===null?R(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):y.mustUseProperty?t[y.propertyName]=i===null?y.type===3?!1:"":i:(n=y.attributeName,f=y.attributeNamespace,i===null?t.removeAttribute(n):(y=y.type,i=y===3||y===4&&i===!0?"":""+i,f?t.setAttributeNS(f,n,i):t.setAttribute(n,i))))}var G=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),he=Symbol.for("react.portal"),Be=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),me=Symbol.iterator;function Ie(t){return t===null||typeof t!="object"?null:(t=me&&t[me]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,se;function C(t){if(se===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);se=n&&n[1]||""}return`
`+se+t}var K=!1;function Z(t,n){if(!t||K)return"";K=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(He){var f=He}Reflect.construct(t,[],n)}else{try{n.call()}catch(He){f=He}t.call(n.prototype)}else{try{throw Error()}catch(He){f=He}t()}}catch(He){if(He&&f&&typeof He.stack=="string"){for(var y=He.stack.split(`
`),S=f.stack.split(`
`),T=y.length-1,ue=S.length-1;1<=T&&0<=ue&&y[T]!==S[ue];)ue--;for(;1<=T&&0<=ue;T--,ue--)if(y[T]!==S[ue]){if(T!==1||ue!==1)do if(T--,ue--,0>ue||y[T]!==S[ue]){var Ne=`
`+y[T].replace(" at new "," at ");return t.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",t.displayName)),Ne}while(1<=T&&0<=ue);break}}}finally{K=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?C(t):""}function ce(t){switch(t.tag){case 5:return C(t.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return t=Z(t.type,!1),t;case 11:return t=Z(t.type.render,!1),t;case 1:return t=Z(t.type,!0),t;default:return""}}function oe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Be:return"Fragment";case he:return"Portal";case te:return"Profiler";case ge:return"StrictMode";case de:return"Suspense";case ie:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z:return(t.displayName||"Context")+".Consumer";case ye:return(t._context.displayName||"Context")+".Provider";case H:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ke:return n=t.displayName||null,n!==null?n:oe(t.type)||"Memo";case Me:n=t._payload,t=t._init;try{return oe(t(n))}catch{}}return null}function je(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ye(t){var n=Oe(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),f=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var y=i.get,S=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,S.call(this,T)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Te(t){t._valueTracker||(t._valueTracker=Ye(t))}function Qe(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),f="";return t&&(f=Oe(t)?t.checked?"true":"false":t.value),t=f,t!==i?(n.setValue(t),!0):!1}function ot(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bt(t,n){var i=n.checked;return Ue({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function X(t,n){var i=n.defaultValue==null?"":n.defaultValue,f=n.checked!=null?n.checked:n.defaultChecked;i=Fe(n.value!=null?n.value:i),t._wrapperState={initialChecked:f,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function et(t,n){n=n.checked,n!=null&&ee(t,"checked",n,!1)}function xt(t,n){et(t,n);var i=Fe(n.value),f=n.type;if(i!=null)f==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(f==="submit"||f==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Ve(t,n.type,i):n.hasOwnProperty("defaultValue")&&Ve(t,n.type,Fe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Lt(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var f=n.type;if(!(f!=="submit"&&f!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Ve(t,n,i){(n!=="number"||ot(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Mt=Array.isArray;function yt(t,n,i,f){if(t=t.options,n){n={};for(var y=0;y<i.length;y++)n["$"+i[y]]=!0;for(i=0;i<t.length;i++)y=n.hasOwnProperty("$"+t[i].value),t[i].selected!==y&&(t[i].selected=y),y&&f&&(t[i].defaultSelected=!0)}else{for(i=""+Fe(i),n=null,y=0;y<t.length;y++){if(t[y].value===i){t[y].selected=!0,f&&(t[y].defaultSelected=!0);return}n!==null||t[y].disabled||(n=t[y])}n!==null&&(n.selected=!0)}}function vt(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return Ue({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(r(92));if(Mt(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:Fe(i)}}function pn(t,n){var i=Fe(n.value),f=Fe(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),f!=null&&(t.defaultValue=""+f)}function sn(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function ht(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?ht(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ce,qe=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,f,y){MSApp.execUnsafeLocalFunction(function(){return t(n,i,f,y)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Ce=Ce||document.createElement("div"),Ce.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ce.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function nt(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},on=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(t){on.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ft[n]=ft[t]})});function Se(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||ft.hasOwnProperty(t)&&ft[t]?(""+n).trim():n+"px"}function xe(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var f=i.indexOf("--")===0,y=Se(i,n[i],f);i==="float"&&(i="cssFloat"),f?t.setProperty(i,y):t[i]=y}}var We=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ct(t,n){if(n){if(We[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function st(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=null;function Ht(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qt=null,Sn=null,Wt=null;function le(t){if(t=co(t)){if(typeof Qt!="function")throw Error(r(280));var n=t.stateNode;n&&(n=Go(n),Qt(t.stateNode,t.type,n))}}function wt(t){Sn?Wt?Wt.push(t):Wt=[t]:Sn=t}function Qr(){if(Sn){var t=Sn,n=Wt;if(Wt=Sn=null,le(t),n)for(t=0;t<n.length;t++)le(n[t])}}function Xn(t,n){return t(n)}function Xr(){}var gn=!1;function Ft(t,n,i){if(gn)return t(n,i);gn=!0;try{return Xn(t,n,i)}finally{gn=!1,(Sn!==null||Wt!==null)&&(Xr(),Qr())}}function rn(t,n){var i=t.stateNode;if(i===null)return null;var f=Go(i);if(f===null)return null;i=f[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(t=t.type,f=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!f;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var tr=!1;if(m)try{var Zt={};Object.defineProperty(Zt,"passive",{get:function(){tr=!0}}),window.addEventListener("test",Zt,Zt),window.removeEventListener("test",Zt,Zt)}catch{tr=!1}function nr(t,n,i,f,y,S,T,ue,Ne){var He=Array.prototype.slice.call(arguments,3);try{n.apply(i,He)}catch(lt){this.onError(lt)}}var Gn=!1,gr=null,Sr=!1,ei=null,$a={onError:function(t){Gn=!0,gr=t}};function ti(t,n,i,f,y,S,T,ue,Ne){Gn=!1,gr=null,nr.apply($a,arguments)}function bi(t,n,i,f,y,S,T,ue,Ne){if(ti.apply(this,arguments),Gn){if(Gn){var He=gr;Gn=!1,gr=null}else throw Error(r(198));Sr||(Sr=!0,ei=He)}}function qr(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function St(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function rr(t){if(qr(t)!==t)throw Error(r(188))}function wi(t){var n=t.alternate;if(!n){if(n=qr(t),n===null)throw Error(r(188));return n!==t?null:t}for(var i=t,f=n;;){var y=i.return;if(y===null)break;var S=y.alternate;if(S===null){if(f=y.return,f!==null){i=f;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===i)return rr(y),t;if(S===f)return rr(y),n;S=S.sibling}throw Error(r(188))}if(i.return!==f.return)i=y,f=S;else{for(var T=!1,ue=y.child;ue;){if(ue===i){T=!0,i=y,f=S;break}if(ue===f){T=!0,f=y,i=S;break}ue=ue.sibling}if(!T){for(ue=S.child;ue;){if(ue===i){T=!0,i=S,f=y;break}if(ue===f){T=!0,f=S,i=y;break}ue=ue.sibling}if(!T)throw Error(r(189))}}if(i.alternate!==f)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:n}function vs(t){return t=wi(t),t!==null?Hn(t):null}function Hn(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Hn(t);if(n!==null)return n;t=t.sibling}return null}var xr=a.unstable_scheduleCallback,ur=a.unstable_cancelCallback,$r=a.unstable_shouldYield,Cl=a.unstable_requestPaint,Tn=a.unstable_now,ut=a.unstable_getCurrentPriorityLevel,kr=a.unstable_ImmediatePriority,Zr=a.unstable_UserBlockingPriority,Pa=a.unstable_NormalPriority,Fs=a.unstable_LowPriority,os=a.unstable_IdlePriority,ls=null,La=null;function Rs(t){if(La&&typeof La.onCommitFiberRoot=="function")try{La.onCommitFiberRoot(ls,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:ar,bs=Math.log,Fi=Math.LN2;function ar(t){return t>>>=0,t===0?32:31-(bs(t)/Fi|0)|0}var Ar=64,yr=4194304;function Ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function la(t,n){var i=t.pendingLanes;if(i===0)return 0;var f=0,y=t.suspendedLanes,S=t.pingedLanes,T=i&268435455;if(T!==0){var ue=T&~y;ue!==0?f=Ts(ue):(S&=T,S!==0&&(f=Ts(S)))}else T=i&~y,T!==0?f=Ts(T):S!==0&&(f=Ts(S));if(f===0)return 0;if(n!==0&&n!==f&&(n&y)===0&&(y=f&-f,S=n&-n,y>=S||y===16&&(S&4194240)!==0))return n;if((f&4)!==0&&(f|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=f;0<n;)i=31-Fr(n),y=1<<i,f|=t[i],n&=~y;return f}function cs(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(t,n){for(var i=t.suspendedLanes,f=t.pingedLanes,y=t.expirationTimes,S=t.pendingLanes;0<S;){var T=31-Fr(S),ue=1<<T,Ne=y[T];Ne===-1?((ue&i)===0||(ue&f)!==0)&&(y[T]=cs(ue,n)):Ne<=n&&(t.expiredLanes|=ue),S&=~ue}}function Os(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bs(){var t=Ar;return Ar<<=1,(Ar&4194240)===0&&(Ar=64),t}function Ut(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function Rr(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Fr(n),t[n]=i}function ds(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var f=t.eventTimes;for(t=t.expirationTimes;0<i;){var y=31-Fr(i),S=1<<y;n[y]=0,f[y]=-1,t[y]=-1,i&=~S}}function _a(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var f=31-Fr(i),y=1<<f;y&n|t[f]&n&&(t[f]|=n),i&=~y}}var An=0;function ca(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ws,Wa,Ia,sr,us,Jn=!1,Ea=[],fs=null,da=null,ua=null,hs=new Map,Jt=new Map,Va=[],nl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ha(t,n){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":hs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jt.delete(n.pointerId)}}function Ma(t,n,i,f,y,S){return t===null||t.nativeEvent!==S?(t={blockedOn:n,domEventName:i,eventSystemFlags:f,nativeEvent:S,targetContainers:[y]},n!==null&&(n=co(n),n!==null&&Wa(n)),t):(t.eventSystemFlags|=f,n=t.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),t)}function ms(t,n,i,f,y){switch(n){case"focusin":return fs=Ma(fs,t,n,i,f,y),!0;case"dragenter":return da=Ma(da,t,n,i,f,y),!0;case"mouseover":return ua=Ma(ua,t,n,i,f,y),!0;case"pointerover":var S=y.pointerId;return hs.set(S,Ma(hs.get(S)||null,t,n,i,f,y)),!0;case"gotpointercapture":return S=y.pointerId,Jt.set(S,Ma(Jt.get(S)||null,t,n,i,f,y)),!0}return!1}function qo(t){var n=Vi(t.target);if(n!==null){var i=qr(n);if(i!==null){if(n=i.tag,n===13){if(n=St(i),n!==null){t.blockedOn=n,us(t.priority,function(){Ia(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ni(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Da(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var f=new i.constructor(i.type,i);un=f,i.target.dispatchEvent(f),un=null}else return n=co(i),n!==null&&Wa(n),t.blockedOn=i,!1;n.shift()}return!0}function Ri(t,n,i){ni(t)&&i.delete(n)}function Ya(){Jn=!1,fs!==null&&ni(fs)&&(fs=null),da!==null&&ni(da)&&(da=null),ua!==null&&ni(ua)&&(ua=null),hs.forEach(Ri),Jt.forEach(Ri)}function Ga(t,n){t.blockedOn===n&&(t.blockedOn=null,Jn||(Jn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ya)))}function Xi(t){function n(y){return Ga(y,t)}if(0<Ea.length){Ga(Ea[0],t);for(var i=1;i<Ea.length;i++){var f=Ea[i];f.blockedOn===t&&(f.blockedOn=null)}}for(fs!==null&&Ga(fs,t),da!==null&&Ga(da,t),ua!==null&&Ga(ua,t),hs.forEach(n),Jt.forEach(n),i=0;i<Va.length;i++)f=Va[i],f.blockedOn===t&&(f.blockedOn=null);for(;0<Va.length&&(i=Va[0],i.blockedOn===null);)qo(i),i.blockedOn===null&&Va.shift()}var ea=G.ReactCurrentBatchConfig,Wr=!0;function ri(t,n,i,f){var y=An,S=ea.transition;ea.transition=null;try{An=1,zs(t,n,i,f)}finally{An=y,ea.transition=S}}function Ti(t,n,i,f){var y=An,S=ea.transition;ea.transition=null;try{An=4,zs(t,n,i,f)}finally{An=y,ea.transition=S}}function zs(t,n,i,f){if(Wr){var y=Da(t,n,i,f);if(y===null)Wi(t,n,f,fa,i),Ha(t,f);else if(ms(y,t,n,i,f))f.stopPropagation();else if(Ha(t,f),n&4&&-1<nl.indexOf(t)){for(;y!==null;){var S=co(y);if(S!==null&&ws(S),S=Da(t,n,i,f),S===null&&Wi(t,n,f,fa,i),S===y)break;y=S}y!==null&&f.stopPropagation()}else Wi(t,n,f,null,i)}}var fa=null;function Da(t,n,i,f){if(fa=null,t=Ht(f),t=Vi(t),t!==null)if(n=qr(t),n===null)t=null;else if(i=n.tag,i===13){if(t=St(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return fa=t,null}function Oi(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ut()){case kr:return 1;case Zr:return 4;case Pa:case Fs:return 16;case os:return 536870912;default:return 16}default:return 16}}var ta=null,Us=null,fn=null;function qs(){if(fn)return fn;var t,n=Us,i=n.length,f,y="value"in ta?ta.value:ta.textContent,S=y.length;for(t=0;t<i&&n[t]===y[t];t++);var T=i-t;for(f=1;f<=T&&n[i-f]===y[S-f];f++);return fn=y.slice(t,1<f?1-f:void 0)}function Zi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ja(){return!0}function ps(){return!1}function ha(t){function n(i,f,y,S,T){this._reactName=i,this._targetInst=y,this.type=f,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var ue in t)t.hasOwnProperty(ue)&&(i=t[ue],this[ue]=i?i(S):S[ue]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ja:ps,this.isPropagationStopped=ps,this}return Ue(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),n}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=ha($s),x=Ue({},$s,{view:0,detail:0}),M=ha(x),ne,pe,Pe,Ze=Ue({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ai,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pe&&(Pe&&t.type==="mousemove"?(ne=t.screenX-Pe.screenX,pe=t.screenY-Pe.screenY):pe=ne=0,Pe=t),ne)},movementY:function(t){return"movementY"in t?t.movementY:pe}}),at=ha(Ze),_t=Ue({},Ze,{dataTransfer:0}),Bt=ha(_t),Xt=Ue({},x,{relatedTarget:0}),qt=ha(Xt),xn=Ue({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Yt=ha(xn),On=Ue({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bn=ha(On),Tr=Ue({},$s,{data:0}),In=ha(Tr),zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ji(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Vr[t])?!!n[t]:!1}function ai(){return ji}var yn=Ue({},x,{key:function(t){if(t.key){var n=zn[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ai,charCode:function(t){return t.type==="keypress"?Zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ws=ha(yn),eo=Ue({},Ze,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),js=ha(eo),Ns=Ue({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ai}),Cr=ha(Ns),si=Ue({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ss=ha(si),ks=Ue({},Ze,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),So=ha(ks),Na=[9,13,27,32],Vs=m&&"CompositionEvent"in window,Ka=null;m&&"documentMode"in document&&(Ka=document.documentMode);var ko=m&&"TextEvent"in window&&!Ka,Sa=m&&(!Vs||Ka&&8<Ka&&11>=Ka),zi=" ",to=!1;function br(t,n){switch(t){case"keyup":return Na.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ii(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function Ra(t,n){switch(t){case"compositionend":return ii(n);case"keypress":return n.which!==32?null:(to=!0,zi);case"textInput":return t=n.data,t===zi&&to?null:t;default:return null}}function $n(t,n){if(Fa)return t==="compositionend"||!Vs&&br(t,n)?(t=qs(),fn=Us=ta=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Sa&&n.locale!=="ko"?null:n.data;default:return null}}var Ni={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oi(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ni[t.type]:n==="textarea"}function As(t,n,i,f){wt(f),n=sl(n,"onChange"),0<n.length&&(i=new Bi("onChange","change",null,i,f),t.push({event:i,listeners:n}))}var Si=null,Qa=null;function Cn(t){li(t,0)}function Hs(t){var n=Lr(t);if(Qe(n))return t}function Hr(t,n){if(t==="change")return n}var Ta=!1;if(m){var Pn;if(m){var Oa="oninput"in document;if(!Oa){var ir=document.createElement("div");ir.setAttribute("oninput","return;"),Oa=typeof ir.oninput=="function"}Pn=Oa}else Pn=!1;Ta=Pn&&(!document.documentMode||9<document.documentMode)}function no(){Si&&(Si.detachEvent("onpropertychange",Yr),Qa=Si=null)}function Yr(t){if(t.propertyName==="value"&&Hs(Qa)){var n=[];As(n,Qa,t,Ht(t)),Ft(Cn,n)}}function Ui(t,n,i){t==="focusin"?(no(),Si=n,Qa=i,Si.attachEvent("onpropertychange",Yr)):t==="focusout"&&no()}function na(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hs(Qa)}function ro(t,n){if(t==="click")return Hs(n)}function ma(t,n){if(t==="input"||t==="change")return Hs(n)}function ao(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Kn=typeof Object.is=="function"?Object.is:ao;function Xa(t,n){if(Kn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),f=Object.keys(n);if(i.length!==f.length)return!1;for(f=0;f<i.length;f++){var y=i[f];if(!g.call(n,y)||!Kn(t[y],n[y]))return!1}return!0}function Dn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fn(t,n){var i=Dn(t);t=0;for(var f;i;){if(i.nodeType===3){if(f=t+i.textContent.length,t<=n&&f>=n)return{node:i,offset:n-t};t=f}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Dn(i)}}function or(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?or(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Or(){for(var t=window,n=ot();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=ot(t.document)}return n}function Br(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Ao(t){var n=Or(),i=t.focusedElem,f=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&or(i.ownerDocument.documentElement,i)){if(f!==null&&Br(i)){if(n=f.start,t=f.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var y=i.textContent.length,S=Math.min(f.start,y);f=f.end===void 0?S:Math.min(f.end,y),!t.extend&&S>f&&(y=f,f=S,S=y),y=Fn(i,S);var T=Fn(i,f);y&&T&&(t.rangeCount!==1||t.anchorNode!==y.node||t.anchorOffset!==y.offset||t.focusNode!==T.node||t.focusOffset!==T.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),t.removeAllRanges(),S>f?(t.addRange(n),t.extend(T.node,T.offset)):(n.setEnd(T.node,T.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Za=m&&"documentMode"in document&&11>=document.documentMode,ki=null,so=null,Co=null,Po=!1;function Pl(t,n,i){var f=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Po||ki==null||ki!==ot(f)||(f=ki,"selectionStart"in f&&Br(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Co&&Xa(Co,f)||(Co=f,f=sl(so,"onSelect"),0<f.length&&(n=new Bi("onSelect","select",null,n,i),t.push({event:n,listeners:f}),n.target=ki)))}function Lo(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var qi={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},Pr={},$o={};m&&($o=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Gr(t){if(Pr[t])return Pr[t];if(!qi[t])return t;var n=qi[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in $o)return Pr[t]=n[i];return t}var Ai=Gr("animationend"),Wo=Gr("animationiteration"),rl=Gr("animationstart"),Vo=Gr("transitionend"),$i=new Map,Ho="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,n){$i.set(t,n),c(n,[t])}for(var Ys=0;Ys<Ho.length;Ys++){var Jr=Ho[Ys],gs=Jr.toLowerCase(),Cs=Jr[0].toUpperCase()+Jr.slice(1);es(gs,"on"+Cs)}es(Ai,"onAnimationEnd"),es(Wo,"onAnimationIteration"),es(rl,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Vo,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ci=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function al(t,n,i){var f=t.type||"unknown-event";t.currentTarget=i,bi(f,n,void 0,t),t.currentTarget=null}function li(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var f=t[i],y=f.event;f=f.listeners;e:{var S=void 0;if(n)for(var T=f.length-1;0<=T;T--){var ue=f[T],Ne=ue.instance,He=ue.currentTarget;if(ue=ue.listener,Ne!==S&&y.isPropagationStopped())break e;al(y,ue,He),S=Ne}else for(T=0;T<f.length;T++){if(ue=f[T],Ne=ue.instance,He=ue.currentTarget,ue=ue.listener,Ne!==S&&y.isPropagationStopped())break e;al(y,ue,He),S=Ne}}}if(Sr)throw t=ei,Sr=!1,ei=null,t}function En(t,n){var i=n[ts];i===void 0&&(i=n[ts]=new Set);var f=t+"__bubble";i.has(f)||(oo(n,t,2,!1),i.add(f))}function io(t,n,i){var f=0;n&&(f|=4),oo(i,t,f,n)}var jt="_reactListening"+Math.random().toString(36).slice(2);function Mn(t){if(!t[jt]){t[jt]=!0,o.forEach(function(i){i!=="selectionchange"&&(Ci.has(i)||io(i,!1,t),io(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[jt]||(n[jt]=!0,io("selectionchange",!1,n))}}function oo(t,n,i,f){switch(Oi(n)){case 1:var y=ri;break;case 4:y=Ti;break;default:y=zs}i=y.bind(null,n,i,t),y=void 0,!tr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),f?y!==void 0?t.addEventListener(n,i,{capture:!0,passive:y}):t.addEventListener(n,i,!0):y!==void 0?t.addEventListener(n,i,{passive:y}):t.addEventListener(n,i,!1)}function Wi(t,n,i,f,y){var S=f;if((n&1)===0&&(n&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var ue=f.stateNode.containerInfo;if(ue===y||ue.nodeType===8&&ue.parentNode===y)break;if(T===4)for(T=f.return;T!==null;){var Ne=T.tag;if((Ne===3||Ne===4)&&(Ne=T.stateNode.containerInfo,Ne===y||Ne.nodeType===8&&Ne.parentNode===y))return;T=T.return}for(;ue!==null;){if(T=Vi(ue),T===null)return;if(Ne=T.tag,Ne===5||Ne===6){f=S=T;continue e}ue=ue.parentNode}}f=f.return}Ft(function(){var He=S,lt=Ht(i),dt=[];e:{var it=$i.get(t);if(it!==void 0){var Ct=Bi,Rt=t;switch(t){case"keypress":if(Zi(i)===0)break e;case"keydown":case"keyup":Ct=Ws;break;case"focusin":Rt="focus",Ct=qt;break;case"focusout":Rt="blur",Ct=qt;break;case"beforeblur":case"afterblur":Ct=qt;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ct=at;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ct=Bt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ct=Cr;break;case Ai:case Wo:case rl:Ct=Yt;break;case Vo:Ct=Ss;break;case"scroll":Ct=M;break;case"wheel":Ct=So;break;case"copy":case"cut":case"paste":Ct=Bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ct=js}var $t=(n&4)!==0,ya=!$t&&t==="scroll",ze=$t?it!==null?it+"Capture":null:it;$t=[];for(var Le=He,$e;Le!==null;){$e=Le;var pt=$e.stateNode;if($e.tag===5&&pt!==null&&($e=pt,ze!==null&&(pt=rn(Le,ze),pt!=null&&$t.push(ci(Le,pt,$e)))),ya)break;Le=Le.return}0<$t.length&&(it=new Ct(it,Rt,null,i,lt),dt.push({event:it,listeners:$t}))}}if((n&7)===0){e:{if(it=t==="mouseover"||t==="pointerover",Ct=t==="mouseout"||t==="pointerout",it&&i!==un&&(Rt=i.relatedTarget||i.fromElement)&&(Vi(Rt)||Rt[Aa]))break e;if((Ct||it)&&(it=lt.window===lt?lt:(it=lt.ownerDocument)?it.defaultView||it.parentWindow:window,Ct?(Rt=i.relatedTarget||i.toElement,Ct=He,Rt=Rt?Vi(Rt):null,Rt!==null&&(ya=qr(Rt),Rt!==ya||Rt.tag!==5&&Rt.tag!==6)&&(Rt=null)):(Ct=null,Rt=He),Ct!==Rt)){if($t=at,pt="onMouseLeave",ze="onMouseEnter",Le="mouse",(t==="pointerout"||t==="pointerover")&&($t=js,pt="onPointerLeave",ze="onPointerEnter",Le="pointer"),ya=Ct==null?it:Lr(Ct),$e=Rt==null?it:Lr(Rt),it=new $t(pt,Le+"leave",Ct,i,lt),it.target=ya,it.relatedTarget=$e,pt=null,Vi(lt)===He&&($t=new $t(ze,Le+"enter",Rt,i,lt),$t.target=$e,$t.relatedTarget=ya,pt=$t),ya=pt,Ct&&Rt)t:{for($t=Ct,ze=Rt,Le=0,$e=$t;$e;$e=di($e))Le++;for($e=0,pt=ze;pt;pt=di(pt))$e++;for(;0<Le-$e;)$t=di($t),Le--;for(;0<$e-Le;)ze=di(ze),$e--;for(;Le--;){if($t===ze||ze!==null&&$t===ze.alternate)break t;$t=di($t),ze=di(ze)}$t=null}else $t=null;Ct!==null&&_o(dt,it,Ct,$t,!1),Rt!==null&&ya!==null&&_o(dt,ya,Rt,$t,!0)}}e:{if(it=He?Lr(He):window,Ct=it.nodeName&&it.nodeName.toLowerCase(),Ct==="select"||Ct==="input"&&it.type==="file")var Vt=Hr;else if(oi(it))if(Ta)Vt=ma;else{Vt=na;var en=Ui}else(Ct=it.nodeName)&&Ct.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(Vt=ro);if(Vt&&(Vt=Vt(t,He))){As(dt,Vt,i,lt);break e}en&&en(t,it,He),t==="focusout"&&(en=it._wrapperState)&&en.controlled&&it.type==="number"&&Ve(it,"number",it.value)}switch(en=He?Lr(He):window,t){case"focusin":(oi(en)||en.contentEditable==="true")&&(ki=en,so=He,Co=null);break;case"focusout":Co=so=ki=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Pl(dt,i,lt);break;case"selectionchange":if(Za)break;case"keydown":case"keyup":Pl(dt,i,lt)}var tn;if(Vs)e:{switch(t){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Fa?br(t,i)&&(ln="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(ln="onCompositionStart");ln&&(Sa&&i.locale!=="ko"&&(Fa||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Fa&&(tn=qs()):(ta=lt,Us="value"in ta?ta.value:ta.textContent,Fa=!0)),en=sl(He,ln),0<en.length&&(ln=new In(ln,t,null,i,lt),dt.push({event:ln,listeners:en}),tn?ln.data=tn:(tn=ii(i),tn!==null&&(ln.data=tn)))),(tn=ko?Ra(t,i):$n(t,i))&&(He=sl(He,"onBeforeInput"),0<He.length&&(lt=new In("onBeforeInput","beforeinput",null,i,lt),dt.push({event:lt,listeners:He}),lt.data=tn))}li(dt,n)})}function ci(t,n,i){return{instance:t,listener:n,currentTarget:i}}function sl(t,n){for(var i=n+"Capture",f=[];t!==null;){var y=t,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=rn(t,i),S!=null&&f.unshift(ci(t,S,y)),S=rn(t,n),S!=null&&f.push(ci(t,S,y))),t=t.return}return f}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _o(t,n,i,f,y){for(var S=n._reactName,T=[];i!==null&&i!==f;){var ue=i,Ne=ue.alternate,He=ue.stateNode;if(Ne!==null&&Ne===f)break;ue.tag===5&&He!==null&&(ue=He,y?(Ne=rn(i,S),Ne!=null&&T.unshift(ci(i,Ne,ue))):y||(Ne=rn(i,S),Ne!=null&&T.push(ci(i,Ne,ue)))),i=i.return}T.length!==0&&t.push({event:n,listeners:T})}var ui=/\r\n?/g,Kl=/\u0000|\uFFFD/g;function il(t){return(typeof t=="string"?t:""+t).replace(ui,`
`).replace(Kl,"")}function Io(t,n,i){if(n=il(n),il(t)!==n&&i)throw Error(r(425))}function Gs(){}var Yo=null,lo=null;function Eo(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,Lc=typeof clearTimeout=="function"?clearTimeout:void 0,_l=typeof Promise=="function"?Promise:void 0,_c=typeof queueMicrotask=="function"?queueMicrotask:typeof _l<"u"?function(t){return _l.resolve(null).then(t).catch(ol)}:Ll;function ol(t){setTimeout(function(){throw t})}function Il(t,n){var i=n,f=0;do{var y=i.nextSibling;if(t.removeChild(i),y&&y.nodeType===8)if(i=y.data,i==="/$"){if(f===0){t.removeChild(y),Xi(n);return}f--}else i!=="$"&&i!=="$?"&&i!=="$!"||f++;i=y}while(i);Xi(n)}function lr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Ps(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var fr=Math.random().toString(36).slice(2),fi="__reactFiber$"+fr,Mo="__reactProps$"+fr,Aa="__reactContainer$"+fr,ts="__reactEvents$"+fr,Pi="__reactListeners$"+fr,Ic="__reactHandles$"+fr;function Vi(t){var n=t[fi];if(n)return n;for(var i=t.parentNode;i;){if(n=i[Aa]||i[fi]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Ps(t);t!==null;){if(i=t[fi])return i;t=Ps(t)}return n}t=i,i=t.parentNode}return null}function co(t){return t=t[fi]||t[Aa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Go(t){return t[Mo]||null}var Ql=[],Ln=-1;function Js(t){return{current:t}}function Un(t){0>Ln||(t.current=Ql[Ln],Ql[Ln]=null,Ln--)}function Wn(t,n){Ln++,Ql[Ln]=t.current,t.current=n}var Hi={},pa=Js(Hi),ns=Js(!1),hi=Hi;function uo(t,n){var i=t.type.contextTypes;if(!i)return Hi;var f=t.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===n)return f.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in i)y[S]=n[S];return f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=y),y}function rs(t){return t=t.childContextTypes,t!=null}function ll(){Un(ns),Un(pa)}function Xl(t,n,i){if(pa.current!==Hi)throw Error(r(168));Wn(pa,n),Wn(ns,i)}function El(t,n,i){var f=t.stateNode;if(n=n.childContextTypes,typeof f.getChildContext!="function")return i;f=f.getChildContext();for(var y in f)if(!(y in n))throw Error(r(108,je(t)||"Unknown",y));return Ue({},i,f)}function fo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,hi=pa.current,Wn(pa,t),Wn(ns,ns.current),!0}function Zl(t,n,i){var f=t.stateNode;if(!f)throw Error(r(169));i?(t=El(t,n,hi),f.__reactInternalMemoizedMergedChildContext=t,Un(ns),Un(pa),Wn(pa,t)):Un(ns),Wn(ns,i)}var Li=null,Jo=!1,u=!1;function h(t){Li===null?Li=[t]:Li.push(t)}function b(t){Jo=!0,h(t)}function k(){if(!u&&Li!==null){u=!0;var t=0,n=An;try{var i=Li;for(An=1;t<i.length;t++){var f=i[t];do f=f(!0);while(f!==null)}Li=null,Jo=!1}catch(y){throw Li!==null&&(Li=Li.slice(t+1)),xr(kr,k),y}finally{An=n,u=!1}}return null}var E=[],O=0,B=null,V=0,J=[],ae=0,we=null,_e=1,re="";function Ae(t,n){E[O++]=V,E[O++]=B,B=t,V=n}function Re(t,n,i){J[ae++]=_e,J[ae++]=re,J[ae++]=we,we=t;var f=_e;t=re;var y=32-Fr(f)-1;f&=~(1<<y),i+=1;var S=32-Fr(n)+y;if(30<S){var T=y-y%5;S=(f&(1<<T)-1).toString(32),f>>=T,y-=T,_e=1<<32-Fr(n)+y|i<<y|f,re=S+t}else _e=1<<S|i<<y|f,re=t}function Q(t){t.return!==null&&(Ae(t,1),Re(t,1,0))}function De(t){for(;t===B;)B=E[--O],E[O]=null,V=E[--O],E[O]=null;for(;t===we;)we=J[--ae],J[ae]=null,re=J[--ae],J[ae]=null,_e=J[--ae],J[ae]=null}var Ge=null,Ke=null,tt=!1,rt=null;function zt(t,n){var i=Ki(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function kt(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Ge=t,Ke=lr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Ge=t,Ke=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=we!==null?{id:_e,overflow:re}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Ki(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,Ge=t,Ke=null,!0):!1;default:return!1}}function an(t){return(t.mode&1)!==0&&(t.flags&128)===0}function It(t){if(tt){var n=Ke;if(n){var i=n;if(!kt(t,n)){if(an(t))throw Error(r(418));n=lr(i.nextSibling);var f=Ge;n&&kt(t,n)?zt(f,i):(t.flags=t.flags&-4097|2,tt=!1,Ge=t)}}else{if(an(t))throw Error(r(418));t.flags=t.flags&-4097|2,tt=!1,Ge=t}}}function bn(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ge=t}function wr(t){if(t!==Ge)return!1;if(!tt)return bn(t),tt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Eo(t.type,t.memoizedProps)),n&&(n=Ke)){if(an(t))throw dn(),Error(r(418));for(;n;)zt(t,n),n=lr(n.nextSibling)}if(bn(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){Ke=lr(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}Ke=null}}else Ke=Ge?lr(t.stateNode.nextSibling):null;return!0}function dn(){for(var t=Ke;t;)t=lr(t.nextSibling)}function At(){Ke=Ge=null,tt=!1}function gt(t){rt===null?rt=[t]:rt.push(t)}var _r=G.ReactCurrentBatchConfig;function nn(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var f=i.stateNode}if(!f)throw Error(r(147,t));var y=f,S=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===S?n.ref:(n=function(T){var ue=y.refs;T===null?delete ue[S]:ue[S]=T},n._stringRef=S,n)}if(typeof t!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,t))}return t}function vn(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Zn(t){var n=t._init;return n(t._payload)}function ra(t){function n(ze,Le){if(t){var $e=ze.deletions;$e===null?(ze.deletions=[Le],ze.flags|=16):$e.push(Le)}}function i(ze,Le){if(!t)return null;for(;Le!==null;)n(ze,Le),Le=Le.sibling;return null}function f(ze,Le){for(ze=new Map;Le!==null;)Le.key!==null?ze.set(Le.key,Le):ze.set(Le.index,Le),Le=Le.sibling;return ze}function y(ze,Le){return ze=xl(ze,Le),ze.index=0,ze.sibling=null,ze}function S(ze,Le,$e){return ze.index=$e,t?($e=ze.alternate,$e!==null?($e=$e.index,$e<Le?(ze.flags|=2,Le):$e):(ze.flags|=2,Le)):(ze.flags|=1048576,Le)}function T(ze){return t&&ze.alternate===null&&(ze.flags|=2),ze}function ue(ze,Le,$e,pt){return Le===null||Le.tag!==6?(Le=Lu($e,ze.mode,pt),Le.return=ze,Le):(Le=y(Le,$e),Le.return=ze,Le)}function Ne(ze,Le,$e,pt){var Vt=$e.type;return Vt===Be?lt(ze,Le,$e.props.children,pt,$e.key):Le!==null&&(Le.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Me&&Zn(Vt)===Le.type)?(pt=y(Le,$e.props),pt.ref=nn(ze,Le,$e),pt.return=ze,pt):(pt=bd($e.type,$e.key,$e.props,null,ze.mode,pt),pt.ref=nn(ze,Le,$e),pt.return=ze,pt)}function He(ze,Le,$e,pt){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==$e.containerInfo||Le.stateNode.implementation!==$e.implementation?(Le=_u($e,ze.mode,pt),Le.return=ze,Le):(Le=y(Le,$e.children||[]),Le.return=ze,Le)}function lt(ze,Le,$e,pt,Vt){return Le===null||Le.tag!==7?(Le=Ul($e,ze.mode,pt,Vt),Le.return=ze,Le):(Le=y(Le,$e),Le.return=ze,Le)}function dt(ze,Le,$e){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=Lu(""+Le,ze.mode,$e),Le.return=ze,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case fe:return $e=bd(Le.type,Le.key,Le.props,null,ze.mode,$e),$e.ref=nn(ze,null,Le),$e.return=ze,$e;case he:return Le=_u(Le,ze.mode,$e),Le.return=ze,Le;case Me:var pt=Le._init;return dt(ze,pt(Le._payload),$e)}if(Mt(Le)||Ie(Le))return Le=Ul(Le,ze.mode,$e,null),Le.return=ze,Le;vn(ze,Le)}return null}function it(ze,Le,$e,pt){var Vt=Le!==null?Le.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Vt!==null?null:ue(ze,Le,""+$e,pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:return $e.key===Vt?Ne(ze,Le,$e,pt):null;case he:return $e.key===Vt?He(ze,Le,$e,pt):null;case Me:return Vt=$e._init,it(ze,Le,Vt($e._payload),pt)}if(Mt($e)||Ie($e))return Vt!==null?null:lt(ze,Le,$e,pt,null);vn(ze,$e)}return null}function Ct(ze,Le,$e,pt,Vt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return ze=ze.get($e)||null,ue(Le,ze,""+pt,Vt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case fe:return ze=ze.get(pt.key===null?$e:pt.key)||null,Ne(Le,ze,pt,Vt);case he:return ze=ze.get(pt.key===null?$e:pt.key)||null,He(Le,ze,pt,Vt);case Me:var en=pt._init;return Ct(ze,Le,$e,en(pt._payload),Vt)}if(Mt(pt)||Ie(pt))return ze=ze.get($e)||null,lt(Le,ze,pt,Vt,null);vn(Le,pt)}return null}function Rt(ze,Le,$e,pt){for(var Vt=null,en=null,tn=Le,ln=Le=0,ss=null;tn!==null&&ln<$e.length;ln++){tn.index>ln?(ss=tn,tn=null):ss=tn.sibling;var Yn=it(ze,tn,$e[ln],pt);if(Yn===null){tn===null&&(tn=ss);break}t&&tn&&Yn.alternate===null&&n(ze,tn),Le=S(Yn,Le,ln),en===null?Vt=Yn:en.sibling=Yn,en=Yn,tn=ss}if(ln===$e.length)return i(ze,tn),tt&&Ae(ze,ln),Vt;if(tn===null){for(;ln<$e.length;ln++)tn=dt(ze,$e[ln],pt),tn!==null&&(Le=S(tn,Le,ln),en===null?Vt=tn:en.sibling=tn,en=tn);return tt&&Ae(ze,ln),Vt}for(tn=f(ze,tn);ln<$e.length;ln++)ss=Ct(tn,ze,ln,$e[ln],pt),ss!==null&&(t&&ss.alternate!==null&&tn.delete(ss.key===null?ln:ss.key),Le=S(ss,Le,ln),en===null?Vt=ss:en.sibling=ss,en=ss);return t&&tn.forEach(function(yl){return n(ze,yl)}),tt&&Ae(ze,ln),Vt}function $t(ze,Le,$e,pt){var Vt=Ie($e);if(typeof Vt!="function")throw Error(r(150));if($e=Vt.call($e),$e==null)throw Error(r(151));for(var en=Vt=null,tn=Le,ln=Le=0,ss=null,Yn=$e.next();tn!==null&&!Yn.done;ln++,Yn=$e.next()){tn.index>ln?(ss=tn,tn=null):ss=tn.sibling;var yl=it(ze,tn,Yn.value,pt);if(yl===null){tn===null&&(tn=ss);break}t&&tn&&yl.alternate===null&&n(ze,tn),Le=S(yl,Le,ln),en===null?Vt=yl:en.sibling=yl,en=yl,tn=ss}if(Yn.done)return i(ze,tn),tt&&Ae(ze,ln),Vt;if(tn===null){for(;!Yn.done;ln++,Yn=$e.next())Yn=dt(ze,Yn.value,pt),Yn!==null&&(Le=S(Yn,Le,ln),en===null?Vt=Yn:en.sibling=Yn,en=Yn);return tt&&Ae(ze,ln),Vt}for(tn=f(ze,tn);!Yn.done;ln++,Yn=$e.next())Yn=Ct(tn,ze,ln,Yn.value,pt),Yn!==null&&(t&&Yn.alternate!==null&&tn.delete(Yn.key===null?ln:Yn.key),Le=S(Yn,Le,ln),en===null?Vt=Yn:en.sibling=Yn,en=Yn);return t&&tn.forEach(function(d0){return n(ze,d0)}),tt&&Ae(ze,ln),Vt}function ya(ze,Le,$e,pt){if(typeof $e=="object"&&$e!==null&&$e.type===Be&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:e:{for(var Vt=$e.key,en=Le;en!==null;){if(en.key===Vt){if(Vt=$e.type,Vt===Be){if(en.tag===7){i(ze,en.sibling),Le=y(en,$e.props.children),Le.return=ze,ze=Le;break e}}else if(en.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Me&&Zn(Vt)===en.type){i(ze,en.sibling),Le=y(en,$e.props),Le.ref=nn(ze,en,$e),Le.return=ze,ze=Le;break e}i(ze,en);break}else n(ze,en);en=en.sibling}$e.type===Be?(Le=Ul($e.props.children,ze.mode,pt,$e.key),Le.return=ze,ze=Le):(pt=bd($e.type,$e.key,$e.props,null,ze.mode,pt),pt.ref=nn(ze,Le,$e),pt.return=ze,ze=pt)}return T(ze);case he:e:{for(en=$e.key;Le!==null;){if(Le.key===en)if(Le.tag===4&&Le.stateNode.containerInfo===$e.containerInfo&&Le.stateNode.implementation===$e.implementation){i(ze,Le.sibling),Le=y(Le,$e.children||[]),Le.return=ze,ze=Le;break e}else{i(ze,Le);break}else n(ze,Le);Le=Le.sibling}Le=_u($e,ze.mode,pt),Le.return=ze,ze=Le}return T(ze);case Me:return en=$e._init,ya(ze,Le,en($e._payload),pt)}if(Mt($e))return Rt(ze,Le,$e,pt);if(Ie($e))return $t(ze,Le,$e,pt);vn(ze,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Le!==null&&Le.tag===6?(i(ze,Le.sibling),Le=y(Le,$e),Le.return=ze,ze=Le):(i(ze,Le),Le=Lu($e,ze.mode,pt),Le.return=ze,ze=Le),T(ze)):i(ze,Le)}return ya}var Ir=ra(!0),hr=ra(!1),zr=Js(null),Er=null,cr=null,kn=null;function Rn(){kn=cr=Er=null}function Qn(t){var n=zr.current;Un(zr),t._currentValue=n}function wn(t,n,i){for(;t!==null;){var f=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,f!==null&&(f.childLanes|=n)):f!==null&&(f.childLanes&n)!==n&&(f.childLanes|=n),t===i)break;t=t.return}}function er(t,n){Er=t,kn=cr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(pi=!0),t.firstContext=null)}function jr(t){var n=t._currentValue;if(kn!==t)if(t={context:t,memoizedValue:n,next:null},cr===null){if(Er===null)throw Error(r(308));cr=t,Er.dependencies={lanes:0,firstContext:t}}else cr=cr.next=t;return n}var l=null;function N(t){l===null?l=[t]:l.push(t)}function L(t,n,i,f){var y=n.interleaved;return y===null?(i.next=i,N(n)):(i.next=y.next,y.next=i),n.interleaved=i,P(t,f)}function P(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var I=!1;function U(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ve(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function be(t,n,i){var f=t.updateQueue;if(f===null)return null;if(f=f.shared,(Vn&2)!==0){var y=f.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),f.pending=n,P(t,i)}return y=f.interleaved,y===null?(n.next=n,N(f)):(n.next=y.next,y.next=n),f.interleaved=n,P(t,i)}function Je(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var f=n.lanes;f&=t.pendingLanes,i|=f,n.lanes=i,_a(t,i)}}function Xe(t,n){var i=t.updateQueue,f=t.alternate;if(f!==null&&(f=f.updateQueue,i===f)){var y=null,S=null;if(i=i.firstBaseUpdate,i!==null){do{var T={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};S===null?y=S=T:S=S.next=T,i=i.next}while(i!==null);S===null?y=S=n:S=S.next=n}else y=S=n;i={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:f.shared,effects:f.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function Nt(t,n,i,f){var y=t.updateQueue;I=!1;var S=y.firstBaseUpdate,T=y.lastBaseUpdate,ue=y.shared.pending;if(ue!==null){y.shared.pending=null;var Ne=ue,He=Ne.next;Ne.next=null,T===null?S=He:T.next=He,T=Ne;var lt=t.alternate;lt!==null&&(lt=lt.updateQueue,ue=lt.lastBaseUpdate,ue!==T&&(ue===null?lt.firstBaseUpdate=He:ue.next=He,lt.lastBaseUpdate=Ne))}if(S!==null){var dt=y.baseState;T=0,lt=He=Ne=null,ue=S;do{var it=ue.lane,Ct=ue.eventTime;if((f&it)===it){lt!==null&&(lt=lt.next={eventTime:Ct,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Rt=t,$t=ue;switch(it=n,Ct=i,$t.tag){case 1:if(Rt=$t.payload,typeof Rt=="function"){dt=Rt.call(Ct,dt,it);break e}dt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=$t.payload,it=typeof Rt=="function"?Rt.call(Ct,dt,it):Rt,it==null)break e;dt=Ue({},dt,it);break e;case 2:I=!0}}ue.callback!==null&&ue.lane!==0&&(t.flags|=64,it=y.effects,it===null?y.effects=[ue]:it.push(ue))}else Ct={eventTime:Ct,lane:it,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},lt===null?(He=lt=Ct,Ne=dt):lt=lt.next=Ct,T|=it;if(ue=ue.next,ue===null){if(ue=y.shared.pending,ue===null)break;it=ue,ue=it.next,it.next=null,y.lastBaseUpdate=it,y.shared.pending=null}}while(!0);if(lt===null&&(Ne=dt),y.baseState=Ne,y.firstBaseUpdate=He,y.lastBaseUpdate=lt,n=y.shared.interleaved,n!==null){y=n;do T|=y.lane,y=y.next;while(y!==n)}else S===null&&(y.shared.lanes=0);Tl|=T,t.lanes=T,t.memoizedState=dt}}function mt(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var f=t[n],y=f.callback;if(y!==null){if(f.callback=null,f=i,typeof y!="function")throw Error(r(191,y));y.call(f)}}}var mn={},Kt=Js(mn),jn=Js(mn),aa=Js(mn);function ga(t){if(t===mn)throw Error(r(174));return t}function Do(t,n){switch(Wn(aa,n),Wn(jn,t),Wn(Kt,mn),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ot(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Ot(n,t)}Un(Kt),Wn(Kt,n)}function mi(){Un(Kt),Un(jn),Un(aa)}function Dt(t){ga(aa.current);var n=ga(Kt.current),i=Ot(n,t.type);n!==i&&(Wn(jn,t),Wn(Kt,i))}function mr(t){jn.current===t&&(Un(Kt),Un(jn))}var Nn=Js(0);function Ba(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ml=[];function Ec(){for(var t=0;t<Ml.length;t++)Ml[t]._workInProgressVersionPrimary=null;Ml.length=0}var ec=G.ReactCurrentDispatcher,tc=G.ReactCurrentBatchConfig,Yi=0,Nr=null,sa=null,Kr=null,cl=!1,ho=!1,dl=0,tu=0;function xa(){throw Error(r(321))}function nc(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Kn(t[i],n[i]))return!1;return!0}function Dl(t,n,i,f,y,S){if(Yi=S,Nr=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ec.current=t===null||t.memoizedState===null?Rg:Tg,t=i(f,y),ho){S=0;do{if(ho=!1,dl=0,25<=S)throw Error(r(301));S+=1,Kr=sa=null,n.updateQueue=null,ec.current=Og,t=i(f,y)}while(ho)}if(ec.current=id,n=sa!==null&&sa.next!==null,Yi=0,Kr=sa=Nr=null,cl=!1,n)throw Error(r(300));return t}function Gi(){var t=dl!==0;return dl=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?Nr.memoizedState=Kr=t:Kr=Kr.next=t,Kr}function Ks(){if(sa===null){var t=Nr.alternate;t=t!==null?t.memoizedState:null}else t=sa.next;var n=Kr===null?Nr.memoizedState:Kr.next;if(n!==null)Kr=n,sa=t;else{if(t===null)throw Error(r(310));sa=t,t={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},Kr===null?Nr.memoizedState=Kr=t:Kr=Kr.next=t}return Kr}function Fl(t,n){return typeof n=="function"?n(t):n}function rc(t){var n=Ks(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var f=sa,y=f.baseQueue,S=i.pending;if(S!==null){if(y!==null){var T=y.next;y.next=S.next,S.next=T}f.baseQueue=y=S,i.pending=null}if(y!==null){S=y.next,f=f.baseState;var ue=T=null,Ne=null,He=S;do{var lt=He.lane;if((Yi&lt)===lt)Ne!==null&&(Ne=Ne.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),f=He.hasEagerState?He.eagerState:t(f,He.action);else{var dt={lane:lt,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Ne===null?(ue=Ne=dt,T=f):Ne=Ne.next=dt,Nr.lanes|=lt,Tl|=lt}He=He.next}while(He!==null&&He!==S);Ne===null?T=f:Ne.next=ue,Kn(f,n.memoizedState)||(pi=!0),n.memoizedState=f,n.baseState=T,n.baseQueue=Ne,i.lastRenderedState=f}if(t=i.interleaved,t!==null){y=t;do S=y.lane,Nr.lanes|=S,Tl|=S,y=y.next;while(y!==t)}else y===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Fo(t){var n=Ks(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var f=i.dispatch,y=i.pending,S=n.memoizedState;if(y!==null){i.pending=null;var T=y=y.next;do S=t(S,T.action),T=T.next;while(T!==y);Kn(S,n.memoizedState)||(pi=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),i.lastRenderedState=S}return[S,f]}function nd(){}function Mc(t,n){var i=Nr,f=Ks(),y=n(),S=!Kn(f.memoizedState,y);if(S&&(f.memoizedState=y,pi=!0),f=f.queue,ic(ad.bind(null,i,f,t),[t]),f.getSnapshot!==n||S||Kr!==null&&Kr.memoizedState.tag&1){if(i.flags|=2048,Qs(9,Dc.bind(null,i,f,y,n),void 0,null),as===null)throw Error(r(349));(Yi&30)!==0||rd(i,n,y)}return y}function rd(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Nr.updateQueue,n===null?(n={lastEffect:null,stores:null},Nr.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Dc(t,n,i,f){n.value=i,n.getSnapshot=f,ul(n)&&ac(t)}function ad(t,n,i){return i(function(){ul(n)&&ac(t)})}function ul(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Kn(t,i)}catch{return!0}}function ac(t){var n=P(t,1);n!==null&&yo(n,t,1,-1)}function Rl(t){var n=_i();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},n.queue=t,t=t.dispatch=Fg.bind(null,Nr,t),[n.memoizedState,t]}function Qs(t,n,i,f){return t={tag:t,create:n,destroy:i,deps:f,next:null},n=Nr.updateQueue,n===null?(n={lastEffect:null,stores:null},Nr.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(f=i.next,i.next=t,t.next=f,n.lastEffect=t)),t}function mo(){return Ks().memoizedState}function Ii(t,n,i,f){var y=_i();Nr.flags|=t,y.memoizedState=Qs(1|n,i,void 0,f===void 0?null:f)}function Ko(t,n,i,f){var y=Ks();f=f===void 0?null:f;var S=void 0;if(sa!==null){var T=sa.memoizedState;if(S=T.destroy,f!==null&&nc(f,T.deps)){y.memoizedState=Qs(n,i,S,f);return}}Nr.flags|=t,y.memoizedState=Qs(1|n,i,S,f)}function sc(t,n){return Ii(8390656,8,t,n)}function ic(t,n){return Ko(2048,8,t,n)}function sd(t,n){return Ko(4,2,t,n)}function oc(t,n){return Ko(4,4,t,n)}function lc(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Of(t,n,i){return i=i!=null?i.concat([t]):null,Ko(4,4,lc.bind(null,n,t),i)}function nu(){}function Bf(t,n){var i=Ks();n=n===void 0?null:n;var f=i.memoizedState;return f!==null&&n!==null&&nc(n,f[1])?f[0]:(i.memoizedState=[t,n],t)}function zf(t,n){var i=Ks();n=n===void 0?null:n;var f=i.memoizedState;return f!==null&&n!==null&&nc(n,f[1])?f[0]:(t=t(),i.memoizedState=[t,n],t)}function Uf(t,n,i){return(Yi&21)===0?(t.baseState&&(t.baseState=!1,pi=!0),t.memoizedState=i):(Kn(i,n)||(i=Bs(),Nr.lanes|=i,Tl|=i,t.baseState=!0),n)}function Mg(t,n){var i=An;An=i!==0&&4>i?i:4,t(!0);var f=tc.transition;tc.transition={};try{t(!1),n()}finally{An=i,tc.transition=f}}function qf(){return Ks().memoizedState}function Dg(t,n,i){var f=pl(t);if(i={lane:f,action:i,hasEagerState:!1,eagerState:null,next:null},$f(t))Wf(n,i);else if(i=L(t,n,i,f),i!==null){var y=Zs();yo(i,t,f,y),Vf(i,n,f)}}function Fg(t,n,i){var f=pl(t),y={lane:f,action:i,hasEagerState:!1,eagerState:null,next:null};if($f(t))Wf(n,y);else{var S=t.alternate;if(t.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var T=n.lastRenderedState,ue=S(T,i);if(y.hasEagerState=!0,y.eagerState=ue,Kn(ue,T)){var Ne=n.interleaved;Ne===null?(y.next=y,N(n)):(y.next=Ne.next,Ne.next=y),n.interleaved=y;return}}catch{}finally{}i=L(t,n,y,f),i!==null&&(y=Zs(),yo(i,t,f,y),Vf(i,n,f))}}function $f(t){var n=t.alternate;return t===Nr||n!==null&&n===Nr}function Wf(t,n){ho=cl=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function Vf(t,n,i){if((i&4194240)!==0){var f=n.lanes;f&=t.pendingLanes,i|=f,n.lanes=i,_a(t,i)}}var id={readContext:jr,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},Rg={readContext:jr,useCallback:function(t,n){return _i().memoizedState=[t,n===void 0?null:n],t},useContext:jr,useEffect:sc,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Ii(4194308,4,lc.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Ii(4194308,4,t,n)},useInsertionEffect:function(t,n){return Ii(4,2,t,n)},useMemo:function(t,n){var i=_i();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var f=_i();return n=i!==void 0?i(n):n,f.memoizedState=f.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},f.queue=t,t=t.dispatch=Dg.bind(null,Nr,t),[f.memoizedState,t]},useRef:function(t){var n=_i();return t={current:t},n.memoizedState=t},useState:Rl,useDebugValue:nu,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=Rl(!1),n=t[0];return t=Mg.bind(null,t[1]),_i().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var f=Nr,y=_i();if(tt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),as===null)throw Error(r(349));(Yi&30)!==0||rd(f,n,i)}y.memoizedState=i;var S={value:i,getSnapshot:n};return y.queue=S,sc(ad.bind(null,f,S,t),[t]),f.flags|=2048,Qs(9,Dc.bind(null,f,S,i,n),void 0,null),i},useId:function(){var t=_i(),n=as.identifierPrefix;if(tt){var i=re,f=_e;i=(f&~(1<<32-Fr(f)-1)).toString(32)+i,n=":"+n+"R"+i,i=dl++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=tu++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Tg={readContext:jr,useCallback:Bf,useContext:jr,useEffect:ic,useImperativeHandle:Of,useInsertionEffect:sd,useLayoutEffect:oc,useMemo:zf,useReducer:rc,useRef:mo,useState:function(){return rc(Fl)},useDebugValue:nu,useDeferredValue:function(t){var n=Ks();return Uf(n,sa.memoizedState,t)},useTransition:function(){var t=rc(Fl)[0],n=Ks().memoizedState;return[t,n]},useMutableSource:nd,useSyncExternalStore:Mc,useId:qf,unstable_isNewReconciler:!1},Og={readContext:jr,useCallback:Bf,useContext:jr,useEffect:ic,useImperativeHandle:Of,useInsertionEffect:sd,useLayoutEffect:oc,useMemo:zf,useReducer:Fo,useRef:mo,useState:function(){return Fo(Fl)},useDebugValue:nu,useDeferredValue:function(t){var n=Ks();return sa===null?n.memoizedState=t:Uf(n,sa.memoizedState,t)},useTransition:function(){var t=Fo(Fl)[0],n=Ks().memoizedState;return[t,n]},useMutableSource:nd,useSyncExternalStore:Mc,useId:qf,unstable_isNewReconciler:!1};function po(t,n){if(t&&t.defaultProps){n=Ue({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function ru(t,n,i,f){n=t.memoizedState,i=i(f,n),i=i==null?n:Ue({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var od={isMounted:function(t){return(t=t._reactInternals)?qr(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var f=Zs(),y=pl(t),S=ve(f,y);S.payload=n,i!=null&&(S.callback=i),n=be(t,S,y),n!==null&&(yo(n,t,y,f),Je(n,t,y))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var f=Zs(),y=pl(t),S=ve(f,y);S.tag=1,S.payload=n,i!=null&&(S.callback=i),n=be(t,S,y),n!==null&&(yo(n,t,y,f),Je(n,t,y))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Zs(),f=pl(t),y=ve(i,f);y.tag=2,n!=null&&(y.callback=n),n=be(t,y,f),n!==null&&(yo(n,t,f,i),Je(n,t,f))}};function Hf(t,n,i,f,y,S,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(f,S,T):n.prototype&&n.prototype.isPureReactComponent?!Xa(i,f)||!Xa(y,S):!0}function Yf(t,n,i){var f=!1,y=Hi,S=n.contextType;return typeof S=="object"&&S!==null?S=jr(S):(y=rs(n)?hi:pa.current,f=n.contextTypes,S=(f=f!=null)?uo(t,y):Hi),n=new n(i,S),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=od,t.stateNode=n,n._reactInternals=t,f&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=y,t.__reactInternalMemoizedMaskedChildContext=S),n}function Gf(t,n,i,f){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,f),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,f),n.state!==t&&od.enqueueReplaceState(n,n.state,null)}function au(t,n,i,f){var y=t.stateNode;y.props=i,y.state=t.memoizedState,y.refs={},U(t);var S=n.contextType;typeof S=="object"&&S!==null?y.context=jr(S):(S=rs(n)?hi:pa.current,y.context=uo(t,S)),y.state=t.memoizedState,S=n.getDerivedStateFromProps,typeof S=="function"&&(ru(t,n,S,i),y.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&od.enqueueReplaceState(y,y.state,null),Nt(t,i,y,f),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308)}function cc(t,n){try{var i="",f=n;do i+=ce(f),f=f.return;while(f);var y=i}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:t,source:n,stack:y,digest:null}}function su(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function iu(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function Jf(t,n,i){i=ve(-1,i),i.tag=3,i.payload={element:null};var f=n.value;return i.callback=function(){md||(md=!0,wu=f),iu(t,n)},i}function Kf(t,n,i){i=ve(-1,i),i.tag=3;var f=t.type.getDerivedStateFromError;if(typeof f=="function"){var y=n.value;i.payload=function(){return f(y)},i.callback=function(){iu(t,n)}}var S=t.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){iu(t,n),typeof f!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var T=n.stack;this.componentDidCatch(n.value,{componentStack:T!==null?T:""})}),i}function Qf(t,n,i){var f=t.pingCache;if(f===null){f=t.pingCache=new Bg;var y=new Set;f.set(n,y)}else y=f.get(n),y===void 0&&(y=new Set,f.set(n,y));y.has(i)||(y.add(i),t=Zg.bind(null,t,n,i),n.then(t,t))}function Xf(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Zf(t,n,i,f,y){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=ve(-1,1),n.tag=2,be(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=y,t)}var zg=G.ReactCurrentOwner,pi=!1;function Xs(t,n,i,f){n.child=t===null?hr(n,null,i,f):Ir(n,t.child,i,f)}function eh(t,n,i,f,y){i=i.render;var S=n.ref;return er(n,y),f=Dl(t,n,i,f,S,y),i=Gi(),t!==null&&!pi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~y,Qo(t,n,y)):(tt&&i&&Q(n),n.flags|=1,Xs(t,n,f,y),n.child)}function th(t,n,i,f,y){if(t===null){var S=i.type;return typeof S=="function"&&!Pu(S)&&S.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=S,nh(t,n,S,f,y)):(t=bd(i.type,null,f,n,n.mode,y),t.ref=n.ref,t.return=n,n.child=t)}if(S=t.child,(t.lanes&y)===0){var T=S.memoizedProps;if(i=i.compare,i=i!==null?i:Xa,i(T,f)&&t.ref===n.ref)return Qo(t,n,y)}return n.flags|=1,t=xl(S,f),t.ref=n.ref,t.return=n,n.child=t}function nh(t,n,i,f,y){if(t!==null){var S=t.memoizedProps;if(Xa(S,f)&&t.ref===n.ref)if(pi=!1,n.pendingProps=f=S,(t.lanes&y)!==0)(t.flags&131072)!==0&&(pi=!0);else return n.lanes=t.lanes,Qo(t,n,y)}return ou(t,n,i,f,y)}function rh(t,n,i){var f=n.pendingProps,y=f.children,S=t!==null?t.memoizedState:null;if(f.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wn(uc,Ei),Ei|=i;else{if((i&1073741824)===0)return t=S!==null?S.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Wn(uc,Ei),Ei|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:i,Wn(uc,Ei),Ei|=f}else S!==null?(f=S.baseLanes|i,n.memoizedState=null):f=i,Wn(uc,Ei),Ei|=f;return Xs(t,n,y,i),n.child}function ah(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function ou(t,n,i,f,y){var S=rs(i)?hi:pa.current;return S=uo(n,S),er(n,y),i=Dl(t,n,i,f,S,y),f=Gi(),t!==null&&!pi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~y,Qo(t,n,y)):(tt&&f&&Q(n),n.flags|=1,Xs(t,n,i,y),n.child)}function sh(t,n,i,f,y){if(rs(i)){var S=!0;fo(n)}else S=!1;if(er(n,y),n.stateNode===null)cd(t,n),Yf(n,i,f),au(n,i,f,y),f=!0;else if(t===null){var T=n.stateNode,ue=n.memoizedProps;T.props=ue;var Ne=T.context,He=i.contextType;typeof He=="object"&&He!==null?He=jr(He):(He=rs(i)?hi:pa.current,He=uo(n,He));var lt=i.getDerivedStateFromProps,dt=typeof lt=="function"||typeof T.getSnapshotBeforeUpdate=="function";dt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(ue!==f||Ne!==He)&&Gf(n,T,f,He),I=!1;var it=n.memoizedState;T.state=it,Nt(n,f,T,y),Ne=n.memoizedState,ue!==f||it!==Ne||ns.current||I?(typeof lt=="function"&&(ru(n,i,lt,f),Ne=n.memoizedState),(ue=I||Hf(n,i,ue,f,it,Ne,He))?(dt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(n.flags|=4194308)):(typeof T.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=f,n.memoizedState=Ne),T.props=f,T.state=Ne,T.context=He,f=ue):(typeof T.componentDidMount=="function"&&(n.flags|=4194308),f=!1)}else{T=n.stateNode,W(t,n),ue=n.memoizedProps,He=n.type===n.elementType?ue:po(n.type,ue),T.props=He,dt=n.pendingProps,it=T.context,Ne=i.contextType,typeof Ne=="object"&&Ne!==null?Ne=jr(Ne):(Ne=rs(i)?hi:pa.current,Ne=uo(n,Ne));var Ct=i.getDerivedStateFromProps;(lt=typeof Ct=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(ue!==dt||it!==Ne)&&Gf(n,T,f,Ne),I=!1,it=n.memoizedState,T.state=it,Nt(n,f,T,y);var Rt=n.memoizedState;ue!==dt||it!==Rt||ns.current||I?(typeof Ct=="function"&&(ru(n,i,Ct,f),Rt=n.memoizedState),(He=I||Hf(n,i,He,f,it,Rt,Ne)||!1)?(lt||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Rt,Ne),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Rt,Ne)),typeof T.componentDidUpdate=="function"&&(n.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof T.componentDidUpdate!="function"||ue===t.memoizedProps&&it===t.memoizedState||(n.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||ue===t.memoizedProps&&it===t.memoizedState||(n.flags|=1024),n.memoizedProps=f,n.memoizedState=Rt),T.props=f,T.state=Rt,T.context=Ne,f=He):(typeof T.componentDidUpdate!="function"||ue===t.memoizedProps&&it===t.memoizedState||(n.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||ue===t.memoizedProps&&it===t.memoizedState||(n.flags|=1024),f=!1)}return lu(t,n,i,f,S,y)}function lu(t,n,i,f,y,S){ah(t,n);var T=(n.flags&128)!==0;if(!f&&!T)return y&&Zl(n,i,!1),Qo(t,n,S);f=n.stateNode,zg.current=n;var ue=T&&typeof i.getDerivedStateFromError!="function"?null:f.render();return n.flags|=1,t!==null&&T?(n.child=Ir(n,t.child,null,S),n.child=Ir(n,null,ue,S)):Xs(t,n,ue,S),n.memoizedState=f.state,y&&Zl(n,i,!0),n.child}function ih(t){var n=t.stateNode;n.pendingContext?Xl(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Xl(t,n.context,!1),Do(t,n.containerInfo)}function oh(t,n,i,f,y){return At(),gt(y),n.flags|=256,Xs(t,n,i,f),n.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function du(t){return{baseLanes:t,cachePool:null,transitions:null}}function lh(t,n,i){var f=n.pendingProps,y=Nn.current,S=!1,T=(n.flags&128)!==0,ue;if((ue=T)||(ue=t!==null&&t.memoizedState===null?!1:(y&2)!==0),ue?(S=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(y|=1),Wn(Nn,y&1),t===null)return It(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(T=f.children,t=f.fallback,S?(f=n.mode,S=n.child,T={mode:"hidden",children:T},(f&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=T):S=wd(T,f,0,null),t=Ul(t,f,i,null),S.return=n,t.return=n,S.sibling=t,n.child=S,n.child.memoizedState=du(i),n.memoizedState=cu,t):uu(n,T));if(y=t.memoizedState,y!==null&&(ue=y.dehydrated,ue!==null))return Ug(t,n,T,f,ue,y,i);if(S){S=f.fallback,T=n.mode,y=t.child,ue=y.sibling;var Ne={mode:"hidden",children:f.children};return(T&1)===0&&n.child!==y?(f=n.child,f.childLanes=0,f.pendingProps=Ne,n.deletions=null):(f=xl(y,Ne),f.subtreeFlags=y.subtreeFlags&14680064),ue!==null?S=xl(ue,S):(S=Ul(S,T,i,null),S.flags|=2),S.return=n,f.return=n,f.sibling=S,n.child=f,f=S,S=n.child,T=t.child.memoizedState,T=T===null?du(i):{baseLanes:T.baseLanes|i,cachePool:null,transitions:T.transitions},S.memoizedState=T,S.childLanes=t.childLanes&~i,n.memoizedState=cu,f}return S=t.child,t=S.sibling,f=xl(S,{mode:"visible",children:f.children}),(n.mode&1)===0&&(f.lanes=i),f.return=n,f.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=f,n.memoizedState=null,f}function uu(t,n){return n=wd({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ld(t,n,i,f){return f!==null&&gt(f),Ir(n,t.child,null,i),t=uu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ug(t,n,i,f,y,S,T){if(i)return n.flags&256?(n.flags&=-257,f=su(Error(r(422))),ld(t,n,T,f)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(S=f.fallback,y=n.mode,f=wd({mode:"visible",children:f.children},y,0,null),S=Ul(S,y,T,null),S.flags|=2,f.return=n,S.return=n,f.sibling=S,n.child=f,(n.mode&1)!==0&&Ir(n,t.child,null,T),n.child.memoizedState=du(T),n.memoizedState=cu,S);if((n.mode&1)===0)return ld(t,n,T,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var ue=f.dgst;return f=ue,S=Error(r(419)),f=su(S,f,void 0),ld(t,n,T,f)}if(ue=(T&t.childLanes)!==0,pi||ue){if(f=as,f!==null){switch(T&-T){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|T))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,P(t,y),yo(f,t,y,-1))}return Cu(),f=su(Error(r(421))),ld(t,n,T,f)}return y.data==="$?"?(n.flags|=128,n.child=t.child,n=e0.bind(null,t),y._reactRetry=n,null):(t=S.treeContext,Ke=lr(y.nextSibling),Ge=n,tt=!0,rt=null,t!==null&&(J[ae++]=_e,J[ae++]=re,J[ae++]=we,_e=t.id,re=t.overflow,we=n),n=uu(n,f.children),n.flags|=4096,n)}function ch(t,n,i){t.lanes|=n;var f=t.alternate;f!==null&&(f.lanes|=n),wn(t.return,n,i)}function fu(t,n,i,f,y){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:f,tail:i,tailMode:y}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=i,S.tailMode=y)}function dh(t,n,i){var f=n.pendingProps,y=f.revealOrder,S=f.tail;if(Xs(t,n,f.children,i),f=Nn.current,(f&2)!==0)f=f&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ch(t,i,n);else if(t.tag===19)ch(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}f&=1}if(Wn(Nn,f),(n.mode&1)===0)n.memoizedState=null;else switch(y){case"forwards":for(i=n.child,y=null;i!==null;)t=i.alternate,t!==null&&Ba(t)===null&&(y=i),i=i.sibling;i=y,i===null?(y=n.child,n.child=null):(y=i.sibling,i.sibling=null),fu(n,!1,y,i,S);break;case"backwards":for(i=null,y=n.child,n.child=null;y!==null;){if(t=y.alternate,t!==null&&Ba(t)===null){n.child=y;break}t=y.sibling,y.sibling=i,i=y,y=t}fu(n,!0,i,null,S);break;case"together":fu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function cd(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Qo(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Tl|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,i=xl(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=xl(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function qg(t,n,i){switch(n.tag){case 3:ih(n),At();break;case 5:Dt(n);break;case 1:rs(n.type)&&fo(n);break;case 4:Do(n,n.stateNode.containerInfo);break;case 10:var f=n.type._context,y=n.memoizedProps.value;Wn(zr,f._currentValue),f._currentValue=y;break;case 13:if(f=n.memoizedState,f!==null)return f.dehydrated!==null?(Wn(Nn,Nn.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?lh(t,n,i):(Wn(Nn,Nn.current&1),t=Qo(t,n,i),t!==null?t.sibling:null);Wn(Nn,Nn.current&1);break;case 19:if(f=(i&n.childLanes)!==0,(t.flags&128)!==0){if(f)return dh(t,n,i);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Wn(Nn,Nn.current),f)break;return null;case 22:case 23:return n.lanes=0,rh(t,n,i)}return Qo(t,n,i)}var uh,hu,fh,hh;uh=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},hu=function(){},fh=function(t,n,i,f){var y=t.memoizedProps;if(y!==f){t=n.stateNode,ga(Kt.current);var S=null;switch(i){case"input":y=bt(t,y),f=bt(t,f),S=[];break;case"select":y=Ue({},y,{value:void 0}),f=Ue({},f,{value:void 0}),S=[];break;case"textarea":y=vt(t,y),f=vt(t,f),S=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(t.onclick=Gs)}ct(i,f);var T;i=null;for(He in y)if(!f.hasOwnProperty(He)&&y.hasOwnProperty(He)&&y[He]!=null)if(He==="style"){var ue=y[He];for(T in ue)ue.hasOwnProperty(T)&&(i||(i={}),i[T]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(d.hasOwnProperty(He)?S||(S=[]):(S=S||[]).push(He,null));for(He in f){var Ne=f[He];if(ue=y?.[He],f.hasOwnProperty(He)&&Ne!==ue&&(Ne!=null||ue!=null))if(He==="style")if(ue){for(T in ue)!ue.hasOwnProperty(T)||Ne&&Ne.hasOwnProperty(T)||(i||(i={}),i[T]="");for(T in Ne)Ne.hasOwnProperty(T)&&ue[T]!==Ne[T]&&(i||(i={}),i[T]=Ne[T])}else i||(S||(S=[]),S.push(He,i)),i=Ne;else He==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,ue=ue?ue.__html:void 0,Ne!=null&&ue!==Ne&&(S=S||[]).push(He,Ne)):He==="children"?typeof Ne!="string"&&typeof Ne!="number"||(S=S||[]).push(He,""+Ne):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(d.hasOwnProperty(He)?(Ne!=null&&He==="onScroll"&&En("scroll",t),S||ue===Ne||(S=[])):(S=S||[]).push(He,Ne))}i&&(S=S||[]).push("style",i);var He=S;(n.updateQueue=He)&&(n.flags|=4)}},hh=function(t,n,i,f){i!==f&&(n.flags|=4)};function Fc(t,n){if(!tt)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var f=null;i!==null;)i.alternate!==null&&(f=i),i=i.sibling;f===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:f.sibling=null}}function Ls(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,f=0;if(n)for(var y=t.child;y!==null;)i|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)i|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=f,t.childLanes=i,n}function $g(t,n,i){var f=n.pendingProps;switch(De(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(n),null;case 1:return rs(n.type)&&ll(),Ls(n),null;case 3:return f=n.stateNode,mi(),Un(ns),Un(pa),Ec(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(t===null||t.child===null)&&(wr(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,rt!==null&&(Su(rt),rt=null))),hu(t,n),Ls(n),null;case 5:mr(n);var y=ga(aa.current);if(i=n.type,t!==null&&n.stateNode!=null)fh(t,n,i,f,y),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!f){if(n.stateNode===null)throw Error(r(166));return Ls(n),null}if(t=ga(Kt.current),wr(n)){f=n.stateNode,i=n.type;var S=n.memoizedProps;switch(f[fi]=n,f[Mo]=S,t=(n.mode&1)!==0,i){case"dialog":En("cancel",f),En("close",f);break;case"iframe":case"object":case"embed":En("load",f);break;case"video":case"audio":for(y=0;y<ka.length;y++)En(ka[y],f);break;case"source":En("error",f);break;case"img":case"image":case"link":En("error",f),En("load",f);break;case"details":En("toggle",f);break;case"input":X(f,S),En("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},En("invalid",f);break;case"textarea":Pt(f,S),En("invalid",f)}ct(i,S),y=null;for(var T in S)if(S.hasOwnProperty(T)){var ue=S[T];T==="children"?typeof ue=="string"?f.textContent!==ue&&(S.suppressHydrationWarning!==!0&&Io(f.textContent,ue,t),y=["children",ue]):typeof ue=="number"&&f.textContent!==""+ue&&(S.suppressHydrationWarning!==!0&&Io(f.textContent,ue,t),y=["children",""+ue]):d.hasOwnProperty(T)&&ue!=null&&T==="onScroll"&&En("scroll",f)}switch(i){case"input":Te(f),Lt(f,S,!0);break;case"textarea":Te(f),sn(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=Gs)}f=y,n.updateQueue=f,f!==null&&(n.flags|=4)}else{T=y.nodeType===9?y:y.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ht(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=T.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof f.is=="string"?t=T.createElement(i,{is:f.is}):(t=T.createElement(i),i==="select"&&(T=t,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):t=T.createElementNS(t,i),t[fi]=n,t[Mo]=f,uh(t,n,!1,!1),n.stateNode=t;e:{switch(T=st(i,f),i){case"dialog":En("cancel",t),En("close",t),y=f;break;case"iframe":case"object":case"embed":En("load",t),y=f;break;case"video":case"audio":for(y=0;y<ka.length;y++)En(ka[y],t);y=f;break;case"source":En("error",t),y=f;break;case"img":case"image":case"link":En("error",t),En("load",t),y=f;break;case"details":En("toggle",t),y=f;break;case"input":X(t,f),y=bt(t,f),En("invalid",t);break;case"option":y=f;break;case"select":t._wrapperState={wasMultiple:!!f.multiple},y=Ue({},f,{value:void 0}),En("invalid",t);break;case"textarea":Pt(t,f),y=vt(t,f),En("invalid",t);break;default:y=f}ct(i,y),ue=y;for(S in ue)if(ue.hasOwnProperty(S)){var Ne=ue[S];S==="style"?xe(t,Ne):S==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&qe(t,Ne)):S==="children"?typeof Ne=="string"?(i!=="textarea"||Ne!=="")&&nt(t,Ne):typeof Ne=="number"&&nt(t,""+Ne):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(d.hasOwnProperty(S)?Ne!=null&&S==="onScroll"&&En("scroll",t):Ne!=null&&ee(t,S,Ne,T))}switch(i){case"input":Te(t),Lt(t,f,!1);break;case"textarea":Te(t),sn(t);break;case"option":f.value!=null&&t.setAttribute("value",""+Fe(f.value));break;case"select":t.multiple=!!f.multiple,S=f.value,S!=null?yt(t,!!f.multiple,S,!1):f.defaultValue!=null&&yt(t,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(t.onclick=Gs)}switch(i){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ls(n),null;case 6:if(t&&n.stateNode!=null)hh(t,n,t.memoizedProps,f);else{if(typeof f!="string"&&n.stateNode===null)throw Error(r(166));if(i=ga(aa.current),ga(Kt.current),wr(n)){if(f=n.stateNode,i=n.memoizedProps,f[fi]=n,(S=f.nodeValue!==i)&&(t=Ge,t!==null))switch(t.tag){case 3:Io(f.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Io(f.nodeValue,i,(t.mode&1)!==0)}S&&(n.flags|=4)}else f=(i.nodeType===9?i:i.ownerDocument).createTextNode(f),f[fi]=n,n.stateNode=f}return Ls(n),null;case 13:if(Un(Nn),f=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&Ke!==null&&(n.mode&1)!==0&&(n.flags&128)===0)dn(),At(),n.flags|=98560,S=!1;else if(S=wr(n),f!==null&&f.dehydrated!==null){if(t===null){if(!S)throw Error(r(318));if(S=n.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[fi]=n}else At(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ls(n),S=!1}else rt!==null&&(Su(rt),rt=null),S=!0;if(!S)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(f=f!==null,f!==(t!==null&&t.memoizedState!==null)&&f&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Nn.current&1)!==0?za===0&&(za=3):Cu())),n.updateQueue!==null&&(n.flags|=4),Ls(n),null);case 4:return mi(),hu(t,n),t===null&&Mn(n.stateNode.containerInfo),Ls(n),null;case 10:return Qn(n.type._context),Ls(n),null;case 17:return rs(n.type)&&ll(),Ls(n),null;case 19:if(Un(Nn),S=n.memoizedState,S===null)return Ls(n),null;if(f=(n.flags&128)!==0,T=S.rendering,T===null)if(f)Fc(S,!1);else{if(za!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(T=Ba(t),T!==null){for(n.flags|=128,Fc(S,!1),f=T.updateQueue,f!==null&&(n.updateQueue=f,n.flags|=4),n.subtreeFlags=0,f=i,i=n.child;i!==null;)S=i,t=f,S.flags&=14680066,T=S.alternate,T===null?(S.childLanes=0,S.lanes=t,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=T.childLanes,S.lanes=T.lanes,S.child=T.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=T.memoizedProps,S.memoizedState=T.memoizedState,S.updateQueue=T.updateQueue,S.type=T.type,t=T.dependencies,S.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Wn(Nn,Nn.current&1|2),n.child}t=t.sibling}S.tail!==null&&Tn()>fc&&(n.flags|=128,f=!0,Fc(S,!1),n.lanes=4194304)}else{if(!f)if(t=Ba(T),t!==null){if(n.flags|=128,f=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Fc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!tt)return Ls(n),null}else 2*Tn()-S.renderingStartTime>fc&&i!==1073741824&&(n.flags|=128,f=!0,Fc(S,!1),n.lanes=4194304);S.isBackwards?(T.sibling=n.child,n.child=T):(i=S.last,i!==null?i.sibling=T:n.child=T,S.last=T)}return S.tail!==null?(n=S.tail,S.rendering=n,S.tail=n.sibling,S.renderingStartTime=Tn(),n.sibling=null,i=Nn.current,Wn(Nn,f?i&1|2:i&1),n):(Ls(n),null);case 22:case 23:return Au(),f=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==f&&(n.flags|=8192),f&&(n.mode&1)!==0?(Ei&1073741824)!==0&&(Ls(n),n.subtreeFlags&6&&(n.flags|=8192)):Ls(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function Wg(t,n){switch(De(n),n.tag){case 1:return rs(n.type)&&ll(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return mi(),Un(ns),Un(pa),Ec(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return mr(n),null;case 13:if(Un(Nn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));At()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Un(Nn),null;case 4:return mi(),null;case 10:return Qn(n.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var dd=!1,_s=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,Et=null;function dc(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(f){ia(t,n,f)}else i.current=null}function mu(t,n,i){try{i()}catch(f){ia(t,n,f)}}var mh=!1;function Hg(t,n){if(Yo=Wr,t=Or(),Br(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var f=i.getSelection&&i.getSelection();if(f&&f.rangeCount!==0){i=f.anchorNode;var y=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{i.nodeType,S.nodeType}catch{i=null;break e}var T=0,ue=-1,Ne=-1,He=0,lt=0,dt=t,it=null;t:for(;;){for(var Ct;dt!==i||y!==0&&dt.nodeType!==3||(ue=T+y),dt!==S||f!==0&&dt.nodeType!==3||(Ne=T+f),dt.nodeType===3&&(T+=dt.nodeValue.length),(Ct=dt.firstChild)!==null;)it=dt,dt=Ct;for(;;){if(dt===t)break t;if(it===i&&++He===y&&(ue=T),it===S&&++lt===f&&(Ne=T),(Ct=dt.nextSibling)!==null)break;dt=it,it=dt.parentNode}dt=Ct}i=ue===-1||Ne===-1?null:{start:ue,end:Ne}}else i=null}i=i||{start:0,end:0}}else i=null;for(lo={focusedElem:t,selectionRange:i},Wr=!1,Et=n;Et!==null;)if(n=Et,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Et=t;else for(;Et!==null;){n=Et;try{var Rt=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Rt!==null){var $t=Rt.memoizedProps,ya=Rt.memoizedState,ze=n.stateNode,Le=ze.getSnapshotBeforeUpdate(n.elementType===n.type?$t:po(n.type,$t),ya);ze.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:var $e=n.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(pt){ia(n,n.return,pt)}if(t=n.sibling,t!==null){t.return=n.return,Et=t;break}Et=n.return}return Rt=mh,mh=!1,Rt}function Rc(t,n,i){var f=n.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&t)===t){var S=y.destroy;y.destroy=void 0,S!==void 0&&mu(n,i,S)}y=y.next}while(y!==f)}}function ud(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var f=i.create;i.destroy=f()}i=i.next}while(i!==n)}}function pu(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function ph(t){var n=t.alternate;n!==null&&(t.alternate=null,ph(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[fi],delete n[Mo],delete n[ts],delete n[Pi],delete n[Ic])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gh(t){return t.tag===5||t.tag===3||t.tag===4}function xh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,n,i){var f=t.tag;if(f===5||f===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Gs));else if(f!==4&&(t=t.child,t!==null))for(gu(t,n,i),t=t.sibling;t!==null;)gu(t,n,i),t=t.sibling}function xu(t,n,i){var f=t.tag;if(f===5||f===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(f!==4&&(t=t.child,t!==null))for(xu(t,n,i),t=t.sibling;t!==null;)xu(t,n,i),t=t.sibling}var xs=null,go=!1;function fl(t,n,i){for(i=i.child;i!==null;)yh(t,n,i),i=i.sibling}function yh(t,n,i){if(La&&typeof La.onCommitFiberUnmount=="function")try{La.onCommitFiberUnmount(ls,i)}catch{}switch(i.tag){case 5:_s||dc(i,n);case 6:var f=xs,y=go;xs=null,fl(t,n,i),xs=f,go=y,xs!==null&&(go?(t=xs,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):xs.removeChild(i.stateNode));break;case 18:xs!==null&&(go?(t=xs,i=i.stateNode,t.nodeType===8?Il(t.parentNode,i):t.nodeType===1&&Il(t,i),Xi(t)):Il(xs,i.stateNode));break;case 4:f=xs,y=go,xs=i.stateNode.containerInfo,go=!0,fl(t,n,i),xs=f,go=y;break;case 0:case 11:case 14:case 15:if(!_s&&(f=i.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var S=y,T=S.destroy;S=S.tag,T!==void 0&&((S&2)!==0||(S&4)!==0)&&mu(i,n,T),y=y.next}while(y!==f)}fl(t,n,i);break;case 1:if(!_s&&(dc(i,n),f=i.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=i.memoizedProps,f.state=i.memoizedState,f.componentWillUnmount()}catch(ue){ia(i,n,ue)}fl(t,n,i);break;case 21:fl(t,n,i);break;case 22:i.mode&1?(_s=(f=_s)||i.memoizedState!==null,fl(t,n,i),_s=f):fl(t,n,i);break;default:fl(t,n,i)}}function vh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Vg),n.forEach(function(f){var y=t0.bind(null,t,f);i.has(f)||(i.add(f),f.then(y,y))})}}function xo(t,n){var i=n.deletions;if(i!==null)for(var f=0;f<i.length;f++){var y=i[f];try{var S=t,T=n,ue=T;e:for(;ue!==null;){switch(ue.tag){case 5:xs=ue.stateNode,go=!1;break e;case 3:xs=ue.stateNode.containerInfo,go=!0;break e;case 4:xs=ue.stateNode.containerInfo,go=!0;break e}ue=ue.return}if(xs===null)throw Error(r(160));yh(S,T,y),xs=null,go=!1;var Ne=y.alternate;Ne!==null&&(Ne.return=null),y.return=null}catch(He){ia(y,n,He)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)bh(n,t),n=n.sibling}function bh(t,n){var i=t.alternate,f=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xo(n,t),Ro(t),f&4){try{Rc(3,t,t.return),ud(3,t)}catch($t){ia(t,t.return,$t)}try{Rc(5,t,t.return)}catch($t){ia(t,t.return,$t)}}break;case 1:xo(n,t),Ro(t),f&512&&i!==null&&dc(i,i.return);break;case 5:if(xo(n,t),Ro(t),f&512&&i!==null&&dc(i,i.return),t.flags&32){var y=t.stateNode;try{nt(y,"")}catch($t){ia(t,t.return,$t)}}if(f&4&&(y=t.stateNode,y!=null)){var S=t.memoizedProps,T=i!==null?i.memoizedProps:S,ue=t.type,Ne=t.updateQueue;if(t.updateQueue=null,Ne!==null)try{ue==="input"&&S.type==="radio"&&S.name!=null&&et(y,S),st(ue,T);var He=st(ue,S);for(T=0;T<Ne.length;T+=2){var lt=Ne[T],dt=Ne[T+1];lt==="style"?xe(y,dt):lt==="dangerouslySetInnerHTML"?qe(y,dt):lt==="children"?nt(y,dt):ee(y,lt,dt,He)}switch(ue){case"input":xt(y,S);break;case"textarea":pn(y,S);break;case"select":var it=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var Ct=S.value;Ct!=null?yt(y,!!S.multiple,Ct,!1):it!==!!S.multiple&&(S.defaultValue!=null?yt(y,!!S.multiple,S.defaultValue,!0):yt(y,!!S.multiple,S.multiple?[]:"",!1))}y[Mo]=S}catch($t){ia(t,t.return,$t)}}break;case 6:if(xo(n,t),Ro(t),f&4){if(t.stateNode===null)throw Error(r(162));y=t.stateNode,S=t.memoizedProps;try{y.nodeValue=S}catch($t){ia(t,t.return,$t)}}break;case 3:if(xo(n,t),Ro(t),f&4&&i!==null&&i.memoizedState.isDehydrated)try{Xi(n.containerInfo)}catch($t){ia(t,t.return,$t)}break;case 4:xo(n,t),Ro(t);break;case 13:xo(n,t),Ro(t),y=t.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(bu=Tn())),f&4&&vh(t);break;case 22:if(lt=i!==null&&i.memoizedState!==null,t.mode&1?(_s=(He=_s)||lt,xo(n,t),_s=He):xo(n,t),Ro(t),f&8192){if(He=t.memoizedState!==null,(t.stateNode.isHidden=He)&&!lt&&(t.mode&1)!==0)for(Et=t,lt=t.child;lt!==null;){for(dt=Et=lt;Et!==null;){switch(it=Et,Ct=it.child,it.tag){case 0:case 11:case 14:case 15:Rc(4,it,it.return);break;case 1:dc(it,it.return);var Rt=it.stateNode;if(typeof Rt.componentWillUnmount=="function"){f=it,i=it.return;try{n=f,Rt.props=n.memoizedProps,Rt.state=n.memoizedState,Rt.componentWillUnmount()}catch($t){ia(f,i,$t)}}break;case 5:dc(it,it.return);break;case 22:if(it.memoizedState!==null){Nh(dt);continue}}Ct!==null?(Ct.return=it,Et=Ct):Nh(dt)}lt=lt.sibling}e:for(lt=null,dt=t;;){if(dt.tag===5){if(lt===null){lt=dt;try{y=dt.stateNode,He?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(ue=dt.stateNode,Ne=dt.memoizedProps.style,T=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,ue.style.display=Se("display",T))}catch($t){ia(t,t.return,$t)}}}else if(dt.tag===6){if(lt===null)try{dt.stateNode.nodeValue=He?"":dt.memoizedProps}catch($t){ia(t,t.return,$t)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===t)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===t)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===t)break e;lt===dt&&(lt=null),dt=dt.return}lt===dt&&(lt=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:xo(n,t),Ro(t),f&4&&vh(t);break;case 21:break;default:xo(n,t),Ro(t)}}function Ro(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(gh(i)){var f=i;break e}i=i.return}throw Error(r(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(nt(y,""),f.flags&=-33);var S=xh(t);xu(t,S,y);break;case 3:case 4:var T=f.stateNode.containerInfo,ue=xh(t);gu(t,ue,T);break;default:throw Error(r(161))}}catch(Ne){ia(t,t.return,Ne)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Yg(t,n,i){Et=t,wh(t)}function wh(t,n,i){for(var f=(t.mode&1)!==0;Et!==null;){var y=Et,S=y.child;if(y.tag===22&&f){var T=y.memoizedState!==null||dd;if(!T){var ue=y.alternate,Ne=ue!==null&&ue.memoizedState!==null||_s;ue=dd;var He=_s;if(dd=T,(_s=Ne)&&!He)for(Et=y;Et!==null;)T=Et,Ne=T.child,T.tag===22&&T.memoizedState!==null?Sh(y):Ne!==null?(Ne.return=T,Et=Ne):Sh(y);for(;S!==null;)Et=S,wh(S),S=S.sibling;Et=y,dd=ue,_s=He}jh(t)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,Et=S):jh(t)}}function jh(t){for(;Et!==null;){var n=Et;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:_s||ud(5,n);break;case 1:var f=n.stateNode;if(n.flags&4&&!_s)if(i===null)f.componentDidMount();else{var y=n.elementType===n.type?i.memoizedProps:po(n.type,i.memoizedProps);f.componentDidUpdate(y,i.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=n.updateQueue;S!==null&&mt(n,S,f);break;case 3:var T=n.updateQueue;if(T!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}mt(n,T,i)}break;case 5:var ue=n.stateNode;if(i===null&&n.flags&4){i=ue;var Ne=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&i.focus();break;case"img":Ne.src&&(i.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var He=n.alternate;if(He!==null){var lt=He.memoizedState;if(lt!==null){var dt=lt.dehydrated;dt!==null&&Xi(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_s||n.flags&512&&pu(n)}catch(it){ia(n,n.return,it)}}if(n===t){Et=null;break}if(i=n.sibling,i!==null){i.return=n.return,Et=i;break}Et=n.return}}function Nh(t){for(;Et!==null;){var n=Et;if(n===t){Et=null;break}var i=n.sibling;if(i!==null){i.return=n.return,Et=i;break}Et=n.return}}function Sh(t){for(;Et!==null;){var n=Et;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{ud(4,n)}catch(Ne){ia(n,i,Ne)}break;case 1:var f=n.stateNode;if(typeof f.componentDidMount=="function"){var y=n.return;try{f.componentDidMount()}catch(Ne){ia(n,y,Ne)}}var S=n.return;try{pu(n)}catch(Ne){ia(n,S,Ne)}break;case 5:var T=n.return;try{pu(n)}catch(Ne){ia(n,T,Ne)}}}catch(Ne){ia(n,n.return,Ne)}if(n===t){Et=null;break}var ue=n.sibling;if(ue!==null){ue.return=n.return,Et=ue;break}Et=n.return}}var Gg=Math.ceil,fd=G.ReactCurrentDispatcher,yu=G.ReactCurrentOwner,Ji=G.ReactCurrentBatchConfig,Vn=0,as=null,Ca=null,ys=0,Ei=0,uc=Js(0),za=0,Tc=null,Tl=0,hd=0,vu=0,Oc=null,gi=null,bu=0,fc=1/0,Xo=null,md=!1,wu=null,hl=null,pd=!1,ml=null,gd=0,Bc=0,ju=null,xd=-1,yd=0;function Zs(){return(Vn&6)!==0?Tn():xd!==-1?xd:xd=Tn()}function pl(t){return(t.mode&1)===0?1:(Vn&2)!==0&&ys!==0?ys&-ys:_r.transition!==null?(yd===0&&(yd=Bs()),yd):(t=An,t!==0||(t=window.event,t=t===void 0?16:Oi(t.type)),t)}function yo(t,n,i,f){if(50<Bc)throw Bc=0,ju=null,Error(r(185));Rr(t,i,f),((Vn&2)===0||t!==as)&&(t===as&&((Vn&2)===0&&(hd|=i),za===4&&gl(t,ys)),xi(t,f),i===1&&Vn===0&&(n.mode&1)===0&&(fc=Tn()+500,Jo&&k()))}function xi(t,n){var i=t.callbackNode;qn(t,n);var f=la(t,t===as?ys:0);if(f===0)i!==null&&ur(i),t.callbackNode=null,t.callbackPriority=0;else if(n=f&-f,t.callbackPriority!==n){if(i!=null&&ur(i),n===1)t.tag===0?b(Ah.bind(null,t)):h(Ah.bind(null,t)),_c(function(){(Vn&6)===0&&k()}),i=null;else{switch(ca(f)){case 1:i=kr;break;case 4:i=Zr;break;case 16:i=Pa;break;case 536870912:i=os;break;default:i=Pa}i=Dh(i,kh.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function kh(t,n){if(xd=-1,yd=0,(Vn&6)!==0)throw Error(r(327));var i=t.callbackNode;if(hc()&&t.callbackNode!==i)return null;var f=la(t,t===as?ys:0);if(f===0)return null;if((f&30)!==0||(f&t.expiredLanes)!==0||n)n=vd(t,f);else{n=f;var y=Vn;Vn|=2;var S=Ph();(as!==t||ys!==n)&&(Xo=null,fc=Tn()+500,Bl(t,n));do try{Qg();break}catch(ue){Ch(t,ue)}while(!0);Rn(),fd.current=S,Vn=y,Ca!==null?n=0:(as=null,ys=0,n=za)}if(n!==0){if(n===2&&(y=Os(t),y!==0&&(f=y,n=Nu(t,y))),n===1)throw i=Tc,Bl(t,0),gl(t,f),xi(t,Tn()),i;if(n===6)gl(t,f);else{if(y=t.current.alternate,(f&30)===0&&!Jg(y)&&(n=vd(t,f),n===2&&(S=Os(t),S!==0&&(f=S,n=Nu(t,S))),n===1))throw i=Tc,Bl(t,0),gl(t,f),xi(t,Tn()),i;switch(t.finishedWork=y,t.finishedLanes=f,n){case 0:case 1:throw Error(r(345));case 2:zl(t,gi,Xo);break;case 3:if(gl(t,f),(f&130023424)===f&&(n=bu+500-Tn(),10<n)){if(la(t,0)!==0)break;if(y=t.suspendedLanes,(y&f)!==f){Zs(),t.pingedLanes|=t.suspendedLanes&y;break}t.timeoutHandle=Ll(zl.bind(null,t,gi,Xo),n);break}zl(t,gi,Xo);break;case 4:if(gl(t,f),(f&4194240)===f)break;for(n=t.eventTimes,y=-1;0<f;){var T=31-Fr(f);S=1<<T,T=n[T],T>y&&(y=T),f&=~S}if(f=y,f=Tn()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Gg(f/1960))-f,10<f){t.timeoutHandle=Ll(zl.bind(null,t,gi,Xo),f);break}zl(t,gi,Xo);break;case 5:zl(t,gi,Xo);break;default:throw Error(r(329))}}}return xi(t,Tn()),t.callbackNode===i?kh.bind(null,t):null}function Nu(t,n){var i=Oc;return t.current.memoizedState.isDehydrated&&(Bl(t,n).flags|=256),t=vd(t,n),t!==2&&(n=gi,gi=i,n!==null&&Su(n)),t}function Su(t){gi===null?gi=t:gi.push.apply(gi,t)}function Jg(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var f=0;f<i.length;f++){var y=i[f],S=y.getSnapshot;y=y.value;try{if(!Kn(S(),y))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function gl(t,n){for(n&=~vu,n&=~hd,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Fr(n),f=1<<i;t[i]=-1,n&=~f}}function Ah(t){if((Vn&6)!==0)throw Error(r(327));hc();var n=la(t,0);if((n&1)===0)return xi(t,Tn()),null;var i=vd(t,n);if(t.tag!==0&&i===2){var f=Os(t);f!==0&&(n=f,i=Nu(t,f))}if(i===1)throw i=Tc,Bl(t,0),gl(t,n),xi(t,Tn()),i;if(i===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,zl(t,gi,Xo),xi(t,Tn()),null}function ku(t,n){var i=Vn;Vn|=1;try{return t(n)}finally{Vn=i,Vn===0&&(fc=Tn()+500,Jo&&k())}}function Ol(t){ml!==null&&ml.tag===0&&(Vn&6)===0&&hc();var n=Vn;Vn|=1;var i=Ji.transition,f=An;try{if(Ji.transition=null,An=1,t)return t()}finally{An=f,Ji.transition=i,Vn=n,(Vn&6)===0&&k()}}function Au(){Ei=uc.current,Un(uc)}function Bl(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Lc(i)),Ca!==null)for(i=Ca.return;i!==null;){var f=i;switch(De(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ll();break;case 3:mi(),Un(ns),Un(pa),Ec();break;case 5:mr(f);break;case 4:mi();break;case 13:Un(Nn);break;case 19:Un(Nn);break;case 10:Qn(f.type._context);break;case 22:case 23:Au()}i=i.return}if(as=t,Ca=t=xl(t.current,null),ys=Ei=n,za=0,Tc=null,vu=hd=Tl=0,gi=Oc=null,l!==null){for(n=0;n<l.length;n++)if(i=l[n],f=i.interleaved,f!==null){i.interleaved=null;var y=f.next,S=i.pending;if(S!==null){var T=S.next;S.next=y,f.next=T}i.pending=f}l=null}return t}function Ch(t,n){do{var i=Ca;try{if(Rn(),ec.current=id,cl){for(var f=Nr.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}cl=!1}if(Yi=0,Kr=sa=Nr=null,ho=!1,dl=0,yu.current=null,i===null||i.return===null){za=1,Tc=n,Ca=null;break}e:{var S=t,T=i.return,ue=i,Ne=n;if(n=ys,ue.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var He=Ne,lt=ue,dt=lt.tag;if((lt.mode&1)===0&&(dt===0||dt===11||dt===15)){var it=lt.alternate;it?(lt.updateQueue=it.updateQueue,lt.memoizedState=it.memoizedState,lt.lanes=it.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var Ct=Xf(T);if(Ct!==null){Ct.flags&=-257,Zf(Ct,T,ue,S,n),Ct.mode&1&&Qf(S,He,n),n=Ct,Ne=He;var Rt=n.updateQueue;if(Rt===null){var $t=new Set;$t.add(Ne),n.updateQueue=$t}else Rt.add(Ne);break e}else{if((n&1)===0){Qf(S,He,n),Cu();break e}Ne=Error(r(426))}}else if(tt&&ue.mode&1){var ya=Xf(T);if(ya!==null){(ya.flags&65536)===0&&(ya.flags|=256),Zf(ya,T,ue,S,n),gt(cc(Ne,ue));break e}}S=Ne=cc(Ne,ue),za!==4&&(za=2),Oc===null?Oc=[S]:Oc.push(S),S=T;do{switch(S.tag){case 3:S.flags|=65536,n&=-n,S.lanes|=n;var ze=Jf(S,Ne,n);Xe(S,ze);break e;case 1:ue=Ne;var Le=S.type,$e=S.stateNode;if((S.flags&128)===0&&(typeof Le.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(hl===null||!hl.has($e)))){S.flags|=65536,n&=-n,S.lanes|=n;var pt=Kf(S,ue,n);Xe(S,pt);break e}}S=S.return}while(S!==null)}_h(i)}catch(Vt){n=Vt,Ca===i&&i!==null&&(Ca=i=i.return);continue}break}while(!0)}function Ph(){var t=fd.current;return fd.current=id,t===null?id:t}function Cu(){(za===0||za===3||za===2)&&(za=4),as===null||(Tl&268435455)===0&&(hd&268435455)===0||gl(as,ys)}function vd(t,n){var i=Vn;Vn|=2;var f=Ph();(as!==t||ys!==n)&&(Xo=null,Bl(t,n));do try{Kg();break}catch(y){Ch(t,y)}while(!0);if(Rn(),Vn=i,fd.current=f,Ca!==null)throw Error(r(261));return as=null,ys=0,za}function Kg(){for(;Ca!==null;)Lh(Ca)}function Qg(){for(;Ca!==null&&!$r();)Lh(Ca)}function Lh(t){var n=Mh(t.alternate,t,Ei);t.memoizedProps=t.pendingProps,n===null?_h(t):Ca=n,yu.current=null}function _h(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=$g(i,n,Ei),i!==null){Ca=i;return}}else{if(i=Wg(i,n),i!==null){i.flags&=32767,Ca=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{za=6,Ca=null;return}}if(n=n.sibling,n!==null){Ca=n;return}Ca=n=t}while(n!==null);za===0&&(za=5)}function zl(t,n,i){var f=An,y=Ji.transition;try{Ji.transition=null,An=1,Xg(t,n,i,f)}finally{Ji.transition=y,An=f}return null}function Xg(t,n,i,f){do hc();while(ml!==null);if((Vn&6)!==0)throw Error(r(327));i=t.finishedWork;var y=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var S=i.lanes|i.childLanes;if(ds(t,S),t===as&&(Ca=as=null,ys=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||pd||(pd=!0,Dh(Pa,function(){return hc(),null})),S=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||S){S=Ji.transition,Ji.transition=null;var T=An;An=1;var ue=Vn;Vn|=4,yu.current=null,Hg(t,i),bh(i,t),Ao(lo),Wr=!!Yo,lo=Yo=null,t.current=i,Yg(i),Cl(),Vn=ue,An=T,Ji.transition=S}else t.current=i;if(pd&&(pd=!1,ml=t,gd=y),S=t.pendingLanes,S===0&&(hl=null),Rs(i.stateNode),xi(t,Tn()),n!==null)for(f=t.onRecoverableError,i=0;i<n.length;i++)y=n[i],f(y.value,{componentStack:y.stack,digest:y.digest});if(md)throw md=!1,t=wu,wu=null,t;return(gd&1)!==0&&t.tag!==0&&hc(),S=t.pendingLanes,(S&1)!==0?t===ju?Bc++:(Bc=0,ju=t):Bc=0,k(),null}function hc(){if(ml!==null){var t=ca(gd),n=Ji.transition,i=An;try{if(Ji.transition=null,An=16>t?16:t,ml===null)var f=!1;else{if(t=ml,ml=null,gd=0,(Vn&6)!==0)throw Error(r(331));var y=Vn;for(Vn|=4,Et=t.current;Et!==null;){var S=Et,T=S.child;if((Et.flags&16)!==0){var ue=S.deletions;if(ue!==null){for(var Ne=0;Ne<ue.length;Ne++){var He=ue[Ne];for(Et=He;Et!==null;){var lt=Et;switch(lt.tag){case 0:case 11:case 15:Rc(8,lt,S)}var dt=lt.child;if(dt!==null)dt.return=lt,Et=dt;else for(;Et!==null;){lt=Et;var it=lt.sibling,Ct=lt.return;if(ph(lt),lt===He){Et=null;break}if(it!==null){it.return=Ct,Et=it;break}Et=Ct}}}var Rt=S.alternate;if(Rt!==null){var $t=Rt.child;if($t!==null){Rt.child=null;do{var ya=$t.sibling;$t.sibling=null,$t=ya}while($t!==null)}}Et=S}}if((S.subtreeFlags&2064)!==0&&T!==null)T.return=S,Et=T;else e:for(;Et!==null;){if(S=Et,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Rc(9,S,S.return)}var ze=S.sibling;if(ze!==null){ze.return=S.return,Et=ze;break e}Et=S.return}}var Le=t.current;for(Et=Le;Et!==null;){T=Et;var $e=T.child;if((T.subtreeFlags&2064)!==0&&$e!==null)$e.return=T,Et=$e;else e:for(T=Le;Et!==null;){if(ue=Et,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:ud(9,ue)}}catch(Vt){ia(ue,ue.return,Vt)}if(ue===T){Et=null;break e}var pt=ue.sibling;if(pt!==null){pt.return=ue.return,Et=pt;break e}Et=ue.return}}if(Vn=y,k(),La&&typeof La.onPostCommitFiberRoot=="function")try{La.onPostCommitFiberRoot(ls,t)}catch{}f=!0}return f}finally{An=i,Ji.transition=n}}return!1}function Ih(t,n,i){n=cc(i,n),n=Jf(t,n,1),t=be(t,n,1),n=Zs(),t!==null&&(Rr(t,1,n),xi(t,n))}function ia(t,n,i){if(t.tag===3)Ih(t,t,i);else for(;n!==null;){if(n.tag===3){Ih(n,t,i);break}else if(n.tag===1){var f=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(hl===null||!hl.has(f))){t=cc(i,t),t=Kf(n,t,1),n=be(n,t,1),t=Zs(),n!==null&&(Rr(n,1,t),xi(n,t));break}}n=n.return}}function Zg(t,n,i){var f=t.pingCache;f!==null&&f.delete(n),n=Zs(),t.pingedLanes|=t.suspendedLanes&i,as===t&&(ys&i)===i&&(za===4||za===3&&(ys&130023424)===ys&&500>Tn()-bu?Bl(t,0):vu|=i),xi(t,n)}function Eh(t,n){n===0&&((t.mode&1)===0?n=1:(n=yr,yr<<=1,(yr&130023424)===0&&(yr=4194304)));var i=Zs();t=P(t,n),t!==null&&(Rr(t,n,i),xi(t,i))}function e0(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),Eh(t,i)}function t0(t,n){var i=0;switch(t.tag){case 13:var f=t.stateNode,y=t.memoizedState;y!==null&&(i=y.retryLane);break;case 19:f=t.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(n),Eh(t,i)}var Mh;Mh=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||ns.current)pi=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return pi=!1,qg(t,n,i);pi=(t.flags&131072)!==0}else pi=!1,tt&&(n.flags&1048576)!==0&&Re(n,V,n.index);switch(n.lanes=0,n.tag){case 2:var f=n.type;cd(t,n),t=n.pendingProps;var y=uo(n,pa.current);er(n,i),y=Dl(null,n,f,t,y,i);var S=Gi();return n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,rs(f)?(S=!0,fo(n)):S=!1,n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,U(n),y.updater=od,n.stateNode=y,y._reactInternals=n,au(n,f,t,i),n=lu(null,n,f,!0,S,i)):(n.tag=0,tt&&S&&Q(n),Xs(null,n,y,i),n=n.child),n;case 16:f=n.elementType;e:{switch(cd(t,n),t=n.pendingProps,y=f._init,f=y(f._payload),n.type=f,y=n.tag=r0(f),t=po(f,t),y){case 0:n=ou(null,n,f,t,i);break e;case 1:n=sh(null,n,f,t,i);break e;case 11:n=eh(null,n,f,t,i);break e;case 14:n=th(null,n,f,po(f.type,t),i);break e}throw Error(r(306,f,""))}return n;case 0:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:po(f,y),ou(t,n,f,y,i);case 1:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:po(f,y),sh(t,n,f,y,i);case 3:e:{if(ih(n),t===null)throw Error(r(387));f=n.pendingProps,S=n.memoizedState,y=S.element,W(t,n),Nt(n,f,null,i);var T=n.memoizedState;if(f=T.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){y=cc(Error(r(423)),n),n=oh(t,n,f,i,y);break e}else if(f!==y){y=cc(Error(r(424)),n),n=oh(t,n,f,i,y);break e}else for(Ke=lr(n.stateNode.containerInfo.firstChild),Ge=n,tt=!0,rt=null,i=hr(n,null,f,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(At(),f===y){n=Qo(t,n,i);break e}Xs(t,n,f,i)}n=n.child}return n;case 5:return Dt(n),t===null&&It(n),f=n.type,y=n.pendingProps,S=t!==null?t.memoizedProps:null,T=y.children,Eo(f,y)?T=null:S!==null&&Eo(f,S)&&(n.flags|=32),ah(t,n),Xs(t,n,T,i),n.child;case 6:return t===null&&It(n),null;case 13:return lh(t,n,i);case 4:return Do(n,n.stateNode.containerInfo),f=n.pendingProps,t===null?n.child=Ir(n,null,f,i):Xs(t,n,f,i),n.child;case 11:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:po(f,y),eh(t,n,f,y,i);case 7:return Xs(t,n,n.pendingProps,i),n.child;case 8:return Xs(t,n,n.pendingProps.children,i),n.child;case 12:return Xs(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(f=n.type._context,y=n.pendingProps,S=n.memoizedProps,T=y.value,Wn(zr,f._currentValue),f._currentValue=T,S!==null)if(Kn(S.value,T)){if(S.children===y.children&&!ns.current){n=Qo(t,n,i);break e}}else for(S=n.child,S!==null&&(S.return=n);S!==null;){var ue=S.dependencies;if(ue!==null){T=S.child;for(var Ne=ue.firstContext;Ne!==null;){if(Ne.context===f){if(S.tag===1){Ne=ve(-1,i&-i),Ne.tag=2;var He=S.updateQueue;if(He!==null){He=He.shared;var lt=He.pending;lt===null?Ne.next=Ne:(Ne.next=lt.next,lt.next=Ne),He.pending=Ne}}S.lanes|=i,Ne=S.alternate,Ne!==null&&(Ne.lanes|=i),wn(S.return,i,n),ue.lanes|=i;break}Ne=Ne.next}}else if(S.tag===10)T=S.type===n.type?null:S.child;else if(S.tag===18){if(T=S.return,T===null)throw Error(r(341));T.lanes|=i,ue=T.alternate,ue!==null&&(ue.lanes|=i),wn(T,i,n),T=S.sibling}else T=S.child;if(T!==null)T.return=S;else for(T=S;T!==null;){if(T===n){T=null;break}if(S=T.sibling,S!==null){S.return=T.return,T=S;break}T=T.return}S=T}Xs(t,n,y.children,i),n=n.child}return n;case 9:return y=n.type,f=n.pendingProps.children,er(n,i),y=jr(y),f=f(y),n.flags|=1,Xs(t,n,f,i),n.child;case 14:return f=n.type,y=po(f,n.pendingProps),y=po(f.type,y),th(t,n,f,y,i);case 15:return nh(t,n,n.type,n.pendingProps,i);case 17:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:po(f,y),cd(t,n),n.tag=1,rs(f)?(t=!0,fo(n)):t=!1,er(n,i),Yf(n,f,y),au(n,f,y,i),lu(null,n,f,!0,t,i);case 19:return dh(t,n,i);case 22:return rh(t,n,i)}throw Error(r(156,n.tag))};function Dh(t,n){return xr(t,n)}function n0(t,n,i,f){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(t,n,i,f){return new n0(t,n,i,f)}function Pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r0(t){if(typeof t=="function")return Pu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H)return 11;if(t===ke)return 14}return 2}function xl(t,n){var i=t.alternate;return i===null?(i=Ki(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function bd(t,n,i,f,y,S){var T=2;if(f=t,typeof t=="function")Pu(t)&&(T=1);else if(typeof t=="string")T=5;else e:switch(t){case Be:return Ul(i.children,y,S,n);case ge:T=8,y|=8;break;case te:return t=Ki(12,i,n,y|2),t.elementType=te,t.lanes=S,t;case de:return t=Ki(13,i,n,y),t.elementType=de,t.lanes=S,t;case ie:return t=Ki(19,i,n,y),t.elementType=ie,t.lanes=S,t;case Ee:return wd(i,y,S,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ye:T=10;break e;case z:T=9;break e;case H:T=11;break e;case ke:T=14;break e;case Me:T=16,f=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=Ki(T,i,n,y),n.elementType=t,n.type=f,n.lanes=S,n}function Ul(t,n,i,f){return t=Ki(7,t,f,n),t.lanes=i,t}function wd(t,n,i,f){return t=Ki(22,t,f,n),t.elementType=Ee,t.lanes=i,t.stateNode={isHidden:!1},t}function Lu(t,n,i){return t=Ki(6,t,null,n),t.lanes=i,t}function _u(t,n,i){return n=Ki(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function a0(t,n,i,f,y){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Iu(t,n,i,f,y,S,T,ue,Ne){return t=new a0(t,n,i,ue,Ne),n===1?(n=1,S===!0&&(n|=8)):n=0,S=Ki(3,null,null,n),t.current=S,S.stateNode=t,S.memoizedState={element:f,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},U(S),t}function s0(t,n,i){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:f==null?null:""+f,children:t,containerInfo:n,implementation:i}}function Fh(t){if(!t)return Hi;t=t._reactInternals;e:{if(qr(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(rs(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var i=t.type;if(rs(i))return El(t,i,n)}return n}function Rh(t,n,i,f,y,S,T,ue,Ne){return t=Iu(i,f,!0,t,y,S,T,ue,Ne),t.context=Fh(null),i=t.current,f=Zs(),y=pl(i),S=ve(f,y),S.callback=n??null,be(i,S,y),t.current.lanes=y,Rr(t,y,f),xi(t,f),t}function jd(t,n,i,f){var y=n.current,S=Zs(),T=pl(y);return i=Fh(i),n.context===null?n.context=i:n.pendingContext=i,n=ve(S,T),n.payload={element:t},f=f===void 0?null:f,f!==null&&(n.callback=f),t=be(y,n,T),t!==null&&(yo(t,y,T,S),Je(t,y,T)),T}function Nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Th(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function Eu(t,n){Th(t,n),(t=t.alternate)&&Th(t,n)}function i0(){return null}var Oh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mu(t){this._internalRoot=t}Sd.prototype.render=Mu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));jd(t,n,null,null)},Sd.prototype.unmount=Mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ol(function(){jd(null,t,null,null)}),n[Aa]=null}};function Sd(t){this._internalRoot=t}Sd.prototype.unstable_scheduleHydration=function(t){if(t){var n=sr();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Va.length&&n!==0&&n<Va[i].priority;i++);Va.splice(i,0,t),i===0&&qo(t)}};function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function o0(t,n,i,f,y){if(y){if(typeof f=="function"){var S=f;f=function(){var He=Nd(T);S.call(He)}}var T=Rh(n,f,t,0,null,!1,!1,"",Bh);return t._reactRootContainer=T,t[Aa]=T.current,Mn(t.nodeType===8?t.parentNode:t),Ol(),T}for(;y=t.lastChild;)t.removeChild(y);if(typeof f=="function"){var ue=f;f=function(){var He=Nd(Ne);ue.call(He)}}var Ne=Iu(t,0,!1,null,null,!1,!1,"",Bh);return t._reactRootContainer=Ne,t[Aa]=Ne.current,Mn(t.nodeType===8?t.parentNode:t),Ol(function(){jd(n,Ne,i,f)}),Ne}function Ad(t,n,i,f,y){var S=i._reactRootContainer;if(S){var T=S;if(typeof y=="function"){var ue=y;y=function(){var Ne=Nd(T);ue.call(Ne)}}jd(n,T,t,y)}else T=o0(i,n,t,y,f);return Nd(T)}ws=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Ts(n.pendingLanes);i!==0&&(_a(n,i|1),xi(n,Tn()),(Vn&6)===0&&(fc=Tn()+500,k()))}break;case 13:Ol(function(){var f=P(t,1);if(f!==null){var y=Zs();yo(f,t,1,y)}}),Eu(t,1)}},Wa=function(t){if(t.tag===13){var n=P(t,134217728);if(n!==null){var i=Zs();yo(n,t,134217728,i)}Eu(t,134217728)}},Ia=function(t){if(t.tag===13){var n=pl(t),i=P(t,n);if(i!==null){var f=Zs();yo(i,t,n,f)}Eu(t,n)}},sr=function(){return An},us=function(t,n){var i=An;try{return An=t,n()}finally{An=i}},Qt=function(t,n,i){switch(n){case"input":if(xt(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var f=i[n];if(f!==t&&f.form===t.form){var y=Go(f);if(!y)throw Error(r(90));Qe(f),xt(f,y)}}}break;case"textarea":pn(t,i);break;case"select":n=i.value,n!=null&&yt(t,!!i.multiple,n,!1)}},Xn=ku,Xr=Ol;var l0={usingClientEntryPoint:!1,Events:[co,Lr,Go,wt,Qr,ku]},zc={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vs(t),t===null?null:t.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{ls=Cd.inject(c0),La=Cd}catch{}}return yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0,yi.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Du(n))throw Error(r(200));return s0(t,n,null,i)},yi.createRoot=function(t,n){if(!Du(t))throw Error(r(299));var i=!1,f="",y=Oh;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=Iu(t,1,!1,null,null,i,!1,f,y),t[Aa]=n.current,Mn(t.nodeType===8?t.parentNode:t),new Mu(n)},yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=vs(n),t=t===null?null:t.stateNode,t},yi.flushSync=function(t){return Ol(t)},yi.hydrate=function(t,n,i){if(!kd(n))throw Error(r(200));return Ad(null,t,n,!0,i)},yi.hydrateRoot=function(t,n,i){if(!Du(t))throw Error(r(405));var f=i!=null&&i.hydratedSources||null,y=!1,S="",T=Oh;if(i!=null&&(i.unstable_strictMode===!0&&(y=!0),i.identifierPrefix!==void 0&&(S=i.identifierPrefix),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),n=Rh(n,null,t,1,i??null,y,!1,S,T),t[Aa]=n.current,Mn(t),f)for(t=0;t<f.length;t++)i=f[t],y=i._getVersion,y=y(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,y]:n.mutableSourceEagerHydrationData.push(i,y);return new Sd(n)},yi.render=function(t,n,i){if(!kd(n))throw Error(r(200));return Ad(null,t,n,!1,i)},yi.unmountComponentAtNode=function(t){if(!kd(t))throw Error(r(40));return t._reactRootContainer?(Ol(function(){Ad(null,null,t,!1,function(){t._reactRootContainer=null,t[Aa]=null})}),!0):!1},yi.unstable_batchedUpdates=ku,yi.unstable_renderSubtreeIntoContainer=function(t,n,i,f){if(!kd(i))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Ad(t,n,i,!1,f)},yi.version="18.3.1-next-f1338f8080-20240426",yi}var Yh;function Cp(){if(Yh)return Tu.exports;Yh=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Tu.exports=y0(),Tu.exports}var Gh;function v0(){if(Gh)return Pd;Gh=1;var s=Cp();return Pd.createRoot=s.createRoot,Pd.hydrateRoot=s.hydrateRoot,Pd}var b0=v0();const w0=Ap(b0);Cp();function Yc(){return Yc=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},Yc.apply(this,arguments)}var wl;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(wl||(wl={}));const Jh="popstate";function j0(s){s===void 0&&(s={});function a(o,d){let{pathname:c,search:p,hash:m}=o.location;return uf("",{pathname:c,search:p,hash:m},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(o,d){return typeof d=="string"?d:Vd(d)}return S0(a,r,null,s)}function ja(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function Pf(s,a){if(!s){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function N0(){return Math.random().toString(36).substr(2,8)}function Kh(s,a){return{usr:s.state,key:s.key,idx:a}}function uf(s,a,r,o){return r===void 0&&(r=null),Yc({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof a=="string"?kc(a):a,{state:r,key:a&&a.key||o||N0()})}function Vd(s){let{pathname:a="/",search:r="",hash:o=""}=s;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(a+=o.charAt(0)==="#"?o:"#"+o),a}function kc(s){let a={};if(s){let r=s.indexOf("#");r>=0&&(a.hash=s.substr(r),s=s.substr(0,r));let o=s.indexOf("?");o>=0&&(a.search=s.substr(o),s=s.substr(0,o)),s&&(a.pathname=s)}return a}function S0(s,a,r,o){o===void 0&&(o={});let{window:d=document.defaultView,v5Compat:c=!1}=o,p=d.history,m=wl.Pop,g=null,v=j();v==null&&(v=0,p.replaceState(Yc({},p.state,{idx:v}),""));function j(){return(p.state||{idx:null}).idx}function A(){m=wl.Pop;let D=j(),_=D==null?null:D-v;v=D,g&&g({action:m,location:F.location,delta:_})}function R(D,_){m=wl.Push;let Y=uf(F.location,D,_);v=j()+1;let ee=Kh(Y,v),G=F.createHref(Y);try{p.pushState(ee,"",G)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;d.location.assign(G)}c&&g&&g({action:m,location:F.location,delta:1})}function w(D,_){m=wl.Replace;let Y=uf(F.location,D,_);v=j();let ee=Kh(Y,v),G=F.createHref(Y);p.replaceState(ee,"",G),c&&g&&g({action:m,location:F.location,delta:0})}function $(D){let _=d.location.origin!=="null"?d.location.origin:d.location.href,Y=typeof D=="string"?D:Vd(D);return Y=Y.replace(/ $/,"%20"),ja(_,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,_)}let F={get action(){return m},get location(){return s(d,p)},listen(D){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(Jh,A),g=D,()=>{d.removeEventListener(Jh,A),g=null}},createHref(D){return a(d,D)},createURL:$,encodeLocation(D){let _=$(D);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:R,replace:w,go(D){return p.go(D)}};return F}var Qh;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Qh||(Qh={}));function k0(s,a,r){return r===void 0&&(r="/"),A0(s,a,r)}function A0(s,a,r,o){let d=typeof a=="string"?kc(a):a,c=Lf(d.pathname||"/",r);if(c==null)return null;let p=Pp(s);C0(p);let m=null;for(let g=0;m==null&&g<p.length;++g){let v=B0(c);m=R0(p[g],v)}return m}function Pp(s,a,r,o){a===void 0&&(a=[]),r===void 0&&(r=[]),o===void 0&&(o="");let d=(c,p,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:p,route:c};g.relativePath.startsWith("/")&&(ja(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let v=Nl([o,g.relativePath]),j=r.concat(g);c.children&&c.children.length>0&&(ja(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Pp(c.children,a,j,v)),!(c.path==null&&!c.index)&&a.push({path:v,score:D0(v,c.index),routesMeta:j})};return s.forEach((c,p)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))d(c,p);else for(let g of Lp(c.path))d(c,p,g)}),a}function Lp(s){let a=s.split("/");if(a.length===0)return[];let[r,...o]=a,d=r.endsWith("?"),c=r.replace(/\?$/,"");if(o.length===0)return d?[c,""]:[c];let p=Lp(o.join("/")),m=[];return m.push(...p.map(g=>g===""?c:[c,g].join("/"))),d&&m.push(...p),m.map(g=>s.startsWith("/")&&g===""?"/":g)}function C0(s){s.sort((a,r)=>a.score!==r.score?r.score-a.score:F0(a.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const P0=/^:[\w-]+$/,L0=3,_0=2,I0=1,E0=10,M0=-2,Xh=s=>s==="*";function D0(s,a){let r=s.split("/"),o=r.length;return r.some(Xh)&&(o+=M0),a&&(o+=_0),r.filter(d=>!Xh(d)).reduce((d,c)=>d+(P0.test(c)?L0:c===""?I0:E0),o)}function F0(s,a){return s.length===a.length&&s.slice(0,-1).every((o,d)=>o===a[d])?s[s.length-1]-a[a.length-1]:0}function R0(s,a,r){let{routesMeta:o}=s,d={},c="/",p=[];for(let m=0;m<o.length;++m){let g=o[m],v=m===o.length-1,j=c==="/"?a:a.slice(c.length)||"/",A=T0({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},j),R=g.route;if(!A)return null;Object.assign(d,A.params),p.push({params:d,pathname:Nl([c,A.pathname]),pathnameBase:W0(Nl([c,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(c=Nl([c,A.pathnameBase]))}return p}function T0(s,a){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,o]=O0(s.path,s.caseSensitive,s.end),d=a.match(r);if(!d)return null;let c=d[0],p=c.replace(/(.)\/+$/,"$1"),m=d.slice(1);return{params:o.reduce((v,j,A)=>{let{paramName:R,isOptional:w}=j;if(R==="*"){let F=m[A]||"";p=c.slice(0,c.length-F.length).replace(/(.)\/+$/,"$1")}const $=m[A];return w&&!$?v[R]=void 0:v[R]=($||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:p,pattern:s}}function O0(s,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),Pf(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let o=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,m,g)=>(o.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(o.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,a?void 0:"i"),o]}function B0(s){try{return s.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Pf(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),s}}function Lf(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,o=s.charAt(r);return o&&o!=="/"?null:s.slice(r)||"/"}const z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U0=s=>z0.test(s);function q0(s,a){a===void 0&&(a="/");let{pathname:r,search:o="",hash:d=""}=typeof s=="string"?kc(s):s,c;if(r)if(U0(r))c=r;else{if(r.includes("//")){let p=r;r=r.replace(/\/\/+/g,"/"),Pf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(p+" -> "+r))}r.startsWith("/")?c=Zh(r.substring(1),"/"):c=Zh(r,a)}else c=a;return{pathname:c,search:V0(o),hash:H0(d)}}function Zh(s,a){let r=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?r.length>1&&r.pop():d!=="."&&r.push(d)}),r.length>1?r.join("/"):"/"}function zu(s,a,r,o){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $0(s){return s.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function _f(s,a){let r=$0(s);return a?r.map((o,d)=>d===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function If(s,a,r,o){o===void 0&&(o=!1);let d;typeof s=="string"?d=kc(s):(d=Yc({},s),ja(!d.pathname||!d.pathname.includes("?"),zu("?","pathname","search",d)),ja(!d.pathname||!d.pathname.includes("#"),zu("#","pathname","hash",d)),ja(!d.search||!d.search.includes("#"),zu("#","search","hash",d)));let c=s===""||d.pathname==="",p=c?"/":d.pathname,m;if(p==null)m=r;else{let A=a.length-1;if(!o&&p.startsWith("..")){let R=p.split("/");for(;R[0]==="..";)R.shift(),A-=1;d.pathname=R.join("/")}m=A>=0?a[A]:"/"}let g=q0(d,m),v=p&&p!=="/"&&p.endsWith("/"),j=(c||p===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(v||j)&&(g.pathname+="/"),g}const Nl=s=>s.join("/").replace(/\/\/+/g,"/"),W0=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),V0=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,H0=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Y0(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const _p=["post","put","patch","delete"];new Set(_p);const G0=["get",..._p];new Set(G0);function Gc(){return Gc=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},Gc.apply(this,arguments)}const Ef=q.createContext(null),J0=q.createContext(null),kl=q.createContext(null),Qd=q.createContext(null),Al=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Ip=q.createContext(null);function K0(s,a){let{relative:r}=a===void 0?{}:a;Ac()||ja(!1);let{basename:o,navigator:d}=q.useContext(kl),{hash:c,pathname:p,search:m}=Mp(s,{relative:r}),g=p;return o!=="/"&&(g=p==="/"?o:Nl([o,p])),d.createHref({pathname:g,search:m,hash:c})}function Ac(){return q.useContext(Qd)!=null}function Cc(){return Ac()||ja(!1),q.useContext(Qd).location}function Ep(s){q.useContext(kl).static||q.useLayoutEffect(s)}function wo(){let{isDataRoute:s}=q.useContext(Al);return s?c1():Q0()}function Q0(){Ac()||ja(!1);let s=q.useContext(Ef),{basename:a,future:r,navigator:o}=q.useContext(kl),{matches:d}=q.useContext(Al),{pathname:c}=Cc(),p=JSON.stringify(_f(d,r.v7_relativeSplatPath)),m=q.useRef(!1);return Ep(()=>{m.current=!0}),q.useCallback(function(v,j){if(j===void 0&&(j={}),!m.current)return;if(typeof v=="number"){o.go(v);return}let A=If(v,JSON.parse(p),c,j.relative==="path");s==null&&a!=="/"&&(A.pathname=A.pathname==="/"?a:Nl([a,A.pathname])),(j.replace?o.replace:o.push)(A,j.state,j)},[a,o,p,c,s])}function Mp(s,a){let{relative:r}=a===void 0?{}:a,{future:o}=q.useContext(kl),{matches:d}=q.useContext(Al),{pathname:c}=Cc(),p=JSON.stringify(_f(d,o.v7_relativeSplatPath));return q.useMemo(()=>If(s,JSON.parse(p),c,r==="path"),[s,p,c,r])}function X0(s,a){return Z0(s,a)}function Z0(s,a,r,o){Ac()||ja(!1);let{navigator:d}=q.useContext(kl),{matches:c}=q.useContext(Al),p=c[c.length-1],m=p?p.params:{};p&&p.pathname;let g=p?p.pathnameBase:"/";p&&p.route;let v=Cc(),j;if(a){var A;let D=typeof a=="string"?kc(a):a;g==="/"||(A=D.pathname)!=null&&A.startsWith(g)||ja(!1),j=D}else j=v;let R=j.pathname||"/",w=R;if(g!=="/"){let D=g.replace(/^\//,"").split("/");w="/"+R.replace(/^\//,"").split("/").slice(D.length).join("/")}let $=k0(s,{pathname:w}),F=a1($&&$.map(D=>Object.assign({},D,{params:Object.assign({},m,D.params),pathname:Nl([g,d.encodeLocation?d.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:Nl([g,d.encodeLocation?d.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),c,r,o);return a&&F?q.createElement(Qd.Provider,{value:{location:Gc({pathname:"/",search:"",hash:"",state:null,key:"default"},j),navigationType:wl.Pop}},F):F}function e1(){let s=l1(),a=Y0(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},a),r?q.createElement("pre",{style:d},r):null,null)}const t1=q.createElement(e1,null);class n1 extends q.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?q.createElement(Al.Provider,{value:this.props.routeContext},q.createElement(Ip.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function r1(s){let{routeContext:a,match:r,children:o}=s,d=q.useContext(Ef);return d&&d.static&&d.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=r.route.id),q.createElement(Al.Provider,{value:a},o)}function a1(s,a,r,o){var d;if(a===void 0&&(a=[]),r===void 0&&(r=null),o===void 0&&(o=null),s==null){var c;if(!r)return null;if(r.errors)s=r.matches;else if((c=o)!=null&&c.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let p=s,m=(d=r)==null?void 0:d.errors;if(m!=null){let j=p.findIndex(A=>A.route.id&&m?.[A.route.id]!==void 0);j>=0||ja(!1),p=p.slice(0,Math.min(p.length,j+1))}let g=!1,v=-1;if(r&&o&&o.v7_partialHydration)for(let j=0;j<p.length;j++){let A=p[j];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(v=j),A.route.id){let{loaderData:R,errors:w}=r,$=A.route.loader&&R[A.route.id]===void 0&&(!w||w[A.route.id]===void 0);if(A.route.lazy||$){g=!0,v>=0?p=p.slice(0,v+1):p=[p[0]];break}}}return p.reduceRight((j,A,R)=>{let w,$=!1,F=null,D=null;r&&(w=m&&A.route.id?m[A.route.id]:void 0,F=A.route.errorElement||t1,g&&(v<0&&R===0?(d1("route-fallback"),$=!0,D=null):v===R&&($=!0,D=A.route.hydrateFallbackElement||null)));let _=a.concat(p.slice(0,R+1)),Y=()=>{let ee;return w?ee=F:$?ee=D:A.route.Component?ee=q.createElement(A.route.Component,null):A.route.element?ee=A.route.element:ee=j,q.createElement(r1,{match:A,routeContext:{outlet:j,matches:_,isDataRoute:r!=null},children:ee})};return r&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?q.createElement(n1,{location:r.location,revalidation:r.revalidation,component:F,error:w,children:Y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):Y()},null)}var Dp=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(Dp||{}),Fp=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(Fp||{});function s1(s){let a=q.useContext(Ef);return a||ja(!1),a}function i1(s){let a=q.useContext(J0);return a||ja(!1),a}function o1(s){let a=q.useContext(Al);return a||ja(!1),a}function Rp(s){let a=o1(),r=a.matches[a.matches.length-1];return r.route.id||ja(!1),r.route.id}function l1(){var s;let a=q.useContext(Ip),r=i1(),o=Rp();return a!==void 0?a:(s=r.errors)==null?void 0:s[o]}function c1(){let{router:s}=s1(Dp.UseNavigateStable),a=Rp(Fp.UseNavigateStable),r=q.useRef(!1);return Ep(()=>{r.current=!0}),q.useCallback(function(d,c){c===void 0&&(c={}),r.current&&(typeof d=="number"?s.navigate(d):s.navigate(d,Gc({fromRouteId:a},c)))},[s,a])}const em={};function d1(s,a,r){em[s]||(em[s]=!0)}function u1(s,a){s?.v7_startTransition,s?.v7_relativeSplatPath}function tm(s){let{to:a,replace:r,state:o,relative:d}=s;Ac()||ja(!1);let{future:c,static:p}=q.useContext(kl),{matches:m}=q.useContext(Al),{pathname:g}=Cc(),v=wo(),j=If(a,_f(m,c.v7_relativeSplatPath),g,d==="path"),A=JSON.stringify(j);return q.useEffect(()=>v(JSON.parse(A),{replace:r,state:o,relative:d}),[v,A,d,r,o]),null}function Oo(s){ja(!1)}function f1(s){let{basename:a="/",children:r=null,location:o,navigationType:d=wl.Pop,navigator:c,static:p=!1,future:m}=s;Ac()&&ja(!1);let g=a.replace(/^\/*/,"/"),v=q.useMemo(()=>({basename:g,navigator:c,static:p,future:Gc({v7_relativeSplatPath:!1},m)}),[g,m,c,p]);typeof o=="string"&&(o=kc(o));let{pathname:j="/",search:A="",hash:R="",state:w=null,key:$="default"}=o,F=q.useMemo(()=>{let D=Lf(j,g);return D==null?null:{location:{pathname:D,search:A,hash:R,state:w,key:$},navigationType:d}},[g,j,A,R,w,$,d]);return F==null?null:q.createElement(kl.Provider,{value:v},q.createElement(Qd.Provider,{children:r,value:F}))}function h1(s){let{children:a,location:r}=s;return X0(ff(a),r)}new Promise(()=>{});function ff(s,a){a===void 0&&(a=[]);let r=[];return q.Children.forEach(s,(o,d)=>{if(!q.isValidElement(o))return;let c=[...a,d];if(o.type===q.Fragment){r.push.apply(r,ff(o.props.children,c));return}o.type!==Oo&&ja(!1),!o.props.index||!o.props.children||ja(!1);let p={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=ff(o.props.children,c)),r.push(p)}),r}function hf(){return hf=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},hf.apply(this,arguments)}function m1(s,a){if(s==null)return{};var r={},o=Object.keys(s),d,c;for(c=0;c<o.length;c++)d=o[c],!(a.indexOf(d)>=0)&&(r[d]=s[d]);return r}function p1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function g1(s,a){return s.button===0&&(!a||a==="_self")&&!p1(s)}function mf(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((a,r)=>{let o=s[r];return a.concat(Array.isArray(o)?o.map(d=>[r,d]):[[r,o]])},[]))}function x1(s,a){let r=mf(s);return a&&a.forEach((o,d)=>{r.has(d)||a.getAll(d).forEach(c=>{r.append(d,c)})}),r}const y1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v1="6";try{window.__reactRouterVersion=v1}catch{}const b1="startTransition",nm=p0[b1];function w1(s){let{basename:a,children:r,future:o,window:d}=s,c=q.useRef();c.current==null&&(c.current=j0({window:d,v5Compat:!0}));let p=c.current,[m,g]=q.useState({action:p.action,location:p.location}),{v7_startTransition:v}=o||{},j=q.useCallback(A=>{v&&nm?nm(()=>g(A)):g(A)},[g,v]);return q.useLayoutEffect(()=>p.listen(j),[p,j]),q.useEffect(()=>u1(o),[o]),q.createElement(f1,{basename:a,children:r,location:m.location,navigationType:m.action,navigator:p,future:o})}const j1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xc=q.forwardRef(function(a,r){let{onClick:o,relative:d,reloadDocument:c,replace:p,state:m,target:g,to:v,preventScrollReset:j,viewTransition:A}=a,R=m1(a,y1),{basename:w}=q.useContext(kl),$,F=!1;if(typeof v=="string"&&N1.test(v)&&($=v,j1))try{let ee=new URL(window.location.href),G=v.startsWith("//")?new URL(ee.protocol+v):new URL(v),fe=Lf(G.pathname,w);G.origin===ee.origin&&fe!=null?v=fe+G.search+G.hash:F=!0}catch{}let D=K0(v,{relative:d}),_=S1(v,{replace:p,state:m,target:g,preventScrollReset:j,relative:d,viewTransition:A});function Y(ee){o&&o(ee),ee.defaultPrevented||_(ee)}return q.createElement("a",hf({},R,{href:$||D,onClick:F||c?o:Y,ref:r,target:g}))});var rm;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(rm||(rm={}));var am;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(am||(am={}));function S1(s,a){let{target:r,replace:o,state:d,preventScrollReset:c,relative:p,viewTransition:m}=a===void 0?{}:a,g=wo(),v=Cc(),j=Mp(s,{relative:p});return q.useCallback(A=>{if(g1(A,r)){A.preventDefault();let R=o!==void 0?o:Vd(v)===Vd(j);g(s,{replace:R,state:d,preventScrollReset:c,relative:p,viewTransition:m})}},[v,g,j,o,d,r,s,c,p,m])}function Tp(s){let a=q.useRef(mf(s)),r=q.useRef(!1),o=Cc(),d=q.useMemo(()=>x1(o.search,r.current?null:a.current),[o.search]),c=wo(),p=q.useCallback((m,g)=>{const v=mf(typeof m=="function"?m(d):m);r.current=!0,c("?"+v,g)},[c,d]);return[d,p]}function Hd({isOpen:s,message:a,type:r="success",onClose:o,title:d}){if(!s||!a)return null;const c=r==="success"?"success":"error",p=()=>{switch(c){case"success":return"fa-check-circle";case"error":return"fa-exclamation-circle";default:return"fa-exclamation-circle"}};return e.jsx("div",{className:"alert-modal-overlay",onClick:m=>{m.stopPropagation()},children:e.jsxs("div",{className:`alert-modal alert-modal--${c}`,onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"alert-modal-content",children:[e.jsxs("div",{className:"alert-modal-header",children:[e.jsx("div",{className:"alert-modal-icon",children:e.jsx("i",{className:`fas ${p()}`})}),d&&e.jsx("h3",{className:"alert-modal-title",children:d})]}),e.jsx("div",{className:"alert-modal-message",children:a})]}),e.jsx("div",{className:"alert-modal-divider"}),e.jsx("div",{className:"alert-modal-actions",children:e.jsx("button",{className:"primary-btn",onClick:o,children:"OK"})})]})})}function Yl({message:s,type:a="success",onClose:r,duration:o=3e3}){const[d,c]=q.useState(!1),[p,m]=q.useState(s),[g,v]=q.useState(a),j=q.useRef(null),A=q.useRef(null);if(q.useEffect(()=>{s&&(j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current),m(s),v(a),c(!1))},[s,a]),q.useEffect(()=>(j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current),p&&!d&&o>0&&(j.current=setTimeout(()=>{c(!0),A.current=setTimeout(()=>{r&&r(),m(null),c(!1)},350)},o)),()=>{j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current)}),[p,o,r,d]),!p)return null;const R=g==="success"?"success":"error";return e.jsx("div",{className:`notie notie--${R} ${d?"notie--exiting":""}`,children:e.jsx("div",{className:"notie-content",children:p})})}const sm={totalMembers:312,collectedMonth:12450,collectedYear:220800,outstanding:18400,overdueMembers:27,expectedAnnual:249600},im=[{member:"Fatima Hussain",period:"Oct 2025",amount:"$50",method:"PayMe",status:"Paid",date:"02 Oct  09:11"},{member:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",method:"FPS",status:"Paid",date:"05 Oct  10:22"},{member:"Aisha Malik",period:"Sep 2025",amount:"$100",method:"Card",status:"Unpaid",date:"30 Sep  12:44"},{member:"Omar Rahman",period:"Sep 2025",amount:"$100",method:"PayMe",status:"Overdue",date:"20 Sep  14:10"}],k1=[{id:"HK1001",name:"Shan Yeager",email:"0741sanjai@gmail.com",phone:"+852 9000 1234",status:"Active",balance:"$250 Outstanding",nextDue:"20 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1021",name:"Ahmed Al-Rashid",email:"ahmed.rashid@hk.org",phone:"+852 9123 4567",status:"Active",balance:"$150 Outstanding",nextDue:"05 Nov 2025",lastPayment:"05 Oct 2025"},{id:"HK1088",name:"Fatima Hussain",email:"fatima.hussain@hk.org",phone:"+852 6789 1234",status:"Active",balance:"$0",nextDue:"05 Nov 2025",lastPayment:"02 Oct 2025"},{id:"HK1104",name:"Omar Rahman",email:"omar.rahman@hk.org",phone:"+852 9555 2011",status:"Inactive",balance:"$250 Overdue",nextDue:"20 Sep 2025",lastPayment:"15 Jul 2025"},{id:"HK1112",name:"Aisha Malik",email:"aisha.malik@hk.org",phone:"+852 9988 7766",status:"Active",balance:"$100 Unpaid",nextDue:"30 Sep 2025",lastPayment:"05 Aug 2025"},{id:"HK1125",name:"Yusuf Ibrahim",email:"yusuf.ibrahim@hk.org",phone:"+852 9234 5678",status:"Active",balance:"$50 Outstanding",nextDue:"10 Nov 2025",lastPayment:"10 Oct 2025"},{id:"HK1136",name:"Mariam Abdullah",email:"mariam.abdullah@hk.org",phone:"+852 9345 6789",status:"Active",balance:"$0",nextDue:"15 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1147",name:"Hassan Al-Farsi",email:"hassan.farsi@hk.org",phone:"+852 9456 7890",status:"Active",balance:"$0",nextDue:"20 Nov 2025",lastPayment:"20 Oct 2025"},{id:"HK1158",name:"Zainab Mustafa",email:"zainab.mustafa@hk.org",phone:"+852 9567 8901",status:"Inactive",balance:"$200 Overdue",nextDue:"01 Oct 2025",lastPayment:"01 Aug 2025"}],A1=[{id:1,name:"Ibrahim Khan",role:"Owner",status:"Active"},{id:2,name:"Yasmin Ahmed",role:"Finance Admin",status:"Active"},{id:3,name:"Khalid Hassan",role:"Viewer",status:"Pending"}],C1=[{id:"INV-2025-095",memberId:"HK1001",memberName:"Shan Yeager",period:"Nov 2025 Monthly",amount:"$50",status:"Unpaid",due:"20 Nov 2025",method:"-",reference:"-"},{id:"INV-2025-094",memberId:"HK1001",memberName:"Shan Yeager",period:"Oct 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Oct 2025",method:"-",reference:"-"},{id:"INV-2025-093",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Eid 2",amount:"$100",status:"Overdue",due:"30 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-092",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-091",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",status:"Paid",due:"05 Oct 2025",method:"FPS",reference:"FP89231"},{id:"INV-2025-072",memberId:"HK1112",memberName:"Aisha Malik",period:"Sep 2025 (Eid)",amount:"$100",status:"Unpaid",due:"30 Sep 2025",method:"PayMe",reference:"PM22011"},{id:"INV-2025-051",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Aug 2025",amount:"$50",status:"Paid",due:"05 Aug 2025",method:"Bank Transfer",reference:"BT99127"}],om=[{date:"05 Oct 2025",amount:"$50",method:"FPS",reference:"FP89231"},{date:"05 Sep 2025",amount:"$50",method:"PayMe",reference:"PM22110"},{date:"02 Apr 2025",amount:"$100",method:"Bank Transfer",reference:"BT44881"}],lm=[{channel:"Email",message:"Upcoming due reminder",status:"Delivered",date:"02 Oct 2025"},{channel:"WhatsApp",message:"Overdue alert",status:"Pending",date:"01 Oct 2025"}],Uu=[{label:"3 days before due date",channels:["Email","WhatsApp"]},{label:"On due date",channels:["Email","WhatsApp"]},{label:"5 days after due date",channels:["Email"]}],cm=[{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Alipay",visible:!0,details:["Upload QR placeholder"]},{name:"PayMe",visible:!0,details:["Upload QR placeholder"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];function P1(s={}){const{nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}=s,[d,c]=q.useState(!1),p=q.useRef(r);p.current=r;const m=q.useRef(o);return m.current=o,q.useEffect(()=>{const g=document.createElement("script");return g.src="https://accounts.google.com/gsi/client",g.async=!0,g.defer=!0,g.nonce=a,g.onload=()=>{var v;c(!0),(v=p.current)===null||v===void 0||v.call(p)},g.onerror=()=>{var v;c(!1),(v=m.current)===null||v===void 0||v.call(m)},document.body.appendChild(g),()=>{document.body.removeChild(g)}},[a]),d}const L1=q.createContext(null);function _1({clientId:s,nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o,children:d}){const c=P1({nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}),p=q.useMemo(()=>({clientId:s,scriptLoadedSuccessfully:c}),[s,c]);return Cf.createElement(L1.Provider,{value:p},d)}function I1(){const[s,a]=q.useState(null),[r,o]=q.useState(null),[d,c]=q.useState({email:"",password:""}),[p,m]=q.useState(!1),[g,v]=q.useState({email:"",password:""}),[j,A]=q.useState(null),[R,w]=q.useState("error"),$=wo();q.useEffect(()=>{sessionStorage.getItem("logoutReason")==="inactivity"&&(sessionStorage.removeItem("logoutReason"),a({type:"error",text:"Session expired due to inactivity. Please login again."}))},[]),q.useEffect(()=>(document.body.classList.add("login-page-body"),()=>{document.body.classList.remove("login-page-body")}),[]);const F=ee=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee),D=()=>{const ee={email:"",password:""};return d.email.trim()?F(d.email.trim())?d.password?(v(ee),!0):(ee.password="Password is required",v(ee),A("Password is required"),w("error"),!1):(ee.email="Please enter a valid email address",v(ee),A("Please enter a valid email address"),w("error"),!1):(ee.email="Email is required",v(ee),A("Email is required"),w("error"),!1)},_=!1,Y=async ee=>{{if(r!==null||!D())return;o(ee),a(null),v({email:"",password:""}),A(null);try{const fe=await fetch("http://localhost:4000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email.trim(),password:d.password,role:ee})});let he;try{he=await fe.json()}catch(Be){console.error("JSON parse error:",Be),A("Invalid response from server. Please try again."),w("error"),o(null);return}if(!fe.ok||!he.success){he.locked?A(he.message||"Account temporarily locked due to multiple failed login attempts. Please try again later."):A(he.message||"Invalid email or password. Please check your credentials and try again."),w("error"),o(null);return}sessionStorage.setItem("authToken",he.token),he.role==="Admin"?(sessionStorage.setItem("adminEmail",he.email),sessionStorage.setItem("adminName",he.name),he.adminId&&sessionStorage.setItem("adminId",he.adminId),he.adminRole&&sessionStorage.setItem("adminRole",he.adminRole),he.organization_id&&sessionStorage.setItem("organization_id",he.organization_id),o(null),$("/admin",{replace:!0,state:{role:"Admin",token:he.token,email:he.email,name:he.name,adminId:he.adminId,adminRole:he.adminRole,organization_id:he.organization_id}})):(sessionStorage.setItem("memberEmail",he.email),sessionStorage.setItem("memberName",he.name),sessionStorage.setItem("memberId",he.memberId),o(null),$("/member",{replace:!0,state:{role:"Member",token:he.token,email:he.email,name:he.name,memberId:he.memberId,phone:he.phone}}))}catch(G){console.error("Login error:",G),A("Unable to connect. Please check your connection and try again."),w("error"),o(null)}}};return e.jsx(e.Fragment,{children:e.jsx("main",{className:"login-main login-page",children:e.jsxs("div",{className:"login-shell",children:[e.jsxs("aside",{className:"login-menu",children:[e.jsx("p",{className:"eyebrow light",children:"Welcome"}),e.jsx("h2",{children:"Subscription Manager HK"}),e.jsx("p",{children:"Streamlined portal for Hong Kong membership dues. Track monthly payments and automations from one place."}),e.jsxs("ul",{children:[e.jsx("li",{children:"Supports FPS, PayMe, bank transfers, cards"}),e.jsx("li",{children:"Automated reminders via email and WhatsApp"}),e.jsx("li",{children:"Clear dashboards for admins and members"})]})]}),e.jsxs("div",{className:"login-form-card",children:[e.jsx("div",{className:"login-form-card__header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fas fa-sign-in-alt login-title-icon"}),"Sign in"]})}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsx("input",{type:"text",inputMode:"email",value:d.email,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:ee=>ee.preventDefault(),onChange:ee=>{c({...d,email:ee.target.value}),g.email&&v({...g,email:""})},placeholder:"Enter your email address",className:`mono-input ${g.email?"input-error":""}`,disabled:r!==null})]}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock login-icon"}),"Password ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx("input",{type:p?"text":"password",value:d.password,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:ee=>ee.preventDefault(),onChange:ee=>{c({...d,password:ee.target.value}),g.password&&v({...g,password:""})},placeholder:"Enter your password",className:`mono-input login-input--with-icon ${g.password?"input-error":""}`,disabled:r!==null}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"login-password-toggle","aria-label":p?"Hide password":"Show password",disabled:r!==null,children:p?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),e.jsx("div",{className:"login-forgot-link",children:e.jsx(Xc,{to:"/forgot-password",onClick:ee=>{r!==null&&ee.preventDefault()},children:"Forgot Password?"})})]}),e.jsxs("div",{className:"login-hints",children:[e.jsxs("p",{className:"login-hints-title",children:[e.jsx("i",{className:"fas fa-info-circle login-icon"}),"Demo Credentials"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin:"})," owner1234@gmail.com / #owner1234"]}),_]}),e.jsxs("div",{className:"login-buttons",children:[e.jsx("button",{type:"button",className:`btn-admin login-btn-wrapper ${r!==null?"login-btn--loading":""}`,onClick:()=>Y("admin"),disabled:r!==null,children:r==="admin"?e.jsxs("span",{className:"login-btn-spinner",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Authorising"]}):"Login"}),_]}),_,e.jsx(Hd,{isOpen:!!s,message:s?.text,type:s?.type||"error",onClose:()=>a(null)}),e.jsx(Yl,{message:j,type:R,onClose:()=>A(null),duration:3e3})]})]})})})}function Zc({showCTA:s=!0,showLogout:a=!1,onLogout:r,showMobileMenu:o=!1,isMobileMenuOpen:d=!1,onMobileMenuToggle:c,isSticky:p=!1}){return e.jsxs("header",{className:`site-header ${p?"site-header--sticky":""}`,children:[o&&e.jsx("button",{className:"mobile-menu-toggle",onClick:m=>{m.stopPropagation(),c&&c()},"aria-label":"Toggle menu",type:"button",children:e.jsxs("span",{className:`hamburger ${d?"active":""}`,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})}),e.jsxs("div",{className:"brand",children:[e.jsx("span",{className:"logo-mark",children:"SM"}),e.jsxs("div",{children:[e.jsx("p",{className:"logo-title",children:"Subscription Manager HK"}),e.jsx("p",{className:"logo-subtitle",children:"Recurring payments for Hong Kong memberships"})]})]}),s&&e.jsx(Xc,{className:"primary-btn",to:"/login",children:"Launch Demo"}),a&&e.jsx("button",{onClick:r,className:"ghost-btn",children:"Logout"})]})}function ed(){return e.jsxs("footer",{className:"site-footer",children:[e.jsx("p",{children:" 2025 Subscription Manager HK  Built for recurring memberships in Hong Kong."}),e.jsx("p",{})]})}const qa={Paid:"badge badge-paid",Unpaid:"badge badge-unpaid",Overdue:"badge badge-overdue","Due Soon":"badge badge-unpaid","Pending Verification":"badge badge-pending",Active:"badge badge-active",Inactive:"badge badge-inactive",Delivered:"badge badge-paid",Pending:"badge badge-pending",Completed:"badge badge-paid",Rejected:"badge badge-overdue"};function Ua({columns:s,rows:a}){const[r,o]=q.useState(!1),[d,c]=q.useState(null),[p,m]=q.useState({column:null,direction:"asc"});q.useEffect(()=>{const D=()=>{o(window.innerWidth<=768)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),q.useEffect(()=>{const D=_=>{_.key==="Escape"&&d!==null&&c(null)};return d!==null?(document.addEventListener("keydown",D),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",D),document.body.style.overflow=""}},[d]);const g=(D,_)=>{const Y=["Name","Member Name","Member","User","Donor Name","Source"];for(const ee of Y)if(_.includes(ee)){const G=D[ee];if(G&&G!=="-"&&G!=="N/A"){if(typeof G=="object"&&G!==null&&G.render)continue;return G}}return null},v=(D,_)=>{if(!_.includes("Status"))return{status:null,borderClass:""};const Y=D.Status;let ee=null;if(typeof Y=="object"&&Y!==null&&Y.render){const he=Y.render();typeof he=="string"?ee=he:he?.props?.children&&(ee=he.props.children)}else Y&&(ee=Y);if(!ee||ee==="-"||ee==="N/A")return{status:null,borderClass:""};const G=ee.toLowerCase();let fe="mobile-card-border-default";return G.includes("active")||G.includes("paid")||G.includes("completed")?fe="mobile-card-border-success":G.includes("pending")?fe="mobile-card-border-warning":(G.includes("inactive")||G.includes("overdue")||G.includes("rejected"))&&(fe="mobile-card-border-danger"),{status:ee,borderClass:fe,statusValue:Y}},j=(D,_)=>{const Y=["Balance","Amount"];for(const ee of Y)if(_.includes(ee)){const G=D[ee];if(G&&G!=="-"&&G!=="N/A"&&G!=="$0"){if(typeof G=="object"&&G!==null&&G.render)continue;return{label:ee,value:G}}}return null},A=D=>{const _=["Amount","Balance","Outstanding","Total","Collected","Expected","Avg per Member","Transactions","Donation","Donations","Invoice #"];return D==="Status"||D==="Actions"?"center":_.includes(D)?"right":"left"},R=D=>{if(D==null)return"";if(typeof D=="number")return D;if(typeof D=="string"){const _=parseFloat(D.replace(/[^0-9.-]/g,"")||"NaN");return isNaN(_)?D.toLowerCase():_}return D},w=D=>{m(_=>_.column===D?{column:D,direction:_.direction==="asc"?"desc":"asc"}:{column:D,direction:"asc"})},$=q.useMemo(()=>{if(!p.column)return a;const D=p.column,_=p.direction==="asc"?1:-1;return[...a].sort((Y,ee)=>{const G=Y[D],fe=ee[D];if(typeof G=="object"&&G!==null&&G.render||typeof fe=="object"&&fe!==null&&fe.render)return 0;const he=R(G),Be=R(fe);return he<Be?-1*_:he>Be?1*_:0})},[a,p]),F=(D,_,Y,ee)=>{const G=g(D,Y),fe=j(D,Y);return Y.map(he=>{if(["Name","Member","User","Donor Name","Source"].includes(he)&&G)return null;const te=D[he];let ye;if(typeof te=="object"&&te!==null&&te.render?ye=te.render():ye=typeof te=="string"&&qa[te]&&he==="Status"?e.jsx("span",{className:qa[te],children:te}):te,!ye&&ye!==0&&ye!=="$0"||fe&&he===fe.label)return null;if(he==="Actions"){const de=D[he];if(typeof de=="object"&&de!==null&&de.render)return e.jsxs("div",{className:"mobile-card-modal-row mobile-card-modal-row-actions",onClick:ie=>{(ie.target.tagName==="BUTTON"||ie.target.closest("button"))&&setTimeout(()=>{ee()},150)},children:[e.jsx("div",{className:"mobile-card-modal-label",children:he}),e.jsx("div",{className:"mobile-card-modal-value",children:de.render()})]},`${he}-${_}`)}const H=(de=>({Email:"fa-envelope",WhatsApp:"fa-phone",Phone:"fa-phone",Balance:"fa-wallet",Amount:"fa-dollar-sign",Date:"fa-calendar","Due Date":"fa-calendar-alt",Period:"fa-calendar-week",Method:"fa-credit-card",Reference:"fa-hashtag",Status:"fa-info-circle",Type:"fa-tag",Details:"fa-file-alt",ID:"fa-id-card","Invoice #":"fa-file-invoice"})[de]||null)(he);return e.jsxs("div",{className:"mobile-card-modal-row",children:[e.jsxs("div",{className:"mobile-card-modal-label",children:[H&&e.jsx("i",{className:`fas ${H}`,style:{marginRight:"6px",color:"#5a31ea",fontSize:"0.75rem"}}),he]}),e.jsx("div",{className:"mobile-card-modal-value",children:ye})]},`${he}-${_}`)})};if(r){const D=d!==null?$[d]:null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mobile-table-cards",children:$.map((_,Y)=>{const ee=g(_,s)||"View Details",G=v(_,s),fe=j(_,s);return e.jsx("div",{className:`mobile-table-card ${G.borderClass}`,style:_._rowStyle||{},onClick:()=>c(Y),children:e.jsx("div",{className:"mobile-table-card-header",children:e.jsxs("div",{className:"mobile-table-card-header-content",children:[e.jsxs("div",{className:"mobile-table-card-title-section",children:[e.jsx("div",{className:"mobile-table-card-title",children:ee}),fe&&e.jsxs("div",{className:"mobile-table-card-metric",children:[fe.label==="Balance"&&e.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),fe.label==="Amount"&&e.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),e.jsx("span",{children:fe.value})]})]}),e.jsxs("div",{className:"mobile-table-card-header-right",children:[G.status&&e.jsx("div",{className:"mobile-table-card-status",children:typeof G.statusValue=="object"&&G.statusValue!==null&&G.statusValue.render?G.statusValue.render():e.jsx("span",{className:qa[G.status]||"badge",children:G.status})}),e.jsx("div",{className:"mobile-table-card-arrow",children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})})},`mobile-row-${Y}`)})}),d!==null&&D&&e.jsx("div",{className:"mobile-card-modal-overlay",onClick:()=>c(null),children:e.jsxs("div",{className:"mobile-card-modal",onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{className:"mobile-card-modal-header",children:[e.jsxs("div",{className:"mobile-card-modal-title-section",children:[e.jsx("div",{className:"mobile-card-modal-title",children:g(D,s)||"Details"}),j(D,s)&&e.jsxs("div",{className:"mobile-card-modal-metric",children:[j(D,s).label==="Balance"&&e.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),j(D,s).label==="Amount"&&e.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),e.jsx("span",{children:j(D,s).value})]})]}),e.jsx("button",{className:"mobile-card-modal-close",onClick:()=>c(null),"aria-label":"Close",children:e.jsx("i",{className:"fa-solid fa-times"})})]}),e.jsx("div",{className:"mobile-card-modal-content",children:F(D,d,s,()=>c(null))})]})})]})}return e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:s.map(D=>{const _=A(D),Y=p.column===D,ee=Y?p.direction==="asc"?"":"":"";return e.jsx("th",{style:{textAlign:_,cursor:"pointer",whiteSpace:"nowrap"},onClick:()=>w(D),"aria-sort":Y?p.direction==="asc"?"ascending":"descending":"none",children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:D}),e.jsx("span",{style:{fontSize:"0.7rem",opacity:.7},children:ee})]})},D)})})}),e.jsx("tbody",{children:$.map((D,_)=>{let Y=!1;const ee=D.Status;if(ee)if(typeof ee=="object"&&ee!==null&&ee.render){const G=ee.render();if(typeof G=="object"&&G?.props){const fe=G.props.className||"",he=G.props.children;Y=fe.includes("badge-overdue")||fe.includes("badge-unpaid")||typeof he=="string"&&(he.toLowerCase().includes("overdue")||he.toLowerCase().includes("unpaid")||he.toLowerCase().includes("rejected"))}}else typeof ee=="string"&&(Y=ee==="Overdue"||ee==="Unpaid"||ee==="Rejected"||qa[ee]?.includes("badge-overdue")||qa[ee]?.includes("badge-unpaid"));return e.jsx("tr",{style:{...D._rowStyle||{},background:Y?"#fef2f2":void 0},children:s.map(G=>{const fe=D[G],he=A(G);if(typeof fe=="object"&&fe!==null&&fe.render){const ge=fe.render();return e.jsx("td",{"data-label":G,style:{textAlign:he,verticalAlign:"middle"},children:ge},`${G}-render-${_}`)}const Be=typeof fe=="string"&&qa[fe]&&G==="Status";return e.jsx("td",{"data-label":G,style:{textAlign:he,verticalAlign:"middle"},children:Be?e.jsx("span",{className:qa[fe],children:fe}):fe},`${G}-${_}`)})},`${D.id??_}-${_}`)})})]})}function mc({currentPage:s,totalPages:a,onPageChange:r,pageSize:o,onPageSizeChange:d,totalItems:c,pageSizeOptions:p=[5,10,20,50,100]}){if(a<=1&&o>=c)return null;const m=(s-1)*o+1,g=Math.min(s*o,c);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px",padding:"16px",borderTop:"1px solid #e0e0e0",background:"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",m," to ",g," of ",c," items"]}),e.jsxs("label",{style:{fontSize:"0.875rem",color:"#666",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[e.jsx("span",{children:"Items per page:"}),e.jsx("select",{value:o,onChange:v=>{d(Number(v.target.value)),r(1)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontSize:"0.875rem",background:"#fff",cursor:"pointer",minWidth:"70px"},children:p.map(v=>e.jsx("option",{value:v,children:v},v))})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{onClick:()=>r(1),disabled:s===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:s===1?"#f5f5f5":"#fff",cursor:s===1?"not-allowed":"pointer",fontSize:"0.875rem",color:s===1?"#999":"#333",opacity:s===1?.5:1},children:" First"}),e.jsx("button",{onClick:()=>r(s-1),disabled:s===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:s===1?"#f5f5f5":"#fff",cursor:s===1?"not-allowed":"pointer",fontSize:"0.875rem",color:s===1?"#999":"#333",opacity:s===1?.5:1},children:" Prev"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#666",padding:"0 8px"},children:["Page ",s," of ",a]}),e.jsx("button",{onClick:()=>r(s+1),disabled:s===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:s===a?"#f5f5f5":"#fff",cursor:s===a?"not-allowed":"pointer",fontSize:"0.875rem",color:s===a?"#999":"#333",opacity:s===a?.5:1},children:"Next "}),e.jsx("button",{onClick:()=>r(a),disabled:s===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:s===a?"#f5f5f5":"#fff",cursor:s===a?"not-allowed":"pointer",fontSize:"0.875rem",color:s===a?"#999":"#333",opacity:s===a?.5:1},children:"Last "})]})]})}function E1({text:s,children:a,position:r="top",delay:o=200}){const[d,c]=q.useState(!1),[p,m]=q.useState({top:0,left:0}),g=q.useRef(null),v=q.useRef(null),j=q.useRef(null);q.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const A=()=>{if(!v.current||!g.current)return;const $=v.current.getBoundingClientRect(),F=g.current.getBoundingClientRect(),D=8;let _=0,Y=0;switch(r){case"top":_=$.top-F.height-D,Y=$.left+$.width/2-F.width/2;break;case"bottom":_=$.bottom+D,Y=$.left+$.width/2-F.width/2;break;case"left":_=$.top+$.height/2-F.height/2,Y=$.left-F.width-D;break;case"right":_=$.top+$.height/2-F.height/2,Y=$.right+D;break;default:_=$.top-F.height-D,Y=$.left+$.width/2-F.width/2}const ee=window.innerWidth,G=window.innerHeight;Y<8&&(Y=8),Y+F.width>ee-8&&(Y=ee-F.width-8),_<8&&(_=8),_+F.height>G-8&&(_=G-F.height-8),m({top:_,left:Y})},R=()=>{j.current=setTimeout(()=>{c(!0),setTimeout(()=>{A()},10)},o)},w=()=>{j.current&&clearTimeout(j.current),c(!1)};return s?e.jsxs("span",{ref:v,className:"tooltip-trigger",onMouseEnter:R,onMouseLeave:w,style:{display:"inline-block",position:"relative"},children:[a,d&&e.jsxs("div",{ref:g,className:`tooltip tooltip--${r}`,style:{top:`${p.top}px`,left:`${p.left}px`},children:[e.jsx("div",{className:"tooltip-content",children:s}),e.jsx("div",{className:`tooltip-arrow tooltip-arrow--${r}`})]})]}):a}const Od=[{code:"HK",name:"Hong Kong",dialCode:"+852",flag:"",minLength:8,maxLength:8},{code:"CN",name:"China",dialCode:"+86",flag:"",minLength:11,maxLength:11},{code:"US",name:"United States",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"",minLength:10,maxLength:10},{code:"IN",name:"India",dialCode:"+91",flag:"",minLength:10,maxLength:10},{code:"SG",name:"Singapore",dialCode:"+65",flag:"",minLength:8,maxLength:8},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"",minLength:9,maxLength:10},{code:"TH",name:"Thailand",dialCode:"+66",flag:"",minLength:9,maxLength:9},{code:"PH",name:"Philippines",dialCode:"+63",flag:"",minLength:10,maxLength:10},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"",minLength:9,maxLength:12},{code:"AU",name:"Australia",dialCode:"+61",flag:"",minLength:9,maxLength:9},{code:"NZ",name:"New Zealand",dialCode:"+64",flag:"",minLength:8,maxLength:10},{code:"JP",name:"Japan",dialCode:"+81",flag:"",minLength:10,maxLength:11},{code:"KR",name:"South Korea",dialCode:"+82",flag:"",minLength:9,maxLength:11},{code:"TW",name:"Taiwan",dialCode:"+886",flag:"",minLength:9,maxLength:9},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"",minLength:9,maxLength:10},{code:"CA",name:"Canada",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"DE",name:"Germany",dialCode:"+49",flag:"",minLength:10,maxLength:11},{code:"FR",name:"France",dialCode:"+33",flag:"",minLength:9,maxLength:9},{code:"IT",name:"Italy",dialCode:"+39",flag:"",minLength:9,maxLength:10},{code:"ES",name:"Spain",dialCode:"+34",flag:"",minLength:9,maxLength:9},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"",minLength:9,maxLength:9},{code:"BE",name:"Belgium",dialCode:"+32",flag:"",minLength:9,maxLength:9},{code:"CH",name:"Switzerland",dialCode:"+41",flag:"",minLength:9,maxLength:9},{code:"AT",name:"Austria",dialCode:"+43",flag:"",minLength:10,maxLength:13},{code:"SE",name:"Sweden",dialCode:"+46",flag:"",minLength:9,maxLength:9},{code:"NO",name:"Norway",dialCode:"+47",flag:"",minLength:8,maxLength:8},{code:"DK",name:"Denmark",dialCode:"+45",flag:"",minLength:8,maxLength:8},{code:"FI",name:"Finland",dialCode:"+358",flag:"",minLength:9,maxLength:10},{code:"PL",name:"Poland",dialCode:"+48",flag:"",minLength:9,maxLength:9},{code:"BR",name:"Brazil",dialCode:"+55",flag:"",minLength:10,maxLength:11},{code:"MX",name:"Mexico",dialCode:"+52",flag:"",minLength:10,maxLength:10},{code:"AR",name:"Argentina",dialCode:"+54",flag:"",minLength:10,maxLength:10},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"",minLength:9,maxLength:9},{code:"AE",name:"UAE",dialCode:"+971",flag:"",minLength:9,maxLength:9},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"",minLength:9,maxLength:9},{code:"IL",name:"Israel",dialCode:"+972",flag:"",minLength:9,maxLength:9},{code:"TR",name:"Turkey",dialCode:"+90",flag:"",minLength:10,maxLength:10},{code:"RU",name:"Russia",dialCode:"+7",flag:"",minLength:10,maxLength:10},{code:"EG",name:"Egypt",dialCode:"+20",flag:"",minLength:10,maxLength:10},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"",minLength:10,maxLength:10},{code:"KE",name:"Kenya",dialCode:"+254",flag:"",minLength:9,maxLength:9}],dm=s=>{if(!s)return{country:Od[0],number:""};const a=s.replace(/[^\d+]/g,"");for(const r of Od)if(a.startsWith(r.dialCode)){const o=a.substring(r.dialCode.length);return{country:r,number:o}}return{country:Od[0],number:a.replace(/[^\d]/g,"")}},Jc=({value:s="",onChange:a,onBlur:r,required:o=!1,placeholder:d="Enter phone number",className:c="",style:p={},error:m=null,label:g=null,id:v=null,"aria-invalid":j=!1,onError:A=null})=>{const R=dm(s),[w,$]=q.useState(R.country),[F,D]=q.useState(R.number),[_,Y]=q.useState(!1),[ee,G]=q.useState(""),fe=q.useRef(null),he=q.useRef(null);q.useEffect(()=>{const ie=dm(s);$(ie.country),D(ie.number)},[s]),q.useEffect(()=>{const ie=ke=>{fe.current&&!fe.current.contains(ke.target)&&(Y(!1),G(""))};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const Be=Od.filter(ie=>{const ke=ee.toLowerCase().trim();return!!(!ke||ie.name.toLowerCase().includes(ke)||ie.dialCode.includes(ee)||ie.code.toLowerCase().includes(ke))}),ge=ie=>{$(ie),Y(!1),G("");const ke=F?`${ie.dialCode}${F}`:"";a?.({target:{value:ke}}),setTimeout(()=>he.current?.focus(),0)},te=ie=>{const Me=ie.target.value.replace(/\D/g,"");D(Me);const Ee=Me?`${w.dialCode}${Me}`:"";a?.({target:{value:Ee}})},ye=(ie=!0)=>F?F.replace(/\D/g,"").length<w.minLength?`Phone number must be at least ${w.minLength} digits for ${w.name}`:null:ie&&o?"Phone number is required":null,z=ye(!0),H=z||c&&c.includes("admin-phone-input-error"),de=ie=>{const ke=ye(!1);ke&&A&&A(ke),r&&r(ie)};return e.jsxs("div",{className:"phone-input-container",children:[g&&e.jsx("div",{className:"phone-input-label-wrapper",children:typeof g=="string"?e.jsx("span",{className:"phone-input-label-text",children:g}):g}),e.jsxs("div",{className:"phone-input-wrapper",children:[e.jsxs("div",{className:"phone-input-country-selector",ref:fe,children:[e.jsxs("button",{type:"button",onClick:()=>Y(!_),className:`phone-input-country-button ${H?"phone-input-country-button-error":""}`,children:[e.jsx("span",{className:`fi fi-${w.code.toLowerCase()} phone-input-country-flag`}),e.jsx("span",{className:"phone-input-country-code",children:w.dialCode}),e.jsx("i",{className:`fas fa-chevron-down phone-input-country-chevron ${_?"phone-input-country-chevron-open":""}`})]}),_&&e.jsxs("div",{className:"phone-input-country-dropdown",children:[e.jsx("div",{className:"phone-input-country-search",children:e.jsx("input",{type:"text",placeholder:"Search by name or code...",value:ee,onChange:ie=>G(ie.target.value),className:"phone-input-country-search-input",autoFocus:!0})}),e.jsx("div",{className:"phone-input-country-list",children:Be.length===0?e.jsx("div",{className:"phone-input-country-empty",children:"No countries found"}):Be.map(ie=>e.jsxs("button",{type:"button",onClick:()=>ge(ie),className:`phone-input-country-item ${w.code===ie.code?"phone-input-country-item-selected":""}`,children:[e.jsx("span",{className:`fi fi-${ie.code.toLowerCase()} phone-input-country-item-flag`}),e.jsx("span",{className:"phone-input-country-item-name",children:ie.name}),e.jsx("span",{className:"phone-input-country-item-code",children:ie.dialCode})]},ie.code))})]})]}),e.jsx("input",{ref:he,id:v,type:"tel",inputMode:"numeric",required:o,value:F,onChange:te,onBlur:de,placeholder:d,className:`phone-input-field ${c||""} ${H?"phone-input-field-error":""}`,"aria-invalid":j||!!z,onInvalid:ie=>ie.preventDefault()})]})]})},Op=q.createContext();function M1({children:s}){const[a,r]=q.useState([]),[o,d]=q.useState([]),[c,p]=q.useState([]),[m,g]=q.useState([]),[v,j]=q.useState([]),[A,R]=q.useState(!0),[w,$]=q.useState(()=>{const Se=localStorage.getItem("recentPayments");return Se?JSON.parse(Se):im}),[F,D]=q.useState(()=>{const Se=localStorage.getItem("paymentHistory");return Se?JSON.parse(Se):om}),[_,Y]=q.useState(()=>{const Se=localStorage.getItem("communicationLog");return Se?JSON.parse(Se):lm}),[ee,G]=q.useState([]),[fe,he]=q.useState([]),[Be,ge]=q.useState(cm),[te,ye]=q.useState(()=>{const Se=localStorage.getItem("metrics");return Se?JSON.parse(Se):sm}),[z,H]=q.useState(()=>{try{const Se=localStorage.getItem("reminderRules");return Se?JSON.parse(Se):Uu}catch{return Uu}}),[de,ie]=q.useState(!0),[ke,Me]=q.useState(()=>{const Se=localStorage.getItem("reminderTemplates");return Se?JSON.parse(Se):{upcomingDue:"Hi {{member_name}}, friendly reminder your {{period}} subscription of ${{amount}} is due on {{due_date}}. You can pay via FPS, PayMe, or card. Thank you!",overdue:"Hi {{member_name}}, your {{period}} contribution of ${{amount}} is now overdue. Please settle via the member portal or reply once paid."}}),[Ee,me]=q.useState(()=>{const Se=localStorage.getItem("organizationInfo");return Se?JSON.parse(Se):{name:"Subscription Manager HK",email:"support@subscriptionhk.org",phone:"+852 2800 1122",address:"123 Central Street, Hong Kong"}}),[Ie,Ue]=q.useState(()=>{try{const Se=localStorage.getItem("userLocale");return Se||navigator.language||navigator.userLanguage||"en-US"}catch(Se){return console.error("Error getting user locale:",Se),"en-US"}}),se=Se=>{try{localStorage.setItem("userLocale",Se),Ue(Se),window.dispatchEvent(new CustomEvent("localeChanged",{detail:{locale:Se}}))}catch(xe){console.error("Error setting user locale:",xe)}},[C,K]=q.useState(null),Z="http://localhost:4000",ce=async()=>{try{const Se=await fetch(`${Z}/api/members`);if(!Se.ok)throw new Error("Failed to fetch members");const xe=await Se.json();r(xe),console.log(" Loaded",xe.length,"members from server")}catch(Se){throw console.error("Error fetching members:",Se),r([]),Se}},oe=async()=>{try{const Se=await fetch(`${Z}/api/admins`);if(!Se.ok)throw new Error("Failed to fetch admins");const xe=await Se.json();d(xe),console.log(" Loaded",xe.length,"Admins from server")}catch(Se){throw console.error("Error fetching Admins:",Se),d([]),Se}},je=async()=>{try{const Se=await fetch(`${Z}/api/invoices`);if(!Se.ok)throw new Error("Failed to fetch invoices");const xe=await Se.json();p(xe),console.log(" Loaded",xe.length,"invoices from MongoDB")}catch(Se){throw console.error("Error fetching invoices:",Se),p([]),Se}},Fe=async()=>{try{const Se=await fetch(`${Z}/api/payments`);if(!Se.ok)throw new Error("Failed to fetch payments");const xe=await Se.json();g(xe),D(xe),$(xe.slice(0,10)),console.log(" Loaded",xe.length,"payments from MongoDB")}catch(Se){throw console.error("Error fetching payments:",Se),g([]),D([]),$([]),Se}},Oe=async()=>{try{const Se=await fetch(`${Z}/api/donations`);if(!Se.ok)throw new Error("Failed to fetch donations");const xe=await Se.json();j(xe),console.log(" Loaded",xe.length,"donations from MongoDB")}catch(Se){console.error("Error fetching donations:",Se),j([])}},Ye=async()=>{try{const Se=await fetch(`${Z}/api/payment-methods`);if(!Se.ok)throw new Error("Failed to fetch payment methods");const xe=await Se.json();if(xe.length===0){console.log(" No payment methods in database, initializing defaults...");const We=[{name:"Alipay",visible:!1,qrImageUrl:"",details:[]},{name:"PayMe",visible:!1,qrImageUrl:"",details:[]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];for(const ct of We)try{await fetch(`${Z}/api/payment-methods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)})}catch(st){console.error(`Error initializing payment method ${ct.name}:`,st)}ge(We),console.log(" Initialized default payment methods in database")}else ge(xe),console.log(" Loaded",xe.length,"payment methods from MongoDB")}catch(Se){throw console.error("Error fetching payment methods:",Se),ge([]),Se}},Te=async()=>{try{const Se=await fetch(`${Z}/api/reminders/logs`);if(!Se.ok)throw new Error("Failed to fetch reminder logs");const xe=await Se.json();G(xe),console.log(" Loaded",xe.length,"reminder logs from MongoDB")}catch(Se){console.error("Error fetching reminder logs:",Se),G([])}},Qe=async()=>{try{const Se=await fetch(`${Z}/api/auth/password-reset-requests`);if(!Se.ok)throw new Error("Failed to fetch password reset requests");const xe=await Se.json();he(xe),console.log(" Loaded",xe.length,"password reset requests from MongoDB")}catch(Se){console.error("Error fetching password reset requests:",Se),he([])}};q.useEffect(()=>{(async()=>{try{const xe=Promise.allSettled([ce(),oe(),je()]),We=Promise.allSettled([Fe(),Oe(),Ye(),Te()]);await Promise.allSettled([xe,We]),R(!1)}catch(xe){console.error("Error fetching initial data:",xe),R(!1)}})()},[]),q.useEffect(()=>{localStorage.setItem("recentPayments",JSON.stringify(w))},[w]),q.useEffect(()=>{localStorage.setItem("paymentHistory",JSON.stringify(F))},[F]),q.useEffect(()=>{localStorage.setItem("communicationLog",JSON.stringify(_))},[_]),q.useEffect(()=>{localStorage.setItem("metrics",JSON.stringify(te))},[te]),q.useEffect(()=>{localStorage.setItem("reminderRules",JSON.stringify(z))},[z]),q.useEffect(()=>{localStorage.setItem("reminderTemplates",JSON.stringify(ke))},[ke]),q.useEffect(()=>{localStorage.setItem("organizationInfo",JSON.stringify(Ee))},[Ee]),q.useEffect(()=>{},[]);const ot=async Se=>{try{const xe=await fetch(`${Z}/api/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!xe.ok)throw new Error("Failed to add member");const We=await xe.json();return r([...a,We]),vt({totalMembers:te.totalMembers+1}),console.log(" Member added to server:",We),We}catch(xe){throw console.error("Error adding member:",xe),xe}},bt=async(Se,xe)=>{try{const We=await fetch(`${Z}/api/members/${Se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!We.ok)throw new Error("Failed to update member");const ct=await We.json();r(a.map(st=>st.id===Se?ct:st)),console.log(" Member updated on server:",ct)}catch(We){throw console.error("Error updating member:",We),We}},X=async Se=>{try{if(!(await fetch(`${Z}/api/members/${Se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete member");r(a.filter(We=>We.id!==Se)),p(c.filter(We=>We.memberId!==Se)),vt({totalMembers:te.totalMembers-1}),console.log(" Member deleted from server:",Se)}catch(xe){throw console.error("Error deleting member:",xe),xe}},et=async Se=>{try{const xe=await fetch(`${Z}/api/invoices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!xe.ok)throw new Error("Failed to add invoice");const We=await xe.json();return p([We,...c]),console.log(" Invoice added to server:",We),We}catch(xe){throw console.error("Error adding invoice:",xe),xe}},xt=async(Se,xe)=>{try{const We=await fetch(`${Z}/api/invoices/${Se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!We.ok)throw new Error("Failed to update invoice");const ct=await We.json();if(p(c.map(st=>st.id===Se?ct:st)),xe.status==="Paid"){const st=c.find(un=>un.id===Se);if(st&&st.status!=="Paid"){const un=parseFloat(st.amount.replace("$",""));vt({collectedMonth:te.collectedMonth+un,collectedYear:te.collectedYear+un,outstanding:te.outstanding-un})}}console.log(" Invoice updated on server:",ct)}catch(We){throw console.error("Error updating invoice:",We),We}},Lt=async Se=>{try{if(!(await fetch(`${Z}/api/invoices/${Se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete invoice");p(c.filter(We=>We.id!==Se)),console.log(" Invoice deleted from server:",Se)}catch(xe){throw console.error("Error deleting invoice:",xe),xe}},Ve=async Se=>{try{const xe={...Se,date:Se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},We=await fetch(`${Z}/api/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!We.ok){const un=await We.json().catch(()=>({}));throw new Error(un.error||"Failed to save payment")}const ct=await We.json();g([ct,...m]),$([ct,...w]),D([ct,...F]),Se.invoiceId&&await xt(Se.invoiceId,{status:"Paid",method:Se.method,reference:Se.reference,screenshot:Se.screenshot||Se.screenshotUrl,paidToAdmin:Se.paidToAdmin,paidToAdminName:Se.paidToAdminName});const st=parseFloat(Se.amount.replace("$",""));return vt({collectedMonth:te.collectedMonth+st,collectedYear:te.collectedYear+st,outstanding:Math.max(0,te.outstanding-st)}),console.log(" Payment saved to MongoDB:",ct),ct}catch(xe){console.error("Error adding payment:",xe);const We={...Se,date:Se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})};throw $([We,...w]),D([We,...F]),xe}},Mt=Se=>{const xe={...Se,date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Delivered"};return Y([xe,..._]),xe},yt=async(Se,xe)=>{try{const We=await fetch(`${Z}/api/payment-methods/${Se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!We.ok)throw new Error("Failed to update payment method");const ct=await We.json();return ge(Be.map(st=>st.name===Se?ct:st)),console.log(" Payment method updated in database:",ct),ct}catch(We){throw console.error("Error updating payment method:",We),ge(Be.map(ct=>ct.name===Se?{...ct,...xe}:ct)),We}},vt=Se=>{ye({...te,...Se})},on={members:a,invoices:c,payments:m,donations:v,loading:A,fetchMembers:ce,fetchAdmins:oe,fetchInvoices:je,fetchPayments:Fe,fetchDonations:Oe,fetchPaymentMethods:Ye,fetchReminderLogs:Te,fetchPasswordResetRequests:Qe,recentPayments:w,paymentHistory:F,communicationLog:_,reminderLogs:ee,passwordResetRequests:fe,paymentMethods:Be,metrics:te,reminderRules:z,automationEnabled:de,setAutomationEnabled:ie,reminderTemplates:ke,organizationInfo:Ee,admins:o,selectedMember:C,setSelectedMember:K,addMember:ot,updateMember:bt,deleteMember:X,addInvoice:et,updateInvoice:xt,deleteInvoice:Lt,addPayment:Ve,addDonation:async Se=>{try{const xe=await fetch(`${Z}/api/donations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!xe.ok){const ct=await xe.json().catch(()=>({}));throw new Error(ct.error||"Failed to add donation")}const We=await xe.json();return j([We,...v]),console.log(" Donation added to server:",We),We}catch(xe){throw console.error("Error adding donation:",xe),xe}},deleteDonation:async Se=>{try{const xe=await fetch(`${Z}/api/donations/${Se}`,{method:"DELETE"});if(!xe.ok){const We=await xe.json().catch(()=>({}));throw new Error(We.error||"Failed to delete donation")}j(v.filter(We=>We._id!==Se)),console.log(" Donation deleted from server:",Se)}catch(xe){throw console.error("Error deleting donation:",xe),xe}},addCommunication:Mt,updatePaymentMethod:yt,updateMetrics:vt,updateReminderRule:(Se,xe)=>{H(z.map(We=>We.label===Se?{...We,channels:xe}:We))},updateReminderTemplate:(Se,xe)=>{Me({...ke,[Se]:xe})},updateOrganizationInfo:Se=>{me({...Ee,...Se})},userLocale:Ie,updateUserLocale:se,addAdminUser:async Se=>{try{const xe=await fetch(`${Z}/api/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Se.name,email:Se.email||"",role:Se.role||"Viewer",status:Se.status||"Active",password:Se.password||""})});if(!xe.ok){const ct=await xe.json().catch(()=>({}));throw new Error(ct.message||"Failed to create admin")}const We=await xe.json();return d([...o,We]),await oe(),We}catch(xe){throw console.error("Error adding admin:",xe),xe}},updateAdminUser:async(Se,xe)=>{try{const We=await fetch(`${Z}/api/admins/${Se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!We.ok){const st=await We.json().catch(()=>({}));throw new Error(st.message||"Failed to update admin")}const ct=await We.json();return d(o.map(st=>st.id===Se?ct:st)),await oe(),ct}catch(We){throw console.error("Error updating admin:",We),We}},deleteAdminUser:async Se=>{try{const xe=await fetch(`${Z}/api/admins/${Se}`,{method:"DELETE"});if(!xe.ok){const We=await xe.json().catch(()=>({}));throw new Error(We.message||"Failed to delete admin")}d(o.filter(We=>We.id!==Se)),await oe()}catch(xe){throw console.error("Error deleting admin:",xe),xe}},resetAllData:()=>{localStorage.clear(),r(k1),d(A1),p(C1),$(im),D(om),Y(lm),ge(cm),ye(sm),H(Uu),ie(!0),localStorage.setItem("dataVersion","v2.0")}};return e.jsx(Op.Provider,{value:on,children:s})}function Xd(){const s=q.useContext(Op);if(!s)throw new Error("useApp must be used within AppProvider");return s}function Bp(s=15){const a=wo(),r=q.useRef(null),o=q.useRef(Date.now()),d=()=>{o.current=Date.now(),r.current&&clearTimeout(r.current);const c=s*60*1e3;r.current=setTimeout(()=>{sessionStorage.clear(),sessionStorage.setItem("logoutReason","inactivity"),a("/login",{replace:!0})},c)};q.useEffect(()=>{const c=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],p=()=>{d()};return d(),c.forEach(m=>{document.addEventListener(m,p,!0)}),()=>{c.forEach(m=>{document.removeEventListener(m,p,!0)}),r.current&&clearTimeout(r.current)}},[a,s])}const D1="modulepreload",F1=function(s){return"/"+s},um={},qu=function(a,r,o){let d=Promise.resolve();if(r&&r.length>0){let g=function(v){return Promise.all(v.map(j=>Promise.resolve(j).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");d=g(r.map(v=>{if(v=F1(v),v in um)return;um[v]=!0;const j=v.endsWith(".css"),A=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${A}`))return;const R=document.createElement("link");if(R.rel=j?"stylesheet":D1,j||(R.as="script"),R.crossOrigin="",R.href=v,m&&R.setAttribute("nonce",m),document.head.appendChild(R),j)return new Promise((w,$)=>{R.addEventListener("load",w),R.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(p){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=p,window.dispatchEvent(m),!m.defaultPrevented)throw p}return d.then(p=>{for(const m of p||[])m.status==="rejected"&&c(m.reason);return a().catch(c)})};function dr(s){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},dr(s)}var bo=Uint8Array,Di=Uint16Array,Mf=Int32Array,Df=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ff=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fm=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zp=function(s,a){for(var r=new Di(31),o=0;o<31;++o)r[o]=a+=1<<s[o-1];for(var d=new Mf(r[30]),o=1;o<30;++o)for(var c=r[o];c<r[o+1];++c)d[c]=c-r[o]<<5|o;return{b:r,r:d}},Up=zp(Df,2),R1=Up.b,pf=Up.r;R1[28]=258,pf[258]=28;var T1=zp(Ff,0),hm=T1.r,gf=new Di(32768);for(var Dr=0;Dr<32768;++Dr){var vl=(Dr&43690)>>1|(Dr&21845)<<1;vl=(vl&52428)>>2|(vl&13107)<<2,vl=(vl&61680)>>4|(vl&3855)<<4,gf[Dr]=((vl&65280)>>8|(vl&255)<<8)>>1}var Vc=(function(s,a,r){for(var o=s.length,d=0,c=new Di(a);d<o;++d)s[d]&&++c[s[d]-1];var p=new Di(a);for(d=1;d<a;++d)p[d]=p[d-1]+c[d-1]<<1;var m;if(r){m=new Di(1<<a);var g=15-a;for(d=0;d<o;++d)if(s[d])for(var v=d<<4|s[d],j=a-s[d],A=p[s[d]-1]++<<j,R=A|(1<<j)-1;A<=R;++A)m[gf[A]>>g]=v}else for(m=new Di(o),d=0;d<o;++d)s[d]&&(m[d]=gf[p[s[d]-1]++]>>15-s[d]);return m}),Vl=new bo(288);for(var Dr=0;Dr<144;++Dr)Vl[Dr]=8;for(var Dr=144;Dr<256;++Dr)Vl[Dr]=9;for(var Dr=256;Dr<280;++Dr)Vl[Dr]=7;for(var Dr=280;Dr<288;++Dr)Vl[Dr]=8;var Yd=new bo(32);for(var Dr=0;Dr<32;++Dr)Yd[Dr]=5;var O1=Vc(Vl,9,0),B1=Vc(Yd,5,0),qp=function(s){return(s+7)/8|0},z1=function(s,a,r){return(r==null||r>s.length)&&(r=s.length),new bo(s.subarray(a,r))},Zo=function(s,a,r){r<<=a&7;var o=a/8|0;s[o]|=r,s[o+1]|=r>>8},qc=function(s,a,r){r<<=a&7;var o=a/8|0;s[o]|=r,s[o+1]|=r>>8,s[o+2]|=r>>16},$u=function(s,a){for(var r=[],o=0;o<s.length;++o)s[o]&&r.push({s:o,f:s[o]});var d=r.length,c=r.slice();if(!d)return{t:Wp,l:0};if(d==1){var p=new bo(r[0].s+1);return p[r[0].s]=1,{t:p,l:1}}r.sort(function(fe,he){return fe.f-he.f}),r.push({s:-1,f:25001});var m=r[0],g=r[1],v=0,j=1,A=2;for(r[0]={s:-1,f:m.f+g.f,l:m,r:g};j!=d-1;)m=r[r[v].f<r[A].f?v++:A++],g=r[v!=j&&r[v].f<r[A].f?v++:A++],r[j++]={s:-1,f:m.f+g.f,l:m,r:g};for(var R=c[0].s,o=1;o<d;++o)c[o].s>R&&(R=c[o].s);var w=new Di(R+1),$=xf(r[j-1],w,0);if($>a){var o=0,F=0,D=$-a,_=1<<D;for(c.sort(function(he,Be){return w[Be.s]-w[he.s]||he.f-Be.f});o<d;++o){var Y=c[o].s;if(w[Y]>a)F+=_-(1<<$-w[Y]),w[Y]=a;else break}for(F>>=D;F>0;){var ee=c[o].s;w[ee]<a?F-=1<<a-w[ee]++-1:++o}for(;o>=0&&F;--o){var G=c[o].s;w[G]==a&&(--w[G],++F)}$=a}return{t:new bo(w),l:$}},xf=function(s,a,r){return s.s==-1?Math.max(xf(s.l,a,r+1),xf(s.r,a,r+1)):a[s.s]=r},mm=function(s){for(var a=s.length;a&&!s[--a];);for(var r=new Di(++a),o=0,d=s[0],c=1,p=function(g){r[o++]=g},m=1;m<=a;++m)if(s[m]==d&&m!=a)++c;else{if(!d&&c>2){for(;c>138;c-=138)p(32754);c>2&&(p(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(p(d),--c;c>6;c-=6)p(8304);c>2&&(p(c-3<<5|8208),c=0)}for(;c--;)p(d);c=1,d=s[m]}return{c:r.subarray(0,o),n:a}},$c=function(s,a){for(var r=0,o=0;o<a.length;++o)r+=s[o]*a[o];return r},$p=function(s,a,r){var o=r.length,d=qp(a+2);s[d]=o&255,s[d+1]=o>>8,s[d+2]=s[d]^255,s[d+3]=s[d+1]^255;for(var c=0;c<o;++c)s[d+c+4]=r[c];return(d+4+o)*8},pm=function(s,a,r,o,d,c,p,m,g,v,j){Zo(a,j++,r),++d[256];for(var A=$u(d,15),R=A.t,w=A.l,$=$u(c,15),F=$.t,D=$.l,_=mm(R),Y=_.c,ee=_.n,G=mm(F),fe=G.c,he=G.n,Be=new Di(19),ge=0;ge<Y.length;++ge)++Be[Y[ge]&31];for(var ge=0;ge<fe.length;++ge)++Be[fe[ge]&31];for(var te=$u(Be,7),ye=te.t,z=te.l,H=19;H>4&&!ye[fm[H-1]];--H);var de=v+5<<3,ie=$c(d,Vl)+$c(c,Yd)+p,ke=$c(d,R)+$c(c,F)+p+14+3*H+$c(Be,ye)+2*Be[16]+3*Be[17]+7*Be[18];if(g>=0&&de<=ie&&de<=ke)return $p(a,j,s.subarray(g,g+v));var Me,Ee,me,Ie;if(Zo(a,j,1+(ke<ie)),j+=2,ke<ie){Me=Vc(R,w,0),Ee=R,me=Vc(F,D,0),Ie=F;var Ue=Vc(ye,z,0);Zo(a,j,ee-257),Zo(a,j+5,he-1),Zo(a,j+10,H-4),j+=14;for(var ge=0;ge<H;++ge)Zo(a,j+3*ge,ye[fm[ge]]);j+=3*H;for(var se=[Y,fe],C=0;C<2;++C)for(var K=se[C],ge=0;ge<K.length;++ge){var Z=K[ge]&31;Zo(a,j,Ue[Z]),j+=ye[Z],Z>15&&(Zo(a,j,K[ge]>>5&127),j+=K[ge]>>12)}}else Me=O1,Ee=Vl,me=B1,Ie=Yd;for(var ge=0;ge<m;++ge){var ce=o[ge];if(ce>255){var Z=ce>>18&31;qc(a,j,Me[Z+257]),j+=Ee[Z+257],Z>7&&(Zo(a,j,ce>>23&31),j+=Df[Z]);var oe=ce&31;qc(a,j,me[oe]),j+=Ie[oe],oe>3&&(qc(a,j,ce>>5&8191),j+=Ff[oe])}else qc(a,j,Me[ce]),j+=Ee[ce]}return qc(a,j,Me[256]),j+Ee[256]},U1=new Mf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wp=new bo(0),q1=function(s,a,r,o,d,c){var p=c.z||s.length,m=new bo(o+p+5*(1+Math.ceil(p/7e3))+d),g=m.subarray(o,m.length-d),v=c.l,j=(c.r||0)&7;if(a){j&&(g[0]=c.r>>3);for(var A=U1[a-1],R=A>>13,w=A&8191,$=(1<<r)-1,F=c.p||new Di(32768),D=c.h||new Di($+1),_=Math.ceil(r/3),Y=2*_,ee=function(bt){return(s[bt]^s[bt+1]<<_^s[bt+2]<<Y)&$},G=new Mf(25e3),fe=new Di(288),he=new Di(32),Be=0,ge=0,te=c.i||0,ye=0,z=c.w||0,H=0;te+2<p;++te){var de=ee(te),ie=te&32767,ke=D[de];if(F[ie]=ke,D[de]=ie,z<=te){var Me=p-te;if((Be>7e3||ye>24576)&&(Me>423||!v)){j=pm(s,g,0,G,fe,he,ge,ye,H,te-H,j),ye=Be=ge=0,H=te;for(var Ee=0;Ee<286;++Ee)fe[Ee]=0;for(var Ee=0;Ee<30;++Ee)he[Ee]=0}var me=2,Ie=0,Ue=w,se=ie-ke&32767;if(Me>2&&de==ee(te-se))for(var C=Math.min(R,Me)-1,K=Math.min(32767,te),Z=Math.min(258,Me);se<=K&&--Ue&&ie!=ke;){if(s[te+me]==s[te+me-se]){for(var ce=0;ce<Z&&s[te+ce]==s[te+ce-se];++ce);if(ce>me){if(me=ce,Ie=se,ce>C)break;for(var oe=Math.min(se,ce-2),je=0,Ee=0;Ee<oe;++Ee){var Fe=te-se+Ee&32767,Oe=F[Fe],Ye=Fe-Oe&32767;Ye>je&&(je=Ye,ke=Fe)}}}ie=ke,ke=F[ie],se+=ie-ke&32767}if(Ie){G[ye++]=268435456|pf[me]<<18|hm[Ie];var Te=pf[me]&31,Qe=hm[Ie]&31;ge+=Df[Te]+Ff[Qe],++fe[257+Te],++he[Qe],z=te+me,++Be}else G[ye++]=s[te],++fe[s[te]]}}for(te=Math.max(te,z);te<p;++te)G[ye++]=s[te],++fe[s[te]];j=pm(s,g,v,G,fe,he,ge,ye,H,te-H,j),v||(c.r=j&7|g[j/8|0]<<3,j-=7,c.h=D,c.p=F,c.i=te,c.w=z)}else{for(var te=c.w||0;te<p+v;te+=65535){var ot=te+65535;ot>=p&&(g[j/8|0]=v,ot=p),j=$p(g,j+1,s.subarray(te,ot))}c.i=p}return z1(m,0,o+qp(j)+d)},Vp=function(){var s=1,a=0;return{p:function(r){for(var o=s,d=a,c=r.length|0,p=0;p!=c;){for(var m=Math.min(p+2655,c);p<m;++p)d+=o+=r[p];o=(o&65535)+15*(o>>16),d=(d&65535)+15*(d>>16)}s=o,a=d},d:function(){return s%=65521,a%=65521,(s&255)<<24|(s&65280)<<8|(a&255)<<8|a>>8}}},$1=function(s,a,r,o,d){if(!d&&(d={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),p=new bo(c.length+s.length);p.set(c),p.set(s,c.length),s=p,d.w=c.length}return q1(s,a.level==null?6:a.level,a.mem==null?d.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+a.mem,r,o,d)},Hp=function(s,a,r){for(;r;++a)s[a]=r,r>>>=8},W1=function(s,a){var r=a.level,o=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=o<<6|(a.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,a.dictionary){var d=Vp();d.p(a.dictionary),Hp(s,2,d.d())}};function yf(s,a){a||(a={});var r=Vp();r.p(s);var o=$1(s,a,a.dictionary?6:2,4);return W1(o,a),Hp(o,o.length-4,r.d()),o}var V1=typeof TextDecoder<"u"&&new TextDecoder,H1=0;try{V1.decode(Wp,{stream:!0}),H1=1}catch{}function Y1(s){if(Array.isArray(s))return s}function G1(s,a){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var o,d,c,p,m=[],g=!0,v=!1;try{if(c=(r=r.call(s)).next,a!==0)for(;!(g=(o=c.call(r)).done)&&(m.push(o.value),m.length!==a);g=!0);}catch(j){v=!0,d=j}finally{try{if(!g&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(v)throw d}}return m}}function gm(s,a){(a==null||a>s.length)&&(a=s.length);for(var r=0,o=Array(a);r<a;r++)o[r]=s[r];return o}function J1(s,a){if(s){if(typeof s=="string")return gm(s,a);var r={}.toString.call(s).slice(8,-1);return r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set"?Array.from(s):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gm(s,a):void 0}}function K1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xm(s,a){return Y1(s)||G1(s,a)||J1(s,a)||K1()}function ym(s,a="utf8"){return new TextDecoder(a).decode(s)}const Q1=new TextEncoder;function X1(s){return Q1.encode(s)}const Z1=1024*8,e2=(()=>{const s=new Uint8Array(4),a=new Uint32Array(s.buffer);return!((a[0]=1)&s[0])})(),Wu={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Rf{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=Z1,r={}){let o=!1;typeof a=="number"?a=new ArrayBuffer(a):(o=!0,this.lastWrittenByte=a.byteLength);const d=r.offset?r.offset>>>0:0,c=a.byteLength-d;let p=d;(ArrayBuffer.isView(a)||a instanceof Rf)&&(a.byteLength!==a.buffer.byteLength&&(p=a.byteOffset+d),a=a.buffer),o?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=a,this.length=c,this.byteLength=c,this.byteOffset=p,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,p,c),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const o=(this.offset+a)*2,d=new Uint8Array(o);d.set(new Uint8Array(this.buffer)),this.buffer=d.buffer,this.length=o,this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,r){const o=Wu[r].BYTES_PER_ELEMENT*a,d=this.byteOffset+this.offset,c=this.buffer.slice(d,d+o);if(this.littleEndian===e2&&r!=="uint8"&&r!=="int8"){const m=new Uint8Array(this.buffer.slice(d,d+o));m.reverse();const g=new Wu[r](m.buffer);return this.offset+=o,g.reverse(),g}const p=new Wu[r](c);return this.offset+=o,p}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let r="";for(let o=0;o<a;o++)r+=this.readChar();return r}readUtf8(a=1){return ym(this.readBytes(a))}decodeText(a=1,r="utf8"){return ym(this.readBytes(a),r)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let r=0;r<a.length;r++)this._data.setUint8(this.offset++,a[r]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let r=0;r<a.length;r++)this.writeUint8(a.charCodeAt(r));return this}writeUtf8(a){return this.writeBytes(X1(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Pc(s){let a=s.length;for(;--a>=0;)s[a]=0}const t2=3,n2=258,Yp=29,r2=256,a2=r2+1+Yp,Gp=30,s2=512,i2=new Array((a2+2)*2);Pc(i2);const o2=new Array(Gp*2);Pc(o2);const l2=new Array(s2);Pc(l2);const c2=new Array(n2-t2+1);Pc(c2);const d2=new Array(Yp);Pc(d2);const u2=new Array(Gp);Pc(u2);const f2=(s,a,r,o)=>{let d=s&65535|0,c=s>>>16&65535|0,p=0;for(;r!==0;){p=r>2e3?2e3:r,r-=p;do d=d+a[o++]|0,c=c+d|0;while(--p);d%=65521,c%=65521}return d|c<<16|0};var vf=f2;const h2=()=>{let s,a=[];for(var r=0;r<256;r++){s=r;for(var o=0;o<8;o++)s=s&1?3988292384^s>>>1:s>>>1;a[r]=s}return a},m2=new Uint32Array(h2()),p2=(s,a,r,o)=>{const d=m2,c=o+r;s^=-1;for(let p=o;p<c;p++)s=s>>>8^d[(s^a[p])&255];return s^-1};var To=p2,bf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Jp={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const g2=(s,a)=>Object.prototype.hasOwnProperty.call(s,a);var x2=function(s){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const r=a.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const o in r)g2(r,o)&&(s[o]=r[o])}}return s},y2=s=>{let a=0;for(let o=0,d=s.length;o<d;o++)a+=s[o].length;const r=new Uint8Array(a);for(let o=0,d=0,c=s.length;o<c;o++){let p=s[o];r.set(p,d),d+=p.length}return r},Kp={assign:x2,flattenChunks:y2};let Qp=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Qp=!1}const Kc=new Uint8Array(256);for(let s=0;s<256;s++)Kc[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;Kc[254]=Kc[254]=1;var v2=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let a,r,o,d,c,p=s.length,m=0;for(d=0;d<p;d++)r=s.charCodeAt(d),(r&64512)===55296&&d+1<p&&(o=s.charCodeAt(d+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),d++)),m+=r<128?1:r<2048?2:r<65536?3:4;for(a=new Uint8Array(m),c=0,d=0;c<m;d++)r=s.charCodeAt(d),(r&64512)===55296&&d+1<p&&(o=s.charCodeAt(d+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),d++)),r<128?a[c++]=r:r<2048?(a[c++]=192|r>>>6,a[c++]=128|r&63):r<65536?(a[c++]=224|r>>>12,a[c++]=128|r>>>6&63,a[c++]=128|r&63):(a[c++]=240|r>>>18,a[c++]=128|r>>>12&63,a[c++]=128|r>>>6&63,a[c++]=128|r&63);return a};const b2=(s,a)=>{if(a<65534&&s.subarray&&Qp)return String.fromCharCode.apply(null,s.length===a?s:s.subarray(0,a));let r="";for(let o=0;o<a;o++)r+=String.fromCharCode(s[o]);return r};var w2=(s,a)=>{const r=a||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,a));let o,d;const c=new Array(r*2);for(d=0,o=0;o<r;){let p=s[o++];if(p<128){c[d++]=p;continue}let m=Kc[p];if(m>4){c[d++]=65533,o+=m-1;continue}for(p&=m===2?31:m===3?15:7;m>1&&o<r;)p=p<<6|s[o++]&63,m--;if(m>1){c[d++]=65533;continue}p<65536?c[d++]=p:(p-=65536,c[d++]=55296|p>>10&1023,c[d++]=56320|p&1023)}return b2(c,d)},j2=(s,a)=>{a=a||s.length,a>s.length&&(a=s.length);let r=a-1;for(;r>=0&&(s[r]&192)===128;)r--;return r<0||r===0?a:r+Kc[s[r]]>a?r:a},wf={string2buf:v2,buf2string:w2,utf8border:j2};function N2(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var S2=N2;const Ld=16209,k2=16191;var A2=function(a,r){let o,d,c,p,m,g,v,j,A,R,w,$,F,D,_,Y,ee,G,fe,he,Be,ge,te,ye;const z=a.state;o=a.next_in,te=a.input,d=o+(a.avail_in-5),c=a.next_out,ye=a.output,p=c-(r-a.avail_out),m=c+(a.avail_out-257),g=z.dmax,v=z.wsize,j=z.whave,A=z.wnext,R=z.window,w=z.hold,$=z.bits,F=z.lencode,D=z.distcode,_=(1<<z.lenbits)-1,Y=(1<<z.distbits)-1;e:do{$<15&&(w+=te[o++]<<$,$+=8,w+=te[o++]<<$,$+=8),ee=F[w&_];t:for(;;){if(G=ee>>>24,w>>>=G,$-=G,G=ee>>>16&255,G===0)ye[c++]=ee&65535;else if(G&16){fe=ee&65535,G&=15,G&&($<G&&(w+=te[o++]<<$,$+=8),fe+=w&(1<<G)-1,w>>>=G,$-=G),$<15&&(w+=te[o++]<<$,$+=8,w+=te[o++]<<$,$+=8),ee=D[w&Y];n:for(;;){if(G=ee>>>24,w>>>=G,$-=G,G=ee>>>16&255,G&16){if(he=ee&65535,G&=15,$<G&&(w+=te[o++]<<$,$+=8,$<G&&(w+=te[o++]<<$,$+=8)),he+=w&(1<<G)-1,he>g){a.msg="invalid distance too far back",z.mode=Ld;break e}if(w>>>=G,$-=G,G=c-p,he>G){if(G=he-G,G>j&&z.sane){a.msg="invalid distance too far back",z.mode=Ld;break e}if(Be=0,ge=R,A===0){if(Be+=v-G,G<fe){fe-=G;do ye[c++]=R[Be++];while(--G);Be=c-he,ge=ye}}else if(A<G){if(Be+=v+A-G,G-=A,G<fe){fe-=G;do ye[c++]=R[Be++];while(--G);if(Be=0,A<fe){G=A,fe-=G;do ye[c++]=R[Be++];while(--G);Be=c-he,ge=ye}}}else if(Be+=A-G,G<fe){fe-=G;do ye[c++]=R[Be++];while(--G);Be=c-he,ge=ye}for(;fe>2;)ye[c++]=ge[Be++],ye[c++]=ge[Be++],ye[c++]=ge[Be++],fe-=3;fe&&(ye[c++]=ge[Be++],fe>1&&(ye[c++]=ge[Be++]))}else{Be=c-he;do ye[c++]=ye[Be++],ye[c++]=ye[Be++],ye[c++]=ye[Be++],fe-=3;while(fe>2);fe&&(ye[c++]=ye[Be++],fe>1&&(ye[c++]=ye[Be++]))}}else if((G&64)===0){ee=D[(ee&65535)+(w&(1<<G)-1)];continue n}else{a.msg="invalid distance code",z.mode=Ld;break e}break}}else if((G&64)===0){ee=F[(ee&65535)+(w&(1<<G)-1)];continue t}else if(G&32){z.mode=k2;break e}else{a.msg="invalid literal/length code",z.mode=Ld;break e}break}}while(o<d&&c<m);fe=$>>3,o-=fe,$-=fe<<3,w&=(1<<$)-1,a.next_in=o,a.next_out=c,a.avail_in=o<d?5+(d-o):5-(o-d),a.avail_out=c<m?257+(m-c):257-(c-m),z.hold=w,z.bits=$};const pc=15,vm=852,bm=592,wm=0,Vu=1,jm=2,C2=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),P2=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),L2=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_2=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),I2=(s,a,r,o,d,c,p,m)=>{const g=m.bits;let v=0,j=0,A=0,R=0,w=0,$=0,F=0,D=0,_=0,Y=0,ee,G,fe,he,Be,ge=null,te;const ye=new Uint16Array(pc+1),z=new Uint16Array(pc+1);let H=null,de,ie,ke;for(v=0;v<=pc;v++)ye[v]=0;for(j=0;j<o;j++)ye[a[r+j]]++;for(w=g,R=pc;R>=1&&ye[R]===0;R--);if(w>R&&(w=R),R===0)return d[c++]=1<<24|64<<16|0,d[c++]=1<<24|64<<16|0,m.bits=1,0;for(A=1;A<R&&ye[A]===0;A++);for(w<A&&(w=A),D=1,v=1;v<=pc;v++)if(D<<=1,D-=ye[v],D<0)return-1;if(D>0&&(s===wm||R!==1))return-1;for(z[1]=0,v=1;v<pc;v++)z[v+1]=z[v]+ye[v];for(j=0;j<o;j++)a[r+j]!==0&&(p[z[a[r+j]]++]=j);if(s===wm?(ge=H=p,te=20):s===Vu?(ge=C2,H=P2,te=257):(ge=L2,H=_2,te=0),Y=0,j=0,v=A,Be=c,$=w,F=0,fe=-1,_=1<<w,he=_-1,s===Vu&&_>vm||s===jm&&_>bm)return 1;for(;;){de=v-F,p[j]+1<te?(ie=0,ke=p[j]):p[j]>=te?(ie=H[p[j]-te],ke=ge[p[j]-te]):(ie=96,ke=0),ee=1<<v-F,G=1<<$,A=G;do G-=ee,d[Be+(Y>>F)+G]=de<<24|ie<<16|ke|0;while(G!==0);for(ee=1<<v-1;Y&ee;)ee>>=1;if(ee!==0?(Y&=ee-1,Y+=ee):Y=0,j++,--ye[v]===0){if(v===R)break;v=a[r+p[j]]}if(v>w&&(Y&he)!==fe){for(F===0&&(F=w),Be+=A,$=v-F,D=1<<$;$+F<R&&(D-=ye[$+F],!(D<=0));)$++,D<<=1;if(_+=1<<$,s===Vu&&_>vm||s===jm&&_>bm)return 1;fe=Y&he,d[fe]=w<<24|$<<16|Be-c|0}}return Y!==0&&(d[Be+Y]=v-F<<24|64<<16|0),m.bits=w,0};var Hc=I2;const E2=0,Xp=1,Zp=2,{Z_FINISH:Nm,Z_BLOCK:M2,Z_TREES:_d,Z_OK:Hl,Z_STREAM_END:D2,Z_NEED_DICT:F2,Z_STREAM_ERROR:Qi,Z_DATA_ERROR:eg,Z_MEM_ERROR:tg,Z_BUF_ERROR:R2,Z_DEFLATED:Sm}=Jp,Zd=16180,km=16181,Am=16182,Cm=16183,Pm=16184,Lm=16185,_m=16186,Im=16187,Em=16188,Mm=16189,Gd=16190,el=16191,Hu=16192,Dm=16193,Yu=16194,Fm=16195,Rm=16196,Tm=16197,Om=16198,Id=16199,Ed=16200,Bm=16201,zm=16202,Um=16203,qm=16204,$m=16205,Gu=16206,Wm=16207,Vm=16208,Ur=16209,ng=16210,rg=16211,T2=852,O2=592,B2=15,z2=B2,Hm=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function U2(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gl=s=>{if(!s)return 1;const a=s.state;return!a||a.strm!==s||a.mode<Zd||a.mode>rg?1:0},ag=s=>{if(Gl(s))return Qi;const a=s.state;return s.total_in=s.total_out=a.total=0,s.msg="",a.wrap&&(s.adler=a.wrap&1),a.mode=Zd,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(T2),a.distcode=a.distdyn=new Int32Array(O2),a.sane=1,a.back=-1,Hl},sg=s=>{if(Gl(s))return Qi;const a=s.state;return a.wsize=0,a.whave=0,a.wnext=0,ag(s)},ig=(s,a)=>{let r;if(Gl(s))return Qi;const o=s.state;return a<0?(r=0,a=-a):(r=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Qi:(o.window!==null&&o.wbits!==a&&(o.window=null),o.wrap=r,o.wbits=a,sg(s))},og=(s,a)=>{if(!s)return Qi;const r=new U2;s.state=r,r.strm=s,r.window=null,r.mode=Zd;const o=ig(s,a);return o!==Hl&&(s.state=null),o},q2=s=>og(s,z2);let Ym=!0,Ju,Ku;const $2=s=>{if(Ym){Ju=new Int32Array(512),Ku=new Int32Array(32);let a=0;for(;a<144;)s.lens[a++]=8;for(;a<256;)s.lens[a++]=9;for(;a<280;)s.lens[a++]=7;for(;a<288;)s.lens[a++]=8;for(Hc(Xp,s.lens,0,288,Ju,0,s.work,{bits:9}),a=0;a<32;)s.lens[a++]=5;Hc(Zp,s.lens,0,32,Ku,0,s.work,{bits:5}),Ym=!1}s.lencode=Ju,s.lenbits=9,s.distcode=Ku,s.distbits=5},lg=(s,a,r,o)=>{let d;const c=s.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),o>=c.wsize?(c.window.set(a.subarray(r-c.wsize,r),0),c.wnext=0,c.whave=c.wsize):(d=c.wsize-c.wnext,d>o&&(d=o),c.window.set(a.subarray(r-o,r-o+d),c.wnext),o-=d,o?(c.window.set(a.subarray(r-o,r),0),c.wnext=o,c.whave=c.wsize):(c.wnext+=d,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=d))),0},W2=(s,a)=>{let r,o,d,c,p,m,g,v,j,A,R,w,$,F,D=0,_,Y,ee,G,fe,he,Be,ge;const te=new Uint8Array(4);let ye,z;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gl(s)||!s.output||!s.input&&s.avail_in!==0)return Qi;r=s.state,r.mode===el&&(r.mode=Hu),p=s.next_out,d=s.output,g=s.avail_out,c=s.next_in,o=s.input,m=s.avail_in,v=r.hold,j=r.bits,A=m,R=g,ge=Hl;e:for(;;)switch(r.mode){case Zd:if(r.wrap===0){r.mode=Hu;break}for(;j<16;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,te[0]=v&255,te[1]=v>>>8&255,r.check=To(r.check,te,2,0),v=0,j=0,r.mode=km;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){s.msg="incorrect header check",r.mode=Ur;break}if((v&15)!==Sm){s.msg="unknown compression method",r.mode=Ur;break}if(v>>>=4,j-=4,Be=(v&15)+8,r.wbits===0&&(r.wbits=Be),Be>15||Be>r.wbits){s.msg="invalid window size",r.mode=Ur;break}r.dmax=1<<r.wbits,r.flags=0,s.adler=r.check=1,r.mode=v&512?Mm:el,v=0,j=0;break;case km:for(;j<16;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(r.flags=v,(r.flags&255)!==Sm){s.msg="unknown compression method",r.mode=Ur;break}if(r.flags&57344){s.msg="unknown header flags set",r.mode=Ur;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(te[0]=v&255,te[1]=v>>>8&255,r.check=To(r.check,te,2,0)),v=0,j=0,r.mode=Am;case Am:for(;j<32;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(te[0]=v&255,te[1]=v>>>8&255,te[2]=v>>>16&255,te[3]=v>>>24&255,r.check=To(r.check,te,4,0)),v=0,j=0,r.mode=Cm;case Cm:for(;j<16;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(te[0]=v&255,te[1]=v>>>8&255,r.check=To(r.check,te,2,0)),v=0,j=0,r.mode=Pm;case Pm:if(r.flags&1024){for(;j<16;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(te[0]=v&255,te[1]=v>>>8&255,r.check=To(r.check,te,2,0)),v=0,j=0}else r.head&&(r.head.extra=null);r.mode=Lm;case Lm:if(r.flags&1024&&(w=r.length,w>m&&(w=m),w&&(r.head&&(Be=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(o.subarray(c,c+w),Be)),r.flags&512&&r.wrap&4&&(r.check=To(r.check,o,w,c)),m-=w,c+=w,r.length-=w),r.length))break e;r.length=0,r.mode=_m;case _m:if(r.flags&2048){if(m===0)break e;w=0;do Be=o[c+w++],r.head&&Be&&r.length<65536&&(r.head.name+=String.fromCharCode(Be));while(Be&&w<m);if(r.flags&512&&r.wrap&4&&(r.check=To(r.check,o,w,c)),m-=w,c+=w,Be)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Im;case Im:if(r.flags&4096){if(m===0)break e;w=0;do Be=o[c+w++],r.head&&Be&&r.length<65536&&(r.head.comment+=String.fromCharCode(Be));while(Be&&w<m);if(r.flags&512&&r.wrap&4&&(r.check=To(r.check,o,w,c)),m-=w,c+=w,Be)break e}else r.head&&(r.head.comment=null);r.mode=Em;case Em:if(r.flags&512){for(;j<16;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(r.wrap&4&&v!==(r.check&65535)){s.msg="header crc mismatch",r.mode=Ur;break}v=0,j=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),s.adler=r.check=0,r.mode=el;break;case Mm:for(;j<32;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}s.adler=r.check=Hm(v),v=0,j=0,r.mode=Gd;case Gd:if(r.havedict===0)return s.next_out=p,s.avail_out=g,s.next_in=c,s.avail_in=m,r.hold=v,r.bits=j,F2;s.adler=r.check=1,r.mode=el;case el:if(a===M2||a===_d)break e;case Hu:if(r.last){v>>>=j&7,j-=j&7,r.mode=Gu;break}for(;j<3;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}switch(r.last=v&1,v>>>=1,j-=1,v&3){case 0:r.mode=Dm;break;case 1:if($2(r),r.mode=Id,a===_d){v>>>=2,j-=2;break e}break;case 2:r.mode=Rm;break;case 3:s.msg="invalid block type",r.mode=Ur}v>>>=2,j-=2;break;case Dm:for(v>>>=j&7,j-=j&7;j<32;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if((v&65535)!==(v>>>16^65535)){s.msg="invalid stored block lengths",r.mode=Ur;break}if(r.length=v&65535,v=0,j=0,r.mode=Yu,a===_d)break e;case Yu:r.mode=Fm;case Fm:if(w=r.length,w){if(w>m&&(w=m),w>g&&(w=g),w===0)break e;d.set(o.subarray(c,c+w),p),m-=w,c+=w,g-=w,p+=w,r.length-=w;break}r.mode=el;break;case Rm:for(;j<14;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(r.nlen=(v&31)+257,v>>>=5,j-=5,r.ndist=(v&31)+1,v>>>=5,j-=5,r.ncode=(v&15)+4,v>>>=4,j-=4,r.nlen>286||r.ndist>30){s.msg="too many length or distance symbols",r.mode=Ur;break}r.have=0,r.mode=Tm;case Tm:for(;r.have<r.ncode;){for(;j<3;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.lens[H[r.have++]]=v&7,v>>>=3,j-=3}for(;r.have<19;)r.lens[H[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ye={bits:r.lenbits},ge=Hc(E2,r.lens,0,19,r.lencode,0,r.work,ye),r.lenbits=ye.bits,ge){s.msg="invalid code lengths set",r.mode=Ur;break}r.have=0,r.mode=Om;case Om:for(;r.have<r.nlen+r.ndist;){for(;D=r.lencode[v&(1<<r.lenbits)-1],_=D>>>24,Y=D>>>16&255,ee=D&65535,!(_<=j);){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(ee<16)v>>>=_,j-=_,r.lens[r.have++]=ee;else{if(ee===16){for(z=_+2;j<z;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(v>>>=_,j-=_,r.have===0){s.msg="invalid bit length repeat",r.mode=Ur;break}Be=r.lens[r.have-1],w=3+(v&3),v>>>=2,j-=2}else if(ee===17){for(z=_+3;j<z;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}v>>>=_,j-=_,Be=0,w=3+(v&7),v>>>=3,j-=3}else{for(z=_+7;j<z;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}v>>>=_,j-=_,Be=0,w=11+(v&127),v>>>=7,j-=7}if(r.have+w>r.nlen+r.ndist){s.msg="invalid bit length repeat",r.mode=Ur;break}for(;w--;)r.lens[r.have++]=Be}}if(r.mode===Ur)break;if(r.lens[256]===0){s.msg="invalid code -- missing end-of-block",r.mode=Ur;break}if(r.lenbits=9,ye={bits:r.lenbits},ge=Hc(Xp,r.lens,0,r.nlen,r.lencode,0,r.work,ye),r.lenbits=ye.bits,ge){s.msg="invalid literal/lengths set",r.mode=Ur;break}if(r.distbits=6,r.distcode=r.distdyn,ye={bits:r.distbits},ge=Hc(Zp,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ye),r.distbits=ye.bits,ge){s.msg="invalid distances set",r.mode=Ur;break}if(r.mode=Id,a===_d)break e;case Id:r.mode=Ed;case Ed:if(m>=6&&g>=258){s.next_out=p,s.avail_out=g,s.next_in=c,s.avail_in=m,r.hold=v,r.bits=j,A2(s,R),p=s.next_out,d=s.output,g=s.avail_out,c=s.next_in,o=s.input,m=s.avail_in,v=r.hold,j=r.bits,r.mode===el&&(r.back=-1);break}for(r.back=0;D=r.lencode[v&(1<<r.lenbits)-1],_=D>>>24,Y=D>>>16&255,ee=D&65535,!(_<=j);){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(Y&&(Y&240)===0){for(G=_,fe=Y,he=ee;D=r.lencode[he+((v&(1<<G+fe)-1)>>G)],_=D>>>24,Y=D>>>16&255,ee=D&65535,!(G+_<=j);){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}v>>>=G,j-=G,r.back+=G}if(v>>>=_,j-=_,r.back+=_,r.length=ee,Y===0){r.mode=$m;break}if(Y&32){r.back=-1,r.mode=el;break}if(Y&64){s.msg="invalid literal/length code",r.mode=Ur;break}r.extra=Y&15,r.mode=Bm;case Bm:if(r.extra){for(z=r.extra;j<z;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=zm;case zm:for(;D=r.distcode[v&(1<<r.distbits)-1],_=D>>>24,Y=D>>>16&255,ee=D&65535,!(_<=j);){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if((Y&240)===0){for(G=_,fe=Y,he=ee;D=r.distcode[he+((v&(1<<G+fe)-1)>>G)],_=D>>>24,Y=D>>>16&255,ee=D&65535,!(G+_<=j);){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}v>>>=G,j-=G,r.back+=G}if(v>>>=_,j-=_,r.back+=_,Y&64){s.msg="invalid distance code",r.mode=Ur;break}r.offset=ee,r.extra=Y&15,r.mode=Um;case Um:if(r.extra){for(z=r.extra;j<z;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){s.msg="invalid distance too far back",r.mode=Ur;break}r.mode=qm;case qm:if(g===0)break e;if(w=R-g,r.offset>w){if(w=r.offset-w,w>r.whave&&r.sane){s.msg="invalid distance too far back",r.mode=Ur;break}w>r.wnext?(w-=r.wnext,$=r.wsize-w):$=r.wnext-w,w>r.length&&(w=r.length),F=r.window}else F=d,$=p-r.offset,w=r.length;w>g&&(w=g),g-=w,r.length-=w;do d[p++]=F[$++];while(--w);r.length===0&&(r.mode=Ed);break;case $m:if(g===0)break e;d[p++]=r.length,g--,r.mode=Ed;break;case Gu:if(r.wrap){for(;j<32;){if(m===0)break e;m--,v|=o[c++]<<j,j+=8}if(R-=g,s.total_out+=R,r.total+=R,r.wrap&4&&R&&(s.adler=r.check=r.flags?To(r.check,d,R,p-R):vf(r.check,d,R,p-R)),R=g,r.wrap&4&&(r.flags?v:Hm(v))!==r.check){s.msg="incorrect data check",r.mode=Ur;break}v=0,j=0}r.mode=Wm;case Wm:if(r.wrap&&r.flags){for(;j<32;){if(m===0)break e;m--,v+=o[c++]<<j,j+=8}if(r.wrap&4&&v!==(r.total&4294967295)){s.msg="incorrect length check",r.mode=Ur;break}v=0,j=0}r.mode=Vm;case Vm:ge=D2;break e;case Ur:ge=eg;break e;case ng:return tg;case rg:default:return Qi}return s.next_out=p,s.avail_out=g,s.next_in=c,s.avail_in=m,r.hold=v,r.bits=j,(r.wsize||R!==s.avail_out&&r.mode<Ur&&(r.mode<Gu||a!==Nm))&&lg(s,s.output,s.next_out,R-s.avail_out),A-=s.avail_in,R-=s.avail_out,s.total_in+=A,s.total_out+=R,r.total+=R,r.wrap&4&&R&&(s.adler=r.check=r.flags?To(r.check,d,R,s.next_out-R):vf(r.check,d,R,s.next_out-R)),s.data_type=r.bits+(r.last?64:0)+(r.mode===el?128:0)+(r.mode===Id||r.mode===Yu?256:0),(A===0&&R===0||a===Nm)&&ge===Hl&&(ge=R2),ge},V2=s=>{if(Gl(s))return Qi;let a=s.state;return a.window&&(a.window=null),s.state=null,Hl},H2=(s,a)=>{if(Gl(s))return Qi;const r=s.state;return(r.wrap&2)===0?Qi:(r.head=a,a.done=!1,Hl)},Y2=(s,a)=>{const r=a.length;let o,d,c;return Gl(s)||(o=s.state,o.wrap!==0&&o.mode!==Gd)?Qi:o.mode===Gd&&(d=1,d=vf(d,a,r,0),d!==o.check)?eg:(c=lg(s,a,r,r),c?(o.mode=ng,tg):(o.havedict=1,Hl))};var G2=sg,J2=ig,K2=ag,Q2=q2,X2=og,Z2=W2,ex=V2,tx=H2,nx=Y2,rx="pako inflate (from Nodeca project)",tl={inflateReset:G2,inflateReset2:J2,inflateResetKeep:K2,inflateInit:Q2,inflateInit2:X2,inflate:Z2,inflateEnd:ex,inflateGetHeader:tx,inflateSetDictionary:nx,inflateInfo:rx};function ax(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var sx=ax;const cg=Object.prototype.toString,{Z_NO_FLUSH:ix,Z_FINISH:ox,Z_OK:Qc,Z_STREAM_END:Qu,Z_NEED_DICT:Xu,Z_STREAM_ERROR:lx,Z_DATA_ERROR:Gm,Z_MEM_ERROR:cx}=Jp;function td(s){this.options=Kp.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(s&&s.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S2,this.strm.avail_out=0;let r=tl.inflateInit2(this.strm,a.windowBits);if(r!==Qc)throw new Error(bf[r]);if(this.header=new sx,tl.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=wf.string2buf(a.dictionary):cg.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(r=tl.inflateSetDictionary(this.strm,a.dictionary),r!==Qc)))throw new Error(bf[r])}td.prototype.push=function(s,a){const r=this.strm,o=this.options.chunkSize,d=this.options.dictionary;let c,p,m;if(this.ended)return!1;for(a===~~a?p=a:p=a===!0?ox:ix,cg.call(s)==="[object ArrayBuffer]"?r.input=new Uint8Array(s):r.input=s,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),c=tl.inflate(r,p),c===Xu&&d&&(c=tl.inflateSetDictionary(r,d),c===Qc?c=tl.inflate(r,p):c===Gm&&(c=Xu));r.avail_in>0&&c===Qu&&r.state.wrap>0&&s[r.next_in]!==0;)tl.inflateReset(r),c=tl.inflate(r,p);switch(c){case lx:case Gm:case Xu:case cx:return this.onEnd(c),this.ended=!0,!1}if(m=r.avail_out,r.next_out&&(r.avail_out===0||c===Qu))if(this.options.to==="string"){let g=wf.utf8border(r.output,r.next_out),v=r.next_out-g,j=wf.buf2string(r.output,g);r.next_out=v,r.avail_out=o-v,v&&r.output.set(r.output.subarray(g,g+v),0),this.onData(j)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(c===Qc&&m===0)){if(c===Qu)return c=tl.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};td.prototype.onData=function(s){this.chunks.push(s)};td.prototype.onEnd=function(s){s===Qc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Kp.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function dx(s,a){const r=new td(a);if(r.push(s),r.err)throw r.msg||bf[r.err];return r.result}var ux=td,fx=dx,hx={Inflate:ux,inflate:fx};const{Inflate:mx,inflate:px}=hx;var Jm=mx,gx=px;const dg=[];for(let s=0;s<256;s++){let a=s;for(let r=0;r<8;r++)a&1?a=3988292384^a>>>1:a=a>>>1;dg[s]=a}const Km=4294967295;function xx(s,a,r){let o=s;for(let d=0;d<r;d++)o=dg[(o^a[d])&255]^o>>>8;return o}function yx(s,a){return(xx(Km,s,a)^Km)>>>0}function Qm(s,a,r){const o=s.readUint32(),d=yx(new Uint8Array(s.buffer,s.byteOffset+s.offset-a-4,a),a);if(d!==o)throw new Error(`CRC mismatch for chunk ${r}. Expected ${o}, found ${d}`)}function ug(s,a,r){for(let o=0;o<r;o++)a[o]=s[o]}function fg(s,a,r,o){let d=0;for(;d<o;d++)a[d]=s[d];for(;d<r;d++)a[d]=s[d]+a[d-o]&255}function hg(s,a,r,o){let d=0;if(r.length===0)for(;d<o;d++)a[d]=s[d];else for(;d<o;d++)a[d]=s[d]+r[d]&255}function mg(s,a,r,o,d){let c=0;if(r.length===0){for(;c<d;c++)a[c]=s[c];for(;c<o;c++)a[c]=s[c]+(a[c-d]>>1)&255}else{for(;c<d;c++)a[c]=s[c]+(r[c]>>1)&255;for(;c<o;c++)a[c]=s[c]+(a[c-d]+r[c]>>1)&255}}function pg(s,a,r,o,d){let c=0;if(r.length===0){for(;c<d;c++)a[c]=s[c];for(;c<o;c++)a[c]=s[c]+a[c-d]&255}else{for(;c<d;c++)a[c]=s[c]+r[c]&255;for(;c<o;c++)a[c]=s[c]+vx(a[c-d],r[c],r[c-d])&255}}function vx(s,a,r){const o=s+a-r,d=Math.abs(o-s),c=Math.abs(o-a),p=Math.abs(o-r);return d<=c&&d<=p?s:c<=p?a:r}function bx(s,a,r,o,d,c){switch(s){case 0:ug(a,r,d);break;case 1:fg(a,r,d,c);break;case 2:hg(a,r,o,d);break;case 3:mg(a,r,o,d,c);break;case 4:pg(a,r,o,d,c);break;default:throw new Error(`Unsupported filter: ${s}`)}}const wx=new Uint16Array([255]),jx=new Uint8Array(wx.buffer),Nx=jx[0]===255;function Sx(s){const{data:a,width:r,height:o,channels:d,depth:c}=s,p=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],m=Math.ceil(c/8)*d,g=new Uint8Array(o*r*m);let v=0;for(let j=0;j<7;j++){const A=p[j],R=Math.ceil((r-A.x)/A.xStep),w=Math.ceil((o-A.y)/A.yStep);if(R<=0||w<=0)continue;const $=R*m,F=new Uint8Array($);for(let D=0;D<w;D++){const _=a[v++],Y=a.subarray(v,v+$);v+=$;const ee=new Uint8Array($);bx(_,Y,ee,F,$,m),F.set(ee);for(let G=0;G<R;G++){const fe=A.x+G*A.xStep,he=A.y+D*A.yStep;if(!(fe>=r||he>=o))for(let Be=0;Be<m;Be++)g[(he*r+fe)*m+Be]=ee[G*m+Be]}}}if(c===16){const j=new Uint16Array(g.buffer);if(Nx)for(let A=0;A<j.length;A++)j[A]=kx(j[A]);return j}else return g}function kx(s){return(s&255)<<8|s>>8&255}const Ax=new Uint16Array([255]),Cx=new Uint8Array(Ax.buffer),Px=Cx[0]===255,Lx=new Uint8Array(0);function Xm(s){const{data:a,width:r,height:o,channels:d,depth:c}=s,p=Math.ceil(c/8)*d,m=Math.ceil(c/8*d*r),g=new Uint8Array(o*m);let v=Lx,j=0,A,R;for(let w=0;w<o;w++){switch(A=a.subarray(j+1,j+1+m),R=g.subarray(w*m,(w+1)*m),a[j]){case 0:ug(A,R,m);break;case 1:fg(A,R,m,p);break;case 2:hg(A,R,v,m);break;case 3:mg(A,R,v,m,p);break;case 4:pg(A,R,v,m,p);break;default:throw new Error(`Unsupported filter: ${a[j]}`)}v=R,j+=m+1}if(c===16){const w=new Uint16Array(g.buffer);if(Px)for(let $=0;$<w.length;$++)w[$]=_x(w[$]);return w}else return g}function _x(s){return(s&255)<<8|s>>8&255}const Bd=Uint8Array.of(137,80,78,71,13,10,26,10);function Zm(s){if(!Ix(s.readBytes(Bd.length)))throw new Error("wrong PNG signature")}function Ix(s){if(s.length<Bd.length)return!1;for(let a=0;a<Bd.length;a++)if(s[a]!==Bd[a])return!1;return!0}const Ex="tEXt",Mx=0,gg=new TextDecoder("latin1");function Dx(s){if(Rx(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const Fx=/^[\u0000-\u00FF]*$/;function Rx(s){if(!Fx.test(s))throw new Error("invalid latin1 text")}function Tx(s,a,r){const o=xg(a);s[o]=Ox(a,r-o.length-1)}function xg(s){for(s.mark();s.readByte()!==Mx;);const a=s.offset;s.reset();const r=gg.decode(s.readBytes(a-s.offset-1));return s.skip(1),Dx(r),r}function Ox(s,a){return gg.decode(s.readBytes(a))}const Mi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Zu={UNKNOWN:-1,DEFLATE:0},ep={UNKNOWN:-1,ADAPTIVE:0},ef={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Md={NONE:0,BACKGROUND:1,PREVIOUS:2},tf={SOURCE:0,OVER:1};class Bx extends Rf{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,r={}){super(a);const{checkCrc:o=!1}=r;this._checkCrc=o,this._inflator=new Jm,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Zu.UNKNOWN,this._filterMethod=ep.UNKNOWN,this._interlaceMethod=ef.UNKNOWN,this._colorType=Mi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Zm(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(Zm(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const o=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case Ex:Tx(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Qm(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const o=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=o+a;break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Qm(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=zx(this.readUint8());const r=this.readUint8();this._colorType=r;let o;switch(r){case Mi.GREYSCALE:o=1;break;case Mi.TRUECOLOUR:o=3;break;case Mi.INDEXED_COLOUR:o=1;break;case Mi.GREYSCALE_ALPHA:o=2;break;case Mi.TRUECOLOUR_ALPHA:o=4;break;case Mi.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Zu.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const o=[];this._palette=o;for(let d=0;d<r;d++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,o=this.offset+this.byteOffset;if(o+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case Mi.GREYSCALE:case Mi.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case Mi.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const o=this.readByte();this._palette[r].push(o)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Mi.UNKNOWN:case Mi.GREYSCALE_ALPHA:case Mi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=xg(this),o=this.readUint8();if(o!==Zu.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const d=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:gx(d)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),o=this.readByte();this._png.resolution={x:a,y:r,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(a);if(o){if(o.data=Xm({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)r.data=o.data;else{const d=this._apng.frames.at(a-1);this.disposeFrame(o,d,r),this.addFrameDataToCanvas(r,o)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,o){switch(a.disposeOp){case Md.NONE:break;case Md.BACKGROUND:for(let d=0;d<this._png.height;d++)for(let c=0;c<this._png.width;c++){const p=(d*a.width+c)*this._png.channels;for(let m=0;m<this._png.channels;m++)o.data[p+m]=0}break;case Md.PREVIOUS:o.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const o=1<<this._png.depth,d=(c,p)=>{const m=((c+r.yOffset)*this._png.width+r.xOffset+p)*this._png.channels,g=(c*r.width+p)*this._png.channels;return{index:m,frameIndex:g}};switch(r.blendOp){case tf.SOURCE:for(let c=0;c<r.height;c++)for(let p=0;p<r.width;p++){const{index:m,frameIndex:g}=d(c,p);for(let v=0;v<this._png.channels;v++)a.data[m+v]=r.data[g+v]}break;case tf.OVER:for(let c=0;c<r.height;c++)for(let p=0;p<r.width;p++){const{index:m,frameIndex:g}=d(c,p);for(let v=0;v<this._png.channels;v++){const j=r.data[g+this._png.channels-1]/o,A=v%(this._png.channels-1)===0?1:r.data[g+v],R=Math.floor(j*A+(1-j)*a.data[m+v]);a.data[m+v]+=R}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==ep.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ef.NO_INTERLACE)this._png.data=Xm({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ef.ADAM7)this._png.data=Sx({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Md.NONE,blendOp:tf.SOURCE,data:a}),this._inflator=new Jm,this._writingDataChunks=!1}}function zx(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}var tp;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(tp||(tp={}));function Ux(s,a){return new Bx(s,a).decode()}var cn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function nf(){cn.console&&typeof cn.console.log=="function"&&cn.console.log.apply(cn.console,arguments)}var pr={log:nf,warn:function(s){cn.console&&(typeof cn.console.warn=="function"?cn.console.warn.apply(cn.console,arguments):nf.call(null,arguments))},error:function(s){cn.console&&(typeof cn.console.error=="function"?cn.console.error.apply(cn.console,arguments):nf(s))}};function rf(s,a,r){var o=new XMLHttpRequest;o.open("GET",s),o.responseType="blob",o.onload=function(){ql(o.response,a,r)},o.onerror=function(){pr.error("could not download file")},o.send()}function np(s){var a=new XMLHttpRequest;a.open("HEAD",s,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function Dd(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(a)}}var ql=cn.saveAs||((typeof window>"u"?"undefined":dr(window))!=="object"||window!==cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,a,r){var o=cn.URL||cn.webkitURL,d=document.createElement("a");a=a||s.name||"download",d.download=a,d.rel="noopener",typeof s=="string"?(d.href=s,d.origin!==location.origin?np(d.href)?rf(s,a,r):Dd(d,d.target="_blank"):Dd(d)):(d.href=o.createObjectURL(s),setTimeout(function(){o.revokeObjectURL(d.href)},4e4),setTimeout(function(){Dd(d)},0))}:"msSaveOrOpenBlob"in navigator?function(s,a,r){if(a=a||s.name||"download",typeof s=="string")if(np(s))rf(s,a,r);else{var o=document.createElement("a");o.href=s,o.target="_blank",setTimeout(function(){Dd(o)})}else navigator.msSaveOrOpenBlob((function(d,c){return c===void 0?c={autoBom:!1}:dr(c)!=="object"&&(pr.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d})(s,r),a)}:function(s,a,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof s=="string")return rf(s,a,r);var d=s.type==="application/octet-stream",c=/constructor/i.test(cn.HTMLElement)||cn.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&c)&&(typeof FileReader>"u"?"undefined":dr(FileReader))==="object"){var m=new FileReader;m.onloadend=function(){var j=m.result;j=p?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=j:location=j,o=null},m.readAsDataURL(s)}else{var g=cn.URL||cn.webkitURL,v=g.createObjectURL(s);o?o.location=v:location.href=v,o=null,setTimeout(function(){g.revokeObjectURL(v)},4e4)}});function yg(s){var a;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],o=0;o<r.length;o++){var d=r[o].re,c=r[o].process,p=d.exec(s);p&&(a=c(p),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var m=this.r.toString(16),g=this.g.toString(16),v=this.b.toString(16);return m.length==1&&(m="0"+m),g.length==1&&(g="0"+g),v.length==1&&(v="0"+v),"#"+m+g+v}}var zd=cn.atob.bind(cn),rp=cn.btoa.bind(cn);function af(s,a){var r=s[0],o=s[1],d=s[2],c=s[3];r=Is(r,o,d,c,a[0],7,-680876936),c=Is(c,r,o,d,a[1],12,-389564586),d=Is(d,c,r,o,a[2],17,606105819),o=Is(o,d,c,r,a[3],22,-1044525330),r=Is(r,o,d,c,a[4],7,-176418897),c=Is(c,r,o,d,a[5],12,1200080426),d=Is(d,c,r,o,a[6],17,-1473231341),o=Is(o,d,c,r,a[7],22,-45705983),r=Is(r,o,d,c,a[8],7,1770035416),c=Is(c,r,o,d,a[9],12,-1958414417),d=Is(d,c,r,o,a[10],17,-42063),o=Is(o,d,c,r,a[11],22,-1990404162),r=Is(r,o,d,c,a[12],7,1804603682),c=Is(c,r,o,d,a[13],12,-40341101),d=Is(d,c,r,o,a[14],17,-1502002290),r=Es(r,o=Is(o,d,c,r,a[15],22,1236535329),d,c,a[1],5,-165796510),c=Es(c,r,o,d,a[6],9,-1069501632),d=Es(d,c,r,o,a[11],14,643717713),o=Es(o,d,c,r,a[0],20,-373897302),r=Es(r,o,d,c,a[5],5,-701558691),c=Es(c,r,o,d,a[10],9,38016083),d=Es(d,c,r,o,a[15],14,-660478335),o=Es(o,d,c,r,a[4],20,-405537848),r=Es(r,o,d,c,a[9],5,568446438),c=Es(c,r,o,d,a[14],9,-1019803690),d=Es(d,c,r,o,a[3],14,-187363961),o=Es(o,d,c,r,a[8],20,1163531501),r=Es(r,o,d,c,a[13],5,-1444681467),c=Es(c,r,o,d,a[2],9,-51403784),d=Es(d,c,r,o,a[7],14,1735328473),r=Ms(r,o=Es(o,d,c,r,a[12],20,-1926607734),d,c,a[5],4,-378558),c=Ms(c,r,o,d,a[8],11,-2022574463),d=Ms(d,c,r,o,a[11],16,1839030562),o=Ms(o,d,c,r,a[14],23,-35309556),r=Ms(r,o,d,c,a[1],4,-1530992060),c=Ms(c,r,o,d,a[4],11,1272893353),d=Ms(d,c,r,o,a[7],16,-155497632),o=Ms(o,d,c,r,a[10],23,-1094730640),r=Ms(r,o,d,c,a[13],4,681279174),c=Ms(c,r,o,d,a[0],11,-358537222),d=Ms(d,c,r,o,a[3],16,-722521979),o=Ms(o,d,c,r,a[6],23,76029189),r=Ms(r,o,d,c,a[9],4,-640364487),c=Ms(c,r,o,d,a[12],11,-421815835),d=Ms(d,c,r,o,a[15],16,530742520),r=Ds(r,o=Ms(o,d,c,r,a[2],23,-995338651),d,c,a[0],6,-198630844),c=Ds(c,r,o,d,a[7],10,1126891415),d=Ds(d,c,r,o,a[14],15,-1416354905),o=Ds(o,d,c,r,a[5],21,-57434055),r=Ds(r,o,d,c,a[12],6,1700485571),c=Ds(c,r,o,d,a[3],10,-1894986606),d=Ds(d,c,r,o,a[10],15,-1051523),o=Ds(o,d,c,r,a[1],21,-2054922799),r=Ds(r,o,d,c,a[8],6,1873313359),c=Ds(c,r,o,d,a[15],10,-30611744),d=Ds(d,c,r,o,a[6],15,-1560198380),o=Ds(o,d,c,r,a[13],21,1309151649),r=Ds(r,o,d,c,a[4],6,-145523070),c=Ds(c,r,o,d,a[11],10,-1120210379),d=Ds(d,c,r,o,a[2],15,718787259),o=Ds(o,d,c,r,a[9],21,-343485551),s[0]=jl(r,s[0]),s[1]=jl(o,s[1]),s[2]=jl(d,s[2]),s[3]=jl(c,s[3])}function eu(s,a,r,o,d,c){return a=jl(jl(a,s),jl(o,c)),jl(a<<d|a>>>32-d,r)}function Is(s,a,r,o,d,c,p){return eu(a&r|~a&o,s,a,d,c,p)}function Es(s,a,r,o,d,c,p){return eu(a&o|r&~o,s,a,d,c,p)}function Ms(s,a,r,o,d,c,p){return eu(a^r^o,s,a,d,c,p)}function Ds(s,a,r,o,d,c,p){return eu(r^(a|~o),s,a,d,c,p)}function vg(s){var a,r=s.length,o=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=s.length;a+=64)af(o,qx(s.substring(a-64,a)));s=s.substring(a-64);var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<s.length;a++)d[a>>2]|=s.charCodeAt(a)<<(a%4<<3);if(d[a>>2]|=128<<(a%4<<3),a>55)for(af(o,d),a=0;a<16;a++)d[a]=0;return d[14]=8*r,af(o,d),o}function qx(s){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=s.charCodeAt(a)+(s.charCodeAt(a+1)<<8)+(s.charCodeAt(a+2)<<16)+(s.charCodeAt(a+3)<<24);return r}var ap="0123456789abcdef".split("");function $x(s){for(var a="",r=0;r<4;r++)a+=ap[s>>8*r+4&15]+ap[s>>8*r&15];return a}function Wx(s){return String.fromCharCode(255&s,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function jf(s){return vg(s).map(Wx).join("")}var Vx=(function(s){for(var a=0;a<s.length;a++)s[a]=$x(s[a]);return s.join("")})(vg("hello"))!="5d41402abc4b2a76b9719d911017c592";function jl(s,a){if(Vx){var r=(65535&s)+(65535&a);return(s>>16)+(a>>16)+(r>>16)<<16|65535&r}return s+a&4294967295}function Nf(s,a){var r,o,d,c;if(s!==r){for(var p=(d=s,c=1+(256/s.length|0),new Array(c+1).join(d)),m=[],g=0;g<256;g++)m[g]=g;var v=0;for(g=0;g<256;g++){var j=m[g];v=(v+j+p.charCodeAt(g))%256,m[g]=m[v],m[v]=j}r=s,o=m}else m=o;var A=a.length,R=0,w=0,$="";for(g=0;g<A;g++)w=(w+(j=m[R=(R+1)%256]))%256,m[R]=m[w],m[w]=j,p=m[(m[R]+m[w])%256],$+=String.fromCharCode(a.charCodeAt(g)^p);return $}var sp={print:4,modify:8,copy:16,"annot-forms":32};function yc(s,a,r,o){this.v=1,this.r=2;var d=192;s.forEach(function(m){if(sp.perm!==void 0)throw new Error("Invalid permission: "+m);d+=sp[m]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(a+this.padding).substr(0,32),p=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,p),this.P=-(1+(255^d)),this.encryptionKey=jf(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=Nf(this.encryptionKey,this.padding)}function vc(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var a="",r=s.length,o=0;o<r;o++){var d=s.charCodeAt(o);a+=d<33||d===35||d===37||d===40||d===41||d===47||d===60||d===62||d===91||d===93||d===123||d===125||d>126?"#"+("0"+d.toString(16)).slice(-2):s[o]}return a}function ip(s){if(dr(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,o,d){if(d=d||!1,typeof r!="string"||typeof o!="function"||typeof d!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var c=Math.random().toString(35);return a[r][c]=[o,!!d],c},this.unsubscribe=function(r){for(var o in a)if(a[o][r])return delete a[o][r],Object.keys(a[o]).length===0&&delete a[o],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),d=[];for(var c in a[r]){var p=a[r][c];try{p[0].apply(s,o)}catch(m){cn.console&&pr.error("jsPDF PubSub Error",m.message,m)}p[1]&&d.push(c)}d.length&&d.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function Jd(s){if(!(this instanceof Jd))return new Jd(s);var a="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function bg(s,a){this.gState=s,this.matrix=a,this.id="",this.objectNumber=-1}function $l(s,a,r,o,d){if(!(this instanceof $l))return new $l(s,a,r,o,d);this.type=s==="axial"?2:3,this.coords=a,this.colors=r,bg.call(this,o,d)}function bc(s,a,r,o,d){if(!(this instanceof bc))return new bc(s,a,r,o,d);this.boundingBox=s,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,bg.call(this,o,d)}function Gt(s){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],d=arguments[2],c=arguments[3],p=[],m=1,g=16,v="S",j=null;dr(s=s||{})==="object"&&(r=s.orientation,o=s.unit||o,d=s.format||d,c=s.compress||s.compressPdf||c,(j=s.encryption||null)!==null&&(j.userPassword=j.userPassword||"",j.ownerPassword=j.ownerPassword||"",j.userPermissions=j.userPermissions||[]),m=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(a=s.precision),s.floatPrecision!==void 0&&(g=s.floatPrecision),v=s.defaultPathOperation||"S"),p=s.filters||(c===!0?["FlateEncode"]:p),o=o||"mm",r=(""+(r||"P")).toLowerCase();var A=s.putOnlyUsedFonts||!1,R={},w={internal:{},__private__:{}};w.__private__.PubSub=ip;var $="1.3",F=w.__private__.getPdfVersion=function(){return $};w.__private__.setPdfVersion=function(x){$=x};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return D};var _=w.__private__.getPageFormat=function(x){return D[x]};d=d||"a4";var Y="compat",ee="advanced",G=Y;function fe(){this.saveGraphicsState(),X(new Ft(nt,0,0,-nt,0,$s()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),v="n",G=ee}function he(){this.restoreGraphicsState(),v="S",G=Y}var Be=w.__private__.combineFontStyleAndFontWeight=function(x,M){if(x=="bold"&&M=="normal"||x=="bold"&&M==400||x=="normal"&&M=="italic"||x=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(x=M==400||M==="normal"?x==="italic"?"italic":"normal":M!=700&&M!=="bold"||x!=="normal"?(M==700?"bold":M)+""+x:"bold"),x};w.advancedAPI=function(x){var M=G===Y;return M&&fe.call(this),typeof x!="function"||(x(this),M&&he.call(this)),this},w.compatAPI=function(x){var M=G===ee;return M&&he.call(this),typeof x!="function"||(x(this),M&&fe.call(this)),this},w.isAdvancedAPI=function(){return G===ee};var ge,te=function(x){if(G!==ee)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ye=w.roundToPrecision=w.__private__.roundToPrecision=function(x,M){var ne=a||M;if(isNaN(x)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ne).replace(/0+$/,"")};ge=w.hpf=w.__private__.hpf=typeof g=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ye(x,g)}:g==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ye(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ye(x,16)};var z=w.f2=w.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ye(x,2)},H=w.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ye(x,3)},de=w.scale=w.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return G===Y?x*nt:G===ee?x:void 0},ie=function(x){return de((function(M){return G===Y?$s()-M:G===ee?M:void 0})(x))};w.__private__.setPrecision=w.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(a=parseInt(x,10))};var ke,Me="00000000000000000000000000000000",Ee=w.__private__.getFileId=function(){return Me},me=w.__private__.setFileId=function(x){return Me=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():Me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),j!==null&&(qn=new yc(j.userPermissions,j.userPassword,j.ownerPassword,Me)),Me};w.setFileId=function(x){return me(x),this},w.getFileId=function(){return Ee()};var Ie=w.__private__.convertDateToPDFDate=function(x){var M=x.getTimezoneOffset(),ne=M<0?"+":"-",pe=Math.floor(Math.abs(M/60)),Pe=Math.abs(M%60),Ze=[ne,Z(pe),"'",Z(Pe),"'"].join("");return["D:",x.getFullYear(),Z(x.getMonth()+1),Z(x.getDate()),Z(x.getHours()),Z(x.getMinutes()),Z(x.getSeconds()),Ze].join("")},Ue=w.__private__.convertPDFDateToDate=function(x){var M=parseInt(x.substr(2,4),10),ne=parseInt(x.substr(6,2),10)-1,pe=parseInt(x.substr(8,2),10),Pe=parseInt(x.substr(10,2),10),Ze=parseInt(x.substr(12,2),10),at=parseInt(x.substr(14,2),10);return new Date(M,ne,pe,Pe,Ze,at,0)},se=w.__private__.setCreationDate=function(x){var M;if(x===void 0&&(x=new Date),x instanceof Date)M=Ie(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=x}return ke=M},C=w.__private__.getCreationDate=function(x){var M=ke;return x==="jsDate"&&(M=Ue(ke)),M};w.setCreationDate=function(x){return se(x),this},w.getCreationDate=function(x){return C(x)};var K,Z=w.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ce=w.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},oe=0,je=[],Fe=[],Oe=0,Ye=[],Te=[],Qe=!1,ot=Fe;w.__private__.setCustomOutputDestination=function(x){Qe=!0,ot=x};var bt=function(x){Qe||(ot=x)};w.__private__.resetCustomOutputDestination=function(){Qe=!1,ot=Fe};var X=w.__private__.out=function(x){return x=x.toString(),Oe+=x.length+1,ot.push(x),ot},et=w.__private__.write=function(x){return X(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},xt=w.__private__.getArrayBuffer=function(x){for(var M=x.length,ne=new ArrayBuffer(M),pe=new Uint8Array(ne);M--;)pe[M]=x.charCodeAt(M);return ne},Lt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return Lt};var Ve=s.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(x){return Ve=G===ee?x/nt:x,this};var Mt,yt=w.__private__.getFontSize=w.getFontSize=function(){return G===Y?Ve:Ve*nt},vt=s.R2L||!1;w.__private__.setR2L=w.setR2L=function(x){return vt=x,this},w.__private__.getR2L=w.getR2L=function(){return vt};var Pt,pn=w.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Mt=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Mt=x}else Mt=parseInt(x,10)};w.__private__.getZoomMode=function(){return Mt};var sn,ht=w.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Pt=x};w.__private__.getPageMode=function(){return Pt};var Ot=w.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');sn=x};w.__private__.getLayoutMode=function(){return sn},w.__private__.setDisplayMode=w.setDisplayMode=function(x,M,ne){return pn(x),Ot(M),ht(ne),this};var Ce={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(x){if(Object.keys(Ce).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ce[x]},w.__private__.getDocumentProperties=function(){return Ce},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(x){for(var M in Ce)Ce.hasOwnProperty(M)&&x[M]&&(Ce[M]=x[M]);return this},w.__private__.setDocumentProperty=function(x,M){if(Object.keys(Ce).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ce[x]=M};var qe,nt,ft,on,Se,xe={},We={},ct=[],st={},un={},Ht={},Qt={},Sn=null,Wt=0,le=[],wt=new ip(w),Qr=s.hotfixes||[],Xn={},Xr={},gn=[],Ft=function x(M,ne,pe,Pe,Ze,at){if(!(this instanceof x))return new x(M,ne,pe,Pe,Ze,at);isNaN(M)&&(M=1),isNaN(ne)&&(ne=0),isNaN(pe)&&(pe=0),isNaN(Pe)&&(Pe=1),isNaN(Ze)&&(Ze=0),isNaN(at)&&(at=0),this._matrix=[M,ne,pe,Pe,Ze,at]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ge).join(x)},Ft.prototype.multiply=function(x){var M=x.sx*this.sx+x.shy*this.shx,ne=x.sx*this.shy+x.shy*this.sy,pe=x.shx*this.sx+x.sy*this.shx,Pe=x.shx*this.shy+x.sy*this.sy,Ze=x.tx*this.sx+x.ty*this.shx+this.tx,at=x.tx*this.shy+x.ty*this.sy+this.ty;return new Ft(M,ne,pe,Pe,Ze,at)},Ft.prototype.decompose=function(){var x=this.sx,M=this.shy,ne=this.shx,pe=this.sy,Pe=this.tx,Ze=this.ty,at=Math.sqrt(x*x+M*M),_t=(x/=at)*ne+(M/=at)*pe;ne-=x*_t,pe-=M*_t;var Bt=Math.sqrt(ne*ne+pe*pe);return _t/=Bt,x*(pe/=Bt)<M*(ne/=Bt)&&(x=-x,M=-M,_t=-_t,at=-at),{scale:new Ft(at,0,0,Bt,0,0),translate:new Ft(1,0,0,1,Pe,Ze),rotate:new Ft(x,M,-M,x,0,0),skew:new Ft(1,0,_t,1,0,0)}},Ft.prototype.toString=function(x){return this.join(" ")},Ft.prototype.inversed=function(){var x=this.sx,M=this.shy,ne=this.shx,pe=this.sy,Pe=this.tx,Ze=this.ty,at=1/(x*pe-M*ne),_t=pe*at,Bt=-M*at,Xt=-ne*at,qt=x*at;return new Ft(_t,Bt,Xt,qt,-_t*Pe-Xt*Ze,-Bt*Pe-qt*Ze)},Ft.prototype.applyToPoint=function(x){var M=x.x*this.sx+x.y*this.shx+this.tx,ne=x.x*this.shy+x.y*this.sy+this.ty;return new fa(M,ne)},Ft.prototype.applyToRectangle=function(x){var M=this.applyToPoint(x),ne=this.applyToPoint(new fa(x.x+x.w,x.y+x.h));return new Da(M.x,M.y,ne.x-M.x,ne.y-M.y)},Ft.prototype.clone=function(){var x=this.sx,M=this.shy,ne=this.shx,pe=this.sy,Pe=this.tx,Ze=this.ty;return new Ft(x,M,ne,pe,Pe,Ze)},w.Matrix=Ft;var rn=w.matrixMult=function(x,M){return M.multiply(x)},tr=new Ft(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=tr;var Zt=function(x,M){if(!un[x]){var ne=(M instanceof $l?"Sh":"P")+(Object.keys(st).length+1).toString(10);M.id=ne,un[x]=ne,st[ne]=M,wt.publish("addPattern",M)}};w.ShadingPattern=$l,w.TilingPattern=bc,w.addShadingPattern=function(x,M){return te("addShadingPattern()"),Zt(x,M),this},w.beginTilingPattern=function(x){te("beginTilingPattern()"),ta(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},w.endTilingPattern=function(x,M){te("endTilingPattern()"),M.stream=Te[K].join(`
`),Zt(x,M),wt.publish("endTilingPattern",M),gn.pop().restore()};var nr,Gn=w.__private__.newObject=function(){var x=gr();return Sr(x,!0),x},gr=w.__private__.newObjectDeferred=function(){return oe++,je[oe]=function(){return Oe},oe},Sr=function(x,M){return M=typeof M=="boolean"&&M,je[x]=Oe,M&&X(x+" 0 obj"),x},ei=w.__private__.newAdditionalObject=function(){var x={objId:gr(),content:""};return Ye.push(x),x},$a=gr(),ti=gr(),bi=w.__private__.decodeColorString=function(x){var M=x.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var ne=parseFloat(M[0]);M=[ne,ne,ne,"r"]}for(var pe="#",Pe=0;Pe<3;Pe++)pe+=("0"+Math.floor(255*parseFloat(M[Pe])).toString(16)).slice(-2);return pe},qr=w.__private__.encodeColorString=function(x){var M;typeof x=="string"&&(x={ch1:x});var ne=x.ch1,pe=x.ch2,Pe=x.ch3,Ze=x.ch4,at=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var _t=new yg(ne);if(_t.ok)ne=_t.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var Bt=parseInt(ne.substr(1),16);ne=Bt>>16&255,pe=Bt>>8&255,Pe=255&Bt}if(pe===void 0||Ze===void 0&&ne===pe&&pe===Pe)M=typeof ne=="string"?ne+" "+at[0]:x.precision===2?z(ne/255)+" "+at[0]:H(ne/255)+" "+at[0];else if(Ze===void 0||dr(Ze)==="object"){if(Ze&&!isNaN(Ze.a)&&Ze.a===0)return["1.","1.","1.",at[1]].join(" ");M=typeof ne=="string"?[ne,pe,Pe,at[1]].join(" "):x.precision===2?[z(ne/255),z(pe/255),z(Pe/255),at[1]].join(" "):[H(ne/255),H(pe/255),H(Pe/255),at[1]].join(" ")}else M=typeof ne=="string"?[ne,pe,Pe,Ze,at[2]].join(" "):x.precision===2?[z(ne),z(pe),z(Pe),z(Ze),at[2]].join(" "):[H(ne),H(pe),H(Pe),H(Ze),at[2]].join(" ");return M},St=w.__private__.getFilters=function(){return p},rr=w.__private__.putStream=function(x){var M=(x=x||{}).data||"",ne=x.filters||St(),pe=x.alreadyAppliedFilters||[],Pe=x.addLength1||!1,Ze=M.length,at=x.objectId,_t=function(Tr){return Tr};if(j!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");j!==null&&(_t=qn.encryptor(at,0));var Bt={};ne===!0&&(ne=["FlateEncode"]);var Xt=x.additionalKeyValues||[],qt=(Bt=Gt.API.processDataByFilters!==void 0?Gt.API.processDataByFilters(M,ne):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Bt.data.length!==0&&(Xt.push({key:"Length",value:Bt.data.length}),Pe===!0&&Xt.push({key:"Length1",value:Ze})),qt.length!=0)if(qt.split("/").length-1==1)Xt.push({key:"Filter",value:qt});else{Xt.push({key:"Filter",value:"["+qt+"]"});for(var xn=0;xn<Xt.length;xn+=1)if(Xt[xn].key==="DecodeParms"){for(var Yt=[],On=0;On<Bt.reverseChain.split("/").length-1;On+=1)Yt.push("null");Yt.push(Xt[xn].value),Xt[xn].value="["+Yt.join(" ")+"]"}}X("<<");for(var Bn=0;Bn<Xt.length;Bn++)X("/"+Xt[Bn].key+" "+Xt[Bn].value);X(">>"),Bt.data.length!==0&&(X("stream"),X(_t(Bt.data)),X("endstream"))},wi=w.__private__.putPage=function(x){var M=x.number,ne=x.data,pe=x.objId,Pe=x.contentsObjId;Sr(pe,!0),X("<</Type /Page"),X("/Parent "+x.rootDictionaryObjId+" 0 R"),X("/Resources "+x.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(ge(x.mediaBox.bottomLeftX))+" "+parseFloat(ge(x.mediaBox.bottomLeftY))+" "+ge(x.mediaBox.topRightX)+" "+ge(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&X("/CropBox ["+ge(x.cropBox.bottomLeftX)+" "+ge(x.cropBox.bottomLeftY)+" "+ge(x.cropBox.topRightX)+" "+ge(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&X("/BleedBox ["+ge(x.bleedBox.bottomLeftX)+" "+ge(x.bleedBox.bottomLeftY)+" "+ge(x.bleedBox.topRightX)+" "+ge(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&X("/TrimBox ["+ge(x.trimBox.bottomLeftX)+" "+ge(x.trimBox.bottomLeftY)+" "+ge(x.trimBox.topRightX)+" "+ge(x.trimBox.topRightY)+"]"),x.artBox!==null&&X("/ArtBox ["+ge(x.artBox.bottomLeftX)+" "+ge(x.artBox.bottomLeftY)+" "+ge(x.artBox.topRightX)+" "+ge(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&X("/UserUnit "+x.userUnit),wt.publish("putPage",{objId:pe,pageContext:le[M],pageNumber:M,page:ne}),X("/Contents "+Pe+" 0 R"),X(">>"),X("endobj");var Ze=ne.join(`
`);return G===ee&&(Ze+=`
Q`),Sr(Pe,!0),rr({data:Ze,filters:St(),objectId:Pe}),X("endobj"),pe},vs=w.__private__.putPages=function(){var x,M,ne=[];for(x=1;x<=Wt;x++)le[x].objId=gr(),le[x].contentsObjId=gr();for(x=1;x<=Wt;x++)ne.push(wi({number:x,data:Te[x],objId:le[x].objId,contentsObjId:le[x].contentsObjId,mediaBox:le[x].mediaBox,cropBox:le[x].cropBox,bleedBox:le[x].bleedBox,trimBox:le[x].trimBox,artBox:le[x].artBox,userUnit:le[x].userUnit,rootDictionaryObjId:$a,resourceDictionaryObjId:ti}));Sr($a,!0),X("<</Type /Pages");var pe="/Kids [";for(M=0;M<Wt;M++)pe+=ne[M]+" 0 R ";X(pe+"]"),X("/Count "+Wt),X(">>"),X("endobj"),wt.publish("postPutPages")},Hn=function(x){wt.publish("putFont",{font:x,out:X,newObject:Gn,putStream:rr}),x.isAlreadyPutted!==!0&&(x.objectNumber=Gn(),X("<<"),X("/Type /Font"),X("/BaseFont /"+vc(x.postScriptName)),X("/Subtype /Type1"),typeof x.encoding=="string"&&X("/Encoding /"+x.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},xr=function(x){x.objectNumber=Gn();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[ge(x.x),ge(x.y),ge(x.x+x.width),ge(x.y+x.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ne=x.pages[1].join(`
`);rr({data:ne,additionalKeyValues:M,objectId:x.objectNumber}),X("endobj")},ur=function(x,M){M||(M=21);var ne=Gn(),pe=(function(at,_t){var Bt,Xt=[],qt=1/(_t-1);for(Bt=0;Bt<1;Bt+=qt)Xt.push(Bt);if(Xt.push(1),at[0].offset!=0){var xn={offset:0,color:at[0].color};at.unshift(xn)}if(at[at.length-1].offset!=1){var Yt={offset:1,color:at[at.length-1].color};at.push(Yt)}for(var On="",Bn=0,Tr=0;Tr<Xt.length;Tr++){for(Bt=Xt[Tr];Bt>at[Bn+1].offset;)Bn++;var In=at[Bn].offset,zn=(Bt-In)/(at[Bn+1].offset-In),vr=at[Bn].color,Vr=at[Bn+1].color;On+=ce(Math.round((1-zn)*vr[0]+zn*Vr[0]).toString(16))+ce(Math.round((1-zn)*vr[1]+zn*Vr[1]).toString(16))+ce(Math.round((1-zn)*vr[2]+zn*Vr[2]).toString(16))}return On.trim()})(x.colors,M),Pe=[];Pe.push({key:"FunctionType",value:"0"}),Pe.push({key:"Domain",value:"[0.0 1.0]"}),Pe.push({key:"Size",value:"["+M+"]"}),Pe.push({key:"BitsPerSample",value:"8"}),Pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rr({data:pe,additionalKeyValues:Pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),X("endobj"),x.objectNumber=Gn(),X("<< /ShadingType "+x.type),X("/ColorSpace /DeviceRGB");var Ze="/Coords ["+ge(parseFloat(x.coords[0]))+" "+ge(parseFloat(x.coords[1]))+" ";x.type===2?Ze+=ge(parseFloat(x.coords[2]))+" "+ge(parseFloat(x.coords[3])):Ze+=ge(parseFloat(x.coords[2]))+" "+ge(parseFloat(x.coords[3]))+" "+ge(parseFloat(x.coords[4]))+" "+ge(parseFloat(x.coords[5])),X(Ze+="]"),x.matrix&&X("/Matrix ["+x.matrix.toString()+"]"),X("/Function "+ne+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},$r=function(x,M){var ne=gr(),pe=Gn();M.push({resourcesOid:ne,objectOid:pe}),x.objectNumber=pe;var Pe=[];Pe.push({key:"Type",value:"/Pattern"}),Pe.push({key:"PatternType",value:"1"}),Pe.push({key:"PaintType",value:"1"}),Pe.push({key:"TilingType",value:"1"}),Pe.push({key:"BBox",value:"["+x.boundingBox.map(ge).join(" ")+"]"}),Pe.push({key:"XStep",value:ge(x.xStep)}),Pe.push({key:"YStep",value:ge(x.yStep)}),Pe.push({key:"Resources",value:ne+" 0 R"}),x.matrix&&Pe.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),rr({data:x.stream,additionalKeyValues:Pe,objectId:x.objectNumber}),X("endobj")},Cl=function(x){for(var M in x.objectNumber=Gn(),X("<<"),x)switch(M){case"opacity":X("/ca "+z(x[M]));break;case"stroke-opacity":X("/CA "+z(x[M]))}X(">>"),X("endobj")},Tn=function(x){Sr(x.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var M in X("/Font <<"),xe)xe.hasOwnProperty(M)&&(A===!1||A===!0&&R.hasOwnProperty(M))&&X("/"+M+" "+xe[M].objectNumber+" 0 R");X(">>")})(),(function(){if(Object.keys(st).length>0){for(var M in X("/Shading <<"),st)st.hasOwnProperty(M)&&st[M]instanceof $l&&st[M].objectNumber>=0&&X("/"+M+" "+st[M].objectNumber+" 0 R");wt.publish("putShadingPatternDict"),X(">>")}})(),(function(M){if(Object.keys(st).length>0){for(var ne in X("/Pattern <<"),st)st.hasOwnProperty(ne)&&st[ne]instanceof w.TilingPattern&&st[ne].objectNumber>=0&&st[ne].objectNumber<M&&X("/"+ne+" "+st[ne].objectNumber+" 0 R");wt.publish("putTilingPatternDict"),X(">>")}})(x.objectOid),(function(){if(Object.keys(Ht).length>0){var M;for(M in X("/ExtGState <<"),Ht)Ht.hasOwnProperty(M)&&Ht[M].objectNumber>=0&&X("/"+M+" "+Ht[M].objectNumber+" 0 R");wt.publish("putGStateDict"),X(">>")}})(),(function(){for(var M in X("/XObject <<"),Xn)Xn.hasOwnProperty(M)&&Xn[M].objectNumber>=0&&X("/"+M+" "+Xn[M].objectNumber+" 0 R");wt.publish("putXobjectDict"),X(">>")})(),X(">>"),X("endobj")},ut=function(x){We[x.fontName]=We[x.fontName]||{},We[x.fontName][x.fontStyle]=x.id},kr=function(x,M,ne,pe,Pe){var Ze={id:"F"+(Object.keys(xe).length+1).toString(10),postScriptName:x,fontName:M,fontStyle:ne,encoding:pe,isStandardFont:Pe||!1,metadata:{}};return wt.publish("addFont",{font:Ze,instance:this}),xe[Ze.id]=Ze,ut(Ze),Ze.id},Zr=w.__private__.pdfEscape=w.pdfEscape=function(x,M){return(function(ne,pe){var Pe,Ze,at,_t,Bt,Xt,qt,xn,Yt;if(at=(pe=pe||{}).sourceEncoding||"Unicode",Bt=pe.outputEncoding,(pe.autoencode||Bt)&&xe[qe].metadata&&xe[qe].metadata[at]&&xe[qe].metadata[at].encoding&&(_t=xe[qe].metadata[at].encoding,!Bt&&xe[qe].encoding&&(Bt=xe[qe].encoding),!Bt&&_t.codePages&&(Bt=_t.codePages[0]),typeof Bt=="string"&&(Bt=_t[Bt]),Bt)){for(qt=!1,Xt=[],Pe=0,Ze=ne.length;Pe<Ze;Pe++)(xn=Bt[ne.charCodeAt(Pe)])?Xt.push(String.fromCharCode(xn)):Xt.push(ne[Pe]),Xt[Pe].charCodeAt(0)>>8&&(qt=!0);ne=Xt.join("")}for(Pe=ne.length;qt===void 0&&Pe!==0;)ne.charCodeAt(Pe-1)>>8&&(qt=!0),Pe--;if(!qt)return ne;for(Xt=pe.noBOM?[]:[254,255],Pe=0,Ze=ne.length;Pe<Ze;Pe++){if((Yt=(xn=ne.charCodeAt(Pe))>>8)>>8)throw new Error("Character at position "+Pe+" of string '"+ne+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xt.push(Yt),Xt.push(xn-(Yt<<8))}return String.fromCharCode.apply(void 0,Xt)})(x,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=w.__private__.beginPage=function(x){Te[++Wt]=[],le[Wt]={objId:0,contentsObjId:0,userUnit:Number(m),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ls(Wt),bt(Te[K])},Fs=function(x,M){var ne,pe,Pe;switch(r=M||r,typeof x=="string"&&(ne=_(x.toLowerCase()),Array.isArray(ne)&&(pe=ne[0],Pe=ne[1])),Array.isArray(x)&&(pe=x[0]*nt,Pe=x[1]*nt),isNaN(pe)&&(pe=d[0],Pe=d[1]),(pe>14400||Pe>14400)&&(pr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Pe=Math.min(14400,Pe)),d=[pe,Pe],r.substr(0,1)){case"l":Pe>pe&&(d=[Pe,pe]);break;case"p":pe>Pe&&(d=[Pe,pe])}Pa(d),Jt(ua),X(Ri),ri!==0&&X(ri+" J"),Ti!==0&&X(Ti+" j"),wt.publish("addPage",{pageNumber:Wt})},os=function(x){x>0&&x<=Wt&&(Te.splice(x,1),le.splice(x,1),Wt--,K>Wt&&(K=Wt),this.setPage(K))},ls=function(x){x>0&&x<=Wt&&(K=x)},La=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return Te.length-1},Rs=function(x,M,ne){var pe,Pe=void 0;return ne=ne||{},x=x!==void 0?x:xe[qe].fontName,M=M!==void 0?M:xe[qe].fontStyle,pe=x.toLowerCase(),We[pe]!==void 0&&We[pe][M]!==void 0?Pe=We[pe][M]:We[x]!==void 0&&We[x][M]!==void 0?Pe=We[x][M]:ne.disableWarning===!1&&pr.warn("Unable to look up font label for font '"+x+"', '"+M+"'. Refer to getFontList() for available fonts."),Pe||ne.noFallback||(Pe=We.times[M])==null&&(Pe=We.times.normal),Pe},Fr=w.__private__.putInfo=function(){var x=Gn(),M=function(pe){return pe};for(var ne in j!==null&&(M=qn.encryptor(x,0)),X("<<"),X("/Producer ("+Zr(M("jsPDF "+Gt.version))+")"),Ce)Ce.hasOwnProperty(ne)&&Ce[ne]&&X("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+Zr(M(Ce[ne]))+")");X("/CreationDate ("+Zr(M(ke))+")"),X(">>"),X("endobj")},bs=w.__private__.putCatalog=function(x){var M=(x=x||{}).rootDictionaryObjId||$a;switch(Gn(),X("<<"),X("/Type /Catalog"),X("/Pages "+M+" 0 R"),Mt||(Mt="fullwidth"),Mt){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+Mt;ne.substr(ne.length-1)==="%"&&(Mt=parseInt(Mt)/100),typeof Mt=="number"&&X("/OpenAction [3 0 R /XYZ null null "+z(Mt)+"]")}switch(sn||(sn="continuous"),sn){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}Pt&&X("/PageMode /"+Pt),wt.publish("putCatalog"),X(">>"),X("endobj")},Fi=w.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(oe+1)),X("/Root "+oe+" 0 R"),X("/Info "+(oe-1)+" 0 R"),j!==null&&X("/Encrypt "+qn.oid+" 0 R"),X("/ID [ <"+Me+"> <"+Me+"> ]"),X(">>")},ar=w.__private__.putHeader=function(){X("%PDF-"+$),X("%")},Ar=w.__private__.putXRef=function(){var x="0000000000";X("xref"),X("0 "+(oe+1)),X("0000000000 65535 f ");for(var M=1;M<=oe;M++)typeof je[M]=="function"?X((x+je[M]()).slice(-10)+" 00000 n "):je[M]!==void 0?X((x+je[M]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},yr=w.__private__.buildDocument=function(){var x;oe=0,Oe=0,Fe=[],je=[],Ye=[],$a=gr(),ti=gr(),bt(Fe),wt.publish("buildDocument"),ar(),vs(),(function(){wt.publish("putAdditionalObjects");for(var ne=0;ne<Ye.length;ne++){var pe=Ye[ne];Sr(pe.objId,!0),X(pe.content),X("endobj")}wt.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var ne in xe)xe.hasOwnProperty(ne)&&(A===!1||A===!0&&R.hasOwnProperty(ne))&&Hn(xe[ne])})(),(function(){var ne;for(ne in Ht)Ht.hasOwnProperty(ne)&&Cl(Ht[ne])})(),(function(){for(var ne in Xn)Xn.hasOwnProperty(ne)&&xr(Xn[ne])})(),(function(ne){var pe;for(pe in st)st.hasOwnProperty(pe)&&(st[pe]instanceof $l?ur(st[pe]):st[pe]instanceof bc&&$r(st[pe],ne))})(x),wt.publish("putResources"),x.forEach(Tn),Tn({resourcesOid:ti,objectOid:Number.MAX_SAFE_INTEGER}),wt.publish("postPutResources"),j!==null&&(qn.oid=Gn(),X("<<"),X("/Filter /Standard"),X("/V "+qn.v),X("/R "+qn.r),X("/U <"+qn.toHexString(qn.U)+">"),X("/O <"+qn.toHexString(qn.O)+">"),X("/P "+qn.P),X(">>"),X("endobj")),Fr(),bs();var M=Oe;return Ar(),Fi(),X("startxref"),X(""+M),X("%%EOF"),bt(Te[K]),Fe.join(`
`)},Ts=w.__private__.getBlob=function(x){return new Blob([xt(x)],{type:"application/pdf"})},la=w.output=w.__private__.output=(nr=function(x,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",x){case void 0:return yr();case"save":w.save(M.filename);break;case"arraybuffer":return xt(yr());case"blob":return Ts(yr());case"bloburi":case"bloburl":if(cn.URL!==void 0&&typeof cn.URL.createObjectURL=="function")return cn.URL&&cn.URL.createObjectURL(Ts(yr()))||void 0;pr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",pe=yr();try{ne=rp(pe)}catch{ne=rp(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+M.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(Pe=M.pdfObjectUrl,Ze="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pe+'"'+Ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",_t=cn.open();return _t!==null&&_t.document.write(at),_t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',Xt=cn.open();if(Xt!==null){Xt.document.write(Bt);var qt=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=M.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qt.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Yt=cn.open();if(Yt!==null&&(Yt.document.write(xn),Yt.document.title=M.filename),Yt||typeof safari>"u")return Yt;break;case"datauri":case"dataurl":return cn.document.location.href=this.output("datauristring",M);default:return null}},nr.foo=function(){try{return nr.apply(this,arguments)}catch(ne){var x=ne.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var M="Error in function "+x.split(`
`)[0].split("<")[0]+": "+ne.message;if(!cn.console)throw new Error(M);cn.console.error(M,ne),cn.alert&&alert(M)}},nr.foo.bar=nr,nr.foo),cs=function(x){return Array.isArray(Qr)===!0&&Qr.indexOf(x)>-1};switch(o){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=cs("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);nt=o}var qn=null;se(),me();var Os=w.__private__.getPageInfo=w.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:le[x].objId,pageNumber:x,pageContext:le[x]}},Bs=w.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in le)if(le[M].objId===x)break;return Os(M)},Ut=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:le[K].objId,pageNumber:K,pageContext:le[K]}};w.addPage=function(){return Fs.apply(this,arguments),this},w.setPage=function(){return ls.apply(this,arguments),bt.call(this,Te[K]),this},w.insertPage=function(x){return this.addPage(),this.movePage(K,x),this},w.movePage=function(x,M){var ne,pe;if(x>M){ne=Te[x],pe=le[x];for(var Pe=x;Pe>M;Pe--)Te[Pe]=Te[Pe-1],le[Pe]=le[Pe-1];Te[M]=ne,le[M]=pe,this.setPage(M)}else if(x<M){ne=Te[x],pe=le[x];for(var Ze=x;Ze<M;Ze++)Te[Ze]=Te[Ze+1],le[Ze]=le[Ze+1];Te[M]=ne,le[M]=pe,this.setPage(M)}return this},w.deletePage=function(){return os.apply(this,arguments),this},w.__private__.text=w.text=function(x,M,ne,pe,Pe){var Ze,at,_t,Bt,Xt,qt,xn,Yt,On,Bn=(pe=pe||{}).scope||this;if(typeof x=="number"&&typeof M=="number"&&(typeof ne=="string"||Array.isArray(ne))){var Tr=ne;ne=M,M=x,x=Tr}if(arguments[3]instanceof Ft==0?(_t=arguments[4],Bt=arguments[5],dr(xn=arguments[3])==="object"&&xn!==null||(typeof _t=="string"&&(Bt=_t,_t=null),typeof xn=="string"&&(Bt=xn,xn=null),typeof xn=="number"&&(_t=xn,xn=null),pe={flags:xn,angle:_t,align:Bt})):(te("The transform parameter of text() with a Matrix value"),On=Pe),isNaN(M)||isNaN(ne)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Bn;var In,zn="",vr=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:da,Vr=Bn.internal.scaleFactor;function ji(Dn){return Dn=Dn.split("	").join(Array(pe.TabLen||9).join(" ")),Zr(Dn,xn)}function ai(Dn){for(var Fn,or=Dn.concat(),Or=[],Br=or.length;Br--;)typeof(Fn=or.shift())=="string"?Or.push(Fn):Array.isArray(Dn)&&(Fn.length===1||Fn[1]===void 0&&Fn[2]===void 0)?Or.push(Fn[0]):Or.push([Fn[0],Fn[1],Fn[2]]);return Or}function yn(Dn,Fn){var or;if(typeof Dn=="string")or=Fn(Dn)[0];else if(Array.isArray(Dn)){for(var Or,Br,Ao=Dn.concat(),Za=[],ki=Ao.length;ki--;)typeof(Or=Ao.shift())=="string"?Za.push(Fn(Or)[0]):Array.isArray(Or)&&typeof Or[0]=="string"&&(Br=Fn(Or[0],Or[1],Or[2]),Za.push([Br[0],Br[1],Br[2]]));or=Za}return or}var Ws=!1,eo=!0;if(typeof x=="string")Ws=!0;else if(Array.isArray(x)){var js=x.concat();at=[];for(var Ns,Cr=js.length;Cr--;)(typeof(Ns=js.shift())!="string"||Array.isArray(Ns)&&typeof Ns[0]!="string")&&(eo=!1);Ws=eo}if(Ws===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var si=Ve/Bn.internal.scaleFactor,Ss=si*(vr-1);switch(pe.baseline){case"bottom":ne-=Ss;break;case"top":ne+=si-Ss;break;case"hanging":ne+=si-2*Ss;break;case"middle":ne+=si/2-Ss}if((qt=pe.maxWidth||0)>0&&(typeof x=="string"?x=Bn.splitTextToSize(x,qt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Dn,Fn){return Dn.concat(Bn.splitTextToSize(Fn,qt))},[]))),Ze={text:x,x:M,y:ne,options:pe,mutex:{pdfEscape:Zr,activeFontKey:qe,fonts:xe,activeFontSize:Ve}},wt.publish("preProcessText",Ze),x=Ze.text,_t=(pe=Ze.options).angle,On instanceof Ft==0&&_t&&typeof _t=="number"){_t*=Math.PI/180,pe.rotationDirection===0&&(_t=-_t),G===ee&&(_t=-_t);var ks=Math.cos(_t),So=Math.sin(_t);On=new Ft(ks,So,-So,ks,0,0)}else _t&&_t instanceof Ft&&(On=_t);G!==ee||On||(On=tr),(Xt=pe.charSpace||ea)!==void 0&&(zn+=ge(de(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yt=pe.horizontalScale)!==void 0&&(zn+=ge(100*Yt)+` Tz
`),pe.lang;var Na=-1,Vs=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Ka=Bn.internal.getCurrentPageInfo().pageContext;switch(Vs){case 0:case!1:case"fill":Na=0;break;case 1:case!0:case"stroke":Na=1;break;case 2:case"fillThenStroke":Na=2;break;case 3:case"invisible":Na=3;break;case 4:case"fillAndAddForClipping":Na=4;break;case 5:case"strokeAndAddPathForClipping":Na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Na=6;break;case 7:case"addToPathForClipping":Na=7}var ko=Ka.usedRenderingMode!==void 0?Ka.usedRenderingMode:-1;Na!==-1?zn+=Na+` Tr
`:ko!==-1&&(zn+=`0 Tr
`),Na!==-1&&(Ka.usedRenderingMode=Na),Bt=pe.align||"left";var Sa,zi=Ve*vr,to=Bn.internal.pageSize.getWidth(),br=xe[qe];Xt=pe.charSpace||ea,qt=pe.maxWidth||0,xn=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var ii=[],Fa=function(Dn){return Bn.getStringUnitWidth(Dn,{font:br,charSpace:Xt,fontSize:Ve,doKerning:!1})*Ve/Vr};if(Object.prototype.toString.call(x)==="[object Array]"){var Ra;at=ai(x),Bt!=="left"&&(Sa=at.map(Fa));var $n,Ni=0;if(Bt==="right"){M-=Sa[0],x=[],Cr=at.length;for(var oi=0;oi<Cr;oi++)oi===0?($n=Ma(M),Ra=ms(ne)):($n=de(Ni-Sa[oi]),Ra=-zi),x.push([at[oi],$n,Ra]),Ni=Sa[oi]}else if(Bt==="center"){M-=Sa[0]/2,x=[],Cr=at.length;for(var As=0;As<Cr;As++)As===0?($n=Ma(M),Ra=ms(ne)):($n=de((Ni-Sa[As])/2),Ra=-zi),x.push([at[As],$n,Ra]),Ni=Sa[As]}else if(Bt==="left"){x=[],Cr=at.length;for(var Si=0;Si<Cr;Si++)x.push(at[Si])}else if(Bt==="justify"&&br.encoding==="Identity-H"){x=[],Cr=at.length,qt=qt!==0?qt:to;for(var Qa=0,Cn=0;Cn<Cr;Cn++)if(Ra=Cn===0?ms(ne):-zi,$n=Cn===0?Ma(M):Qa,Cn<Cr-1){var Hs=de((qt-Sa[Cn])/(at[Cn].split(" ").length-1)),Hr=at[Cn].split(" ");x.push([Hr[0]+" ",$n,Ra]),Qa=0;for(var Ta=1;Ta<Hr.length;Ta++){var Pn=(Fa(Hr[Ta-1]+" "+Hr[Ta])-Fa(Hr[Ta]))*Vr+Hs;Ta==Hr.length-1?x.push([Hr[Ta],Pn,0]):x.push([Hr[Ta]+" ",Pn,0]),Qa-=Pn}}else x.push([at[Cn],$n,Ra]);x.push(["",Qa,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Cr=at.length,qt=qt!==0?qt:to,Cn=0;Cn<Cr;Cn++){Ra=Cn===0?ms(ne):-zi,$n=Cn===0?Ma(M):0;var Oa=at[Cn].split(" ").length-1,ir=Oa>0?(qt-Sa[Cn])/Oa:0;Cn<Cr-1?ii.push(ge(de(ir))):ii.push(0),x.push([at[Cn],$n,Ra])}}}(typeof pe.R2L=="boolean"?pe.R2L:vt)===!0&&(x=yn(x,function(Dn,Fn,or){return[Dn.split("").reverse().join(""),Fn,or]})),Ze={text:x,x:M,y:ne,options:pe,mutex:{pdfEscape:Zr,activeFontKey:qe,fonts:xe,activeFontSize:Ve}},wt.publish("postProcessText",Ze),x=Ze.text,In=Ze.mutex.isHex||!1;var no=xe[qe].encoding;no!=="WinAnsiEncoding"&&no!=="StandardEncoding"||(x=yn(x,function(Dn,Fn,or){return[ji(Dn),Fn,or]})),at=ai(x),x=[];for(var Yr,Ui,na,ro=Array.isArray(at[0])?1:0,ma="",ao=function(Dn,Fn,or){var Or="";return or instanceof Ft?(or=typeof pe.angle=="number"?rn(or,new Ft(1,0,0,1,Dn,Fn)):rn(new Ft(1,0,0,1,Dn,Fn),or),G===ee&&(or=rn(new Ft(1,0,0,-1,0,0),or)),Or=or.join(" ")+` Tm
`):Or=ge(Dn)+" "+ge(Fn)+` Td
`,Or},Kn=0;Kn<at.length;Kn++){switch(ma="",ro){case 1:na=(In?"<":"(")+at[Kn][0]+(In?">":")"),Yr=parseFloat(at[Kn][1]),Ui=parseFloat(at[Kn][2]);break;case 0:na=(In?"<":"(")+at[Kn]+(In?">":")"),Yr=Ma(M),Ui=ms(ne)}ii!==void 0&&ii[Kn]!==void 0&&(ma=ii[Kn]+` Tw
`),Kn===0?x.push(ma+ao(Yr,Ui,On)+na):ro===0?x.push(ma+na):ro===1&&x.push(ma+ao(Yr,Ui,On)+na)}x=ro===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Xa=`BT
/`;return Xa+=qe+" "+Ve+` Tf
`,Xa+=ge(Ve*vr)+` TL
`,Xa+=Ga+`
`,Xa+=zn,Xa+=x,X(Xa+="ET"),R[qe]=!0,Bn};var Rr=w.__private__.clip=w.clip=function(x){return X(x==="evenodd"?"W*":"W"),this};w.clipEvenOdd=function(){return Rr("evenodd")},w.__private__.discardPath=w.discardPath=function(){return X("n"),this};var ds=w.__private__.isValidStyle=function(x){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(M=!0),M};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(x){return ds(x)&&(v=x),this};var _a=w.__private__.getStyle=w.getStyle=function(x){var M=v;switch(x){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=x}return M},An=w.close=function(){return X("h"),this};w.stroke=function(){return X("S"),this},w.fill=function(x){return ca("f",x),this},w.fillEvenOdd=function(x){return ca("f*",x),this},w.fillStroke=function(x){return ca("B",x),this},w.fillStrokeEvenOdd=function(x){return ca("B*",x),this};var ca=function(x,M){dr(M)==="object"?Ia(M,x):X(x)},ws=function(x){x===null||G===ee&&x===void 0||(x=_a(x),X(x))};function Wa(x,M,ne,pe,Pe){var Ze=new bc(M||this.boundingBox,ne||this.xStep,pe||this.yStep,this.gState,Pe||this.matrix);Ze.stream=this.stream;var at=x+"$$"+this.cloneIndex+++"$$";return Zt(at,Ze),Ze}var Ia=function(x,M){var ne=un[x.key],pe=st[ne];if(pe instanceof $l)X("q"),X(sr(M)),pe.gState&&w.setGState(pe.gState),X(x.matrix.toString()+" cm"),X("/"+ne+" sh"),X("Q");else if(pe instanceof bc){var Pe=new Ft(1,0,0,-1,0,$s());x.matrix&&(Pe=Pe.multiply(x.matrix||tr),ne=Wa.call(pe,x.key,x.boundingBox,x.xStep,x.yStep,Pe).id),X("q"),X("/Pattern cs"),X("/"+ne+" scn"),pe.gState&&w.setGState(pe.gState),X(M),X("Q")}},sr=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},us=w.moveTo=function(x,M){return X(ge(de(x))+" "+ge(ie(M))+" m"),this},Jn=w.lineTo=function(x,M){return X(ge(de(x))+" "+ge(ie(M))+" l"),this},Ea=w.curveTo=function(x,M,ne,pe,Pe,Ze){return X([ge(de(x)),ge(ie(M)),ge(de(ne)),ge(ie(pe)),ge(de(Pe)),ge(ie(Ze)),"c"].join(" ")),this};w.__private__.line=w.line=function(x,M,ne,pe,Pe){if(isNaN(x)||isNaN(M)||isNaN(ne)||isNaN(pe)||!ds(Pe))throw new Error("Invalid arguments passed to jsPDF.line");return G===Y?this.lines([[ne-x,pe-M]],x,M,[1,1],Pe||"S"):this.lines([[ne-x,pe-M]],x,M,[1,1]).stroke()},w.__private__.lines=w.lines=function(x,M,ne,pe,Pe,Ze){var at,_t,Bt,Xt,qt,xn,Yt,On,Bn,Tr,In,zn;if(typeof x=="number"&&(zn=ne,ne=M,M=x,x=zn),pe=pe||[1,1],Ze=Ze||!1,isNaN(M)||isNaN(ne)||!Array.isArray(x)||!Array.isArray(pe)||!ds(Pe)||typeof Ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(us(M,ne),at=pe[0],_t=pe[1],Xt=x.length,Tr=M,In=ne,Bt=0;Bt<Xt;Bt++)(qt=x[Bt]).length===2?(Tr=qt[0]*at+Tr,In=qt[1]*_t+In,Jn(Tr,In)):(xn=qt[0]*at+Tr,Yt=qt[1]*_t+In,On=qt[2]*at+Tr,Bn=qt[3]*_t+In,Tr=qt[4]*at+Tr,In=qt[5]*_t+In,Ea(xn,Yt,On,Bn,Tr,In));return Ze&&An(),ws(Pe),this},w.path=function(x){for(var M=0;M<x.length;M++){var ne=x[M],pe=ne.c;switch(ne.op){case"m":us(pe[0],pe[1]);break;case"l":Jn(pe[0],pe[1]);break;case"c":Ea.apply(this,pe);break;case"h":An()}}return this},w.__private__.rect=w.rect=function(x,M,ne,pe,Pe){if(isNaN(x)||isNaN(M)||isNaN(ne)||isNaN(pe)||!ds(Pe))throw new Error("Invalid arguments passed to jsPDF.rect");return G===Y&&(pe=-pe),X([ge(de(x)),ge(ie(M)),ge(de(ne)),ge(de(pe)),"re"].join(" ")),ws(Pe),this},w.__private__.triangle=w.triangle=function(x,M,ne,pe,Pe,Ze,at){if(isNaN(x)||isNaN(M)||isNaN(ne)||isNaN(pe)||isNaN(Pe)||isNaN(Ze)||!ds(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-x,pe-M],[Pe-ne,Ze-pe],[x-Pe,M-Ze]],x,M,[1,1],at,!0),this},w.__private__.roundedRect=w.roundedRect=function(x,M,ne,pe,Pe,Ze,at){if(isNaN(x)||isNaN(M)||isNaN(ne)||isNaN(pe)||isNaN(Pe)||isNaN(Ze)||!ds(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _t=4/3*(Math.SQRT2-1);return Pe=Math.min(Pe,.5*ne),Ze=Math.min(Ze,.5*pe),this.lines([[ne-2*Pe,0],[Pe*_t,0,Pe,Ze-Ze*_t,Pe,Ze],[0,pe-2*Ze],[0,Ze*_t,-Pe*_t,Ze,-Pe,Ze],[2*Pe-ne,0],[-Pe*_t,0,-Pe,-Ze*_t,-Pe,-Ze],[0,2*Ze-pe],[0,-Ze*_t,Pe*_t,-Ze,Pe,-Ze]],x+Pe,M,[1,1],at,!0),this},w.__private__.ellipse=w.ellipse=function(x,M,ne,pe,Pe){if(isNaN(x)||isNaN(M)||isNaN(ne)||isNaN(pe)||!ds(Pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ze=4/3*(Math.SQRT2-1)*ne,at=4/3*(Math.SQRT2-1)*pe;return us(x+ne,M),Ea(x+ne,M-at,x+Ze,M-pe,x,M-pe),Ea(x-Ze,M-pe,x-ne,M-at,x-ne,M),Ea(x-ne,M+at,x-Ze,M+pe,x,M+pe),Ea(x+Ze,M+pe,x+ne,M+at,x+ne,M),ws(Pe),this},w.__private__.circle=w.circle=function(x,M,ne,pe){if(isNaN(x)||isNaN(M)||isNaN(ne)||!ds(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,M,ne,ne,pe)},w.setFont=function(x,M,ne){return ne&&(M=Be(M,ne)),qe=Rs(x,M,{disableWarning:!1}),this};var fs=w.__private__.getFont=w.getFont=function(){return xe[Rs.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var x,M,ne={};for(x in We)if(We.hasOwnProperty(x))for(M in ne[x]=[],We[x])We[x].hasOwnProperty(M)&&ne[x].push(M);return ne},w.addFont=function(x,M,ne,pe,Pe){var Ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ze.indexOf(arguments[3])!==-1?Pe=arguments[3]:arguments[3]&&Ze.indexOf(arguments[3])==-1&&(ne=Be(ne,pe)),kr.call(this,x,M,ne,Pe=Pe||"Identity-H")};var da,ua=s.lineWidth||.200025,hs=w.__private__.getLineWidth=w.getLineWidth=function(){return ua},Jt=w.__private__.setLineWidth=w.setLineWidth=function(x){return ua=x,X(ge(de(x))+" w"),this};w.__private__.setLineDash=Gt.API.setLineDash=Gt.API.setLineDashPattern=function(x,M){if(x=x||[],M=M||0,isNaN(M)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ne){return ge(de(ne))}).join(" "),M=ge(de(M)),X("["+x+"] "+M+" d"),this};var Va=w.__private__.getLineHeight=w.getLineHeight=function(){return Ve*da};w.__private__.getLineHeight=w.getLineHeight=function(){return Ve*da};var nl=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(da=x),this},Ha=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return da};nl(s.lineHeight);var Ma=w.__private__.getHorizontalCoordinate=function(x){return de(x)},ms=w.__private__.getVerticalCoordinate=function(x){return G===ee?x:le[K].mediaBox.topRightY-le[K].mediaBox.bottomLeftY-de(x)},qo=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(x){return ge(Ma(x))},ni=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(x){return ge(ms(x))},Ri=s.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return bi(Ri)},w.__private__.setStrokeColor=w.setDrawColor=function(x,M,ne,pe){return Ri=qr({ch1:x,ch2:M,ch3:ne,ch4:pe,pdfColorType:"draw",precision:2}),X(Ri),this};var Ya=s.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return bi(Ya)},w.__private__.setFillColor=w.setFillColor=function(x,M,ne,pe){return Ya=qr({ch1:x,ch2:M,ch3:ne,ch4:pe,pdfColorType:"fill",precision:2}),X(Ya),this};var Ga=s.textColor||"0 g",Xi=w.__private__.getTextColor=w.getTextColor=function(){return bi(Ga)};w.__private__.setTextColor=w.setTextColor=function(x,M,ne,pe){return Ga=qr({ch1:x,ch2:M,ch3:ne,ch4:pe,pdfColorType:"text",precision:3}),this};var ea=s.charSpace,Wr=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(ea||0)};w.__private__.setCharSpace=w.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ea=x,this};var ri=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(x){var M=w.CapJoinStyles[x];if(M===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ri=M,X(M+" J"),this};var Ti=0;w.__private__.setLineJoin=w.setLineJoin=function(x){var M=w.CapJoinStyles[x];if(M===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ti=M,X(M+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(ge(de(x))+" M"),this},w.GState=Jd,w.setGState=function(x){(x=typeof x=="string"?Ht[Qt[x]]:zs(null,x)).equals(Sn)||(X("/"+x.id+" gs"),Sn=x)};var zs=function(x,M){if(!x||!Qt[x]){var ne=!1;for(var pe in Ht)if(Ht.hasOwnProperty(pe)&&Ht[pe].equals(M)){ne=!0;break}if(ne)M=Ht[pe];else{var Pe="GS"+(Object.keys(Ht).length+1).toString(10);Ht[Pe]=M,M.id=Pe}return x&&(Qt[x]=M.id),wt.publish("addGState",M),M}};w.addGState=function(x,M){return zs(x,M),this},w.saveGraphicsState=function(){return X("q"),ct.push({key:qe,size:Ve,color:Ga}),this},w.restoreGraphicsState=function(){X("Q");var x=ct.pop();return qe=x.key,Ve=x.size,Ga=x.color,Sn=null,this},w.setCurrentTransformationMatrix=function(x){return X(x.toString()+" cm"),this},w.comment=function(x){return X("#"+x),this};var fa=function(x,M){var ne=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Ze){isNaN(Ze)||(ne=parseFloat(Ze))}});var pe=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Ze){isNaN(Ze)||(pe=parseFloat(Ze))}});var Pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pe},set:function(Ze){Pe=Ze.toString()}}),this},Da=function(x,M,ne,pe){fa.call(this,x,M),this.type="rect";var Pe=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pe},set:function(at){isNaN(at)||(Pe=parseFloat(at))}});var Ze=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ze},set:function(at){isNaN(at)||(Ze=parseFloat(at))}}),this},Oi=function(){this.page=Wt,this.currentPage=K,this.pages=Te.slice(0),this.pagesContext=le.slice(0),this.x=ft,this.y=on,this.matrix=Se,this.width=fn(K),this.height=Zi(K),this.outputDestination=ot,this.id="",this.objectNumber=-1};Oi.prototype.restore=function(){Wt=this.page,K=this.currentPage,le=this.pagesContext,Te=this.pages,ft=this.x,on=this.y,Se=this.matrix,qs(K,this.width),Ja(K,this.height),ot=this.outputDestination};var ta=function(x,M,ne,pe,Pe){gn.push(new Oi),Wt=K=0,Te=[],ft=x,on=M,Se=Pe,Pa([ne,pe])};for(var Us in w.beginFormObject=function(x,M,ne,pe,Pe){return ta(x,M,ne,pe,Pe),this},w.endFormObject=function(x){return(function(M){if(Xr[M])gn.pop().restore();else{var ne=new Oi,pe="Xo"+(Object.keys(Xn).length+1).toString(10);ne.id=pe,Xr[M]=pe,Xn[pe]=ne,wt.publish("addFormObject",ne),gn.pop().restore()}})(x),this},w.doFormObject=function(x,M){var ne=Xn[Xr[x]];return X("q"),X(M.toString()+" cm"),X("/"+ne.id+" Do"),X("Q"),this},w.getFormObject=function(x){var M=Xn[Xr[x]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},w.save=function(x,M){return x=x||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(ql(Ts(yr()),x),typeof ql.unload=="function"&&cn.setTimeout&&setTimeout(ql.unload,911),this):new Promise(function(ne,pe){try{var Pe=ql(Ts(yr()),x);typeof ql.unload=="function"&&cn.setTimeout&&setTimeout(ql.unload,911),ne(Pe)}catch(Ze){pe(Ze.message)}})},Gt.API)Gt.API.hasOwnProperty(Us)&&(Us==="events"&&Gt.API.events.length?(function(x,M){var ne,pe,Pe;for(Pe=M.length-1;Pe!==-1;Pe--)ne=M[Pe][0],pe=M[Pe][1],x.subscribe.apply(x,[ne].concat(typeof pe=="function"?[pe]:pe))})(wt,Gt.API.events):w[Us]=Gt.API[Us]);function fn(x){return le[x].mediaBox.topRightX-le[x].mediaBox.bottomLeftX}function qs(x,M){le[x].mediaBox.topRightX=M+le[x].mediaBox.bottomLeftX}function Zi(x){return le[x].mediaBox.topRightY-le[x].mediaBox.bottomLeftY}function Ja(x,M){le[x].mediaBox.topRightY=M+le[x].mediaBox.bottomLeftY}var ps=w.getPageWidth=function(x){return fn(x=x||K)/nt},ha=w.setPageWidth=function(x,M){qs(x,M*nt)},$s=w.getPageHeight=function(x){return Zi(x=x||K)/nt},Bi=w.setPageHeight=function(x,M){Ja(x,M*nt)};return w.internal={pdfEscape:Zr,getStyle:_a,getFont:fs,getFontSize:yt,getCharSpace:Wr,getTextColor:Xi,getLineHeight:Va,getLineHeightFactor:Ha,getLineWidth:hs,write:et,getHorizontalCoordinate:Ma,getVerticalCoordinate:ms,getCoordinateString:qo,getVerticalCoordinateString:ni,collections:{},newObject:Gn,newAdditionalObject:ei,newObjectDeferred:gr,newObjectDeferredBegin:Sr,getFilters:St,putStream:rr,events:wt,scaleFactor:nt,pageSize:{getWidth:function(){return ps(K)},setWidth:function(x){ha(K,x)},getHeight:function(){return $s(K)},setHeight:function(x){Bi(K,x)}},encryptionOptions:j,encryption:qn,getEncryptor:function(x){return j!==null?qn.encryptor(x,0):function(M){return M}},output:la,getNumberOfPages:La,get pages(){return Te},out:X,f2:z,f3:H,getPageInfo:Os,getPageInfoByObjId:Bs,getCurrentPageInfo:Ut,getPDFVersion:F,Point:fa,Rectangle:Da,Matrix:Ft,hasHotfix:cs},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return ps(K)},set:function(x){ha(K,x)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return $s(K)},set:function(x){Bi(K,x)},enumerable:!0,configurable:!0}),(function(x){for(var M=0,ne=Lt.length;M<ne;M++){var pe=kr.call(this,x[M][0],x[M][1],x[M][2],Lt[M][3],!0);A===!1&&(R[pe]=!0);var Pe=x[M][0].split("-");ut({id:pe,fontName:Pe[0],fontStyle:Pe[1]||""})}wt.publish("addFonts",{fonts:xe,dictionary:We})}).call(w,Lt),qe="F1",Fs(d,r),wt.publish("initialized"),w}yc.prototype.lsbFirstWord=function(s){return String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255)},yc.prototype.toHexString=function(s){return s.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yc.prototype.hexToBytes=function(s){for(var a=[],r=0;r<s.length;r+=2)a.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return a.join("")},yc.prototype.processOwnerPassword=function(s,a){return Nf(jf(a).substr(0,5),s)},yc.prototype.encryptor=function(s,a){var r=jf(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&a,a>>8&255)).substr(0,10);return function(o){return Nf(r,o)}},Jd.prototype.equals=function(s){var a,r="id,objectNumber,equals";if(!s||dr(s)!==dr(this))return!1;var o=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!s.hasOwnProperty(a)||this[a]!==s[a])return!1;o++}for(a in s)s.hasOwnProperty(a)&&r.indexOf(a)<0&&o--;return o===0},Gt.API={events:[]},Gt.version="3.0.4";var oa=Gt.API,Tf=1,Jl=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gc=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hn=function(s){return s.toFixed(2)},bl=function(s){return s.toFixed(5)};oa.__acroform__={};var vi=function(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s},op=function(s){return s*Tf},Bo=function(s){var a=new jg,r=Tt.internal.getHeight(s)||0,o=Tt.internal.getWidth(s)||0;return a.BBox=[0,0,Number(hn(o)),Number(hn(r))],a},Hx=oa.__acroform__.setBit=function(s,a){if(s=s||0,a=a||0,isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|1<<a},Yx=oa.__acroform__.clearBit=function(s,a){if(s=s||0,a=a||0,isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&~(1<<a)},Gx=oa.__acroform__.getBit=function(s,a){if(isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<a?1:0},va=oa.__acroform__.getBitForPdf=function(s,a){if(isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Gx(s,a-1)},ba=oa.__acroform__.setBitForPdf=function(s,a){if(isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Hx(s,a-1)},wa=oa.__acroform__.clearBitForPdf=function(s,a){if(isNaN(s)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Yx(s,a-1)},Jx=oa.__acroform__.calculateCoordinates=function(s,a){var r=a.internal.getHorizontalCoordinate,o=a.internal.getVerticalCoordinate,d=s[0],c=s[1],p=s[2],m=s[3],g={};return g.lowerLeft_X=r(d)||0,g.lowerLeft_Y=o(c+m)||0,g.upperRight_X=r(d+p)||0,g.upperRight_Y=o(c)||0,[Number(hn(g.lowerLeft_X)),Number(hn(g.lowerLeft_Y)),Number(hn(g.upperRight_X)),Number(hn(g.upperRight_Y))]},Kx=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var a=[],r=s._V||s.DV,o=Sf(s,r),d=s.scope.internal.getFont(s.fontName,s.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(s.scope.__private__.encodeColorString(s.color)),a.push("/"+d+" "+hn(o.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(o.text),a.push("ET"),a.push("Q"),a.push("EMC");var c=Bo(s);return c.scope=s.scope,c.stream=a.join(`
`),c}},Sf=function(s,a){var r=s.fontSize===0?s.maxFontSize:s.fontSize,o={text:"",fontSize:""},d=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");d=s.multiline?d.map(function(z){return z.split(`
`)}):d.map(function(z){return[z]});var c=r,p=Tt.internal.getHeight(s)||0;p=p<0?-p:p;var m=Tt.internal.getWidth(s)||0;m=m<0?-m:m;var g=function(z,H,de){if(z+1<d.length){var ie=H+" "+d[z+1][0];return Fd(ie,s,de).width<=m-4}return!1};c++;e:for(;c>0;){a="",c--;var v,j,A=Fd("3",s,c).height,R=s.multiline?p-c:(p-A)/2,w=R+=2,$=0,F=0,D=0;if(c<=0){a=`(...) Tj
`,a+="% Width of Text: "+Fd(a,s,c=12).width+", FieldWidth:"+m+`
`;break}for(var _="",Y=0,ee=0;ee<d.length;ee++)if(d.hasOwnProperty(ee)){var G=!1;if(d[ee].length!==1&&D!==d[ee].length-1){if((A+2)*(Y+2)+2>p)continue e;_+=d[ee][D],G=!0,F=ee,ee--}else{_=(_+=d[ee][D]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var fe=parseInt(ee),he=g(fe,_,c),Be=ee>=d.length-1;if(he&&!Be){_+=" ",D=0;continue}if(he||Be){if(Be)F=fe;else if(s.multiline&&(A+2)*(Y+2)+2>p)continue e}else{if(!s.multiline||(A+2)*(Y+2)+2>p)continue e;F=fe}}for(var ge="",te=$;te<=F;te++){var ye=d[te];if(s.multiline){if(te===F){ge+=ye[D]+" ",D=(D+1)%ye.length;continue}if(te===$){ge+=ye[ye.length-1]+" ";continue}}ge+=ye[0]+" "}switch(ge=ge.substr(ge.length-1)==" "?ge.substr(0,ge.length-1):ge,j=Fd(ge,s,c).width,s.textAlign){case"right":v=m-j-2;break;case"center":v=(m-j)/2;break;default:v=2}a+=hn(v)+" "+hn(w)+` Td
`,a+="("+Jl(ge)+`) Tj
`,a+=-hn(v)+` 0 Td
`,w=-(c+2),j=0,$=G?F:F+1,Y++,_=""}break}return o.text=a,o.fontSize=c,o},Fd=function(s,a,r){var o=a.scope.internal.getFont(a.fontName,a.fontStyle),d=a.scope.getStringUnitWidth(s,{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:d}},Qx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Xx=function(s,a){var r={type:"reference",object:s};a.internal.getPageInfo(s.page).pageContext.annotations.find(function(o){return o.type===r.type&&o.object===r.object})===void 0&&a.internal.getPageInfo(s.page).pageContext.annotations.push(r)},Zx=function(s,a){if(a.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(jo.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(Qx)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tf=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new Ng,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var d in o)if(o.hasOwnProperty(d)){var c=o[d];c.objId=void 0,c.hasAnnotation&&Xx(c,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(o,d){var c=!o;for(var p in o||(d.internal.newObjectDeferredBegin(d.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),d.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||d.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(p)){var m=o[p],g=[],v=m.Rect;if(m.Rect&&(m.Rect=Jx(m.Rect,d)),d.internal.newObjectDeferredBegin(m.objId,!0),m.DA=Tt.createDefaultAppearanceStream(m),dr(m)==="object"&&typeof m.getKeyValueListForStream=="function"&&(g=m.getKeyValueListForStream()),m.Rect=v,m.hasAppearanceStream&&!m.appearanceStreamContent){var j=Kx(m);g.push({key:"AP",value:"<</N "+j+">>"}),d.internal.acroformPlugin.xForms.push(j)}if(m.appearanceStreamContent){var A="";for(var R in m.appearanceStreamContent)if(m.appearanceStreamContent.hasOwnProperty(R)){var w=m.appearanceStreamContent[R];if(A+="/"+R+" ",A+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var p in w)if(w.hasOwnProperty(p)){var $=w[p];typeof $=="function"&&($=$.call(d,m)),A+="/"+p+" "+$+" ",d.internal.acroformPlugin.xForms.indexOf($)>=0||d.internal.acroformPlugin.xForms.push($)}}else typeof($=w)=="function"&&($=$.call(d,m)),A+="/"+p+" "+$,d.internal.acroformPlugin.xForms.indexOf($)>=0||d.internal.acroformPlugin.xForms.push($);A+=">>"}g.push({key:"AP",value:`<<
`+A+">>"})}d.internal.putStream({additionalKeyValues:g,objectId:m.objId}),d.internal.out("endobj")}c&&(function(F,D){for(var _ in F)if(F.hasOwnProperty(_)){var Y=_,ee=F[_];D.internal.newObjectDeferredBegin(ee.objId,!0),dr(ee)==="object"&&typeof ee.putStream=="function"&&ee.putStream(),delete F[Y]}})(d.internal.acroformPlugin.xForms,d)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},wg=oa.__acroform__.arrayToPdfArray=function(s,a,r){var o=function(p){return p};if(Array.isArray(s)){for(var d="[",c=0;c<s.length;c++)switch(c!==0&&(d+=" "),dr(s[c])){case"boolean":case"number":case"object":d+=s[c].toString();break;case"string":s[c].substr(0,1)!=="/"?(a!==void 0&&r&&(o=r.internal.getEncryptor(a)),d+="("+Jl(o(s[c].toString()))+")"):d+=s[c].toString()}return d+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},sf=function(s,a,r){var o=function(d){return d};return a!==void 0&&r&&(o=r.internal.getEncryptor(a)),(s=s||"").toString(),"("+Jl(o(s))+")"},zo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zo.prototype.toString=function(){return this.objId+" 0 R"},zo.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},zo.prototype.getKeyValueListForStream=function(){var s=[],a=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var o=a[r],d=this[o];d&&(Array.isArray(d)?s.push({key:o,value:wg(d,this.objId,this.scope)}):d instanceof zo?(d.scope=this.scope,s.push({key:o,value:d.objId+" 0 R"})):typeof d!="function"&&s.push({key:o,value:d}))}return s};var jg=function(){zo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};vi(jg,zo);var Ng=function(){zo.call(this);var s,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(o){return o};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Jl(r(s))+")"}},set:function(r){s=r}})};vi(Ng,zo);var jo=function s(){zo.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');a=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!va(a,3)},set:function(_){_?this.F=ba(a,3):this.F=wa(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(_){o=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(_){o[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(_){o[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(_){o[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(_){o[3]=_}});var d="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return d},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":d=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Kd)return;c="FieldObject"+s.FieldNum++}var _=function(Y){return Y};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Jl(_(c))+")"},set:function(_){c=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(_){c=_}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var m="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(_){g=_}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/Tf:v},set:function(_){v=_}});var j="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return j},set:function(_){j=_}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof Kd||this instanceof Wl))return sf(A,this.objId,this.scope)},set:function(_){_=_.toString(),A=_}});var R=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(R)return this instanceof is==0?sf(R,this.objId,this.scope):R},set:function(_){_=_.toString(),R=this instanceof is==0?_.substr(0,1)==="("?gc(_.substr(1,_.length-2)):gc(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof is==1?gc(R.substr(1,R.length-1)):R},set:function(_){_=_.toString(),R=this instanceof is==1?"/"+_:_}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof is==0?sf(w,this.objId,this.scope):w},set:function(_){_=_.toString(),w=this instanceof is==0?_.substr(0,1)==="("?gc(_.substr(1,_.length-2)):gc(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof is==1?gc(w.substr(1,w.length-1)):w},set:function(_){_=_.toString(),w=this instanceof is==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var $,F=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return F},set:function(_){_=!!_,F=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if($)return $},set:function(_){$=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,1)},set:function(_){_?this.Ff=ba(this.Ff,1):this.Ff=wa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,2)},set:function(_){_?this.Ff=ba(this.Ff,2):this.Ff=wa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,3)},set:function(_){_?this.Ff=ba(this.Ff,3):this.Ff=wa(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');D=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(D){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:D=2;break;case"center":case 1:D=1;break;default:D=0}}})};vi(jo,zo);var wc=function(){jo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wg(a,this.objId,this.scope)},set:function(r){var o,d;d=[],typeof(o=r)=="string"&&(d=(function(c,p,m){m||(m=1);for(var g,v=[];g=p.exec(c);)v.push(g[m]);return v})(o,/\((.*?)\)/g)),a=d}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,o){for(o=o||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,18)},set:function(r){r?this.Ff=ba(this.Ff,18):this.Ff=wa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ba(this.Ff,19):this.Ff=wa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,20)},set:function(r){r?(this.Ff=ba(this.Ff,20),a.sort()):this.Ff=wa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,22)},set:function(r){r?this.Ff=ba(this.Ff,22):this.Ff=wa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,23)},set:function(r){r?this.Ff=ba(this.Ff,23):this.Ff=wa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,27)},set:function(r){r?this.Ff=ba(this.Ff,27):this.Ff=wa(this.Ff,27)}}),this.hasAppearanceStream=!1};vi(wc,jo);var jc=function(){wc.call(this),this.fontName="helvetica",this.combo=!1};vi(jc,wc);var Nc=function(){jc.call(this),this.combo=!0};vi(Nc,jc);var Ud=function(){Nc.call(this),this.edit=!0};vi(Ud,Nc);var is=function(){jo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,15)},set:function(r){r?this.Ff=ba(this.Ff,15):this.Ff=wa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,16)},set:function(r){r?this.Ff=ba(this.Ff,16):this.Ff=wa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,17)},set:function(r){r?this.Ff=ba(this.Ff,17):this.Ff=wa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,26)},set:function(r){r?this.Ff=ba(this.Ff,26):this.Ff=wa(this.Ff,26)}});var s,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var o,d=[];for(o in d.push("<<"),a)d.push("/"+o+" ("+Jl(r(a[o]))+")");return d.push(">>"),d.join(`
`)}},set:function(r){dr(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};vi(is,jo);var qd=function(){is.call(this),this.pushButton=!0};vi(qd,is);var Sc=function(){is.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(a){s=a!==void 0?a:[]}})};vi(Sc,is);var Kd=function(){var s,a;jo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(d){s=d}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(d){a=d}});var r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var d=function(m){return m};this.scope&&(d=this.scope.internal.getEncryptor(this.objId));var c,p=[];for(c in p.push("<<"),o)p.push("/"+c+" ("+Jl(d(o[c]))+")");return p.push(">>"),p.join(`
`)},set:function(d){dr(d)==="object"&&(o=d)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(d){typeof d=="string"&&(o.CA=d)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(d){r=d}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(d){r="/"+d}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};vi(Kd,jo),Sc.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},Sc.prototype.createOption=function(s){var a=new Kd;return a.Parent=this,a.optionName=s,this.Kids.push(a),ey.call(this.scope,a),a};var $d=function(){is.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};vi($d,is);var Wl=function(){jo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,13)},set:function(a){a?this.Ff=ba(this.Ff,13):this.Ff=wa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,21)},set:function(a){a?this.Ff=ba(this.Ff,21):this.Ff=wa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,23)},set:function(a){a?this.Ff=ba(this.Ff,23):this.Ff=wa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,24)},set:function(a){a?this.Ff=ba(this.Ff,24):this.Ff=wa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,25)},set:function(a){a?this.Ff=ba(this.Ff,25):this.Ff=wa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,26)},set:function(a){a?this.Ff=ba(this.Ff,26):this.Ff=wa(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(a){Number.isInteger(a)&&(s=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};vi(Wl,jo);var Wd=function(){Wl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!va(this.Ff,14)},set:function(s){s?this.Ff=ba(this.Ff,14):this.Ff=wa(this.Ff,14)}}),this.password=!0};vi(Wd,Wl);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=[],o=s.scope.internal.getFont(s.fontName,s.fontStyle).id,d=s.scope.__private__.encodeColorString(s.color),c=Sf(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+hn(Tt.internal.getWidth(s))+" "+hn(Tt.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+o+" "+hn(c.fontSize)+" Tf "+d),r.push("BT"),r.push(c.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(s){var a=Bo(s);a.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,o=s.scope.__private__.encodeColorString(s.color),d=[],c=Tt.internal.getHeight(s),p=Tt.internal.getWidth(s),m=Sf(s,s.caption);return d.push("1 g"),d.push("0 0 "+hn(p)+" "+hn(c)+" re"),d.push("f"),d.push("q"),d.push("0 0 1 rg"),d.push("0 0 "+hn(p-1)+" "+hn(c-1)+" re"),d.push("W"),d.push("n"),d.push("0 g"),d.push("BT"),d.push("/"+r+" "+hn(m.fontSize)+" Tf "+o),d.push(m.text),d.push("ET"),d.push("Q"),a.stream=d.join(`
`),a},OffPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hn(Tt.internal.getWidth(s))+" "+hn(Tt.internal.getHeight(s))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(s){var a={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return a.N[s]=Tt.RadioButton.Circle.YesNormal,a.D[s]=Tt.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(s){var a=Bo(s);a.scope=s.scope;var r=[],o=Tt.internal.getWidth(s)<=Tt.internal.getHeight(s)?Tt.internal.getWidth(s)/4:Tt.internal.getHeight(s)/4;o=Number((.9*o).toFixed(5));var d=Tt.internal.Bezier_C,c=Number((o*d).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+bl(Tt.internal.getWidth(s)/2)+" "+bl(Tt.internal.getHeight(s)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+c+" "+c+" "+o+" 0 "+o+" c"),r.push("-"+c+" "+o+" -"+o+" "+c+" -"+o+" 0 c"),r.push("-"+o+" -"+c+" -"+c+" -"+o+" 0 -"+o+" c"),r.push(c+" -"+o+" "+o+" -"+c+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=[],o=Tt.internal.getWidth(s)<=Tt.internal.getHeight(s)?Tt.internal.getWidth(s)/4:Tt.internal.getHeight(s)/4;o=Number((.9*o).toFixed(5));var d=Number((2*o).toFixed(5)),c=Number((d*Tt.internal.Bezier_C).toFixed(5)),p=Number((o*Tt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+bl(Tt.internal.getWidth(s)/2)+" "+bl(Tt.internal.getHeight(s)/2)+" cm"),r.push(d+" 0 m"),r.push(d+" "+c+" "+c+" "+d+" 0 "+d+" c"),r.push("-"+c+" "+d+" -"+d+" "+c+" -"+d+" 0 c"),r.push("-"+d+" -"+c+" -"+c+" -"+d+" 0 -"+d+" c"),r.push(c+" -"+d+" "+d+" -"+c+" "+d+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+bl(Tt.internal.getWidth(s)/2)+" "+bl(Tt.internal.getHeight(s)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+p+" "+p+" "+o+" 0 "+o+" c"),r.push("-"+p+" "+o+" -"+o+" "+p+" -"+o+" 0 c"),r.push("-"+o+" -"+p+" -"+p+" -"+o+" 0 -"+o+" c"),r.push(p+" -"+o+" "+o+" -"+p+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=[],o=Tt.internal.getWidth(s)<=Tt.internal.getHeight(s)?Tt.internal.getWidth(s)/4:Tt.internal.getHeight(s)/4;o=Number((.9*o).toFixed(5));var d=Number((2*o).toFixed(5)),c=Number((d*Tt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+bl(Tt.internal.getWidth(s)/2)+" "+bl(Tt.internal.getHeight(s)/2)+" cm"),r.push(d+" 0 m"),r.push(d+" "+c+" "+c+" "+d+" 0 "+d+" c"),r.push("-"+c+" "+d+" -"+d+" "+c+" -"+d+" 0 c"),r.push("-"+d+" -"+c+" -"+c+" -"+d+" 0 -"+d+" c"),r.push(c+" -"+d+" "+d+" -"+c+" "+d+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(s){var a={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return a.N[s]=Tt.RadioButton.Cross.YesNormal,a.D[s]=Tt.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(s){var a=Bo(s);a.scope=s.scope;var r=[],o=Tt.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+hn(Tt.internal.getWidth(s)-2)+" "+hn(Tt.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(hn(o.x1.x)+" "+hn(o.x1.y)+" m"),r.push(hn(o.x2.x)+" "+hn(o.x2.y)+" l"),r.push(hn(o.x4.x)+" "+hn(o.x4.y)+" m"),r.push(hn(o.x3.x)+" "+hn(o.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=Tt.internal.calculateCross(s),o=[];return o.push("0.749023 g"),o.push("0 0 "+hn(Tt.internal.getWidth(s))+" "+hn(Tt.internal.getHeight(s))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+hn(Tt.internal.getWidth(s)-2)+" "+hn(Tt.internal.getHeight(s)-2)+" re"),o.push("W"),o.push("n"),o.push(hn(r.x1.x)+" "+hn(r.x1.y)+" m"),o.push(hn(r.x2.x)+" "+hn(r.x2.y)+" l"),o.push(hn(r.x4.x)+" "+hn(r.x4.y)+" m"),o.push(hn(r.x3.x)+" "+hn(r.x3.y)+" l"),o.push("s"),o.push("Q"),a.stream=o.join(`
`),a},OffPushDown:function(s){var a=Bo(s);a.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hn(Tt.internal.getWidth(s))+" "+hn(Tt.internal.getHeight(s))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(s){var a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+a+" "+s.fontSize+" Tf "+r}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(s){var a=Tt.internal.getWidth(s),r=Tt.internal.getHeight(s),o=Math.min(a,r);return{x1:{x:(a-o)/2,y:(r-o)/2+o},x2:{x:(a-o)/2+o,y:(r-o)/2},x3:{x:(a-o)/2,y:(r-o)/2},x4:{x:(a-o)/2+o,y:(r-o)/2+o}}}},Tt.internal.getWidth=function(s){var a=0;return dr(s)==="object"&&(a=op(s.Rect[2])),a},Tt.internal.getHeight=function(s){var a=0;return dr(s)==="object"&&(a=op(s.Rect[3])),a};var ey=oa.addField=function(s){if(Zx(this,s),!(s instanceof jo))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=s).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};oa.AcroFormChoiceField=wc,oa.AcroFormListBox=jc,oa.AcroFormComboBox=Nc,oa.AcroFormEditBox=Ud,oa.AcroFormButton=is,oa.AcroFormPushButton=qd,oa.AcroFormRadioButton=Sc,oa.AcroFormCheckBox=$d,oa.AcroFormTextField=Wl,oa.AcroFormPasswordField=Wd,oa.AcroFormAppearance=Tt,oa.AcroForm={ChoiceField:wc,ListBox:jc,ComboBox:Nc,EditBox:Ud,Button:is,PushButton:qd,RadioButton:Sc,CheckBox:$d,TextField:Wl,PasswordField:Wd,Appearance:Tt},Gt.AcroForm={ChoiceField:wc,ListBox:jc,ComboBox:Nc,EditBox:Ud,Button:is,PushButton:qd,RadioButton:Sc,CheckBox:$d,TextField:Wl,PasswordField:Wd,Appearance:Tt};Gt.AcroForm;function Sg(s){return s.reduce(function(a,r,o){return a[r]=o,a},{})}(function(s){var a="addImage_";s.__addimage__={};var r="UNKNOWN",o={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},d=s.__addimage__.getImageFileTypeByImageData=function(z,H){var de,ie,ke,Me,Ee,me=r;if((H=H||r)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(he(z))for(Ee in o)for(ke=o[Ee],de=0;de<ke.length;de+=1){for(Me=!0,ie=0;ie<ke[de].length;ie+=1)if(ke[de][ie]!==void 0&&ke[de][ie]!==z[ie]){Me=!1;break}if(Me===!0){me=Ee;break}}else for(Ee in o)for(ke=o[Ee],de=0;de<ke.length;de+=1){for(Me=!0,ie=0;ie<ke[de].length;ie+=1)if(ke[de][ie]!==void 0&&ke[de][ie]!==z.charCodeAt(ie)){Me=!1;break}if(Me===!0){me=Ee;break}}return me===r&&H!==r&&(me=H),me},c=function z(H){for(var de=this.internal.write,ie=this.internal.putStream,ke=(0,this.internal.getFilters)();ke.indexOf("FlateEncode")!==-1;)ke.splice(ke.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var Me=[];if(Me.push({key:"Type",value:"/XObject"}),Me.push({key:"Subtype",value:"/Image"}),Me.push({key:"Width",value:H.width}),Me.push({key:"Height",value:H.height}),H.colorSpace===_.INDEXED?Me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(Me.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===_.DEVICE_CMYK&&Me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Me.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&Me.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)&&H.transparency.length>0){for(var Ee="",me=0,Ie=H.transparency.length;me<Ie;me++)Ee+=H.transparency[me]+" "+H.transparency[me]+" ";Me.push({key:"Mask",value:"["+Ee+"]"})}H.sMask!==void 0&&Me.push({key:"SMask",value:H.objectId+1+" 0 R"});var Ue=H.filter!==void 0?["/"+H.filter]:void 0;if(ie({data:H.data,additionalKeyValues:Me,alreadyAppliedFilters:Ue,objectId:H.objectId}),de("endobj"),"sMask"in H&&H.sMask!==void 0){var se,C=(se=H.sMaskBitsPerComponent)!==null&&se!==void 0?se:H.bitsPerComponent,K={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:H.sMask};"filter"in H&&(K.decodeParameters="/Predictor ".concat(H.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat(H.width),K.filter=H.filter),z.call(this,K)}if(H.colorSpace===_.INDEXED){var Z=this.internal.newObject();ie({data:ge(new Uint8Array(H.palette)),objectId:Z}),de("endobj")}},p=function(){var z=this.internal.collections[a+"images"];for(var H in z)c.call(this,z[H])},m=function(){var z,H=this.internal.collections[a+"images"],de=this.internal.write;for(var ie in H)de("/I"+(z=H[ie]).index,z.objectId,"0","R")},g=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",p),this.internal.events.subscribe("putXobjectDict",m))},v=function(){var z=this.internal.collections[a+"images"];return g.call(this),z},j=function(){return Object.keys(this.internal.collections[a+"images"]).length},A=function(z){return typeof s["process"+z.toUpperCase()]=="function"},R=function(z){return dr(z)==="object"&&z.nodeType===1},w=function(z,H){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var de=""+z.getAttribute("src");if(de.indexOf("data:image/")===0)return zd(unescape(de).split("base64,").pop());var ie=s.loadFile(de,!0);if(ie!==void 0)return ie}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var ke;switch(H){case"PNG":ke="image/png";break;case"WEBP":ke="image/webp";break;default:ke="image/jpeg"}return zd(z.toDataURL(ke,1).split("base64,").pop())}},$=function(z){var H=this.internal.collections[a+"images"];if(H){for(var de in H)if(z===H[de].alias)return H[de]}},F=function(z,H,de){return z||H||(z=-96,H=-96),z<0&&(z=-1*de.width*72/z/this.internal.scaleFactor),H<0&&(H=-1*de.height*72/H/this.internal.scaleFactor),z===0&&(z=H*de.width/de.height),H===0&&(H=z*de.height/de.width),[z,H]},D=function(z,H,de,ie,ke,Me){var Ee=F.call(this,de,ie,ke),me=this.internal.getCoordinateString,Ie=this.internal.getVerticalCoordinateString,Ue=v.call(this);if(de=Ee[0],ie=Ee[1],Ue[ke.index]=ke,Me){Me*=Math.PI/180;var se=Math.cos(Me),C=Math.sin(Me),K=function(ce){return ce.toFixed(4)},Z=[K(se),K(C),K(-1*C),K(se),0,0,"cm"]}this.internal.write("q"),Me?(this.internal.write([1,"0","0",1,me(z),Ie(H+ie),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([me(de),"0","0",me(ie),"0","0","cm"].join(" "))):this.internal.write([me(de),"0","0",me(ie),me(z),Ie(H+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ke.index+" Do"),this.internal.write("Q")},_=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ee=s.__addimage__.sHashCode=function(z){var H,de,ie=0;if(typeof z=="string")for(de=z.length,H=0;H<de;H++)ie=(ie<<5)-ie+z.charCodeAt(H),ie|=0;else if(he(z))for(de=z.byteLength/2,H=0;H<de;H++)ie=(ie<<5)-ie+z[H],ie|=0;return ie},G=s.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var H=!0;return z.length===0&&(H=!1),z.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(H=!1),H},fe=s.__addimage__.extractImageFromDataUrl=function(z){if(z==null||!(z=z.trim()).startsWith("data:"))return null;var H=z.indexOf(",");return H<0?null:z.substring(0,H).trim().endsWith("base64")?z.substring(H+1):null};s.__addimage__.isArrayBuffer=function(z){return z instanceof ArrayBuffer};var he=s.__addimage__.isArrayBufferView=function(z){return z instanceof Int8Array||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array},Be=s.__addimage__.binaryStringToUint8Array=function(z){for(var H=z.length,de=new Uint8Array(H),ie=0;ie<H;ie++)de[ie]=z.charCodeAt(ie);return de},ge=s.__addimage__.arrayBufferToBinaryString=function(z){for(var H="",de=he(z)?z:new Uint8Array(z),ie=0;ie<de.length;ie+=8192)H+=String.fromCharCode.apply(null,de.subarray(ie,ie+8192));return H};s.addImage=function(){var z,H,de,ie,ke,Me,Ee,me,Ie;if(typeof arguments[1]=="number"?(H=r,de=arguments[1],ie=arguments[2],ke=arguments[3],Me=arguments[4],Ee=arguments[5],me=arguments[6],Ie=arguments[7]):(H=arguments[1],de=arguments[2],ie=arguments[3],ke=arguments[4],Me=arguments[5],Ee=arguments[6],me=arguments[7],Ie=arguments[8]),dr(z=arguments[0])==="object"&&!R(z)&&"imageData"in z){var Ue=z;z=Ue.imageData,H=Ue.format||H||r,de=Ue.x||de||0,ie=Ue.y||ie||0,ke=Ue.w||Ue.width||ke,Me=Ue.h||Ue.height||Me,Ee=Ue.alias||Ee,me=Ue.compression||me,Ie=Ue.rotation||Ue.angle||Ie}var se=this.internal.getFilters();if(me===void 0&&se.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(de)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");g.call(this);var C=te.call(this,z,H,Ee,me);return D.call(this,de,ie,ke,Me,C,Ie),this};var te=function(z,H,de,ie){var ke,Me,Ee;if(typeof z=="string"&&d(z)===r){z=unescape(z);var me=ye(z,!1);(me!==""||(me=s.loadFile(z,!0))!==void 0)&&(z=me)}if(R(z)&&(z=w(z,H)),H=d(z,H),!A(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((Ee=de)==null||Ee.length===0)&&(de=(function(Ie){return typeof Ie=="string"||he(Ie)?ee(Ie):he(Ie.data)?ee(Ie.data):null})(z)),(ke=$.call(this,de))||(z instanceof Uint8Array||H==="RGBA"||(Me=z,z=Be(z)),ke=this["process"+H.toUpperCase()](z,j.call(this),de,(function(Ie){return Ie&&typeof Ie=="string"&&(Ie=Ie.toUpperCase()),Ie in s.image_compression?Ie:Y.NONE})(ie),Me)),!ke)throw new Error("An unknown error occurred whilst processing the image.");return ke},ye=s.__addimage__.convertBase64ToBinaryString=function(z,H){H=typeof H!="boolean"||H;var de,ie="";if(typeof z=="string"){var ke;de=(ke=fe(z))!==null&&ke!==void 0?ke:z;try{ie=zd(de)}catch(Me){if(H)throw G(de)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};s.getImageProperties=function(z){var H,de,ie="";if(R(z)&&(z=w(z)),typeof z=="string"&&d(z)===r&&((ie=ye(z,!1))===""&&(ie=s.loadFile(z)||""),z=ie),de=d(z),!A(de))throw new Error("addImage does not support files of type '"+de+"', please ensure that a plugin for '"+de+"' support is added.");if(z instanceof Uint8Array||(z=Be(z)),!(H=this["process"+de.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=de,H}})(Gt.API),(function(s){var a=function(r){if(r!==void 0&&r!="")return!0};Gt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var o,d,c,p=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,j=!1,A=0;A<v.length&&!j;A++)switch((o=v[A]).type){case"link":(a(o.options.url)||a(o.options.pageNumber))&&(j=!0);break;case"reference":case"text":case"freetext":j=!0}if(j!=0){this.internal.write("/Annots [");for(var R=0;R<v.length;R++){o=v[R];var w=this.internal.pdfEscape,$=this.internal.getEncryptor(r.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var F=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(F.objId),Y=o.title||"Note";c="<</Type /Annot /Subtype /Text "+(d="/Rect ["+p(o.bounds.x)+" "+m(o.bounds.y+o.bounds.h)+" "+p(o.bounds.x+o.bounds.w)+" "+m(o.bounds.y)+"] ")+"/Contents ("+w(_(o.contents))+")",c+=" /Popup "+D.objId+" 0 R",c+=" /P "+g.objId+" 0 R",c+=" /T ("+w(_(Y))+") >>",F.content=c;var ee=F.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(d="/Rect ["+p(o.bounds.x+30)+" "+m(o.bounds.y+o.bounds.h)+" "+p(o.bounds.x+o.bounds.w+30)+" "+m(o.bounds.y)+"] ")+" /Parent "+ee,o.open&&(c+=" /Open true"),c+=" >>",D.content=c,this.internal.write(F.objId,"0 R",D.objId,"0 R");break;case"freetext":d="/Rect ["+p(o.bounds.x)+" "+m(o.bounds.y)+" "+p(o.bounds.x+o.bounds.w)+" "+m(o.bounds.y+o.bounds.h)+"] ";var G=o.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+d+"/Contents ("+w($(o.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(o.options.name){var fe=this.annotations._nameMap[o.options.name];o.options.pageNumber=fe.page,o.options.top=fe.y}else o.options.top||(o.options.top=0);if(d="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",c="",o.options.url)c="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /A <</S /URI /URI ("+w($(o.options.url))+") >>";else if(o.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,c+=" /FitV "+o.options.left+"]";break;default:var he=m(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),c+=" /XYZ "+o.options.left+" "+he+" "+o.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var o=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":o.pageContext.annotations.push(r)}},s.link=function(r,o,d,c,p){var m=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;m.pageContext.annotations.push({finalBounds:{x:g(r),y:v(o),w:g(r+d),h:v(o+c)},options:p,type:"link"})},s.textWithLink=function(r,o,d,c){var p,m,g=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){m=c.maxWidth;var j=this.splitTextToSize(r,m).length;p=Math.ceil(v*j)}else m=g,p=v;return this.text(r,o,d,c),d+=.2*v,c.align==="center"&&(o-=g/2),c.align==="right"&&(o-=g),this.link(o,d-v,m,p,c),g},s.getTextWidth=function(r){var o=this.internal.getFontSize();return this.getStringUnitWidth(r)*o/this.internal.scaleFactor}})(Gt.API),(function(s){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},d=[1570,1571,1573,1575];s.__arabicParser__={};var c=s.__arabicParser__.isInArabicSubstitutionA=function(F){return a[F.charCodeAt(0)]!==void 0},p=s.__arabicParser__.isArabicLetter=function(F){return typeof F=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(F)},m=s.__arabicParser__.isArabicEndLetter=function(F){return p(F)&&c(F)&&a[F.charCodeAt(0)].length<=2},g=s.__arabicParser__.isArabicAlfLetter=function(F){return p(F)&&d.indexOf(F.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(F){return p(F)&&c(F)&&a[F.charCodeAt(0)].length>=1};var v=s.__arabicParser__.arabicLetterHasFinalForm=function(F){return p(F)&&c(F)&&a[F.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(F){return p(F)&&c(F)&&a[F.charCodeAt(0)].length>=3};var j=s.__arabicParser__.arabicLetterHasMedialForm=function(F){return p(F)&&c(F)&&a[F.charCodeAt(0)].length==4},A=s.__arabicParser__.resolveLigatures=function(F){var D=0,_=r,Y="",ee=0;for(D=0;D<F.length;D+=1)_[F.charCodeAt(D)]!==void 0?(ee++,typeof(_=_[F.charCodeAt(D)])=="number"&&(Y+=String.fromCharCode(_),_=r,ee=0),D===F.length-1&&(_=r,Y+=F.charAt(D-(ee-1)),D-=ee-1,ee=0)):(_=r,Y+=F.charAt(D-ee),D-=ee,ee=0);return Y};s.__arabicParser__.isArabicDiacritic=function(F){return F!==void 0&&o[F.charCodeAt(0)]!==void 0};var R=s.__arabicParser__.getCorrectForm=function(F,D,_){return p(F)?c(F)===!1?-1:!v(F)||!p(D)&&!p(_)||!p(_)&&m(D)||m(F)&&!p(D)||m(F)&&g(D)||m(F)&&m(D)?0:j(F)&&p(D)&&!m(D)&&p(_)&&v(_)?3:m(F)||!p(_)?1:2:-1},w=function(F){var D=0,_=0,Y=0,ee="",G="",fe="",he=(F=F||"").split("\\s+"),Be=[];for(D=0;D<he.length;D+=1){for(Be.push(""),_=0;_<he[D].length;_+=1)ee=he[D][_],G=he[D][_-1],fe=he[D][_+1],p(ee)?(Y=R(ee,G,fe),Be[D]+=Y!==-1?String.fromCharCode(a[ee.charCodeAt(0)][Y]):ee):Be[D]+=ee;Be[D]=A(Be[D])}return Be.join(" ")},$=s.__arabicParser__.processArabic=s.processArabic=function(){var F,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(D)){var Y=0;for(_=[],Y=0;Y<D.length;Y+=1)Array.isArray(D[Y])?_.push([w(D[Y][0]),D[Y][1],D[Y][2]]):_.push([w(D[Y])]);F=_}else F=w(D);return typeof arguments[0]=="string"?F:(arguments[0].text=F,arguments[0])};s.events.push(["preProcessText",$])})(Gt.API),Gt.API.autoPrint=function(s){var a;return(s=s||{}).variant=s.variant||"non-conform",s.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},(function(s){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(m){r=m}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(m){o=isNaN(m)||Number.isInteger(m)===!1||m<0?150:m,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var d=300;Object.defineProperty(this,"height",{get:function(){return d},set:function(m){d=isNaN(m)||Number.isInteger(m)===!1||m<0?300:m,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=d+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(m){c=m}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(m){p=m}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,o){var d;if((r=r||"2d")!=="2d")return null;for(d in o)this.pdf.context2d.hasOwnProperty(d)&&(this.pdf.context2d[d]=o[d]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])})(Gt.API),(function(s){var a={left:0,top:0,bottom:0,right:0},r=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),d.call(this))},d=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(F){g=F}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(F){v=F}});var j=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return j},set:function(F){j=F}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(F){A=F}});var R=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return R},set:function(F){R=F}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(F){w=F}});var $=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return $},set:function(F){$=F}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(g){return o.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},s.getTextDimensions=function(g,v){o.call(this);var j=(v=v||{}).fontSize||this.getFontSize(),A=v.font||this.getFont(),R=v.scaleFactor||this.internal.scaleFactor,w=0,$=0,F=0,D=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var _=v.maxWidth;_>0?typeof g=="string"?g=this.splitTextToSize(g,_):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(ee,G){return ee.concat(D.splitTextToSize(G,_))},[])):g=Array.isArray(g)?g:[g];for(var Y=0;Y<g.length;Y++)w<(F=this.getStringUnitWidth(g[Y],{font:A})*j)&&(w=F);return w!==0&&($=g.length),{w:w/=R,h:Math.max(($*j*this.getLineHeightFactor()-j*(this.getLineHeightFactor()-1))/R,0)}},s.cellAddPage=function(){o.call(this),this.addPage();var g=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new c(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=s.cell=function(){var g;g=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),o.call(this);var v=this.internal.__cell__.lastCell,j=this.internal.__cell__.padding,A=this.internal.__cell__.margins||a,R=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===g.lineNumber?(g.x=(v.x||0)+(v.width||0),g.y=v.y||0):v.y+v.height+g.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=A.top,w&&R&&(this.printHeaderRow(g.lineNumber,!0),g.y+=R[0].height)):g.y=v.y+v.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-j,g.y+j,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+j,{align:"center",baseline:"top",maxWidth:g.width-j-j}):this.text(g.text,g.x+j,g.y+j,{align:"left",baseline:"top",maxWidth:g.width-j-j})),this.internal.__cell__.lastCell=g,this};s.table=function(g,v,j,A,R){if(o.call(this),!j)throw new Error("No data for PDF table.");var w,$,F,D,_=[],Y=[],ee=[],G={},fe={},he=[],Be=[],ge=(R=R||{}).autoSize||!1,te=R.printHeaders!==!1,ye=R.css&&R.css["font-size"]!==void 0?16*R.css["font-size"]:R.fontSize||12,z=R.margins||Object.assign({width:this.getPageWidth()},a),H=typeof R.padding=="number"?R.padding:3,de=R.headerBackgroundColor||"#c8c8c8",ie=R.headerTextColor||"#000";if(d.call(this),this.internal.__cell__.printHeaders=te,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=ye,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=de,this.internal.__cell__.headerTextColor=ie,this.setFontSize(ye),A==null)Y=_=Object.keys(j[0]),ee=_.map(function(){return"left"});else if(Array.isArray(A)&&dr(A[0])==="object")for(_=A.map(function(Ue){return Ue.name}),Y=A.map(function(Ue){return Ue.prompt||Ue.name||""}),ee=A.map(function(Ue){return Ue.align||"left"}),w=0;w<A.length;w+=1)fe[A[w].name]=.7499990551181103*A[w].width;else Array.isArray(A)&&typeof A[0]=="string"&&(Y=_=A,ee=_.map(function(){return"left"}));if(ge||Array.isArray(A)&&typeof A[0]=="string")for(w=0;w<_.length;w+=1){for(G[D=_[w]]=j.map(function(Ue){return Ue[D]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(Y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),$=G[D],this.setFont(void 0,"normal"),F=0;F<$.length;F+=1)he.push(this.getTextDimensions($[F],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fe[D]=Math.max.apply(null,he)+H+H,he=[]}if(te){var ke={};for(w=0;w<_.length;w+=1)ke[_[w]]={},ke[_[w]].text=Y[w],ke[_[w]].align=ee[w];var Me=m.call(this,ke,fe);Be=_.map(function(Ue){return new c(g,v,fe[Ue],Me,ke[Ue].text,void 0,ke[Ue].align)}),this.setTableHeaderRow(Be),this.printHeaderRow(1,!1)}var Ee=A.reduce(function(Ue,se){return Ue[se.name]=se.align,Ue},{});for(w=0;w<j.length;w+=1){"rowStart"in R&&R.rowStart instanceof Function&&R.rowStart({row:w,data:j[w]},this);var me=m.call(this,j[w],fe);for(F=0;F<_.length;F+=1){var Ie=j[w][_[F]];"cellStart"in R&&R.cellStart instanceof Function&&R.cellStart({row:w,col:F,data:Ie},this),p.call(this,new c(g,v,fe[_[F]],me,Ie,w+2,Ee[_[F]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=v,this};var m=function(g,v){var j=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,R=this.internal.scaleFactor;return Object.keys(g).map(function(w){var $=g[w];return this.splitTextToSize($.hasOwnProperty("text")?$.text:$,v[w]-j-j)},this).map(function(w){return this.getLineHeightFactor()*w.length*A/R+j+j},this).reduce(function(w,$){return Math.max(w,$)},0)};s.setTableHeaderRow=function(g){o.call(this),this.internal.__cell__.tableHeaderRow=g},s.printHeaderRow=function(g,v){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var j;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var R=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){j=this.internal.__cell__.tableHeaderRow[w].clone(),v&&(j.y=this.internal.__cell__.margins.top||0,R.push(j)),j.lineNumber=g;var $=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,j),this.setTextColor($)}R.length>0&&this.setTableHeaderRow(R),this.setFont(void 0,"normal"),r=!1}})(Gt.API);var kg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ag=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kf=Sg(Ag),Cg=[100,200,300,400,500,600,700,800,900],ty=Sg(Cg);function of(s){var a=s.family.replace(/"|'/g,"").toLowerCase(),r=(function(c){return kg[c=c||"normal"]?c:"normal"})(s.style),o=(function(c){return c?typeof c=="number"?c>=100&&c<=900&&c%100==0?c:400:/^\d00$/.test(c)?parseInt(c):c==="bold"?700:400:400})(s.weight),d=(function(c){return typeof kf[c=c||"normal"]=="number"?c:"normal"})(s.stretch);return{family:a,style:r,weight:o,stretch:d,src:s.src||[],ref:s.ref||{name:a,style:[d,r,o].join(" ")}}}function lp(s,a,r,o){var d;for(d=r;d>=0&&d<a.length;d+=o)if(s[a[d]])return s[a[d]];for(d=r;d>=0&&d<a.length;d-=o)if(s[a[d]])return s[a[d]]}var ny={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dp(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function up(s){return s.trimLeft()}function ry(s,a){for(var r=0;r<s.length;){if(s.charAt(r)===a)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function ay(s){var a=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],s.substring(a[0].length)]}var Rd,fp,hp,xc,Td,mp,pp,gp,lf=["times"];function xp(s,a,r,o,d){var c=4,p=vp;switch(d){case Gt.API.image_compression.FAST:c=1,p=yp;break;case Gt.API.image_compression.MEDIUM:c=6,p=bp;break;case Gt.API.image_compression.SLOW:c=9,p=wp}s=(function(g,v,j,A){for(var R,w=g.length/v,$=new Uint8Array(g.length+w),F=[sy,yp,vp,bp,wp],D=0;D<w;D+=1){var _=D*v,Y=g.subarray(_,_+v);if(A)$.set(A(Y,j,R),_+D);else{for(var ee=F.length,G=[],fe=0;fe<ee;fe+=1)G[fe]=F[fe](Y,j,R);var he=oy(G.concat());$.set(G[he],_+D)}R=Y}return $})(s,a,Math.ceil(r*o/8),p);var m=yf(s,{level:c});return Gt.API.__addimage__.arrayBufferToBinaryString(m)}function sy(s){var a=Array.apply([],s);return a.unshift(0),a}function yp(s,a){var r=s.length,o=[];o[0]=1;for(var d=0;d<r;d+=1){var c=s[d-a]||0;o[d+1]=s[d]-c+256&255}return o}function vp(s,a,r){var o=s.length,d=[];d[0]=2;for(var c=0;c<o;c+=1){var p=r&&r[c]||0;d[c+1]=s[c]-p+256&255}return d}function bp(s,a,r){var o=s.length,d=[];d[0]=3;for(var c=0;c<o;c+=1){var p=s[c-a]||0,m=r&&r[c]||0;d[c+1]=s[c]+256-(p+m>>>1)&255}return d}function wp(s,a,r){var o=s.length,d=[];d[0]=4;for(var c=0;c<o;c+=1){var p=iy(s[c-a]||0,r&&r[c]||0,r&&r[c-a]||0);d[c+1]=s[c]-p+256&255}return d}function iy(s,a,r){if(s===a&&a===r)return s;var o=Math.abs(a-r),d=Math.abs(s-r),c=Math.abs(s+a-r-r);return o<=d&&o<=c?s:d<=c?a:r}function oy(s){var a=s.map(function(r){return r.reduce(function(o,d){return o+Math.abs(d)},0)});return a.indexOf(Math.min.apply(null,a))}function cf(s,a,r){var o=a*r,d=Math.floor(o/8),c=16-(o-8*d+r),p=(1<<r)-1;return Pg(s,d)>>c&p}function jp(s,a,r,o){var d=r*o,c=Math.floor(d/8),p=16-(d-8*c+o),m=(1<<o)-1,g=(a&m)<<p;(function(v,j,A){if(j+1<v.byteLength)v.setUint16(j,A,!1);else{var R=A>>8&255;v.setUint8(j,R)}})(s,c,Pg(s,c)&~(m<<p)&65535|g)}function Pg(s,a){return a+1<s.byteLength?s.getUint16(a,!1):s.getUint8(a)<<8}function ly(s){var a=0;if(s[a++]!==71||s[a++]!==73||s[a++]!==70||s[a++]!==56||(s[a++]+1&253)!=56||s[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[a++]|s[a++]<<8,o=s[a++]|s[a++]<<8,d=s[a++],c=d>>7,p=1<<1+(7&d);s[a++],s[a++];var m=null,g=null;c&&(m=a,g=p,a+=3*p);var v=!0,j=[],A=0,R=null,w=0,$=null;for(this.width=r,this.height=o;v&&a<s.length;)switch(s[a++]){case 33:switch(s[a++]){case 255:if(s[a]!==11||s[a+1]==78&&s[a+2]==69&&s[a+3]==84&&s[a+4]==83&&s[a+5]==67&&s[a+6]==65&&s[a+7]==80&&s[a+8]==69&&s[a+9]==50&&s[a+10]==46&&s[a+11]==48&&s[a+12]==3&&s[a+13]==1&&s[a+16]==0)a+=14,$=s[a++]|s[a++]<<8,a++;else for(a+=12;;){if(!((z=s[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}break;case 249:if(s[a++]!==4||s[a+4]!==0)throw new Error("Invalid graphics extension block.");var F=s[a++];A=s[a++]|s[a++]<<8,R=s[a++],1&F||(R=null),w=F>>2&7,a++;break;case 254:for(;;){if(!((z=s[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}break;default:throw new Error("Unknown graphic control label: 0x"+s[a-1].toString(16))}break;case 44:var D=s[a++]|s[a++]<<8,_=s[a++]|s[a++]<<8,Y=s[a++]|s[a++]<<8,ee=s[a++]|s[a++]<<8,G=s[a++],fe=G>>6&1,he=1<<1+(7&G),Be=m,ge=g,te=!1;G>>7&&(te=!0,Be=a,ge=he,a+=3*he);var ye=a;for(a++;;){var z;if(!((z=s[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}j.push({x:D,y:_,width:Y,height:ee,has_local_palette:te,palette_offset:Be,palette_size:ge,data_offset:ye,data_length:a-ye,transparent_index:R,interlaced:!!fe,delay:A,disposal:w});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+s[a-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return $},this.frameInfo=function(H){if(H<0||H>=j.length)throw new Error("Frame index out of range.");return j[H]},this.decodeAndBlitFrameBGRA=function(H,de){var ie=this.frameInfo(H),ke=ie.width*ie.height,Me=new Uint8Array(ke);Np(s,ie.data_offset,Me,ke);var Ee=ie.palette_offset,me=ie.transparent_index;me===null&&(me=256);var Ie=ie.width,Ue=r-Ie,se=Ie,C=4*(ie.y*r+ie.x),K=4*((ie.y+ie.height)*r+ie.x),Z=C,ce=4*Ue;ie.interlaced===!0&&(ce+=4*r*7);for(var oe=8,je=0,Fe=Me.length;je<Fe;++je){var Oe=Me[je];if(se===0&&(se=Ie,(Z+=ce)>=K&&(ce=4*Ue+4*r*(oe-1),Z=C+(Ie+Ue)*(oe<<1),oe>>=1)),Oe===me)Z+=4;else{var Ye=s[Ee+3*Oe],Te=s[Ee+3*Oe+1],Qe=s[Ee+3*Oe+2];de[Z++]=Qe,de[Z++]=Te,de[Z++]=Ye,de[Z++]=255}--se}},this.decodeAndBlitFrameRGBA=function(H,de){var ie=this.frameInfo(H),ke=ie.width*ie.height,Me=new Uint8Array(ke);Np(s,ie.data_offset,Me,ke);var Ee=ie.palette_offset,me=ie.transparent_index;me===null&&(me=256);var Ie=ie.width,Ue=r-Ie,se=Ie,C=4*(ie.y*r+ie.x),K=4*((ie.y+ie.height)*r+ie.x),Z=C,ce=4*Ue;ie.interlaced===!0&&(ce+=4*r*7);for(var oe=8,je=0,Fe=Me.length;je<Fe;++je){var Oe=Me[je];if(se===0&&(se=Ie,(Z+=ce)>=K&&(ce=4*Ue+4*r*(oe-1),Z=C+(Ie+Ue)*(oe<<1),oe>>=1)),Oe===me)Z+=4;else{var Ye=s[Ee+3*Oe],Te=s[Ee+3*Oe+1],Qe=s[Ee+3*Oe+2];de[Z++]=Ye,de[Z++]=Te,de[Z++]=Qe,de[Z++]=255}--se}}}function Np(s,a,r,o){for(var d=s[a++],c=1<<d,p=c+1,m=p+1,g=d+1,v=(1<<g)-1,j=0,A=0,R=0,w=s[a++],$=new Int32Array(4096),F=null;;){for(;j<16&&w!==0;)A|=s[a++]<<j,j+=8,w===1?w=s[a++]:--w;if(j<g)break;var D=A&v;if(A>>=g,j-=g,D!==c){if(D===p)break;for(var _=D<m?D:F,Y=0,ee=_;ee>c;)ee=$[ee]>>8,++Y;var G=ee;if(R+Y+(_!==D?1:0)>o)return void pr.log("Warning, gif stream longer than expected.");r[R++]=G;var fe=R+=Y;for(_!==D&&(r[R++]=G),ee=_;Y--;)ee=$[ee],r[--fe]=255&ee,ee>>=8;F!==null&&m<4096&&($[m++]=F<<8|G,m>=v+1&&g<12&&(++g,v=v<<1|1)),F=D}else m=p+1,v=(1<<(g=d+1))-1,F=null}return R!==o&&pr.log("Warning, gif stream shorter than expected."),r}function df(s){var a,r,o,d,c,p=Math.floor,m=new Array(64),g=new Array(64),v=new Array(64),j=new Array(64),A=new Array(65535),R=new Array(65535),w=new Array(64),$=new Array(64),F=[],D=0,_=7,Y=new Array(64),ee=new Array(64),G=new Array(64),fe=new Array(256),he=new Array(2048),Be=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ge=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],ye=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],de=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ke=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Me(C,K){for(var Z=0,ce=0,oe=new Array,je=1;je<=16;je++){for(var Fe=1;Fe<=C[je];Fe++)oe[K[ce]]=[],oe[K[ce]][0]=Z,oe[K[ce]][1]=je,ce++,Z++;Z*=2}return oe}function Ee(C){for(var K=C[0],Z=C[1]-1;Z>=0;)K&1<<Z&&(D|=1<<_),Z--,--_<0&&(D==255?(me(255),me(0)):me(D),_=7,D=0)}function me(C){F.push(C)}function Ie(C){me(C>>8&255),me(255&C)}function Ue(C,K,Z,ce,oe){for(var je,Fe=oe[0],Oe=oe[240],Ye=(function(Ve,Mt){var yt,vt,Pt,pn,sn,ht,Ot,Ce,qe,nt,ft=0;for(qe=0;qe<8;++qe){yt=Ve[ft],vt=Ve[ft+1],Pt=Ve[ft+2],pn=Ve[ft+3],sn=Ve[ft+4],ht=Ve[ft+5],Ot=Ve[ft+6];var on=yt+(Ce=Ve[ft+7]),Se=yt-Ce,xe=vt+Ot,We=vt-Ot,ct=Pt+ht,st=Pt-ht,un=pn+sn,Ht=pn-sn,Qt=on+un,Sn=on-un,Wt=xe+ct,le=xe-ct;Ve[ft]=Qt+Wt,Ve[ft+4]=Qt-Wt;var wt=.707106781*(le+Sn);Ve[ft+2]=Sn+wt,Ve[ft+6]=Sn-wt;var Qr=.382683433*((Qt=Ht+st)-(le=We+Se)),Xn=.5411961*Qt+Qr,Xr=1.306562965*le+Qr,gn=.707106781*(Wt=st+We),Ft=Se+gn,rn=Se-gn;Ve[ft+5]=rn+Xn,Ve[ft+3]=rn-Xn,Ve[ft+1]=Ft+Xr,Ve[ft+7]=Ft-Xr,ft+=8}for(ft=0,qe=0;qe<8;++qe){yt=Ve[ft],vt=Ve[ft+8],Pt=Ve[ft+16],pn=Ve[ft+24],sn=Ve[ft+32],ht=Ve[ft+40],Ot=Ve[ft+48];var tr=yt+(Ce=Ve[ft+56]),Zt=yt-Ce,nr=vt+Ot,Gn=vt-Ot,gr=Pt+ht,Sr=Pt-ht,ei=pn+sn,$a=pn-sn,ti=tr+ei,bi=tr-ei,qr=nr+gr,St=nr-gr;Ve[ft]=ti+qr,Ve[ft+32]=ti-qr;var rr=.707106781*(St+bi);Ve[ft+16]=bi+rr,Ve[ft+48]=bi-rr;var wi=.382683433*((ti=$a+Sr)-(St=Gn+Zt)),vs=.5411961*ti+wi,Hn=1.306562965*St+wi,xr=.707106781*(qr=Sr+Gn),ur=Zt+xr,$r=Zt-xr;Ve[ft+40]=$r+vs,Ve[ft+24]=$r-vs,Ve[ft+8]=ur+Hn,Ve[ft+56]=ur-Hn,ft++}for(qe=0;qe<64;++qe)nt=Ve[qe]*Mt[qe],w[qe]=nt>0?nt+.5|0:nt-.5|0;return w})(C,K),Te=0;Te<64;++Te)$[Be[Te]]=Ye[Te];var Qe=$[0]-Z;Z=$[0],Qe==0?Ee(ce[0]):(Ee(ce[R[je=32767+Qe]]),Ee(A[je]));for(var ot=63;ot>0&&$[ot]==0;)ot--;if(ot==0)return Ee(Fe),Z;for(var bt,X=1;X<=ot;){for(var et=X;$[X]==0&&X<=ot;)++X;var xt=X-et;if(xt>=16){bt=xt>>4;for(var Lt=1;Lt<=bt;++Lt)Ee(Oe);xt&=15}je=32767+$[X],Ee(oe[(xt<<4)+R[je]]),Ee(A[je]),X++}return ot!=63&&Ee(Fe),Z}function se(C){C=Math.min(Math.max(C,1),100),c!=C&&((function(K){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var oe=p((Z[ce]*K+50)/100);oe=Math.min(Math.max(oe,1),255),m[Be[ce]]=oe}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Fe=0;Fe<64;Fe++){var Oe=p((je[Fe]*K+50)/100);Oe=Math.min(Math.max(Oe,1),255),g[Be[Fe]]=Oe}for(var Ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Qe=0;Qe<8;Qe++)for(var ot=0;ot<8;ot++)v[Te]=1/(m[Be[Te]]*Ye[Qe]*Ye[ot]*8),j[Te]=1/(g[Be[Te]]*Ye[Qe]*Ye[ot]*8),Te++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),c=C)}this.encode=function(C,K){K&&se(K),F=new Array,D=0,_=7,Ie(65496),Ie(65504),Ie(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Ie(1),Ie(1),me(0),me(0),(function(){Ie(65499),Ie(132),me(0);for(var vt=0;vt<64;vt++)me(m[vt]);me(1);for(var Pt=0;Pt<64;Pt++)me(g[Pt])})(),(function(vt,Pt){Ie(65472),Ie(17),me(8),Ie(Pt),Ie(vt),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(C.width,C.height),(function(){Ie(65476),Ie(418),me(0);for(var vt=0;vt<16;vt++)me(ge[vt+1]);for(var Pt=0;Pt<=11;Pt++)me(te[Pt]);me(16);for(var pn=0;pn<16;pn++)me(ye[pn+1]);for(var sn=0;sn<=161;sn++)me(z[sn]);me(1);for(var ht=0;ht<16;ht++)me(H[ht+1]);for(var Ot=0;Ot<=11;Ot++)me(de[Ot]);me(17);for(var Ce=0;Ce<16;Ce++)me(ie[Ce+1]);for(var qe=0;qe<=161;qe++)me(ke[qe])})(),Ie(65498),Ie(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var Z=0,ce=0,oe=0;D=0,_=7,this.encode.displayName="_encode_";for(var je,Fe,Oe,Ye,Te,Qe,ot,bt,X,et=C.data,xt=C.width,Lt=C.height,Ve=4*xt,Mt=0;Mt<Lt;){for(je=0;je<Ve;){for(Te=Ve*Mt+je,ot=-1,bt=0,X=0;X<64;X++)Qe=Te+(bt=X>>3)*Ve+(ot=4*(7&X)),Mt+bt>=Lt&&(Qe-=Ve*(Mt+1+bt-Lt)),je+ot>=Ve&&(Qe-=je+ot-Ve+4),Fe=et[Qe++],Oe=et[Qe++],Ye=et[Qe++],Y[X]=(he[Fe]+he[Oe+256|0]+he[Ye+512|0]>>16)-128,ee[X]=(he[Fe+768|0]+he[Oe+1024|0]+he[Ye+1280|0]>>16)-128,G[X]=(he[Fe+1280|0]+he[Oe+1536|0]+he[Ye+1792|0]>>16)-128;Z=Ue(Y,v,Z,a,o),ce=Ue(ee,j,ce,r,d),oe=Ue(G,j,oe,r,d),je+=32}Mt+=8}if(_>=0){var yt=[];yt[1]=_+1,yt[0]=(1<<_+1)-1,Ee(yt)}return Ie(65497),new Uint8Array(F)},s=s||50,(function(){for(var C=String.fromCharCode,K=0;K<256;K++)fe[K]=C(K)})(),a=Me(ge,te),r=Me(H,de),o=Me(ye,z),d=Me(ie,ke),(function(){for(var C=1,K=2,Z=1;Z<=15;Z++){for(var ce=C;ce<K;ce++)R[32767+ce]=Z,A[32767+ce]=[],A[32767+ce][1]=Z,A[32767+ce][0]=ce;for(var oe=-(K-1);oe<=-C;oe++)R[32767+oe]=Z,A[32767+oe]=[],A[32767+oe][1]=Z,A[32767+oe][0]=K-1+oe;C<<=1,K<<=1}})(),(function(){for(var C=0;C<256;C++)he[C]=19595*C,he[C+256|0]=38470*C,he[C+512|0]=7471*C+32768,he[C+768|0]=-11059*C,he[C+1024|0]=-21709*C,he[C+1280|0]=32768*C+8421375,he[C+1536|0]=-27439*C,he[C+1792|0]=-5329*C})(),se(s)}function vo(s,a){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sp(s){function a(te){if(!te)throw Error("assert :P")}function r(te,ye,z){for(var H=0;4>H;H++)if(te[ye+H]!=z.charCodeAt(H))return!0;return!1}function o(te,ye,z,H,de){for(var ie=0;ie<de;ie++)te[ye+ie]=z[H+ie]}function d(te,ye,z,H){for(var de=0;de<H;de++)te[ye+de]=z}function c(te){return new Int32Array(te)}function p(te,ye){for(var z=[],H=0;H<te;H++)z.push(new ye);return z}function m(te,ye){var z=[];return(function H(de,ie,ke){for(var Me=ke[ie],Ee=0;Ee<Me&&(de.push(ke.length>ie+1?[]:new ye),!(ke.length<ie+1));Ee++)H(de[Ee],ie+1,ke)})(z,0,te),z}var g=function(){var te=this;function ye(u,h){for(var b=1<<h-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function z(u,h,b,k,E){a(!(k%b));do u[h+(k-=b)]=E;while(0<k)}function H(u,h,b,k,E){if(a(2328>=E),512>=E)var O=c(512);else if((O=c(E))==null)return 0;return(function(B,V,J,ae,we,_e){var re,Ae,Re=V,Q=1<<J,De=c(16),Ge=c(16);for(a(we!=0),a(ae!=null),a(B!=null),a(0<J),Ae=0;Ae<we;++Ae){if(15<ae[Ae])return 0;++De[ae[Ae]]}if(De[0]==we)return 0;for(Ge[1]=0,re=1;15>re;++re){if(De[re]>1<<re)return 0;Ge[re+1]=Ge[re]+De[re]}for(Ae=0;Ae<we;++Ae)re=ae[Ae],0<ae[Ae]&&(_e[Ge[re]++]=Ae);if(Ge[15]==1)return(ae=new de).g=0,ae.value=_e[0],z(B,Re,1,Q,ae),Q;var Ke,tt=-1,rt=Q-1,zt=0,kt=1,an=1,It=1<<J;for(Ae=0,re=1,we=2;re<=J;++re,we<<=1){if(kt+=an<<=1,0>(an-=De[re]))return 0;for(;0<De[re];--De[re])(ae=new de).g=re,ae.value=_e[Ae++],z(B,Re+zt,we,It,ae),zt=ye(zt,re)}for(re=J+1,we=2;15>=re;++re,we<<=1){if(kt+=an<<=1,0>(an-=De[re]))return 0;for(;0<De[re];--De[re]){if(ae=new de,(zt&rt)!=tt){for(Re+=It,Ke=1<<(tt=re)-J;15>tt&&!(0>=(Ke-=De[tt]));)++tt,Ke<<=1;Q+=It=1<<(Ke=tt-J),B[V+(tt=zt&rt)].g=Ke+J,B[V+tt].value=Re-V-tt}ae.g=re-J,ae.value=_e[Ae++],z(B,Re+(zt>>J),we,It,ae),zt=ye(zt,re)}}return kt!=2*Ge[15]-1?0:Q})(u,h,b,k,E,O)}function de(){this.value=this.g=0}function ie(){this.value=this.g=0}function ke(){this.G=p(5,de),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(Fa,ie)}function Me(u,h,b,k){a(u!=null),a(h!=null),a(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=h,u.pa=b,u.Jd=h,u.Yc=b+k,u.Zc=4<=k?b+k-4+1:b,Fe(u)}function Ee(u,h){for(var b=0;0<h--;)b|=Ye(u,128)<<h;return b}function me(u,h){var b=Ee(u,h);return Oe(u)?-b:b}function Ie(u,h,b,k){var E,O=0;for(a(u!=null),a(h!=null),a(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),E=0;E<k;++E)O+=h[b+E]<<8*E;u.Ra=O,u.bb=k,u.oa=h,u.pa=b}function Ue(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ni-8>>>0,++u.bb,u.u-=8;ce(u)&&(u.h=1,u.u=0)}function se(u,h){if(a(0<=h),!u.h&&h<=$n){var b=Z(u)&Ra[h];return u.u+=h,Ue(u),b}return u.h=1,u.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(u){return u.Ra>>>(u.u&Ni-1)>>>0}function ce(u){return a(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ni}function oe(u,h){u.u=h,u.h=ce(u)}function je(u){u.u>=oi&&(a(u.u>=oi),Ue(u))}function Fe(u){a(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(a(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function Oe(u){return Ee(u,1)}function Ye(u,h){var b=u.Ca;0>u.b&&Fe(u);var k=u.b,E=b*h>>>8,O=(u.I>>>k>E)+0;for(O?(b-=E,u.I-=E+1<<k>>>0):b=E+1,k=b,E=0;256<=k;)E+=8,k>>=8;return k=7^E+As[k],u.b-=k,u.Ca=(b<<k)-1,O}function Te(u,h,b){u[h+0]=b>>24&255,u[h+1]=b>>16&255,u[h+2]=b>>8&255,u[h+3]=255&b}function Qe(u,h){return u[h+0]|u[h+1]<<8}function ot(u,h){return Qe(u,h)|u[h+2]<<16}function bt(u,h){return Qe(u,h)|Qe(u,h+2)<<16}function X(u,h){var b=1<<h;return a(u!=null),a(0<h),u.X=c(b),u.X==null?0:(u.Mb=32-h,u.Xa=h,1)}function et(u,h){a(u!=null),a(h!=null),a(u.Xa==h.Xa),o(h.X,0,u.X,0,1<<h.Xa)}function xt(){this.X=[],this.Xa=this.Mb=0}function Lt(u,h,b,k){a(b!=null),a(k!=null);var E=b[0],O=k[0];return E==0&&(E=(u*O+h/2)/h),O==0&&(O=(h*E+u/2)/u),0>=E||0>=O?0:(b[0]=E,k[0]=O,1)}function Ve(u,h){return u+(1<<h)-1>>>h}function Mt(u,h){return((4278255360&u)+(4278255360&h)>>>0&4278255360)+((16711935&u)+(16711935&h)>>>0&16711935)>>>0}function yt(u,h){te[h]=function(b,k,E,O,B,V,J){var ae;for(ae=0;ae<B;++ae){var we=te[u](V[J+ae-1],E,O+ae);V[J+ae]=Mt(b[k+ae],we)}}}function vt(){this.ud=this.hd=this.jd=0}function Pt(u,h){return((4278124286&(u^h))>>>1)+(u&h)>>>0}function pn(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function sn(u,h){return pn(u+(u-h+.5>>1))}function ht(u,h,b){return Math.abs(h-b)-Math.abs(u-b)}function Ot(u,h,b,k,E,O,B){for(k=O[B-1],b=0;b<E;++b)O[B+b]=k=Mt(u[h+b],k)}function Ce(u,h,b,k,E){var O;for(O=0;O<b;++O){var B=u[h+O],V=B>>8&255,J=16711935&(J=(J=16711935&B)+((V<<16)+V));k[E+O]=(4278255360&B)+J>>>0}}function qe(u,h){h.jd=255&u,h.hd=u>>8&255,h.ud=u>>16&255}function nt(u,h,b,k,E,O){var B;for(B=0;B<k;++B){var V=h[b+B],J=V>>>8,ae=V,we=255&(we=(we=V>>>16)+((u.jd<<24>>24)*(J<<24>>24)>>>5));ae=255&(ae=(ae+=(u.hd<<24>>24)*(J<<24>>24)>>>5)+((u.ud<<24>>24)*(we<<24>>24)>>>5)),E[O+B]=(4278255360&V)+(we<<16)+ae}}function ft(u,h,b,k,E){te[h]=function(O,B,V,J,ae,we,_e,re,Ae){for(J=_e;J<re;++J)for(_e=0;_e<Ae;++_e)ae[we++]=E(V[k(O[B++])])},te[u]=function(O,B,V,J,ae,we,_e){var re=8>>O.b,Ae=O.Ea,Re=O.K[0],Q=O.w;if(8>re)for(O=(1<<O.b)-1,Q=(1<<re)-1;B<V;++B){var De,Ge=0;for(De=0;De<Ae;++De)De&O||(Ge=k(J[ae++])),we[_e++]=E(Re[Ge&Q]),Ge>>=re}else te["VP8LMapColor"+b](J,ae,Re,Q,we,_e,B,V,Ae)}}function on(u,h,b,k,E){for(b=h+b;h<b;){var O=u[h++];k[E++]=O>>16&255,k[E++]=O>>8&255,k[E++]=255&O}}function Se(u,h,b,k,E){for(b=h+b;h<b;){var O=u[h++];k[E++]=O>>16&255,k[E++]=O>>8&255,k[E++]=255&O,k[E++]=O>>24&255}}function xe(u,h,b,k,E){for(b=h+b;h<b;){var O=(B=u[h++])>>16&240|B>>12&15,B=240&B|B>>28&15;k[E++]=O,k[E++]=B}}function We(u,h,b,k,E){for(b=h+b;h<b;){var O=(B=u[h++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;k[E++]=O,k[E++]=B}}function ct(u,h,b,k,E){for(b=h+b;h<b;){var O=u[h++];k[E++]=255&O,k[E++]=O>>8&255,k[E++]=O>>16&255}}function st(u,h,b,k,E,O){if(O==0)for(b=h+b;h<b;)Te(k,((O=u[h++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),E+=32;else o(k,E,u,h,b)}function un(u,h){te[h][0]=te[u+"0"],te[h][1]=te[u+"1"],te[h][2]=te[u+"2"],te[h][3]=te[u+"3"],te[h][4]=te[u+"4"],te[h][5]=te[u+"5"],te[h][6]=te[u+"6"],te[h][7]=te[u+"7"],te[h][8]=te[u+"8"],te[h][9]=te[u+"9"],te[h][10]=te[u+"10"],te[h][11]=te[u+"11"],te[h][12]=te[u+"12"],te[h][13]=te[u+"13"],te[h][14]=te[u+"0"],te[h][15]=te[u+"0"]}function Ht(u){return u==jt||u==Mn||u==oo||u==Wi}function Qt(){this.eb=[],this.size=this.A=this.fb=0}function Sn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qt,this.f.kb=new Sn,this.sd=null}function le(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qr(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Xn(u,h){var b=u.T,k=h.ba.f.RGBA,E=k.eb,O=k.fb+u.ka*k.A,B=ts[h.ba.S],V=u.y,J=u.O,ae=u.f,we=u.N,_e=u.ea,re=u.W,Ae=h.cc,Re=h.dc,Q=h.Mc,De=h.Nc,Ge=u.ka,Ke=u.ka+u.T,tt=u.U,rt=tt+1>>1;for(Ge==0?B(V,J,null,null,ae,we,_e,re,ae,we,_e,re,E,O,null,null,tt):(B(h.ec,h.fc,V,J,Ae,Re,Q,De,ae,we,_e,re,E,O-k.A,E,O,tt),++b);Ge+2<Ke;Ge+=2)Ae=ae,Re=we,Q=_e,De=re,we+=u.Rc,re+=u.Rc,O+=2*k.A,B(V,(J+=2*u.fa)-u.fa,V,J,Ae,Re,Q,De,ae,we,_e,re,E,O-k.A,E,O,tt);return J+=u.fa,u.j+Ke<u.o?(o(h.ec,h.fc,V,J,tt),o(h.cc,h.dc,ae,we,rt),o(h.Mc,h.Nc,_e,re,rt),b--):1&Ke||B(V,J,null,null,ae,we,_e,re,ae,we,_e,re,E,O+k.A,null,null,tt),b}function Xr(u,h,b){var k=u.F,E=[u.J];if(k!=null){var O=u.U,B=h.ba.S,V=B==li||B==oo;h=h.ba.f.RGBA;var J=[0],ae=u.ka;J[0]=u.T,u.Kb&&(ae==0?--J[0]:(--ae,E[0]-=u.width),u.j+u.ka+u.T==u.o&&(J[0]=u.o-u.j-ae));var we=h.eb;ae=h.fb+ae*h.A,u=Gr(k,E[0],u.width,O,J,we,ae+(V?0:3),h.A),a(b==J),u&&Ht(B)&&Pr(we,ae,V,O,J,h.A)}return 0}function gn(u){var h=u.ma,b=h.ba.S,k=11>b,E=b==ka||b==al||b==li||b==En||b==12||Ht(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!to(h.Oa,u,E?11:12))return 0;if(E&&Ht(b)&&ai(),u.da)alert("todo:use_scaling");else{if(k){if(h.Ib=Qr,u.Kb){if(b=u.U+1>>1,h.memory=c(u.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+u.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=Xn,ai()}}else alert("todo:EmitYUV");E&&(h.Jb=Xr,k&&Vr())}if(k&&!pa){for(u=0;256>u;++u)ns[u]=89858*(u-128)+Js>>Ln,rs[u]=-22014*(u-128)+Js,uo[u]=-45773*(u-128),hi[u]=113618*(u-128)+Js>>Ln;for(u=Un;u<Wn;++u)h=76283*(u-16)+Js>>Ln,ll[u-Un]=Fr(h,255),Xl[u-Un]=Fr(h+8>>4,15);pa=1}return 1}function Ft(u){var h=u.ma,b=u.U,k=u.T;return a(!(1&u.ka)),0>=b||0>=k?0:(b=h.Ib(u,h),h.Jb!=null&&h.Jb(u,h,b),h.Dc+=b,1)}function rn(u){u.ma.memory=null}function tr(u,h,b,k){return se(u,8)!=47?0:(h[0]=se(u,14)+1,b[0]=se(u,14)+1,k[0]=se(u,1),se(u,3)!=0?0:!u.h)}function Zt(u,h){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+se(h,b)+1}function nr(u,h){return 120<h?h-120:1<=(b=((b=Kl[h-1])>>4)*u+(8-(15&b)))?b:1;var b}function Gn(u,h,b){var k=Z(b),E=u[h+=255&k].g-8;return 0<E&&(oe(b,b.u+8),k=Z(b),h+=u[h].value,h+=k&(1<<E)-1),oe(b,b.u+u[h].g),u[h].value}function gr(u,h,b){return b.g+=u.g,b.value+=u.value<<h>>>0,a(8>=b.g),u.g}function Sr(u,h,b){var k=u.xc;return a((h=k==0?0:u.vc[u.md*(b>>k)+(h>>k)])<u.Wb),u.Ya[h]}function ei(u,h,b,k){var E=u.ab,O=u.c*h,B=u.C;h=B+h;var V=b,J=k;for(k=u.Ta,b=u.Ua;0<E--;){var ae=u.gc[E],we=B,_e=h,re=V,Ae=J,Re=(J=k,V=b,ae.Ea);switch(a(we<_e),a(_e<=ae.nc),ae.hc){case 2:Cn(re,Ae,(_e-we)*Re,J,V);break;case 0:var Q=we,De=_e,Ge=J,Ke=V,tt=(It=ae).Ea;Q==0&&(Si(re,Ae,null,null,1,Ge,Ke),Ot(re,Ae+1,0,0,tt-1,Ge,Ke+1),Ae+=tt,Ke+=tt,++Q);for(var rt=1<<It.b,zt=rt-1,kt=Ve(tt,It.b),an=It.K,It=It.w+(Q>>It.b)*kt;Q<De;){var bn=an,wr=It,dn=1;for(Qa(re,Ae,Ge,Ke-tt,1,Ge,Ke);dn<tt;){var At=(dn&~zt)+rt;At>tt&&(At=tt),(0,Oa[bn[wr++]>>8&15])(re,Ae+ +dn,Ge,Ke+dn-tt,At-dn,Ge,Ke+dn),dn=At}Ae+=tt,Ke+=tt,++Q&zt||(It+=kt)}_e!=ae.nc&&o(J,V-Re,J,V+(_e-we-1)*Re,Re);break;case 1:for(Re=re,De=Ae,tt=(re=ae.Ea)-(Ke=re&~(Ge=(Ae=1<<ae.b)-1)),Q=Ve(re,ae.b),rt=ae.K,ae=ae.w+(we>>ae.b)*Q;we<_e;){for(zt=rt,kt=ae,an=new vt,It=De+Ke,bn=De+re;De<It;)qe(zt[kt++],an),ir(an,Re,De,Ae,J,V),De+=Ae,V+=Ae;De<bn&&(qe(zt[kt++],an),ir(an,Re,De,tt,J,V),De+=tt,V+=tt),++we&Ge||(ae+=Q)}break;case 3:if(re==J&&Ae==V&&0<ae.b){for(De=J,re=Re=V+(_e-we)*Re-(Ke=(_e-we)*Ve(ae.Ea,ae.b)),Ae=J,Ge=V,Q=[],Ke=(tt=Ke)-1;0<=Ke;--Ke)Q[Ke]=Ae[Ge+Ke];for(Ke=tt-1;0<=Ke;--Ke)De[re+Ke]=Q[Ke];Hs(ae,we,_e,J,Re,J,V)}else Hs(ae,we,_e,re,Ae,J,V)}V=k,J=b}J!=b&&o(k,b,V,J,O)}function $a(u,h){var b=u.V,k=u.Ba+u.c*u.C,E=h-u.C;if(a(h<=u.l.o),a(16>=E),0<E){var O=u.l,B=u.Ta,V=u.Ua,J=O.width;if(ei(u,E,b,k),E=V=[V],a((b=u.C)<(k=h)),a(O.v<O.va),k>O.o&&(k=O.o),b<O.j){var ae=O.j-b;b=O.j,E[0]+=ae*J}if(b>=k?b=0:(E[0]+=4*O.v,O.ka=b-O.j,O.U=O.va-O.v,O.T=k-b,b=1),b){if(V=V[0],11>(b=u.ca).S){var we=b.f.RGBA,_e=(k=b.S,E=O.U,O=O.T,ae=we.eb,we.A),re=O;for(we=we.fb+u.Ma*we.A;0<re--;){var Ae=B,Re=V,Q=E,De=ae,Ge=we;switch(k){case Cs:no(Ae,Re,Q,De,Ge);break;case ka:Yr(Ae,Re,Q,De,Ge);break;case jt:Yr(Ae,Re,Q,De,Ge),Pr(De,Ge,0,Q,1,0);break;case Ci:ro(Ae,Re,Q,De,Ge);break;case al:st(Ae,Re,Q,De,Ge,1);break;case Mn:st(Ae,Re,Q,De,Ge,1),Pr(De,Ge,0,Q,1,0);break;case li:st(Ae,Re,Q,De,Ge,0);break;case oo:st(Ae,Re,Q,De,Ge,0),Pr(De,Ge,1,Q,1,0);break;case En:Ui(Ae,Re,Q,De,Ge);break;case Wi:Ui(Ae,Re,Q,De,Ge),$o(De,Ge,Q,1,0);break;case io:na(Ae,Re,Q,De,Ge);break;default:a(0)}V+=J,we+=_e}u.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");a(u.Ma<=b.height)}}u.C=h,a(u.C<=u.i)}function ti(u){var h;if(0<u.ua)return 0;for(h=0;h<u.Wb;++h){var b=u.Ya[h].G,k=u.Ya[h].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function bi(u,h,b,k,E,O){if(u.Z!=0){var B=u.qd,V=u.rd;for(a(Aa[u.Z]!=null);h<b;++h)Aa[u.Z](B,V,k,E,k,E,O),B=k,V=E,E+=O;u.qd=B,u.rd=V}}function qr(u,h){var b=u.l.ma,k=b.Z==0||b.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,a(h<=u.l.o),h>k){var E=u.l.width,O=b.ca,B=b.tb+E*k,V=u.V,J=u.Ba+u.c*k,ae=u.gc;a(u.ab==1),a(ae[0].hc==3),Ta(ae[0],k,h,V,J,O,B),bi(b,k,h,O,B,E)}u.C=u.Ma=h}function St(u,h,b,k,E,O,B){var V=u.$/k,J=u.$%k,ae=u.m,we=u.s,_e=b+u.$,re=_e;E=b+k*E;var Ae=b+k*O,Re=280+we.ua,Q=u.Pb?V:16777216,De=0<we.ua?we.Wa:null,Ge=we.wc,Ke=_e<Ae?Sr(we,J,V):null;a(u.C<O),a(Ae<=E);var tt=!1;e:for(;;){for(;tt||_e<Ae;){var rt=0;if(V>=Q){var zt=_e-b;a((Q=u).Pb),Q.wd=Q.m,Q.xd=zt,0<Q.s.ua&&et(Q.s.Wa,Q.s.vb),Q=V+Io}if(J&Ge||(Ke=Sr(we,J,V)),a(Ke!=null),Ke.Qb&&(h[_e]=Ke.qb,tt=!0),!tt)if(je(ae),Ke.jc){rt=ae,zt=h;var kt=_e,an=Ke.pd[Z(rt)&Fa-1];a(Ke.jc),256>an.g?(oe(rt,rt.u+an.g),zt[kt]=an.value,rt=0):(oe(rt,rt.u+an.g-256),a(256<=an.value),rt=an.value),rt==0&&(tt=!0)}else rt=Gn(Ke.G[0],Ke.H[0],ae);if(ae.h)break;if(tt||256>rt){if(!tt)if(Ke.nd)h[_e]=(Ke.qb|rt<<8)>>>0;else{if(je(ae),tt=Gn(Ke.G[1],Ke.H[1],ae),je(ae),zt=Gn(Ke.G[2],Ke.H[2],ae),kt=Gn(Ke.G[3],Ke.H[3],ae),ae.h)break;h[_e]=(kt<<24|tt<<16|rt<<8|zt)>>>0}if(tt=!1,++_e,++J>=k&&(J=0,++V,B!=null&&V<=O&&!(V%16)&&B(u,V),De!=null))for(;re<_e;)rt=h[re++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt}else if(280>rt){if(rt=Zt(rt-256,ae),zt=Gn(Ke.G[4],Ke.H[4],ae),je(ae),zt=nr(k,zt=Zt(zt,ae)),ae.h)break;if(_e-b<zt||E-_e<rt)break e;for(kt=0;kt<rt;++kt)h[_e+kt]=h[_e+kt-zt];for(_e+=rt,J+=rt;J>=k;)J-=k,++V,B!=null&&V<=O&&!(V%16)&&B(u,V);if(a(_e<=E),J&Ge&&(Ke=Sr(we,J,V)),De!=null)for(;re<_e;)rt=h[re++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt}else{if(!(rt<Re))break e;for(tt=rt-280,a(De!=null);re<_e;)rt=h[re++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt;rt=_e,a(!(tt>>>(zt=De).Xa)),h[rt]=zt.X[tt],tt=!0}tt||a(ae.h==ce(ae))}if(u.Pb&&ae.h&&_e<E)a(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&et(u.s.vb,u.s.Wa);else{if(ae.h)break e;B?.(u,V>O?O:V),u.a=0,u.$=_e-b}return 1}return u.a=3,0}function rr(u){a(u!=null),u.vc=null,u.yc=null,u.Ya=null;var h=u.Wa;h!=null&&(h.X=null),u.vb=null,a(u!=null)}function wi(){var u=new Xt;return u==null?null:(u.a=0,u.xb=Mo,un("Predictor","VP8LPredictors"),un("Predictor","VP8LPredictors_C"),un("PredictorAdd","VP8LPredictorsAdd"),un("PredictorAdd","VP8LPredictorsAdd_C"),Cn=Ce,ir=nt,no=on,Yr=Se,Ui=xe,na=We,ro=ct,te.VP8LMapColor32b=Hr,te.VP8LMapColor8b=Pn,u)}function vs(u,h,b,k,E){var O=1,B=[u],V=[h],J=k.m,ae=k.s,we=null,_e=0;e:for(;;){if(b)for(;O&&se(J,1);){var re=B,Ae=V,Re=k,Q=1,De=Re.m,Ge=Re.gc[Re.ab],Ke=se(De,2);if(Re.Oc&1<<Ke)O=0;else{switch(Re.Oc|=1<<Ke,Ge.hc=Ke,Ge.Ea=re[0],Ge.nc=Ae[0],Ge.K=[null],++Re.ab,a(4>=Re.ab),Ke){case 0:case 1:Ge.b=se(De,3)+2,Q=vs(Ve(Ge.Ea,Ge.b),Ve(Ge.nc,Ge.b),0,Re,Ge.K),Ge.K=Ge.K[0];break;case 3:var tt,rt=se(De,8)+1,zt=16<rt?0:4<rt?1:2<rt?2:3;if(re[0]=Ve(Ge.Ea,zt),Ge.b=zt,tt=Q=vs(rt,1,0,Re,Ge.K)){var kt,an=rt,It=Ge,bn=1<<(8>>It.b),wr=c(bn);if(wr==null)tt=0;else{var dn=It.K[0],At=It.w;for(wr[0]=It.K[0][0],kt=1;kt<1*an;++kt)wr[kt]=Mt(dn[At+kt],wr[kt-1]);for(;kt<4*bn;++kt)wr[kt]=0;It.K[0]=null,It.K[0]=wr,tt=1}}Q=tt;break;case 2:break;default:a(0)}O=Q}}if(B=B[0],V=V[0],O&&se(J,1)&&!(O=1<=(_e=se(J,4))&&11>=_e)){k.a=3;break e}var gt;if(gt=O)t:{var _r,nn,vn,Zn=k,ra=B,Ir=V,hr=_e,zr=b,Er=Zn.m,cr=Zn.s,kn=[null],Rn=1,Qn=0,wn=il[hr];n:for(;;){if(zr&&se(Er,1)){var er=se(Er,3)+2,jr=Ve(ra,er),l=Ve(Ir,er),N=jr*l;if(!vs(jr,l,0,Zn,kn))break n;for(kn=kn[0],cr.xc=er,_r=0;_r<N;++_r){var L=kn[_r]>>8&65535;kn[_r]=L,L>=Rn&&(Rn=L+1)}}if(Er.h)break n;for(nn=0;5>nn;++nn){var P=di[nn];!nn&&0<hr&&(P+=1<<hr),Qn<P&&(Qn=P)}var I=p(Rn*wn,de),U=Rn,W=p(U,ke);if(W==null)var ve=null;else a(65536>=U),ve=W;var be=c(Qn);if(ve==null||be==null||I==null){Zn.a=1;break n}var Je=I;for(_r=vn=0;_r<Rn;++_r){var Xe=ve[_r],Nt=Xe.G,mt=Xe.H,mn=0,Kt=1,jn=0;for(nn=0;5>nn;++nn){P=di[nn],Nt[nn]=Je,mt[nn]=vn,!nn&&0<hr&&(P+=1<<hr);a:{var aa,ga=P,Do=Zn,mi=be,Dt=Je,mr=vn,Nn=0,Ba=Do.m,Ml=se(Ba,1);if(d(mi,0,0,ga),Ml){var Ec=se(Ba,1)+1,ec=se(Ba,1),tc=se(Ba,ec==0?1:8);mi[tc]=1,Ec==2&&(mi[tc=se(Ba,8)]=1);var Yi=1}else{var Nr=c(19),sa=se(Ba,4)+4;if(19<sa){Do.a=3;var Kr=0;break a}for(aa=0;aa<sa;++aa)Nr[ui[aa]]=se(Ba,3);var cl=void 0,ho=void 0,dl=Do,tu=Nr,xa=ga,nc=mi,Dl=0,Gi=dl.m,_i=8,Ks=p(128,de);r:for(;H(Ks,0,7,tu,19);){if(se(Gi,1)){var Fl=2+2*se(Gi,3);if((cl=2+se(Gi,Fl))>xa)break r}else cl=xa;for(ho=0;ho<xa&&cl--;){je(Gi);var rc=Ks[0+(127&Z(Gi))];oe(Gi,Gi.u+rc.g);var Fo=rc.value;if(16>Fo)nc[ho++]=Fo,Fo!=0&&(_i=Fo);else{var nd=Fo==16,Mc=Fo-16,rd=sl[Mc],Dc=se(Gi,ci[Mc])+rd;if(ho+Dc>xa)break r;for(var ad=nd?_i:0;0<Dc--;)nc[ho++]=ad}}Dl=1;break r}Dl||(dl.a=3),Yi=Dl}(Yi=Yi&&!Ba.h)&&(Nn=H(Dt,mr,8,mi,ga)),Yi&&Nn!=0?Kr=Nn:(Do.a=3,Kr=0)}if(Kr==0)break n;if(Kt&&_o[nn]==1&&(Kt=Je[vn].g==0),mn+=Je[vn].g,vn+=Kr,3>=nn){var ul,ac=be[0];for(ul=1;ul<P;++ul)be[ul]>ac&&(ac=be[ul]);jn+=ac}}if(Xe.nd=Kt,Xe.Qb=0,Kt&&(Xe.qb=(Nt[3][mt[3]+0].value<<24|Nt[1][mt[1]+0].value<<16|Nt[2][mt[2]+0].value)>>>0,mn==0&&256>Nt[0][mt[0]+0].value&&(Xe.Qb=1,Xe.qb+=Nt[0][mt[0]+0].value<<8)),Xe.jc=!Xe.Qb&&6>jn,Xe.jc){var Rl,Qs=Xe;for(Rl=0;Rl<Fa;++Rl){var mo=Rl,Ii=Qs.pd[mo],Ko=Qs.G[0][Qs.H[0]+mo];256<=Ko.value?(Ii.g=Ko.g+256,Ii.value=Ko.value):(Ii.g=0,Ii.value=0,mo>>=gr(Ko,8,Ii),mo>>=gr(Qs.G[1][Qs.H[1]+mo],16,Ii),mo>>=gr(Qs.G[2][Qs.H[2]+mo],0,Ii),gr(Qs.G[3][Qs.H[3]+mo],24,Ii))}}}cr.vc=kn,cr.Wb=Rn,cr.Ya=ve,cr.yc=I,gt=1;break t}gt=0}if(!(O=gt)){k.a=3;break e}if(0<_e){if(ae.ua=1<<_e,!X(ae.Wa,_e)){k.a=1,O=0;break e}}else ae.ua=0;var sc=k,ic=B,sd=V,oc=sc.s,lc=oc.xc;if(sc.c=ic,sc.i=sd,oc.md=Ve(ic,lc),oc.wc=lc==0?-1:(1<<lc)-1,b){k.xb=fi;break e}if((we=c(B*V))==null){k.a=1,O=0;break e}O=(O=St(k,we,0,B,V,V,null))&&!J.h;break e}return O?(E!=null?E[0]=we:(a(we==null),a(b)),k.$=0,b||rr(ae)):rr(ae),O}function Hn(u,h){var b=u.c*u.i,k=b+h+16*h;return a(u.c<=h),u.V=c(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+h,1)}function xr(u,h){var b=u.C,k=h-b,E=u.V,O=u.Ba+u.c*b;for(a(h<=u.l.o);0<k;){var B=16<k?16:k,V=u.l.ma,J=u.l.width,ae=J*B,we=V.ca,_e=V.tb+J*b,re=u.Ta,Ae=u.Ua;ei(u,B,E,O),Ai(re,Ae,we,_e,ae),bi(V,b,b+B,we,_e,J),k-=B,E+=B*u.c,b+=B}a(b==h),u.C=u.Ma=h}function ur(){this.ub=this.yd=this.td=this.Rb=0}function $r(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Cl(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Tn(){this.Yb=(function(){var u=[];return(function h(b,k,E){for(var O=E[k],B=0;B<O&&(b.push(E.length>k+1?[]:0),!(E.length<k+1));B++)h(b[B],k+1,E)})(u,0,[3,11]),u})()}function ut(){this.jb=c(3),this.Wc=m([4,8],Tn),this.Xc=m([4,17],Tn)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function Zr(){this.ld=this.La=this.dd=this.tc=0}function Pa(){this.Na=this.la=0}function Fs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function os(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ls(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zr),this.Y=0,this.ya=Array(new os),this.aa=0,this.l=new bs}function La(){this.y=c(16),this.f=c(8),this.ea=c(8)}function Rs(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new ur,this.Kc=new $r,this.ed=new kr,this.Qa=new Cl,this.Ic=this.$c=this.Aa=0,this.D=new ls,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,C),this.ia=0,this.pb=p(4,Fs),this.Pa=new ut,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new La),this.Hd=0,this.rb=Array(new Pa),this.sb=0,this.wa=Array(new Zr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new os),this.L=this.aa=0,this.gd=m([4,2],Zr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fr(u,h){return 0>u?0:u>h?h:u}function bs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fi(){var u=new Rs;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,lo||(lo=Ts)),u}function ar(u,h,b){return u.a==0&&(u.a=h,u.sc=b,u.cb=0),0}function Ar(u,h,b){return 3<=b&&u[h+0]==157&&u[h+1]==1&&u[h+2]==42}function yr(u,h){if(u==null)return 0;if(u.a=0,u.sc="OK",h==null)return ar(u,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,k=h.w,E=h.ha;if(4>E)return ar(u,7,"Truncated header.");var O=b[k+0]|b[k+1]<<8|b[k+2]<<16,B=u.Od;if(B.Rb=!(1&O),B.td=O>>1&7,B.yd=O>>4&1,B.ub=O>>5,3<B.td)return ar(u,3,"Incorrect keyframe parameters.");if(!B.yd)return ar(u,4,"Frame not displayable.");k+=3,E-=3;var V=u.Kc;if(B.Rb){if(7>E)return ar(u,7,"cannot parse picture header");if(!Ar(b,k,E))return ar(u,3,"Bad code word");V.c=16383&(b[k+4]<<8|b[k+3]),V.Td=b[k+4]>>6,V.i=16383&(b[k+6]<<8|b[k+5]),V.Ud=b[k+6]>>6,k+=7,E-=7,u.za=V.c+15>>4,u.Ub=V.i+15>>4,h.width=V.c,h.height=V.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,d((O=u.Pa).jb,0,255,O.jb.length),a((O=u.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,d(O.Zb,0,0,O.Zb.length),d(O.Lb,0,0,O.Lb)}if(B.ub>E)return ar(u,7,"bad partition length");Me(O=u.m,b,k,B.ub),k+=B.ub,E-=B.ub,B.Rb&&(V.Ld=Oe(O),V.Kd=Oe(O)),V=u.Qa;var J,ae=u.Pa;if(a(O!=null),a(V!=null),V.Cb=Oe(O),V.Cb){if(V.Bb=Oe(O),Oe(O)){for(V.Fb=Oe(O),J=0;4>J;++J)V.Zb[J]=Oe(O)?me(O,7):0;for(J=0;4>J;++J)V.Lb[J]=Oe(O)?me(O,6):0}if(V.Bb)for(J=0;3>J;++J)ae.jb[J]=Oe(O)?Ee(O,8):255}else V.Bb=0;if(O.Ka)return ar(u,3,"cannot parse segment header");if((V=u.ed).zd=Oe(O),V.Tb=Ee(O,6),V.wb=Ee(O,3),V.Pc=Oe(O),V.Pc&&Oe(O)){for(ae=0;4>ae;++ae)Oe(O)&&(V.vd[ae]=me(O,6));for(ae=0;4>ae;++ae)Oe(O)&&(V.od[ae]=me(O,6))}if(u.L=V.Tb==0?0:V.zd?1:2,O.Ka)return ar(u,3,"cannot parse filter header");var we=E;if(E=J=k,k=J+we,V=we,u.Xb=(1<<Ee(u.m,2))-1,we<3*(ae=u.Xb))b=7;else{for(J+=3*ae,V-=3*ae,we=0;we<ae;++we){var _e=b[E+0]|b[E+1]<<8|b[E+2]<<16;_e>V&&(_e=V),Me(u.Jc[+we],b,J,_e),J+=_e,V-=_e,E+=3}Me(u.Jc[+ae],b,J,V),b=J<k?0:5}if(b!=0)return ar(u,b,"cannot parse partitions");for(b=Ee(J=u.m,7),E=Oe(J)?me(J,4):0,k=Oe(J)?me(J,4):0,V=Oe(J)?me(J,4):0,ae=Oe(J)?me(J,4):0,J=Oe(J)?me(J,4):0,we=u.Qa,_e=0;4>_e;++_e){if(we.Cb){var re=we.Zb[_e];we.Fb||(re+=b)}else{if(0<_e){u.pb[_e]=u.pb[0];continue}re=b}var Ae=u.pb[_e];Ae.Sc[0]=Gs[Fr(re+E,127)],Ae.Sc[1]=Yo[Fr(re+0,127)],Ae.Eb[0]=2*Gs[Fr(re+k,127)],Ae.Eb[1]=101581*Yo[Fr(re+V,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=Gs[Fr(re+ae,117)],Ae.Qc[1]=Yo[Fr(re+J,127)],Ae.lc=re+J}if(!B.Rb)return ar(u,4,"Not a key frame.");for(Oe(O),B=u.Pa,b=0;4>b;++b){for(E=0;8>E;++E)for(k=0;3>k;++k)for(V=0;11>V;++V)ae=Ye(O,ol[b][E][k][V])?Ee(O,8):_l[b][E][k][V],B.Wc[b][E].Yb[k][V]=ae;for(E=0;17>E;++E)B.Xc[b][E]=B.Wc[b][Il[E]]}return u.kc=Oe(O),u.kc&&(u.Bd=Ee(O,8)),u.cb=1}function Ts(u,h,b,k,E,O,B){var V=h[E].Yb[b];for(b=0;16>E;++E){if(!Ye(u,V[b+0]))return E;for(;!Ye(u,V[b+1]);)if(V=h[++E].Yb[0],b=0,E==16)return 16;var J=h[E+1].Yb;if(Ye(u,V[b+2])){var ae=u,we=0;if(Ye(ae,(re=V)[(_e=b)+3]))if(Ye(ae,re[_e+6])){for(V=0,_e=2*(we=Ye(ae,re[_e+8]))+(re=Ye(ae,re[_e+9+we])),we=0,re=Eo[_e];re[V];++V)we+=we+Ye(ae,re[V]);we+=3+(8<<_e)}else Ye(ae,re[_e+7])?(we=7+2*Ye(ae,165),we+=Ye(ae,145)):we=5+Ye(ae,159);else we=Ye(ae,re[_e+4])?3+Ye(ae,re[_e+5]):2;V=J[2]}else we=1,V=J[1];J=B+Ll[E],0>(ae=u).b&&Fe(ae);var _e,re=ae.b,Ae=(_e=ae.Ca>>1)-(ae.I>>re)>>31;--ae.b,ae.Ca+=Ae,ae.Ca|=1,ae.I-=(_e+1&Ae)<<re,O[J]=((we^Ae)-Ae)*k[(0<E)+0]}return 16}function la(u){var h=u.rb[u.sb-1];h.la=0,h.Na=0,d(u.zc,0,0,u.zc.length),u.ja=0}function cs(u,h,b,k,E){E=u[h+b+32*k]+(E>>3),u[h+b+32*k]=-256&E?0>E?0:255:E}function qn(u,h,b,k,E,O){cs(u,h,0,b,k+E),cs(u,h,1,b,k+O),cs(u,h,2,b,k-O),cs(u,h,3,b,k-E)}function Os(u){return(20091*u>>16)+u}function Bs(u,h,b,k){var E,O=0,B=c(16);for(E=0;4>E;++E){var V=u[h+0]+u[h+8],J=u[h+0]-u[h+8],ae=(35468*u[h+4]>>16)-Os(u[h+12]),we=Os(u[h+4])+(35468*u[h+12]>>16);B[O+0]=V+we,B[O+1]=J+ae,B[O+2]=J-ae,B[O+3]=V-we,O+=4,h++}for(E=O=0;4>E;++E)V=(u=B[O+0]+4)+B[O+8],J=u-B[O+8],ae=(35468*B[O+4]>>16)-Os(B[O+12]),cs(b,k,0,0,V+(we=Os(B[O+4])+(35468*B[O+12]>>16))),cs(b,k,1,0,J+ae),cs(b,k,2,0,J-ae),cs(b,k,3,0,V-we),O++,k+=32}function Ut(u,h,b,k){var E=u[h+0]+4,O=35468*u[h+4]>>16,B=Os(u[h+4]),V=35468*u[h+1]>>16;qn(b,k,0,E+B,u=Os(u[h+1]),V),qn(b,k,1,E+O,u,V),qn(b,k,2,E-O,u,V),qn(b,k,3,E-B,u,V)}function Rr(u,h,b,k,E){Bs(u,h,b,k),E&&Bs(u,h+16,b,k+4)}function ds(u,h,b,k){ao(u,h+0,b,k,1),ao(u,h+32,b,k+128,1)}function _a(u,h,b,k){var E;for(u=u[h+0]+4,E=0;4>E;++E)for(h=0;4>h;++h)cs(b,k,h,E,u)}function An(u,h,b,k){u[h+0]&&Dn(u,h+0,b,k),u[h+16]&&Dn(u,h+16,b,k+4),u[h+32]&&Dn(u,h+32,b,k+128),u[h+48]&&Dn(u,h+48,b,k+128+4)}function ca(u,h,b,k){var E,O=c(16);for(E=0;4>E;++E){var B=u[h+0+E]+u[h+12+E],V=u[h+4+E]+u[h+8+E],J=u[h+4+E]-u[h+8+E],ae=u[h+0+E]-u[h+12+E];O[0+E]=B+V,O[8+E]=B-V,O[4+E]=ae+J,O[12+E]=ae-J}for(E=0;4>E;++E)B=(u=O[0+4*E]+3)+O[3+4*E],V=O[1+4*E]+O[2+4*E],J=O[1+4*E]-O[2+4*E],ae=u-O[3+4*E],b[k+0]=B+V>>3,b[k+16]=ae+J>>3,b[k+32]=B-V>>3,b[k+48]=ae-J>>3,k+=64}function ws(u,h,b){var k,E=h-32,O=Jr,B=255-u[E-1];for(k=0;k<b;++k){var V,J=O,ae=B+u[h-1];for(V=0;V<b;++V)u[h+V]=J[ae+u[E+V]];h+=32}}function Wa(u,h){ws(u,h,4)}function Ia(u,h){ws(u,h,8)}function sr(u,h){ws(u,h,16)}function us(u,h){var b;for(b=0;16>b;++b)o(u,h+32*b,u,h-32,16)}function Jn(u,h){var b;for(b=16;0<b;--b)d(u,h,u[h-1],16),h+=32}function Ea(u,h,b){var k;for(k=0;16>k;++k)d(h,b+32*k,u,16)}function fs(u,h){var b,k=16;for(b=0;16>b;++b)k+=u[h-1+32*b]+u[h+b-32];Ea(k>>5,u,h)}function da(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h-1+32*b];Ea(k>>4,u,h)}function ua(u,h){var b,k=8;for(b=0;16>b;++b)k+=u[h+b-32];Ea(k>>4,u,h)}function hs(u,h){Ea(128,u,h)}function Jt(u,h,b){return u+2*h+b+2>>2}function Va(u,h){var b,k=h-32;for(k=new Uint8Array([Jt(u[k-1],u[k+0],u[k+1]),Jt(u[k+0],u[k+1],u[k+2]),Jt(u[k+1],u[k+2],u[k+3]),Jt(u[k+2],u[k+3],u[k+4])]),b=0;4>b;++b)o(u,h+32*b,k,0,k.length)}function nl(u,h){var b=u[h-1],k=u[h-1+32],E=u[h-1+64],O=u[h-1+96];Te(u,h+0,16843009*Jt(u[h-1-32],b,k)),Te(u,h+32,16843009*Jt(b,k,E)),Te(u,h+64,16843009*Jt(k,E,O)),Te(u,h+96,16843009*Jt(E,O,O))}function Ha(u,h){var b,k=4;for(b=0;4>b;++b)k+=u[h+b-32]+u[h-1+32*b];for(k>>=3,b=0;4>b;++b)d(u,h+32*b,k,4)}function Ma(u,h){var b=u[h-1+0],k=u[h-1+32],E=u[h-1+64],O=u[h-1-32],B=u[h+0-32],V=u[h+1-32],J=u[h+2-32],ae=u[h+3-32];u[h+0+96]=Jt(k,E,u[h-1+96]),u[h+1+96]=u[h+0+64]=Jt(b,k,E),u[h+2+96]=u[h+1+64]=u[h+0+32]=Jt(O,b,k),u[h+3+96]=u[h+2+64]=u[h+1+32]=u[h+0+0]=Jt(B,O,b),u[h+3+64]=u[h+2+32]=u[h+1+0]=Jt(V,B,O),u[h+3+32]=u[h+2+0]=Jt(J,V,B),u[h+3+0]=Jt(ae,J,V)}function ms(u,h){var b=u[h+1-32],k=u[h+2-32],E=u[h+3-32],O=u[h+4-32],B=u[h+5-32],V=u[h+6-32],J=u[h+7-32];u[h+0+0]=Jt(u[h+0-32],b,k),u[h+1+0]=u[h+0+32]=Jt(b,k,E),u[h+2+0]=u[h+1+32]=u[h+0+64]=Jt(k,E,O),u[h+3+0]=u[h+2+32]=u[h+1+64]=u[h+0+96]=Jt(E,O,B),u[h+3+32]=u[h+2+64]=u[h+1+96]=Jt(O,B,V),u[h+3+64]=u[h+2+96]=Jt(B,V,J),u[h+3+96]=Jt(V,J,J)}function qo(u,h){var b=u[h-1+0],k=u[h-1+32],E=u[h-1+64],O=u[h-1-32],B=u[h+0-32],V=u[h+1-32],J=u[h+2-32],ae=u[h+3-32];u[h+0+0]=u[h+1+64]=O+B+1>>1,u[h+1+0]=u[h+2+64]=B+V+1>>1,u[h+2+0]=u[h+3+64]=V+J+1>>1,u[h+3+0]=J+ae+1>>1,u[h+0+96]=Jt(E,k,b),u[h+0+64]=Jt(k,b,O),u[h+0+32]=u[h+1+96]=Jt(b,O,B),u[h+1+32]=u[h+2+96]=Jt(O,B,V),u[h+2+32]=u[h+3+96]=Jt(B,V,J),u[h+3+32]=Jt(V,J,ae)}function ni(u,h){var b=u[h+0-32],k=u[h+1-32],E=u[h+2-32],O=u[h+3-32],B=u[h+4-32],V=u[h+5-32],J=u[h+6-32],ae=u[h+7-32];u[h+0+0]=b+k+1>>1,u[h+1+0]=u[h+0+64]=k+E+1>>1,u[h+2+0]=u[h+1+64]=E+O+1>>1,u[h+3+0]=u[h+2+64]=O+B+1>>1,u[h+0+32]=Jt(b,k,E),u[h+1+32]=u[h+0+96]=Jt(k,E,O),u[h+2+32]=u[h+1+96]=Jt(E,O,B),u[h+3+32]=u[h+2+96]=Jt(O,B,V),u[h+3+64]=Jt(B,V,J),u[h+3+96]=Jt(V,J,ae)}function Ri(u,h){var b=u[h-1+0],k=u[h-1+32],E=u[h-1+64],O=u[h-1+96];u[h+0+0]=b+k+1>>1,u[h+2+0]=u[h+0+32]=k+E+1>>1,u[h+2+32]=u[h+0+64]=E+O+1>>1,u[h+1+0]=Jt(b,k,E),u[h+3+0]=u[h+1+32]=Jt(k,E,O),u[h+3+32]=u[h+1+64]=Jt(E,O,O),u[h+3+64]=u[h+2+64]=u[h+0+96]=u[h+1+96]=u[h+2+96]=u[h+3+96]=O}function Ya(u,h){var b=u[h-1+0],k=u[h-1+32],E=u[h-1+64],O=u[h-1+96],B=u[h-1-32],V=u[h+0-32],J=u[h+1-32],ae=u[h+2-32];u[h+0+0]=u[h+2+32]=b+B+1>>1,u[h+0+32]=u[h+2+64]=k+b+1>>1,u[h+0+64]=u[h+2+96]=E+k+1>>1,u[h+0+96]=O+E+1>>1,u[h+3+0]=Jt(V,J,ae),u[h+2+0]=Jt(B,V,J),u[h+1+0]=u[h+3+32]=Jt(b,B,V),u[h+1+32]=u[h+3+64]=Jt(k,b,B),u[h+1+64]=u[h+3+96]=Jt(E,k,b),u[h+1+96]=Jt(O,E,k)}function Ga(u,h){var b;for(b=0;8>b;++b)o(u,h+32*b,u,h-32,8)}function Xi(u,h){var b;for(b=0;8>b;++b)d(u,h,u[h-1],8),h+=32}function ea(u,h,b){var k;for(k=0;8>k;++k)d(h,b+32*k,u,8)}function Wr(u,h){var b,k=8;for(b=0;8>b;++b)k+=u[h+b-32]+u[h-1+32*b];ea(k>>4,u,h)}function ri(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h+b-32];ea(k>>3,u,h)}function Ti(u,h){var b,k=4;for(b=0;8>b;++b)k+=u[h-1+32*b];ea(k>>3,u,h)}function zs(u,h){ea(128,u,h)}function fa(u,h,b){var k=u[h-b],E=u[h+0],O=3*(E-k)+es[1020+u[h-2*b]-u[h+b]],B=Ys[112+(O+4>>3)];u[h-b]=Jr[255+k+Ys[112+(O+3>>3)]],u[h+0]=Jr[255+E-B]}function Da(u,h,b,k){var E=u[h+0],O=u[h+b];return gs[255+u[h-2*b]-u[h-b]]>k||gs[255+O-E]>k}function Oi(u,h,b,k){return 4*gs[255+u[h-b]-u[h+0]]+gs[255+u[h-2*b]-u[h+b]]<=k}function ta(u,h,b,k,E){var O=u[h-3*b],B=u[h-2*b],V=u[h-b],J=u[h+0],ae=u[h+b],we=u[h+2*b],_e=u[h+3*b];return 4*gs[255+V-J]+gs[255+B-ae]>k?0:gs[255+u[h-4*b]-O]<=E&&gs[255+O-B]<=E&&gs[255+B-V]<=E&&gs[255+_e-we]<=E&&gs[255+we-ae]<=E&&gs[255+ae-J]<=E}function Us(u,h,b,k){var E=2*k+1;for(k=0;16>k;++k)Oi(u,h+k,b,E)&&fa(u,h+k,b)}function fn(u,h,b,k){var E=2*k+1;for(k=0;16>k;++k)Oi(u,h+k*b,1,E)&&fa(u,h+k*b,1)}function qs(u,h,b,k){var E;for(E=3;0<E;--E)Us(u,h+=4*b,b,k)}function Zi(u,h,b,k){var E;for(E=3;0<E;--E)fn(u,h+=4,b,k)}function Ja(u,h,b,k,E,O,B,V){for(O=2*O+1;0<E--;){if(ta(u,h,b,O,B))if(Da(u,h,b,V))fa(u,h,b);else{var J=u,ae=h,we=b,_e=J[ae-2*we],re=J[ae-we],Ae=J[ae+0],Re=J[ae+we],Q=J[ae+2*we],De=27*(Ke=es[1020+3*(Ae-re)+es[1020+_e-Re]])+63>>7,Ge=18*Ke+63>>7,Ke=9*Ke+63>>7;J[ae-3*we]=Jr[255+J[ae-3*we]+Ke],J[ae-2*we]=Jr[255+_e+Ge],J[ae-we]=Jr[255+re+De],J[ae+0]=Jr[255+Ae-De],J[ae+we]=Jr[255+Re-Ge],J[ae+2*we]=Jr[255+Q-Ke]}h+=k}}function ps(u,h,b,k,E,O,B,V){for(O=2*O+1;0<E--;){if(ta(u,h,b,O,B))if(Da(u,h,b,V))fa(u,h,b);else{var J=u,ae=h,we=b,_e=J[ae-we],re=J[ae+0],Ae=J[ae+we],Re=Ys[112+(4+(Q=3*(re-_e))>>3)],Q=Ys[112+(Q+3>>3)],De=Re+1>>1;J[ae-2*we]=Jr[255+J[ae-2*we]+De],J[ae-we]=Jr[255+_e+Q],J[ae+0]=Jr[255+re-Re],J[ae+we]=Jr[255+Ae-De]}h+=k}}function ha(u,h,b,k,E,O){Ja(u,h,b,1,16,k,E,O)}function $s(u,h,b,k,E,O){Ja(u,h,1,b,16,k,E,O)}function Bi(u,h,b,k,E,O){var B;for(B=3;0<B;--B)ps(u,h+=4*b,b,1,16,k,E,O)}function x(u,h,b,k,E,O){var B;for(B=3;0<B;--B)ps(u,h+=4,1,b,16,k,E,O)}function M(u,h,b,k,E,O,B,V){Ja(u,h,E,1,8,O,B,V),Ja(b,k,E,1,8,O,B,V)}function ne(u,h,b,k,E,O,B,V){Ja(u,h,1,E,8,O,B,V),Ja(b,k,1,E,8,O,B,V)}function pe(u,h,b,k,E,O,B,V){ps(u,h+4*E,E,1,8,O,B,V),ps(b,k+4*E,E,1,8,O,B,V)}function Pe(u,h,b,k,E,O,B,V){ps(u,h+4,1,E,8,O,B,V),ps(b,k+4,1,E,8,O,B,V)}function Ze(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function at(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _t(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new xt,this.vb=new xt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ke,this.yc=new de}function Xt(){this.xb=this.a=0,this.l=new bs,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=p(4,_t),this.Oc=0}function qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xn(u,h,b,k,E,O,B){for(u=u==null?0:u[h+0],h=0;h<B;++h)E[O+h]=u+b[k+h]&255,u=E[O+h]}function Yt(u,h,b,k,E,O,B){var V;if(u==null)xn(null,null,b,k,E,O,B);else for(V=0;V<B;++V)E[O+V]=u[h+V]+b[k+V]&255}function On(u,h,b,k,E,O,B){if(u==null)xn(null,null,b,k,E,O,B);else{var V,J=u[h+0],ae=J,we=J;for(V=0;V<B;++V)ae=we+(J=u[h+V])-ae,we=b[k+V]+(-256&ae?0>ae?0:255:ae)&255,ae=J,E[O+V]=we}}function Bn(u,h,b,k){var E=h.width,O=h.o;if(a(u!=null&&h!=null),0>b||0>=k||b+k>O)return null;if(!u.Cc){if(u.ga==null){var B;if(u.ga=new qt,(B=u.ga==null)||(B=h.width*h.o,a(u.Gb.length==0),u.Gb=c(B),u.Uc=0,u.Gb==null?B=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,B=1),B=!B),!B){B=u.ga;var V=u.Fa,J=u.P,ae=u.qc,we=u.mb,_e=u.nb,re=J+1,Ae=ae-1,Re=B.l;if(a(V!=null&&we!=null&&h!=null),Aa[0]=null,Aa[1]=xn,Aa[2]=Yt,Aa[3]=On,B.ca=we,B.tb=_e,B.c=h.width,B.i=h.height,a(0<B.c&&0<B.i),1>=ae)h=0;else if(B.$a=3&V[J+0],B.Z=V[J+0]>>2&3,B.Lc=V[J+0]>>4&3,J=V[J+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||J)h=0;else if(Re.put=Ft,Re.ac=gn,Re.bc=rn,Re.ma=B,Re.width=h.width,Re.height=h.height,Re.Da=h.Da,Re.v=h.v,Re.va=h.va,Re.j=h.j,Re.o=h.o,B.$a)e:{a(B.$a==1),h=wi();t:for(;;){if(h==null){h=0;break e}if(a(B!=null),B.mc=h,h.c=B.c,h.i=B.i,h.l=B.l,h.l.ma=B,h.l.width=B.c,h.l.height=B.i,h.a=0,Ie(h.m,V,re,Ae),!vs(B.c,B.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&ti(h.s)?(B.ic=1,V=h.c*h.i,h.Ta=null,h.Ua=0,h.V=c(V),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(B.ic=0,h=Hn(h,B.c)),!h))break t;h=1;break e}B.mc=null,h=0}else h=Ae>=B.c*B.i;B=!h}if(B)return null;u.ga.Lc!=1?u.Ga=0:k=O-b}a(u.ga!=null),a(b+k<=O);e:{if(h=(V=u.ga).c,O=V.l.o,V.$a==0){if(re=u.rc,Ae=u.Vc,Re=u.Fa,J=u.P+1+b*h,ae=u.mb,we=u.nb+b*h,a(J<=u.P+u.qc),V.Z!=0)for(a(Aa[V.Z]!=null),B=0;B<k;++B)Aa[V.Z](re,Ae,Re,J,ae,we,h),re=ae,Ae=we,we+=h,J+=h;else for(B=0;B<k;++B)o(ae,we,Re,J,h),re=ae,Ae=we,we+=h,J+=h;u.rc=re,u.Vc=Ae}else{if(a(V.mc!=null),h=b+k,a((B=V.mc)!=null),a(h<=B.i),B.C>=h)h=1;else if(V.ic||Vr(),V.ic){V=B.V,re=B.Ba,Ae=B.c;var Q=B.i,De=(Re=1,J=B.$/Ae,ae=B.$%Ae,we=B.m,_e=B.s,B.$),Ge=Ae*Q,Ke=Ae*h,tt=_e.wc,rt=De<Ke?Sr(_e,ae,J):null;a(De<=Ge),a(h<=Q),a(ti(_e));t:for(;;){for(;!we.h&&De<Ke;){if(ae&tt||(rt=Sr(_e,ae,J)),a(rt!=null),je(we),256>(Q=Gn(rt.G[0],rt.H[0],we)))V[re+De]=Q,++De,++ae>=Ae&&(ae=0,++J<=h&&!(J%16)&&qr(B,J));else{if(!(280>Q)){Re=0;break t}Q=Zt(Q-256,we);var zt,kt=Gn(rt.G[4],rt.H[4],we);if(je(we),!(De>=(kt=nr(Ae,kt=Zt(kt,we)))&&Ge-De>=Q)){Re=0;break t}for(zt=0;zt<Q;++zt)V[re+De+zt]=V[re+De+zt-kt];for(De+=Q,ae+=Q;ae>=Ae;)ae-=Ae,++J<=h&&!(J%16)&&qr(B,J);De<Ke&&ae&tt&&(rt=Sr(_e,ae,J))}a(we.h==ce(we))}qr(B,J>h?h:J);break t}!Re||we.h&&De<Ge?(Re=0,B.a=we.h?5:3):B.$=De,h=Re}else h=St(B,B.V,B.Ba,B.c,B.i,h,xr);if(!h){k=0;break e}}b+k>=O&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*E}function Tr(u,h,b,k,E,O){for(;0<E--;){var B,V=u,J=h+(b?1:0),ae=u,we=h+(b?0:3);for(B=0;B<k;++B){var _e=ae[we+4*B];_e!=255&&(_e*=32897,V[J+4*B+0]=V[J+4*B+0]*_e>>23,V[J+4*B+1]=V[J+4*B+1]*_e>>23,V[J+4*B+2]=V[J+4*B+2]*_e>>23)}h+=O}}function In(u,h,b,k,E){for(;0<k--;){var O;for(O=0;O<b;++O){var B=u[h+2*O+0],V=15&(ae=u[h+2*O+1]),J=4369*V,ae=(240&ae|ae>>4)*J>>16;u[h+2*O+0]=(240&B|B>>4)*J>>16&240|(15&B|B<<4)*J>>16>>4&15,u[h+2*O+1]=240&ae|V}h+=E}}function zn(u,h,b,k,E,O,B,V){var J,ae,we=255;for(ae=0;ae<E;++ae){for(J=0;J<k;++J){var _e=u[h+J];O[B+4*J]=_e,we&=_e}h+=b,B+=V}return we!=255}function vr(u,h,b,k,E){var O;for(O=0;O<E;++O)b[k+O]=u[h+O]>>8}function Vr(){Pr=Tr,$o=In,Gr=zn,Ai=vr}function ji(u,h,b){te[u]=function(k,E,O,B,V,J,ae,we,_e,re,Ae,Re,Q,De,Ge,Ke,tt){var rt,zt=tt-1>>1,kt=V[J+0]|ae[we+0]<<16,an=_e[re+0]|Ae[Re+0]<<16;a(k!=null);var It=3*kt+an+131074>>2;for(h(k[E+0],255&It,It>>16,Q,De),O!=null&&(It=3*an+kt+131074>>2,h(O[B+0],255&It,It>>16,Ge,Ke)),rt=1;rt<=zt;++rt){var bn=V[J+rt]|ae[we+rt]<<16,wr=_e[re+rt]|Ae[Re+rt]<<16,dn=kt+bn+an+wr+524296,At=dn+2*(bn+an)>>3;It=At+kt>>1,kt=(dn=dn+2*(kt+wr)>>3)+bn>>1,h(k[E+2*rt-1],255&It,It>>16,Q,De+(2*rt-1)*b),h(k[E+2*rt-0],255&kt,kt>>16,Q,De+(2*rt-0)*b),O!=null&&(It=dn+an>>1,kt=At+wr>>1,h(O[B+2*rt-1],255&It,It>>16,Ge,Ke+(2*rt-1)*b),h(O[B+2*rt+0],255&kt,kt>>16,Ge,Ke+(2*rt+0)*b)),kt=bn,an=wr}1&tt||(It=3*kt+an+131074>>2,h(k[E+tt-1],255&It,It>>16,Q,De+(tt-1)*b),O!=null&&(It=3*an+kt+131074>>2,h(O[B+tt-1],255&It,It>>16,Ge,Ke+(tt-1)*b)))}}function ai(){ts[Cs]=Pi,ts[ka]=Vi,ts[Ci]=Ic,ts[al]=co,ts[li]=Lr,ts[En]=Go,ts[io]=Ql,ts[jt]=Vi,ts[Mn]=co,ts[oo]=Lr,ts[Wi]=Go}function yn(u){return u&-16384?0>u?0:255:u>>Hi}function Ws(u,h){return yn((19077*u>>8)+(26149*h>>8)-14234)}function eo(u,h,b){return yn((19077*u>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function js(u,h){return yn((19077*u>>8)+(33050*h>>8)-17685)}function Ns(u,h,b,k,E){k[E+0]=Ws(u,b),k[E+1]=eo(u,h,b),k[E+2]=js(u,h)}function Cr(u,h,b,k,E){k[E+0]=js(u,h),k[E+1]=eo(u,h,b),k[E+2]=Ws(u,b)}function si(u,h,b,k,E){var O=eo(u,h,b);h=O<<3&224|js(u,h)>>3,k[E+0]=248&Ws(u,b)|O>>5,k[E+1]=h}function Ss(u,h,b,k,E){var O=240&js(u,h)|15;k[E+0]=240&Ws(u,b)|eo(u,h,b)>>4,k[E+1]=O}function ks(u,h,b,k,E){k[E+0]=255,Ns(u,h,b,k,E+1)}function So(u,h,b,k,E){Cr(u,h,b,k,E),k[E+3]=255}function Na(u,h,b,k,E){Ns(u,h,b,k,E),k[E+3]=255}function Vs(u,h,b){te[u]=function(k,E,O,B,V,J,ae,we,_e){for(var re=we+(-2&_e)*b;we!=re;)h(k[E+0],O[B+0],V[J+0],ae,we),h(k[E+1],O[B+0],V[J+0],ae,we+b),E+=2,++B,++J,we+=2*b;1&_e&&h(k[E+0],O[B+0],V[J+0],ae,we)}}function Ka(u,h,b){return b==0?u==0?h==0?6:5:h==0?4:0:b}function ko(u,h,b,k,E){switch(u>>>30){case 3:ao(h,b,k,E,0);break;case 2:Kn(h,b,k,E);break;case 1:Dn(h,b,k,E)}}function Sa(u,h){var b,k,E=h.M,O=h.Nb,B=u.oc,V=u.pc+40,J=u.oc,ae=u.pc+584,we=u.oc,_e=u.pc+600;for(b=0;16>b;++b)B[V+32*b-1]=129;for(b=0;8>b;++b)J[ae+32*b-1]=129,we[_e+32*b-1]=129;for(0<E?B[V-1-32]=J[ae-1-32]=we[_e-1-32]=129:(d(B,V-32-1,127,21),d(J,ae-32-1,127,9),d(we,_e-32-1,127,9)),k=0;k<u.za;++k){var re=h.ya[h.aa+k];if(0<k){for(b=-1;16>b;++b)o(B,V+32*b-4,B,V+32*b+12,4);for(b=-1;8>b;++b)o(J,ae+32*b-4,J,ae+32*b+4,4),o(we,_e+32*b-4,we,_e+32*b+4,4)}var Ae=u.Gd,Re=u.Hd+k,Q=re.ad,De=re.Hc;if(0<E&&(o(B,V-32,Ae[Re].y,0,16),o(J,ae-32,Ae[Re].f,0,8),o(we,_e-32,Ae[Re].ea,0,8)),re.Za){var Ge=B,Ke=V-32+16;for(0<E&&(k>=u.za-1?d(Ge,Ke,Ae[Re].y[15],4):o(Ge,Ke,Ae[Re+1].y,0,4)),b=0;4>b;b++)Ge[Ke+128+b]=Ge[Ke+256+b]=Ge[Ke+384+b]=Ge[Ke+0+b];for(b=0;16>b;++b,De<<=2)Ge=B,Ke=V+El[b],Ps[re.Ob[b]](Ge,Ke),ko(De,Q,16*+b,Ge,Ke)}else if(Ge=Ka(k,E,re.Ob[0]),lr[Ge](B,V),De!=0)for(b=0;16>b;++b,De<<=2)ko(De,Q,16*+b,B,V+El[b]);for(b=re.Gc,Ge=Ka(k,E,re.Dd),fr[Ge](J,ae),fr[Ge](we,_e),De=Q,Ge=J,Ke=ae,255&(re=0|b)&&(170&re?Xa(De,256,Ge,Ke):Fn(De,256,Ge,Ke)),re=we,De=_e,255&(b>>=8)&&(170&b?Xa(Q,320,re,De):Fn(Q,320,re,De)),E<u.Ub-1&&(o(Ae[Re].y,0,B,V+480,16),o(Ae[Re].f,0,J,ae+224,8),o(Ae[Re].ea,0,we,_e+224,8)),b=8*O*u.B,Ae=u.sa,Re=u.ta+16*k+16*O*u.R,Q=u.qa,re=u.ra+8*k+b,De=u.Ha,Ge=u.Ia+8*k+b,b=0;16>b;++b)o(Ae,Re+b*u.R,B,V+32*b,16);for(b=0;8>b;++b)o(Q,re+b*u.B,J,ae+32*b,8),o(De,Ge+b*u.B,we,_e+32*b,8)}}function zi(u,h,b,k,E,O,B,V,J){var ae=[0],we=[0],_e=0,re=J!=null?J.kd:0,Ae=J??new at;if(u==null||12>b)return 7;Ae.data=u,Ae.w=h,Ae.ha=b,h=[h],b=[b],Ae.gb=[Ae.gb];e:{var Re=h,Q=b,De=Ae.gb;if(a(u!=null),a(Q!=null),a(De!=null),De[0]=0,12<=Q[0]&&!r(u,Re[0],"RIFF")){if(r(u,Re[0]+8,"WEBP")){De=3;break e}var Ge=bt(u,Re[0]+4);if(12>Ge||4294967286<Ge){De=3;break e}if(re&&Ge>Q[0]-8){De=7;break e}De[0]=Ge,Re[0]+=12,Q[0]-=12}De=0}if(De!=0)return De;for(Ge=0<Ae.gb[0],b=b[0];;){e:{var Ke=u;Q=h,De=b;var tt=ae,rt=we,zt=Re=[0];if((It=_e=[_e])[0]=0,8>De[0])De=7;else{if(!r(Ke,Q[0],"VP8X")){if(bt(Ke,Q[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var kt=bt(Ke,Q[0]+8),an=1+ot(Ke,Q[0]+12);if(2147483648<=an*(Ke=1+ot(Ke,Q[0]+15))){De=3;break e}zt!=null&&(zt[0]=kt),tt!=null&&(tt[0]=an),rt!=null&&(rt[0]=Ke),Q[0]+=18,De[0]-=18,It[0]=1}De=0}}if(_e=_e[0],Re=Re[0],De!=0)return De;if(Q=!!(2&Re),!Ge&&_e)return 3;if(O!=null&&(O[0]=!!(16&Re)),B!=null&&(B[0]=Q),V!=null&&(V[0]=0),B=ae[0],Re=we[0],_e&&Q&&J==null){De=0;break}if(4>b){De=7;break}if(Ge&&_e||!Ge&&!_e&&!r(u,h[0],"ALPH")){b=[b],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{kt=u,De=h,Ge=b;var It=Ae.gb;tt=Ae.na,rt=Ae.P,zt=Ae.Sa,an=22,a(kt!=null),a(Ge!=null),Ke=De[0];var bn=Ge[0];for(a(tt!=null),a(zt!=null),tt[0]=null,rt[0]=null,zt[0]=0;;){if(De[0]=Ke,Ge[0]=bn,8>bn){De=7;break e}var wr=bt(kt,Ke+4);if(4294967286<wr){De=3;break e}var dn=8+wr+1&-2;if(an+=dn,0<It&&an>It){De=3;break e}if(!r(kt,Ke,"VP8 ")||!r(kt,Ke,"VP8L")){De=0;break e}if(bn[0]<dn){De=7;break e}r(kt,Ke,"ALPH")||(tt[0]=kt,rt[0]=Ke+8,zt[0]=wr),Ke+=dn,bn-=dn}}if(b=b[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],De!=0)break}b=[b],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(It=u,De=h,Ge=b,tt=Ae.gb[0],rt=Ae.Ja,zt=Ae.xa,kt=De[0],Ke=!r(It,kt,"VP8 "),an=!r(It,kt,"VP8L"),a(It!=null),a(Ge!=null),a(rt!=null),a(zt!=null),8>Ge[0])De=7;else{if(Ke||an){if(It=bt(It,kt+4),12<=tt&&It>tt-12){De=3;break e}if(re&&It>Ge[0]-8){De=7;break e}rt[0]=It,De[0]+=8,Ge[0]-=8,zt[0]=an}else zt[0]=5<=Ge[0]&&It[kt+0]==47&&!(It[kt+4]>>5),rt[0]=Ge[0];De=0}if(b=b[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],h=h[0],De!=0)break;if(4294967286<Ae.Ja)return 3;if(V==null||Q||(V[0]=Ae.xa?2:1),B=[B],Re=[Re],Ae.xa){if(5>b){De=7;break}V=B,re=Re,Q=O,u==null||5>b?u=0:5<=b&&u[h+0]==47&&!(u[h+4]>>5)?(Ge=[0],It=[0],tt=[0],Ie(rt=new K,u,h,b),tr(rt,Ge,It,tt)?(V!=null&&(V[0]=Ge[0]),re!=null&&(re[0]=It[0]),Q!=null&&(Q[0]=tt[0]),u=1):u=0):u=0}else{if(10>b){De=7;break}V=Re,u==null||10>b||!Ar(u,h+3,b-3)?u=0:(re=u[h+0]|u[h+1]<<8|u[h+2]<<16,Q=16383&(u[h+7]<<8|u[h+6]),u=16383&(u[h+9]<<8|u[h+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=Ae.Ja||!Q||!u?u=0:(B&&(B[0]=Q),V&&(V[0]=u),u=1))}if(!u||(B=B[0],Re=Re[0],_e&&(ae[0]!=B||we[0]!=Re)))return 3;J!=null&&(J[0]=Ae,J.offset=h-J.w,a(4294967286>h-J.w),a(J.offset==J.ha-b));break}return De==0||De==7&&_e&&J==null?(O!=null&&(O[0]|=Ae.na!=null&&0<Ae.na.length),k!=null&&(k[0]=B),E!=null&&(E[0]=Re),0):De}function to(u,h,b){var k=h.width,E=h.height,O=0,B=0,V=k,J=E;if(h.Da=u!=null&&0<u.Da,h.Da&&(V=u.cd,J=u.bd,O=u.v,B=u.j,11>b||(O&=-2,B&=-2),0>O||0>B||0>=V||0>=J||O+V>k||B+J>E))return 0;if(h.v=O,h.j=B,h.va=O+V,h.o=B+J,h.U=V,h.T=J,h.da=u!=null&&0<u.da,h.da){if(!Lt(V,J,b=[u.ib],O=[u.hb]))return 0;h.ib=b[0],h.hb=O[0]}return h.ob=u!=null&&u.ob,h.Kb=u==null||!u.Sd,h.da&&(h.ob=h.ib<3*k/4&&h.hb<3*E/4,h.Kb=0),1}function br(u){if(u==null)return 2;if(11>u.S){var h=u.f.RGBA;h.fb+=(u.height-1)*h.A,h.A=-h.A}else h=u.f.kb,u=u.height,h.O+=(u-1)*h.fa,h.fa=-h.fa,h.N+=(u-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(u-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(u-1)*h.lb,h.lb=-h.lb);return 0}function ii(u,h,b,k){if(k==null||0>=u||0>=h)return 2;if(b!=null){if(b.Da){var E=b.cd,O=b.bd,B=-2&b.v,V=-2&b.j;if(0>B||0>V||0>=E||0>=O||B+E>u||V+O>h)return 2;u=E,h=O}if(b.da){if(!Lt(u,h,E=[b.ib],O=[b.hb]))return 2;u=E[0],h=O[0]}}k.width=u,k.height=h;e:{var J=k.width,ae=k.height;if(u=k.S,0>=J||0>=ae||!(u>=Cs&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){B=O=E=h=0;var we=(V=J*Jo[u])*ae;if(11>u||(O=(ae+1)/2*(h=(J+1)/2),u==12&&(B=(E=J)*ae)),(ae=c(we+2*O+B))==null){u=1;break e}k.sd=ae,11>u?((J=k.f.RGBA).eb=ae,J.fb=0,J.A=V,J.size=we):((J=k.f.kb).y=ae,J.O=0,J.fa=V,J.Fd=we,J.f=ae,J.N=0+we,J.Ab=h,J.Cd=O,J.ea=ae,J.W=0+we+O,J.Db=h,J.Ed=O,u==12&&(J.F=ae,J.J=0+we+2*O),J.Tc=B,J.lb=E)}if(h=1,E=k.S,O=k.width,B=k.height,E>=Cs&&13>E)if(11>E)u=k.f.RGBA,h&=(V=Math.abs(u.A))*(B-1)+O<=u.size,h&=V>=O*Jo[E],h&=u.eb!=null;else{u=k.f.kb,V=(O+1)/2,we=(B+1)/2,J=Math.abs(u.fa),ae=Math.abs(u.Ab);var _e=Math.abs(u.Db),re=Math.abs(u.lb),Ae=re*(B-1)+O;h&=J*(B-1)+O<=u.Fd,h&=ae*(we-1)+V<=u.Cd,h=(h&=_e*(we-1)+V<=u.Ed)&J>=O&ae>=V&_e>=V,h&=u.y!=null,h&=u.f!=null,h&=u.ea!=null,E==12&&(h&=re>=O,h&=Ae<=u.Tc,h&=u.F!=null)}else h=0;u=h?0:2}}return u!=0||b!=null&&b.fd&&(u=br(k)),u}var Fa=64,Ra=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$n=24,Ni=32,oi=8,As=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];yt("Predictor0","PredictorAdd0"),te.Predictor0=function(){return 4278190080},te.Predictor1=function(u){return u},te.Predictor2=function(u,h,b){return h[b+0]},te.Predictor3=function(u,h,b){return h[b+1]},te.Predictor4=function(u,h,b){return h[b-1]},te.Predictor5=function(u,h,b){return Pt(Pt(u,h[b+1]),h[b+0])},te.Predictor6=function(u,h,b){return Pt(u,h[b-1])},te.Predictor7=function(u,h,b){return Pt(u,h[b+0])},te.Predictor8=function(u,h,b){return Pt(h[b-1],h[b+0])},te.Predictor9=function(u,h,b){return Pt(h[b+0],h[b+1])},te.Predictor10=function(u,h,b){return Pt(Pt(u,h[b-1]),Pt(h[b+0],h[b+1]))},te.Predictor11=function(u,h,b){var k=h[b+0];return 0>=ht(k>>24&255,u>>24&255,(h=h[b-1])>>24&255)+ht(k>>16&255,u>>16&255,h>>16&255)+ht(k>>8&255,u>>8&255,h>>8&255)+ht(255&k,255&u,255&h)?k:u},te.Predictor12=function(u,h,b){var k=h[b+0];return(pn((u>>24&255)+(k>>24&255)-((h=h[b-1])>>24&255))<<24|pn((u>>16&255)+(k>>16&255)-(h>>16&255))<<16|pn((u>>8&255)+(k>>8&255)-(h>>8&255))<<8|pn((255&u)+(255&k)-(255&h)))>>>0},te.Predictor13=function(u,h,b){var k=h[b-1];return(sn((u=Pt(u,h[b+0]))>>24&255,k>>24&255)<<24|sn(u>>16&255,k>>16&255)<<16|sn(u>>8&255,k>>8&255)<<8|sn(255&u,255&k))>>>0};var Si=te.PredictorAdd0;te.PredictorAdd1=Ot,yt("Predictor2","PredictorAdd2"),yt("Predictor3","PredictorAdd3"),yt("Predictor4","PredictorAdd4"),yt("Predictor5","PredictorAdd5"),yt("Predictor6","PredictorAdd6"),yt("Predictor7","PredictorAdd7"),yt("Predictor8","PredictorAdd8"),yt("Predictor9","PredictorAdd9"),yt("Predictor10","PredictorAdd10"),yt("Predictor11","PredictorAdd11"),yt("Predictor12","PredictorAdd12"),yt("Predictor13","PredictorAdd13");var Qa=te.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Cn,Hs=te.ColorIndexInverseTransform,Hr=te.MapARGB,Ta=te.VP8LColorIndexInverseTransformAlpha,Pn=te.MapAlpha,Oa=te.VP8LPredictorsAdd=[];Oa.length=16,(te.VP8LPredictors=[]).length=16,(te.VP8LPredictorsAdd_C=[]).length=16,(te.VP8LPredictors_C=[]).length=16;var ir,no,Yr,Ui,na,ro,ma,ao,Kn,Xa,Dn,Fn,or,Or,Br,Ao,Za,ki,so,Co,Po,Pl,Lo,qi,Pr,$o,Gr,Ai,Wo=c(511),rl=c(2041),Vo=c(225),$i=c(767),Ho=0,es=rl,Ys=Vo,Jr=$i,gs=Wo,Cs=0,ka=1,Ci=2,al=3,li=4,En=5,io=6,jt=7,Mn=8,oo=9,Wi=10,ci=[2,3,7],sl=[3,3,11],di=[280,256,256,256,40],_o=[0,1,1,1,0],ui=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Kl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],il=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Io=8,Gs=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yo=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lo=null,Eo=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ll=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_l=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_c=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ol=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Il=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lr=[],Ps=[],fr=[],fi=1,Mo=2,Aa=[],ts=[];ji("UpsampleRgbLinePair",Ns,3),ji("UpsampleBgrLinePair",Cr,3),ji("UpsampleRgbaLinePair",Na,4),ji("UpsampleBgraLinePair",So,4),ji("UpsampleArgbLinePair",ks,4),ji("UpsampleRgba4444LinePair",Ss,2),ji("UpsampleRgb565LinePair",si,2);var Pi=te.UpsampleRgbLinePair,Ic=te.UpsampleBgrLinePair,Vi=te.UpsampleRgbaLinePair,co=te.UpsampleBgraLinePair,Lr=te.UpsampleArgbLinePair,Go=te.UpsampleRgba4444LinePair,Ql=te.UpsampleRgb565LinePair,Ln=16,Js=1<<Ln-1,Un=-227,Wn=482,Hi=6,pa=0,ns=c(256),hi=c(256),uo=c(256),rs=c(256),ll=c(Wn-Un),Xl=c(Wn-Un);Vs("YuvToRgbRow",Ns,3),Vs("YuvToBgrRow",Cr,3),Vs("YuvToRgbaRow",Na,4),Vs("YuvToBgraRow",So,4),Vs("YuvToArgbRow",ks,4),Vs("YuvToRgba4444Row",Ss,2),Vs("YuvToRgb565Row",si,2);var El=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fo=[0,2,8],Zl=[8,7,6,4,4,2,2,2,1,1,1,1],Li=1;this.WebPDecodeRGBA=function(u,h,b,k,E){var O=ka,B=new Ze,V=new Wt;B.ba=V,V.S=O,V.width=[V.width],V.height=[V.height];var J=V.width,ae=V.height,we=new le;if(we==null||u==null)var _e=2;else a(we!=null),_e=zi(u,h,b,we.width,we.height,we.Pd,we.Qd,we.format,null);if(_e!=0?J=0:(J!=null&&(J[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),J=1),J){V.width=V.width[0],V.height=V.height[0],k!=null&&(k[0]=V.width),E!=null&&(E[0]=V.height);e:{if(k=new bs,(E=new at).data=u,E.w=h,E.ha=b,E.kd=1,h=[0],a(E!=null),((u=zi(E.data,E.w,E.ha,null,null,null,h,null,E))==0||u==7)&&h[0]&&(u=4),(h=u)==0){if(a(B!=null),k.data=E.data,k.w=E.w+E.offset,k.ha=E.ha-E.offset,k.put=Ft,k.ac=gn,k.bc=rn,k.ma=B,E.xa){if((u=wi())==null){B=1;break e}if((function(re,Ae){var Re=[0],Q=[0],De=[0];t:for(;;){if(re==null)return 0;if(Ae==null)return re.a=2,0;if(re.l=Ae,re.a=0,Ie(re.m,Ae.data,Ae.w,Ae.ha),!tr(re.m,Re,Q,De)){re.a=3;break t}if(re.xb=Mo,Ae.width=Re[0],Ae.height=Q[0],!vs(Re[0],Q[0],1,re,null))break t;return 1}return a(re.a!=0),0})(u,k)){if(k=(h=ii(k.width,k.height,B.Oa,B.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(a(k.s.yc!=null),a(k.s.Ya!=null),a(0<k.s.Wb),a((b=k.l)!=null),a((E=b.ma)!=null),k.xb!=0){if(k.ca=E.ba,k.tb=E.tb,a(k.ca!=null),!to(E.Oa,b,al)){k.a=2;break n}if(!Hn(k,b.width)||b.da)break n;if((b.da||Ht(k.ca.S))&&Vr(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Vr()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!X(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!St(k,k.V,k.Ba,k.c,k.i,b.o,$a))break n;E.Dc=k.Ma,k=1;break t}a(k.a!=0),k=0}k=!k}k&&(h=u.a)}else h=u.a}else{if((u=new Fi)==null){B=1;break e}if(u.Fa=E.na,u.P=E.P,u.qc=E.Sa,yr(u,k)){if((h=ii(k.width,k.height,B.Oa,B.ba))==0){if(u.Aa=0,b=B.Oa,a((E=u)!=null),b!=null){if(0<(J=0>(J=b.Md)?0:100<J?255:255*J/100)){for(ae=we=0;4>ae;++ae)12>(_e=E.pb[ae]).lc&&(_e.ia=J*Zl[0>_e.lc?0:_e.lc]>>3),we|=_e.ia;we&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=b.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}(function(re,Ae){if(re==null)return 0;if(Ae==null)return ar(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!yr(re,Ae))return 0;if(a(re.cb),Ae.ac==null||Ae.ac(Ae)){Ae.ob&&(re.L=0);var Re=fo[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=Ae.v-Re>>4,re.zb=Ae.j-Re>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=Ae.o+15+Re>>4,re.Hb=Ae.va+15+Re>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Q=re.ed;for(Re=0;4>Re;++Re){var De;if(re.Qa.Cb){var Ge=re.Qa.Lb[Re];re.Qa.Fb||(Ge+=Q.Tb)}else Ge=Q.Tb;for(De=0;1>=De;++De){var Ke=re.gd[Re][De],tt=Ge;if(Q.Pc&&(tt+=Q.vd[0],De&&(tt+=Q.od[0])),0<(tt=0>tt?0:63<tt?63:tt)){var rt=tt;0<Q.wb&&(rt=4<Q.wb?rt>>2:rt>>1)>9-Q.wb&&(rt=9-Q.wb),1>rt&&(rt=1),Ke.dd=rt,Ke.tc=2*tt+rt,Ke.ld=40<=tt?2:15<=tt?1:0}else Ke.tc=0;Ke.La=De}}}Re=0}else ar(re,6,"Frame setup failed"),Re=re.a;if(Re=Re==0){if(Re){re.$c=0,0<re.Aa||(re.Ic=Li);t:{Re=re.Ic,Q=4*(rt=re.za);var zt=32*rt,kt=rt+1,an=0<re.L?rt*(0<re.Aa?2:1):0,It=(re.Aa==2?2:1)*rt;if((Ke=Q+832+(De=3*(16*Re+fo[re.L])/2*zt)+(Ge=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=Ke)Re=0;else{if(Ke>re.Vb){if(re.Vb=0,re.Ec=c(Ke),re.Fc=0,re.Ec==null){Re=ar(re,1,"no memory during frame initialization.");break t}re.Vb=Ke}Ke=re.Ec,tt=re.Fc,re.Ac=Ke,re.Bc=tt,tt+=Q,re.Gd=p(zt,La),re.Hd=0,re.rb=p(kt+1,Pa),re.sb=1,re.wa=an?p(an,Zr):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=rt),a(!0),re.oc=Ke,re.pc=tt,tt+=832,re.ya=p(It,os),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=rt),re.R=16*rt,re.B=8*rt,rt=(zt=fo[re.L])*re.R,zt=zt/2*re.B,re.sa=Ke,re.ta=tt+rt,re.qa=re.sa,re.ra=re.ta+16*Re*re.R+zt,re.Ha=re.qa,re.Ia=re.ra+8*Re*re.B+zt,re.$c=0,tt+=De,re.mb=Ge?Ke:null,re.nb=Ge?tt:null,a(tt+Ge<=re.Fc+re.Vb),la(re),d(re.Ac,re.Bc,0,Q),Re=1}}if(Re){if(Ae.ka=0,Ae.y=re.sa,Ae.O=re.ta,Ae.f=re.qa,Ae.N=re.ra,Ae.ea=re.Ha,Ae.Vd=re.Ia,Ae.fa=re.R,Ae.Rc=re.B,Ae.F=null,Ae.J=0,!Ho){for(Re=-255;255>=Re;++Re)Wo[255+Re]=0>Re?-Re:Re;for(Re=-1020;1020>=Re;++Re)rl[1020+Re]=-128>Re?-128:127<Re?127:Re;for(Re=-112;112>=Re;++Re)Vo[112+Re]=-16>Re?-16:15<Re?15:Re;for(Re=-255;510>=Re;++Re)$i[255+Re]=0>Re?0:255<Re?255:Re;Ho=1}ma=ca,ao=Rr,Xa=ds,Dn=_a,Fn=An,Kn=Ut,or=ha,Or=$s,Br=M,Ao=ne,Za=Bi,ki=x,so=pe,Co=Pe,Po=Us,Pl=fn,Lo=qs,qi=Zi,Ps[0]=Ha,Ps[1]=Wa,Ps[2]=Va,Ps[3]=nl,Ps[4]=Ma,Ps[5]=qo,Ps[6]=ms,Ps[7]=ni,Ps[8]=Ya,Ps[9]=Ri,lr[0]=fs,lr[1]=sr,lr[2]=us,lr[3]=Jn,lr[4]=da,lr[5]=ua,lr[6]=hs,fr[0]=Wr,fr[1]=Ia,fr[2]=Ga,fr[3]=Xi,fr[4]=Ti,fr[5]=ri,fr[6]=zs,Re=1}else Re=0}Re&&(Re=(function(bn,wr){for(bn.M=0;bn.M<bn.Va;++bn.M){var dn,At=bn.Jc[bn.M&bn.Xb],gt=bn.m,_r=bn;for(dn=0;dn<_r.za;++dn){var nn=gt,vn=_r,Zn=vn.Ac,ra=vn.Bc+4*dn,Ir=vn.zc,hr=vn.ya[vn.aa+dn];if(vn.Qa.Bb?hr.$b=Ye(nn,vn.Pa.jb[0])?2+Ye(nn,vn.Pa.jb[2]):Ye(nn,vn.Pa.jb[1]):hr.$b=0,vn.kc&&(hr.Ad=Ye(nn,vn.Bd)),hr.Za=!Ye(nn,145)+0,hr.Za){var zr=hr.Ob,Er=0;for(vn=0;4>vn;++vn){var cr,kn=Ir[0+vn];for(cr=0;4>cr;++cr){kn=_c[Zn[ra+cr]][kn];for(var Rn=Lc[Ye(nn,kn[0])];0<Rn;)Rn=Lc[2*Rn+Ye(nn,kn[Rn])];kn=-Rn,Zn[ra+cr]=kn}o(zr,Er,Zn,ra,4),Er+=4,Ir[0+vn]=kn}}else kn=Ye(nn,156)?Ye(nn,128)?1:3:Ye(nn,163)?2:0,hr.Ob[0]=kn,d(Zn,ra,kn,4),d(Ir,0,kn,4);hr.Dd=Ye(nn,142)?Ye(nn,114)?Ye(nn,183)?1:3:2:0}if(_r.m.Ka)return ar(bn,7,"Premature end-of-partition0 encountered.");for(;bn.ja<bn.za;++bn.ja){if(_r=At,nn=(gt=bn).rb[gt.sb-1],Zn=gt.rb[gt.sb+gt.ja],dn=gt.ya[gt.aa+gt.ja],ra=gt.kc?dn.Ad:0)nn.la=Zn.la=0,dn.Za||(nn.Na=Zn.Na=0),dn.Hc=0,dn.Gc=0,dn.ia=0;else{var Qn,wn;if(nn=Zn,Zn=_r,ra=gt.Pa.Xc,Ir=gt.ya[gt.aa+gt.ja],hr=gt.pb[Ir.$b],vn=Ir.ad,zr=0,Er=gt.rb[gt.sb-1],kn=cr=0,d(vn,zr,0,384),Ir.Za)var er=0,jr=ra[3];else{Rn=c(16);var l=nn.Na+Er.Na;if(l=lo(Zn,ra[1],l,hr.Eb,0,Rn,0),nn.Na=Er.Na=(0<l)+0,1<l)ma(Rn,0,vn,zr);else{var N=Rn[0]+3>>3;for(Rn=0;256>Rn;Rn+=16)vn[zr+Rn]=N}er=1,jr=ra[0]}var L=15&nn.la,P=15&Er.la;for(Rn=0;4>Rn;++Rn){var I=1&P;for(N=wn=0;4>N;++N)L=L>>1|(I=(l=lo(Zn,jr,l=I+(1&L),hr.Sc,er,vn,zr))>er)<<7,wn=wn<<2|(3<l?3:1<l?2:vn[zr+0]!=0),zr+=16;L>>=4,P=P>>1|I<<7,cr=(cr<<8|wn)>>>0}for(jr=L,er=P>>4,Qn=0;4>Qn;Qn+=2){for(wn=0,L=nn.la>>4+Qn,P=Er.la>>4+Qn,Rn=0;2>Rn;++Rn){for(I=1&P,N=0;2>N;++N)l=I+(1&L),L=L>>1|(I=0<(l=lo(Zn,ra[2],l,hr.Qc,0,vn,zr)))<<3,wn=wn<<2|(3<l?3:1<l?2:vn[zr+0]!=0),zr+=16;L>>=2,P=P>>1|I<<5}kn|=wn<<4*Qn,jr|=L<<4<<Qn,er|=(240&P)<<Qn}nn.la=jr,Er.la=er,Ir.Hc=cr,Ir.Gc=kn,Ir.ia=43690&kn?0:hr.ia,ra=!(cr|kn)}if(0<gt.L&&(gt.wa[gt.Y+gt.ja]=gt.gd[dn.$b][dn.Za],gt.wa[gt.Y+gt.ja].La|=!ra),_r.Ka)return ar(bn,7,"Premature end-of-file encountered.")}if(la(bn),gt=wr,_r=1,dn=(At=bn).D,nn=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(dn.M=At.M,dn.uc=nn,Sa(At,dn),_r=1,dn=(wn=At.D).Nb,nn=(kn=fo[At.L])*At.R,Zn=kn/2*At.B,Rn=16*dn*At.R,N=8*dn*At.B,ra=At.sa,Ir=At.ta-nn+Rn,hr=At.qa,vn=At.ra-Zn+N,zr=At.Ha,Er=At.Ia-Zn+N,P=(L=wn.M)==0,cr=L>=At.Va-1,At.Aa==2&&Sa(At,wn),wn.uc)for(I=(l=At).D.M,a(l.D.uc),wn=l.yb;wn<l.Hb;++wn){er=wn,jr=I;var U=(W=(jn=l).D).Nb;Qn=jn.R;var W=W.wa[W.Y+er],ve=jn.sa,be=jn.ta+16*U*Qn+16*er,Je=W.dd,Xe=W.tc;if(Xe!=0)if(a(3<=Xe),jn.L==1)0<er&&Pl(ve,be,Qn,Xe+4),W.La&&qi(ve,be,Qn,Xe),0<jr&&Po(ve,be,Qn,Xe+4),W.La&&Lo(ve,be,Qn,Xe);else{var Nt=jn.B,mt=jn.qa,mn=jn.ra+8*U*Nt+8*er,Kt=jn.Ha,jn=jn.Ia+8*U*Nt+8*er;U=W.ld,0<er&&(Or(ve,be,Qn,Xe+4,Je,U),Ao(mt,mn,Kt,jn,Nt,Xe+4,Je,U)),W.La&&(ki(ve,be,Qn,Xe,Je,U),Co(mt,mn,Kt,jn,Nt,Xe,Je,U)),0<jr&&(or(ve,be,Qn,Xe+4,Je,U),Br(mt,mn,Kt,jn,Nt,Xe+4,Je,U)),W.La&&(Za(ve,be,Qn,Xe,Je,U),so(mt,mn,Kt,jn,Nt,Xe,Je,U))}}if(At.ia&&alert("todo:DitherRow"),gt.put!=null){if(wn=16*L,L=16*(L+1),P?(gt.y=At.sa,gt.O=At.ta+Rn,gt.f=At.qa,gt.N=At.ra+N,gt.ea=At.Ha,gt.W=At.Ia+N):(wn-=kn,gt.y=ra,gt.O=Ir,gt.f=hr,gt.N=vn,gt.ea=zr,gt.W=Er),cr||(L-=kn),L>gt.o&&(L=gt.o),gt.F=null,gt.J=null,At.Fa!=null&&0<At.Fa.length&&wn<L&&(gt.J=Bn(At,gt,wn,L-wn),gt.F=At.mb,gt.F==null&&gt.F.length==0)){_r=ar(At,3,"Could not decode alpha data.");break t}wn<gt.j&&(kn=gt.j-wn,wn=gt.j,a(!(1&kn)),gt.O+=At.R*kn,gt.N+=At.B*(kn>>1),gt.W+=At.B*(kn>>1),gt.F!=null&&(gt.J+=gt.width*kn)),wn<L&&(gt.O+=gt.v,gt.N+=gt.v>>1,gt.W+=gt.v>>1,gt.F!=null&&(gt.J+=gt.v),gt.ka=wn-gt.j,gt.U=gt.va-gt.v,gt.T=L-wn,_r=gt.put(gt))}dn+1!=At.Ic||cr||(o(At.sa,At.ta-nn,ra,Ir+16*At.R,nn),o(At.qa,At.ra-Zn,hr,vn+8*At.B,Zn),o(At.Ha,At.Ia-Zn,zr,Er+8*At.B,Zn))}if(!_r)return ar(bn,6,"Output aborted.")}return 1})(re,Ae)),Ae.bc!=null&&Ae.bc(Ae),Re&=1}return Re?(re.cb=0,Re):0})(u,k)||(h=u.a)}}else h=u.a}h==0&&B.Oa!=null&&B.Oa.fd&&(h=br(B.ba))}B=h}O=B!=0?null:11>O?V.f.RGBA.eb:V.f.kb.y}else O=null;return O};var Jo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(te,ye){for(var z="",H=0;H<4;H++)z+=String.fromCharCode(te[ye++]);return z}function j(te,ye){return te[ye+0]|te[ye+1]<<8}function A(te,ye){return(te[ye+0]|te[ye+1]<<8|te[ye+2]<<16)>>>0}function R(te,ye){return(te[ye+0]|te[ye+1]<<8|te[ye+2]<<16|te[ye+3]<<24)>>>0}new g;var w=[0],$=[0],F=[],D=new g,_=s,Y=(function(te,ye){var z={},H=0,de=!1,ie=0,ke=0;if(z.frames=[],!(function(C,K){for(var Z=0;Z<4;Z++)if(C[K+Z]!="RIFF".charCodeAt(Z))return!0;return!1})(te,ye)){for(R(te,ye+=4),ye+=8;ye<te.length;){var Me=v(te,ye),Ee=R(te,ye+=4);ye+=4;var me=Ee+(1&Ee);switch(Me){case"VP8 ":case"VP8L":z.frames[H]===void 0&&(z.frames[H]={}),(se=z.frames[H]).src_off=de?ke:ye-8,se.src_size=ie+Ee+8,H++,de&&(de=!1,ie=0,ke=0);break;case"VP8X":(se=z.header={}).feature_flags=te[ye];var Ie=ye+4;se.canvas_width=1+A(te,Ie),Ie+=3,se.canvas_height=1+A(te,Ie),Ie+=3;break;case"ALPH":de=!0,ie=me+8,ke=ye-8;break;case"ANIM":(se=z.header).bgcolor=R(te,ye),Ie=ye+4,se.loop_count=j(te,Ie),Ie+=2;break;case"ANMF":var Ue,se;(se=z.frames[H]={}).offset_x=2*A(te,ye),ye+=3,se.offset_y=2*A(te,ye),ye+=3,se.width=1+A(te,ye),ye+=3,se.height=1+A(te,ye),ye+=3,se.duration=A(te,ye),ye+=3,Ue=te[ye++],se.dispose=1&Ue,se.blend=Ue>>1&1}Me!="ANMF"&&(ye+=me)}return z}})(_,0);Y.response=_,Y.rgbaoutput=!0,Y.dataurl=!1;var ee=Y.header?Y.header:null,G=Y.frames?Y.frames:null;if(ee){ee.loop_counter=ee.loop_count,w=[ee.canvas_height],$=[ee.canvas_width];for(var fe=0;fe<G.length&&G[fe].blend!=0;fe++);}var he=G[0],Be=D.WebPDecodeRGBA(_,he.src_off,he.src_size,$,w);he.rgba=Be,he.imgwidth=$[0],he.imgheight=w[0];for(var ge=0;ge<$[0]*w[0]*4;ge++)F[ge]=Be[ge];return this.width=$,this.height=w,this.data=F,this}(function(s){var a,r,o,d,c,p,m,g,v,j=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new g,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new p,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new p,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new A(this),a=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,d=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,p=this.internal.Point,m=this.internal.Rectangle,g=this.internal.Matrix,v=new j}]);var A=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=C;Object.defineProperty(this,"pdf",{get:function(){return K}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(X){Z=!!X}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(X){ce=!!X}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(X){isNaN(X)||(oe=X)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(X){isNaN(X)||(je=X)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(X){var et;typeof X=="number"?et=[X,X,X,X]:((et=new Array(4))[0]=X[0],et[1]=X.length>=2?X[1]:et[0],et[2]=X.length>=3?X[2]:et[0],et[3]=X.length>=4?X[3]:et[1]),v.margin=et}});var Fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Fe},set:function(X){Fe=X}});var Oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Oe},set:function(X){Oe=X}});var Ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ye},set:function(X){Ye=X}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(X){X instanceof j&&(v=X)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(X){v.path=X}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(X){Te=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var et;et=R(X),this.ctx.fillStyle=et.style,this.ctx.isFillTransparent=et.a===0,this.ctx.fillOpacity=et.a,this.pdf.setFillColor(et.r,et.g,et.b,{a:et.a}),this.pdf.setTextColor(et.r,et.g,et.b,{a:et.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var et=R(X);this.ctx.strokeStyle=et.style,this.ctx.isStrokeTransparent=et.a===0,this.ctx.strokeOpacity=et.a,et.a===0?this.pdf.setDrawColor(255,255,255):(et.a,this.pdf.setDrawColor(et.r,et.g,et.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var Qe=null,ot=null,bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return bt},set:function(X){Qe=null,ot=null,bt=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var et;if(this.ctx.font=X,(et=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(X))!==null){var xt=et[1];et[2];var Lt=et[3],Ve=et[4];et[5];var Mt=et[6],yt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(yt==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:yt==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var vt=(function(ft){var on,Se,xe=[],We=ft.trim();if(We==="")return lf;if(We in cp)return[cp[We]];for(;We!=="";){switch(Se=null,on=(We=up(We)).charAt(0)){case'"':case"'":Se=ry(We.substring(1),on);break;default:Se=ay(We)}if(Se===null||(xe.push(Se[0]),(We=up(Se[1]))!==""&&We.charAt(0)!==","))return lf;We=We.replace(/^,/,"")}return xe})(Mt);if(this.fontFaces){var Pt=(function(ft,on){var Se=ft.getFontList(),xe=JSON.stringify(Se);if(Qe===null||ot!==xe){var We=(function(ct){var st=[];return Object.keys(ct).forEach(function(un){ct[un].forEach(function(Ht){var Qt=null;switch(Ht){case"bold":Qt={family:un,weight:"bold"};break;case"italic":Qt={family:un,style:"italic"};break;case"bolditalic":Qt={family:un,weight:"bold",style:"italic"};break;case"":case"normal":Qt={family:un}}Qt!==null&&(Qt.ref={name:un,style:Ht},st.push(Qt))})}),st})(Se);Qe=(function(ct){for(var st={},un=0;un<ct.length;++un){var Ht=of(ct[un]),Qt=Ht.family,Sn=Ht.stretch,Wt=Ht.style,le=Ht.weight;st[Qt]=st[Qt]||{},st[Qt][Sn]=st[Qt][Sn]||{},st[Qt][Sn][Wt]=st[Qt][Sn][Wt]||{},st[Qt][Sn][Wt][le]=Ht}return st})(We.concat(on)),ot=xe}return Qe})(this.pdf,this.fontFaces),pn=vt.map(function(ft){return{family:ft,stretch:"normal",weight:Lt,style:xt}}),sn=(function(ft,on,Se){for(var xe=(Se=Se||{}).defaultFontFamily||"times",We=Object.assign({},ny,Se.genericFontFamilies||{}),ct=null,st=null,un=0;un<on.length;++un)if(We[(ct=of(on[un])).family]&&(ct.family=We[ct.family]),ft.hasOwnProperty(ct.family)){st=ft[ct.family];break}if(!(st=st||ft[xe]))throw new Error("Could not find a font-family for the rule '"+dp(ct)+"' and default family '"+xe+"'.");if(st=(function(Ht,Qt){if(Qt[Ht])return Qt[Ht];var Sn=kf[Ht],Wt=Sn<=kf.normal?-1:1,le=lp(Qt,Ag,Sn,Wt);if(!le)throw new Error("Could not find a matching font-stretch value for "+Ht);return le})(ct.stretch,st),st=(function(Ht,Qt){if(Qt[Ht])return Qt[Ht];for(var Sn=kg[Ht],Wt=0;Wt<Sn.length;++Wt)if(Qt[Sn[Wt]])return Qt[Sn[Wt]];throw new Error("Could not find a matching font-style for "+Ht)})(ct.style,st),!(st=(function(Ht,Qt){if(Qt[Ht])return Qt[Ht];if(Ht===400&&Qt[500])return Qt[500];if(Ht===500&&Qt[400])return Qt[400];var Sn=ty[Ht],Wt=lp(Qt,Cg,Sn,Ht<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+Ht);return Wt})(ct.weight,st)))throw new Error("Failed to resolve a font for the rule '"+dp(ct)+"'.");return st})(Pt,pn);this.pdf.setFont(sn.ref.name,sn.ref.style)}else{var ht="";(Lt==="bold"||parseInt(Lt,10)>=700||xt==="bold")&&(ht="bold"),xt==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var Ot="",Ce={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<vt.length;qe++){if(this.pdf.internal.getFont(vt[qe],ht,{noFallback:!0,disableWarning:!0})!==void 0){Ot=vt[qe];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(vt[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ot=vt[qe],ht="bold";else if(this.pdf.internal.getFont(vt[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ot=vt[qe],ht="normal";break}}if(Ot===""){for(var nt=0;nt<vt.length;nt++)if(Ce[vt[nt]]){Ot=Ce[vt[nt]];break}}Ot=Ot===""?"Times":Ot,this.pdf.setFont(Ot,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};A.prototype.setLineDash=function(C){this.lineDash=C},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){G.call(this,"fill",!1)},A.prototype.stroke=function(){G.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(C,K){if(isNaN(C)||isNaN(K))throw pr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new p(C,K));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new p(C,K)},A.prototype.closePath=function(){var C=new p(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&dr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){C=new p(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(C.x,C.y)},A.prototype.lineTo=function(C,K){if(isNaN(C)||isNaN(K))throw pr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new p(C,K));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new p(Z.x,Z.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},A.prototype.quadraticCurveTo=function(C,K,Z,ce){if(isNaN(Z)||isNaN(ce)||isNaN(C)||isNaN(K))throw pr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new p(Z,ce)),je=this.ctx.transform.applyToPoint(new p(C,K));this.path.push({type:"qct",x1:je.x,y1:je.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new p(oe.x,oe.y)},A.prototype.bezierCurveTo=function(C,K,Z,ce,oe,je){if(isNaN(oe)||isNaN(je)||isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce))throw pr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Fe=this.ctx.transform.applyToPoint(new p(oe,je)),Oe=this.ctx.transform.applyToPoint(new p(C,K)),Ye=this.ctx.transform.applyToPoint(new p(Z,ce));this.path.push({type:"bct",x1:Oe.x,y1:Oe.y,x2:Ye.x,y2:Ye.y,x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new p(Fe.x,Fe.y)},A.prototype.arc=function(C,K,Z,ce,oe,je){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce)||isNaN(oe))throw pr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var Fe=this.ctx.transform.applyToPoint(new p(C,K));C=Fe.x,K=Fe.y;var Oe=this.ctx.transform.applyToPoint(new p(0,Z)),Ye=this.ctx.transform.applyToPoint(new p(0,0));Z=Math.sqrt(Math.pow(Oe.x-Ye.x,2)+Math.pow(Oe.y-Ye.y,2))}Math.abs(oe-ce)>=2*Math.PI&&(ce=0,oe=2*Math.PI),this.path.push({type:"arc",x:C,y:K,radius:Z,startAngle:ce,endAngle:oe,counterclockwise:je})},A.prototype.arcTo=function(C,K,Z,ce,oe){throw new Error("arcTo not implemented.")},A.prototype.rect=function(C,K,Z,ce){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce))throw pr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,K),this.lineTo(C+Z,K),this.lineTo(C+Z,K+ce),this.lineTo(C,K+ce),this.lineTo(C,K),this.lineTo(C+Z,K),this.lineTo(C,K)},A.prototype.fillRect=function(C,K,Z,ce){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce))throw pr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,K,Z,ce),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},A.prototype.strokeRect=function(C,K,Z,ce){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce))throw pr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");$.call(this)||(this.beginPath(),this.rect(C,K,Z,ce),this.stroke())},A.prototype.clearRect=function(C,K,Z,ce){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce))throw pr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,K,Z,ce))},A.prototype.save=function(C){C=typeof C!="boolean"||C;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new j(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},A.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(K),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var R=function(C){var K,Z,ce,oe;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))K=0,Z=0,ce=0,oe=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(je!==null)K=parseInt(je[1]),Z=parseInt(je[2]),ce=parseInt(je[3]),oe=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)K=parseInt(je[1]),Z=parseInt(je[2]),ce=parseInt(je[3]),oe=parseFloat(je[4]);else{if(oe=1,typeof C=="string"&&C.charAt(0)!=="#"){var Fe=new yg(C);C=Fe.ok?Fe.toHex():"#000000"}C.length===4?(K=C.substring(1,2),K+=K,Z=C.substring(2,3),Z+=Z,ce=C.substring(3,4),ce+=ce):(K=C.substring(1,3),Z=C.substring(3,5),ce=C.substring(5,7)),K=parseInt(K,16),Z=parseInt(Z,16),ce=parseInt(ce,16)}}return{r:K,g:Z,b:ce,a:oe,style:C}},w=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},$=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(C,K,Z,ce){if(isNaN(K)||isNaN(Z)||typeof C!="string")throw pr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!w.call(this)){var oe=me(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;H.call(this,{text:C,x:K,y:Z,scale:je,angle:oe,align:this.textAlign,maxWidth:ce})}},A.prototype.strokeText=function(C,K,Z,ce){if(isNaN(K)||isNaN(Z)||typeof C!="string")throw pr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!$.call(this)){ce=isNaN(ce)?void 0:ce;var oe=me(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;H.call(this,{text:C,x:K,y:Z,scale:je,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ce})}},A.prototype.measureText=function(C){if(typeof C!="string")throw pr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Z=this.pdf.internal.scaleFactor,ce=K.internal.getFontSize(),oe=K.getStringUnitWidth(C)*ce/K.internal.scaleFactor;return new function(je){var Fe=(je=je||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Fe}}),this}({width:oe*=Math.round(96*Z/72*1e4)/1e4})},A.prototype.scale=function(C,K){if(isNaN(C)||isNaN(K))throw pr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new g(C,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.rotate=function(C){if(isNaN(C))throw pr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new g(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},A.prototype.translate=function(C,K){if(isNaN(C)||isNaN(K))throw pr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new g(1,0,0,1,C,K);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.transform=function(C,K,Z,ce,oe,je){if(isNaN(C)||isNaN(K)||isNaN(Z)||isNaN(ce)||isNaN(oe)||isNaN(je))throw pr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Fe=new g(C,K,Z,ce,oe,je);this.ctx.transform=this.ctx.transform.multiply(Fe)},A.prototype.setTransform=function(C,K,Z,ce,oe,je){C=isNaN(C)?1:C,K=isNaN(K)?0:K,Z=isNaN(Z)?0:Z,ce=isNaN(ce)?1:ce,oe=isNaN(oe)?0:oe,je=isNaN(je)?0:je,this.ctx.transform=new g(C,K,Z,ce,oe,je)};var F=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(C,K,Z,ce,oe,je,Fe,Oe,Ye){var Te=this.pdf.getImageProperties(C),Qe=1,ot=1,bt=1,X=1;ce!==void 0&&Oe!==void 0&&(bt=Oe/ce,X=Ye/oe,Qe=Te.width/ce*Oe/ce,ot=Te.height/oe*Ye/oe),je===void 0&&(je=K,Fe=Z,K=0,Z=0),ce!==void 0&&Oe===void 0&&(Oe=ce,Ye=oe),ce===void 0&&Oe===void 0&&(Oe=Te.width,Ye=Te.height);var et=this.ctx.transform.decompose(),xt=me(et.rotate.shx),Lt=new g,Ve=(Lt=(Lt=(Lt=Lt.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new m(je-K*bt,Fe-Z*X,ce*Qe,oe*ot));if(this.autoPaging){for(var Mt,yt=D.call(this,Ve),vt=[],Pt=0;Pt<yt.length;Pt+=1)vt.indexOf(yt[Pt])===-1&&vt.push(yt[Pt]);ee(vt);for(var pn=vt[0],sn=vt[vt.length-1],ht=pn;ht<sn+1;ht++){this.pdf.setPage(ht);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ce=ht===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=ht===1?0:qe+(ht-2)*nt;if(this.ctx.clip_path.length!==0){var on=this.path;Mt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Mt,this.posX+this.margin[3],-ft+Ce+this.ctx.prevPageLastElemOffset),fe.call(this,"fill",!0),this.path=on}var Se=JSON.parse(JSON.stringify(Ve));Se=Y([Se],this.posX+this.margin[3],-ft+Ce+this.ctx.prevPageLastElemOffset)[0];var xe=(ht>pn||ht<sn)&&F.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,nt,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Se.x,Se.y,Se.w,Se.h,null,null,xt),xe&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(C,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,xt)};var D=function(C,K,Z){var ce=[];K=K||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":ce.push(Math.floor((C.y+oe)/Z)+1);break;case"arc":ce.push(Math.floor((C.y+oe-C.radius)/Z)+1),ce.push(Math.floor((C.y+oe+C.radius)/Z)+1);break;case"qct":var je=Ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);ce.push(Math.floor((je.y+oe)/Z)+1),ce.push(Math.floor((je.y+je.h+oe)/Z)+1);break;case"bct":var Fe=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);ce.push(Math.floor((Fe.y+oe)/Z)+1),ce.push(Math.floor((Fe.y+Fe.h+oe)/Z)+1);break;case"rect":ce.push(Math.floor((C.y+oe)/Z)+1),ce.push(Math.floor((C.y+C.h+oe)/Z)+1)}for(var Oe=0;Oe<ce.length;Oe+=1)for(;this.pdf.internal.getNumberOfPages()<ce[Oe];)_.call(this);return ce},_=function(){var C=this.fillStyle,K=this.strokeStyle,Z=this.font,ce=this.lineCap,oe=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=K,this.font=Z,this.lineCap=ce,this.lineWidth=oe,this.lineJoin=je},Y=function(C,K,Z){for(var ce=0;ce<C.length;ce++)switch(C[ce].type){case"bct":C[ce].x2+=K,C[ce].y2+=Z;case"qct":C[ce].x1+=K,C[ce].y1+=Z;default:C[ce].x+=K,C[ce].y+=Z}return C},ee=function(C){return C.sort(function(K,Z){return K-Z})},G=function(C,K){var Z=this.fillStyle,ce=this.strokeStyle,oe=this.lineCap,je=this.lineWidth,Fe=Math.abs(je*this.ctx.transform.scaleX),Oe=this.lineJoin;if(this.autoPaging){for(var Ye,Te,Qe=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),bt=[],X=0;X<ot.length;X++)if(ot[X].x!==void 0)for(var et=D.call(this,ot[X]),xt=0;xt<et.length;xt+=1)bt.indexOf(et[xt])===-1&&bt.push(et[xt]);for(var Lt=0;Lt<bt.length;Lt++)for(;this.pdf.internal.getNumberOfPages()<bt[Lt];)_.call(this);ee(bt);for(var Ve=bt[0],Mt=bt[bt.length-1],yt=Ve;yt<Mt+1;yt++){this.pdf.setPage(yt),this.fillStyle=Z,this.strokeStyle=ce,this.lineCap=oe,this.lineWidth=Fe,this.lineJoin=Oe;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=yt===1?this.posY+this.margin[0]:this.margin[0],pn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],sn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=yt===1?0:pn+(yt-2)*sn;if(this.ctx.clip_path.length!==0){var Ot=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Ye,this.posX+this.margin[3],-ht+Pt+this.ctx.prevPageLastElemOffset),fe.call(this,C,!0),this.path=Ot}if(Te=JSON.parse(JSON.stringify(Qe)),this.path=Y(Te,this.posX+this.margin[3],-ht+Pt+this.ctx.prevPageLastElemOffset),K===!1||yt===0){var Ce=(yt>Ve||yt<Mt)&&F.call(this);Ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,sn,null).clip().discardPath()),fe.call(this,C,K),Ce&&this.pdf.restoreGraphicsState()}this.lineWidth=je}this.path=Qe}else this.lineWidth=Fe,fe.call(this,C,K),this.lineWidth=je},fe=function(C,K){if((C!=="stroke"||K||!$.call(this))&&(C==="stroke"||K||!w.call(this))){for(var Z,ce,oe=[],je=this.path,Fe=0;Fe<je.length;Fe++){var Oe=je[Fe];switch(Oe.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Oe,deltas:[],abs:[]});break;case"lt":var Ye=oe.length;if(je[Fe-1]&&!isNaN(je[Fe-1].x)&&(Z=[Oe.x-je[Fe-1].x,Oe.y-je[Fe-1].y],Ye>0)){for(;Ye>=0;Ye--)if(oe[Ye-1].close!==!0&&oe[Ye-1].begin!==!0){oe[Ye-1].deltas.push(Z),oe[Ye-1].abs.push(Oe);break}}break;case"bct":Z=[Oe.x1-je[Fe-1].x,Oe.y1-je[Fe-1].y,Oe.x2-je[Fe-1].x,Oe.y2-je[Fe-1].y,Oe.x-je[Fe-1].x,Oe.y-je[Fe-1].y],oe[oe.length-1].deltas.push(Z);break;case"qct":var Te=je[Fe-1].x+2/3*(Oe.x1-je[Fe-1].x),Qe=je[Fe-1].y+2/3*(Oe.y1-je[Fe-1].y),ot=Oe.x+2/3*(Oe.x1-Oe.x),bt=Oe.y+2/3*(Oe.y1-Oe.y),X=Oe.x,et=Oe.y;Z=[Te-je[Fe-1].x,Qe-je[Fe-1].y,ot-je[Fe-1].x,bt-je[Fe-1].y,X-je[Fe-1].x,et-je[Fe-1].y],oe[oe.length-1].deltas.push(Z);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Oe)}}ce=K?null:C==="stroke"?"stroke":"fill";for(var xt=!1,Lt=0;Lt<oe.length;Lt++)if(oe[Lt].arc)for(var Ve=oe[Lt].abs,Mt=0;Mt<Ve.length;Mt++){var yt=Ve[Mt];yt.type==="arc"?ge.call(this,yt.x,yt.y,yt.radius,yt.startAngle,yt.endAngle,yt.counterclockwise,void 0,K,!xt):de.call(this,yt.x,yt.y),xt=!0}else if(oe[Lt].close===!0)this.pdf.internal.out("h"),xt=!1;else if(oe[Lt].begin!==!0){var vt=oe[Lt].start.x,Pt=oe[Lt].start.y;ie.call(this,oe[Lt].deltas,vt,Pt),xt=!0}ce&&te.call(this,ce),K&&ye.call(this)}},he=function(C){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-Z;case"top":return C+K-Z;case"hanging":return C+K-2*Z;case"middle":return C+K/2-Z;default:return C}},Be=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(K,Z){this.colorStops.push([K,Z])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ge=function(C,K,Z,ce,oe,je,Fe,Oe,Ye){for(var Te=Me.call(this,Z,ce,oe,je),Qe=0;Qe<Te.length;Qe++){var ot=Te[Qe];Qe===0&&(Ye?z.call(this,ot.x1+C,ot.y1+K):de.call(this,ot.x1+C,ot.y1+K)),ke.call(this,C,K,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Oe?ye.call(this):te.call(this,Fe)},te=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ye=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(C,K){this.pdf.internal.out(r(C)+" "+o(K)+" m")},H=function(C){var K;switch(C.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var Z,ce,oe,je=this.pdf.getTextDimensions(C.text),Fe=he.call(this,C.y),Oe=Be.call(this,Fe)-je.h,Ye=this.ctx.transform.applyToPoint(new p(C.x,Fe));if(this.autoPaging){var Te=this.ctx.transform.decompose(),Qe=new g;Qe=(Qe=(Qe=Qe.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale);for(var ot=this.ctx.transform.applyToRectangle(new m(C.x,Fe,je.w,je.h)),bt=Qe.applyToRectangle(new m(C.x,Oe,je.w,je.h)),X=D.call(this,bt),et=[],xt=0;xt<X.length;xt+=1)et.indexOf(X[xt])===-1&&et.push(X[xt]);ee(et);for(var Lt=et[0],Ve=et[et.length-1],Mt=Lt;Mt<Ve+1;Mt++){this.pdf.setPage(Mt);var yt=Mt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[2],pn=Pt-this.margin[0],sn=this.pdf.internal.pageSize.width-this.margin[1],ht=sn-this.margin[3],Ot=Mt===1?0:vt+(Mt-2)*pn;if(this.ctx.clip_path.length!==0){var Ce=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Z,this.posX+this.margin[3],-1*Ot+yt),fe.call(this,"fill",!0),this.path=Ce}var qe=Y([JSON.parse(JSON.stringify(bt))],this.posX+this.margin[3],-Ot+yt+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*C.scale),oe=this.lineWidth,this.lineWidth=oe*C.scale);var nt=this.autoPaging!=="text";if(nt||qe.y+qe.h<=Pt){if(nt||qe.y>=yt&&qe.x<=sn){var ft=nt?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||sn-qe.x)[0],on=Y([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Ot+yt+this.ctx.prevPageLastElemOffset)[0],Se=nt&&(Mt>Lt||Mt<Ve)&&F.call(this);Se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,pn,null).clip().discardPath()),this.pdf.text(ft,on.x,on.y,{angle:C.angle,align:K,renderingMode:C.renderingMode}),Se&&this.pdf.restoreGraphicsState()}}else qe.y<Pt&&(this.ctx.prevPageLastElemOffset+=Pt-qe.y);C.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=oe)}}else C.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*C.scale),oe=this.lineWidth,this.lineWidth=oe*C.scale),this.pdf.text(C.text,Ye.x+this.posX,Ye.y+this.posY,{angle:C.angle,align:K,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=oe)},de=function(C,K,Z,ce){Z=Z||0,ce=ce||0,this.pdf.internal.out(r(C+Z)+" "+o(K+ce)+" l")},ie=function(C,K,Z){return this.pdf.lines(C,K,Z,null,null)},ke=function(C,K,Z,ce,oe,je,Fe,Oe){this.pdf.internal.out([a(d(Z+C)),a(c(ce+K)),a(d(oe+C)),a(c(je+K)),a(d(Fe+C)),a(c(Oe+K)),"c"].join(" "))},Me=function(C,K,Z,ce){for(var oe=2*Math.PI,je=Math.PI/2;K>Z;)K-=oe;var Fe=Math.abs(Z-K);Fe<oe&&ce&&(Fe=oe-Fe);for(var Oe=[],Ye=ce?-1:1,Te=K;Fe>1e-5;){var Qe=Te+Ye*Math.min(Fe,je);Oe.push(Ee.call(this,C,Te,Qe)),Fe-=Math.abs(Qe-Te),Te=Qe}return Oe},Ee=function(C,K,Z){var ce=(Z-K)/2,oe=C*Math.cos(ce),je=C*Math.sin(ce),Fe=oe,Oe=-je,Ye=Fe*Fe+Oe*Oe,Te=Ye+Fe*oe+Oe*je,Qe=4/3*(Math.sqrt(2*Ye*Te)-Te)/(Fe*je-Oe*oe),ot=Fe-Qe*Oe,bt=Oe+Qe*Fe,X=ot,et=-bt,xt=ce+K,Lt=Math.cos(xt),Ve=Math.sin(xt);return{x1:C*Math.cos(K),y1:C*Math.sin(K),x2:ot*Lt-bt*Ve,y2:ot*Ve+bt*Lt,x3:X*Lt-et*Ve,y3:X*Ve+et*Lt,x4:C*Math.cos(Z),y4:C*Math.sin(Z)}},me=function(C){return 180*C/Math.PI},Ie=function(C,K,Z,ce,oe,je){var Fe=C+.5*(Z-C),Oe=K+.5*(ce-K),Ye=oe+.5*(Z-oe),Te=je+.5*(ce-je),Qe=Math.min(C,oe,Fe,Ye),ot=Math.max(C,oe,Fe,Ye),bt=Math.min(K,je,Oe,Te),X=Math.max(K,je,Oe,Te);return new m(Qe,bt,ot-Qe,X-bt)},Ue=function(C,K,Z,ce,oe,je,Fe,Oe){var Ye,Te,Qe,ot,bt,X,et,xt,Lt,Ve,Mt,yt,vt,Pt,pn=Z-C,sn=ce-K,ht=oe-Z,Ot=je-ce,Ce=Fe-oe,qe=Oe-je;for(Te=0;Te<41;Te++)Lt=(et=(Qe=C+(Ye=Te/40)*pn)+Ye*((bt=Z+Ye*ht)-Qe))+Ye*(bt+Ye*(oe+Ye*Ce-bt)-et),Ve=(xt=(ot=K+Ye*sn)+Ye*((X=ce+Ye*Ot)-ot))+Ye*(X+Ye*(je+Ye*qe-X)-xt),Te==0?(Mt=Lt,yt=Ve,vt=Lt,Pt=Ve):(Mt=Math.min(Mt,Lt),yt=Math.min(yt,Ve),vt=Math.max(vt,Lt),Pt=Math.max(Pt,Ve));return new m(Math.round(Mt),Math.round(yt),Math.round(vt-Mt),Math.round(Pt-yt))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,K,Z=(C=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:K}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Gt.API),(function(s){var a=function(p){var m,g,v,j,A,R,w,$,F,D;for(g=[],v=0,j=(p+=m="\0\0\0\0".slice(p.length%4||4)).length;j>v;v+=4)(A=(p.charCodeAt(v)<<24)+(p.charCodeAt(v+1)<<16)+(p.charCodeAt(v+2)<<8)+p.charCodeAt(v+3))!==0?(R=(A=((A=((A=((A=(A-(D=A%85))/85)-(F=A%85))/85)-($=A%85))/85)-(w=A%85))/85)%85,g.push(R+33,w+33,$+33,F+33,D+33)):g.push(122);return(function(_,Y){for(var ee=Y;ee>0;ee--)_.pop()})(g,m.length),String.fromCharCode.apply(String,g)+"~>"},r=function(p){var m,g,v,j,A,R=String,w="length",$=255,F="charCodeAt",D="slice",_="replace";for(p[D](-2),p=p[D](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),v=[],j=0,A=(p+=m="uuuuu"[D](p[w]%5||5))[w];A>j;j+=5)g=52200625*(p[F](j)-33)+614125*(p[F](j+1)-33)+7225*(p[F](j+2)-33)+85*(p[F](j+3)-33)+(p[F](j+4)-33),v.push($&g>>24,$&g>>16,$&g>>8,$&g);return(function(Y,ee){for(var G=ee;G>0;G--)Y.pop()})(v,m[w]),R.fromCharCode.apply(R,v)},o=function(p){return p.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">"},d=function(p){var m=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((p=p.replace(/\s/g,"")).indexOf(">")!==-1&&(p=p.substr(0,p.indexOf(">"))),p.length%2&&(p+="0"),m.test(p)===!1)return"";for(var g="",v=0;v<p.length;v+=2)g+=String.fromCharCode("0x"+(p[v]+p[v+1]));return g},c=function(p){for(var m=new Uint8Array(p.length),g=p.length;g--;)m[g]=p.charCodeAt(g);return(m=yf(m)).reduce(function(v,j){return v+String.fromCharCode(j)},"")};s.processDataByFilters=function(p,m){var g=0,v=p||"",j=[];for(typeof(m=m||[])=="string"&&(m=[m]),g=0;g<m.length;g+=1)switch(m[g]){case"ASCII85Decode":case"/ASCII85Decode":v=r(v),j.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=a(v),j.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=d(v),j.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=o(v),j.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=c(v),j.push("/FlateDecode");break;default:throw new Error('The filter: "'+m[g]+'" is not implemented')}return{data:v,reverseChain:j.reverse().join(" ")}}})(Gt.API),(function(s){s.loadFile=function(a,r,o){return(function(d,c,p){c=c!==!1,p=typeof p=="function"?p:function(){};var m=void 0;try{m=(function(g,v,j){var A=new XMLHttpRequest,R=0,w=function($){var F=$.length,D=[],_=String.fromCharCode;for(R=0;R<F;R+=1)D.push(_(255&$.charCodeAt(R)));return D.join("")};if(A.open("GET",g,!v),A.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(A.onload=function(){A.status===200?j(w(this.responseText)):j(void 0)}),A.send(null),v&&A.status===200)return w(A.responseText)})(d,c,p)}catch{}return m})(a,r,o)},s.loadImageFile=s.loadFile})(Gt.API),(function(s){function a(){return(cn.html2canvas?Promise.resolve(cn.html2canvas):qu(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load html2canvas: "+m))}).then(function(m){return m.default?m.default:m})}function r(){return(cn.DOMPurify?Promise.resolve(cn.DOMPurify):qu(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load dompurify: "+m))}).then(function(m){return m.default?m.default:m})}var o=function(m){var g=dr(m);return g==="undefined"?"undefined":g==="string"||m instanceof String?"string":g==="number"||m instanceof Number?"number":g==="function"||m instanceof Function?"function":m&&m.constructor===Array?"array":m&&m.nodeType===1?"element":g==="object"?"object":"unknown"},d=function(m,g){var v=document.createElement(m);for(var j in g.className&&(v.className=g.className),g.innerHTML&&g.dompurify&&(v.innerHTML=g.dompurify.sanitize(g.innerHTML)),g.style)v.style[j]=g.style[j];return v},c=function m(g,v){for(var j=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),A=g.firstChild;A;A=A.nextSibling)v!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||j.appendChild(m(A,v));return g.nodeType===1&&(g.nodeName==="CANVAS"?(j.width=g.width,j.height=g.height,j.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(j.value=g.value),j.addEventListener("load",function(){j.scrollTop=g.scrollTop,j.scrollLeft=g.scrollLeft},!0)),j},p=function m(g){var v=Object.assign(m.convert(Promise.resolve()),JSON.parse(JSON.stringify(m.template))),j=m.convert(Promise.resolve(),v);return(j=j.setProgress(1,m,1,[m])).set(g)};(p.prototype=Object.create(Promise.prototype)).constructor=p,p.convert=function(m,g){return m.__proto__=g||p.prototype,m},p.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},p.prototype.from=function(m,g){return this.then(function(){switch(g=g||(function(v){switch(o(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(m),g){case"string":return this.then(r).then(function(v){return this.set({src:d("div",{innerHTML:m,dompurify:v})})});case"element":return this.set({src:m});case"canvas":return this.set({canvas:m});case"img":return this.set({img:m});default:return this.error("Unknown source type.")}})},p.prototype.to=function(m){switch(m){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},p.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var m={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},g=c(this.prop.src,this.opt.html2canvas.javascriptEnabled);g.tagName==="BODY"&&(m.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=d("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=d("div",{className:"html2pdf__container",style:m}),this.prop.container.appendChild(g),this.prop.container.firstChild.appendChild(d("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},p.prototype.toCanvas=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(a).then(function(g){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,g(this.prop.container,v)}).then(function(g){(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},p.prototype.toContext2d=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(a).then(function(g){var v=this.opt.jsPDF,j=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,R=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete R.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=j,j)for(var w=0;w<j.length;++w){var $=j[w],F=$.src.find(function(D){return D.format==="truetype"});F&&v.addFont(F.url,$.ref.name,$.ref.style)}return R.windowHeight=R.windowHeight||0,R.windowHeight=R.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):R.windowHeight,v.context2d.save(!0),g(this.prop.container,R)}).then(function(g){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},p.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var m=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=m})},p.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},p.prototype.output=function(m,g,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(m,g):this.outputPdf(m,g)},p.prototype.outputPdf=function(m,g){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(m,g)})},p.prototype.outputImg=function(m){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(m){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+m+'" is not supported.'}})},p.prototype.save=function(m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(m?{filename:m}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},p.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},p.prototype.set=function(m){if(o(m)!=="object")return this;var g=Object.keys(m||{}).map(function(v){if(v in p.template.prop)return function(){this.prop[v]=m[v]};switch(v){case"margin":return this.setMargin.bind(this,m.margin);case"jsPDF":return function(){return this.opt.jsPDF=m.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,m.pageSize);default:return function(){this.opt[v]=m[v]}}},this);return this.then(function(){return this.thenList(g)})},p.prototype.get=function(m,g){return this.then(function(){var v=m in p.template.prop?this.prop[m]:this.opt[m];return g?g(v):v})},p.prototype.setMargin=function(m){return this.then(function(){switch(o(m)){case"number":m=[m,m,m,m];case"array":if(m.length===2&&(m=[m[0],m[1],m[0],m[1]]),m.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=m}).then(this.setPageSize)},p.prototype.setPageSize=function(m){function g(v,j){return Math.floor(v*j/72*96)}return this.then(function(){(m=m||Gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(m.inner={width:m.width-this.opt.margin[1]-this.opt.margin[3],height:m.height-this.opt.margin[0]-this.opt.margin[2]},m.inner.px={width:g(m.inner.width,m.k),height:g(m.inner.height,m.k)},m.inner.ratio=m.inner.height/m.inner.width),this.prop.pageSize=m})},p.prototype.setProgress=function(m,g,v,j){return m!=null&&(this.progress.val=m),g!=null&&(this.progress.state=g),v!=null&&(this.progress.n=v),j!=null&&(this.progress.stack=j),this.progress.ratio=this.progress.val/this.progress.state,this},p.prototype.updateProgress=function(m,g,v,j){return this.setProgress(m?this.progress.val+m:null,g||null,v?this.progress.n+v:null,j?this.progress.stack.concat(j):null)},p.prototype.then=function(m,g){var v=this;return this.thenCore(m,g,function(j,A){return v.updateProgress(null,null,1,[j]),Promise.prototype.then.call(this,function(R){return v.updateProgress(null,j),R}).then(j,A).then(function(R){return v.updateProgress(1),R})})},p.prototype.thenCore=function(m,g,v){v=v||Promise.prototype.then;var j=this;m&&(m=m.bind(j)),g&&(g=g.bind(j));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?j:p.convert(Object.assign({},j),Promise.prototype),R=v.call(A,m,g);return p.convert(R,j.__proto__)},p.prototype.thenExternal=function(m,g){return Promise.prototype.then.call(this,m,g)},p.prototype.thenList=function(m){var g=this;return m.forEach(function(v){g=g.thenCore(v)}),g},p.prototype.catch=function(m){m&&(m=m.bind(this));var g=Promise.prototype.catch.call(this,m);return p.convert(g,this)},p.prototype.catchExternal=function(m){return Promise.prototype.catch.call(this,m)},p.prototype.error=function(m){return this.then(function(){throw new Error(m)})},p.prototype.using=p.prototype.set,p.prototype.saveAs=p.prototype.save,p.prototype.export=p.prototype.output,p.prototype.run=p.prototype.then,Gt.getPageSize=function(m,g,v){if(dr(m)==="object"){var j=m;m=j.orientation,g=j.unit||g,v=j.format||v}g=g||"mm",v=v||"a4",m=(""+(m||"P")).toLowerCase();var A,R=(""+v).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(g){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+g}var $,F=0,D=0;if(w.hasOwnProperty(R))F=w[R][1]/A,D=w[R][0]/A;else try{F=v[1],D=v[0]}catch{throw new Error("Invalid format: "+v)}if(m==="p"||m==="portrait")m="p",D>F&&($=D,D=F,F=$);else{if(m!=="l"&&m!=="landscape")throw"Invalid orientation: "+m;m="l",F>D&&($=D,D=F,F=$)}return{width:D,height:F,unit:g,k:A,orientation:m}},s.html=function(m,g){(g=g||{}).callback=g.callback||function(){},g.html2canvas=g.html2canvas||{},g.html2canvas.canvas=g.html2canvas.canvas||this.canvas,g.jsPDF=g.jsPDF||this,g.fontFaces=g.fontFaces?g.fontFaces.map(of):null;var v=new p(g);return g.worker?v:v.from(m).doCallback()}})(Gt.API),Gt.API.addJS=function(s){return hp=s,this.internal.events.subscribe("postPutResources",function(){Rd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rd!==void 0&&fp!==void 0&&this.internal.out("/Names <</JavaScript "+Rd+" 0 R>>")}),this},(function(s){var a;s.events.push(["postPutResources",function(){var r=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var d=r.outline.render().split(/\r\n/),c=0;c<d.length;c++){var p=d[c],m=o.exec(p);if(m!=null){var g=m[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(p)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,j=[];for(c=0;c<v;c++){var A=r.internal.newObject();j.push(A);var R=r.internal.getPageInfo(c+1);r.internal.write("<< /D["+R.objId+" 0 R /XYZ null null null]>> endobj")}var w=r.internal.newObject();for(r.internal.write("<< /Names [ "),c=0;c<j.length;c++)r.internal.write("(page_"+(c+1)+")"+j[c]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+w+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+a+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(o,d,c){var p={title:d,options:c,children:[]};return o==null&&(o=this.root),o.children.push(p),p},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(o){o.id=r.internal.newObjectDeferred();for(var d=0;d<o.children.length;d++)this.genIds_r(o.children[d])},r.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},r.outline.renderItems=function(o){for(var d=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<o.children.length;c++){var p=o.children[c];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(o)),c>0&&this.line("/Prev "+this.makeRef(o.children[c-1])),c<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[c+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var m=this.count=this.count_r({count:0},p);if(m>0&&this.line("/Count "+m),p.options&&p.options.pageNumber){var g=r.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+d(0)+" 0]")}this.objEnd()}for(var v=0;v<o.children.length;v++)this.renderItems(o.children[v])},r.outline.line=function(o){this.ctx.val+=o+`\r
`},r.outline.makeRef=function(o){return o.id+" 0 R"},r.outline.makeString=function(o){return"("+r.internal.pdfEscape(o)+")"},r.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(o,d){for(var c=0;c<d.children.length;c++)o.count++,this.count_r(o,d.children[c]);return o.count}}])})(Gt.API),(function(s){var a=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,o,d,c,p,m){var g,v=this.decode.DCT_DECODE,j=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=p||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,g=(function(A){for(var R,w=256*A.charCodeAt(4)+A.charCodeAt(5),$=A.length,F={width:0,height:0,numcomponents:1},D=4;D<$;D+=2){if(D+=w,a.indexOf(A.charCodeAt(D+1))!==-1){R=256*A.charCodeAt(D+5)+A.charCodeAt(D+6),F={width:256*A.charCodeAt(D+7)+A.charCodeAt(D+8),height:R,numcomponents:A.charCodeAt(D+9)};break}w=256*A.charCodeAt(D+2)+A.charCodeAt(D+3)}return F})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),g.numcomponents){case 1:m=this.color_spaces.DEVICE_GRAY;break;case 4:m=this.color_spaces.DEVICE_CMYK;break;case 3:m=this.color_spaces.DEVICE_RGB}j={data:r,width:g.width,height:g.height,colorSpace:m,bitsPerComponent:8,filter:v,index:o,alias:d}}return j}})(Gt.API),Gt.API.processPNG=function(s,a,r,o){if(this.__addimage__.isArrayBuffer(s)&&(s=new Uint8Array(s)),this.__addimage__.isArrayBufferView(s)){var d,c=Ux(s,{checkCrc:!0}),p=c.width,m=c.height,g=c.channels,v=c.palette,j=c.depth;d=v&&g===1?(function(ge){for(var te=ge.width,ye=ge.height,z=ge.data,H=ge.palette,de=ge.depth,ie=!1,ke=[],Me=[],Ee=void 0,me=!1,Ie=0,Ue=0;Ue<H.length;Ue++){var se=xm(H[Ue],4),C=se[0],K=se[1],Z=se[2],ce=se[3];ke.push(C,K,Z),ce!=null&&(ce===0?(Ie++,Me.length<1&&Me.push(Ue)):ce<255&&(me=!0))}if(me||Ie>1){ie=!0,Me=void 0;var oe=te*ye;Ee=new Uint8Array(oe);for(var je=new DataView(z.buffer),Fe=0;Fe<oe;Fe++){var Oe=cf(je,Fe,de),Ye=xm(H[Oe],4)[3];Ee[Fe]=Ye}}else Ie===0&&(Me=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:z,alphaBytes:Ee,needSMask:ie,palette:ke,mask:Me}})(c):g===2||g===4?(function(ge){for(var te=ge.data,ye=ge.width,z=ge.height,H=ge.channels,de=ge.depth,ie=H===2?"DeviceGray":"DeviceRGB",ke=H-1,Me=ye*z,Ee=ke,me=Me*Ee,Ie=1*Me,Ue=Math.ceil(me*de/8),se=Math.ceil(Ie*de/8),C=new Uint8Array(Ue),K=new Uint8Array(se),Z=new DataView(te.buffer),ce=new DataView(C.buffer),oe=new DataView(K.buffer),je=!1,Fe=0;Fe<Me;Fe++){for(var Oe=Fe*H,Ye=0;Ye<Ee;Ye++)jp(ce,cf(Z,Oe+Ye,de),Fe*Ee+Ye,de);var Te=cf(Z,Oe+Ee,de);Te<(1<<de)-1&&(je=!0),jp(oe,Te,1*Fe,de)}return{colorSpace:ie,colorsPerPixel:ke,sMaskBitsPerComponent:je?de:void 0,colorBytes:C,alphaBytes:K,needSMask:je}})(c):(function(ge){var te=ge.data,ye=ge.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ye,colorsPerPixel:ye==="DeviceGray"?1:3,colorBytes:te instanceof Uint16Array?(function(z){for(var H=z.length,de=new Uint8Array(2*H),ie=new DataView(de.buffer,de.byteOffset,de.byteLength),ke=0;ke<H;ke++)ie.setUint16(2*ke,z[ke],!1);return de})(te):te,needSMask:!1}})(c);var A,R,w,$=d,F=$.colorSpace,D=$.colorsPerPixel,_=$.sMaskBitsPerComponent,Y=$.colorBytes,ee=$.alphaBytes,G=$.needSMask,fe=$.palette,he=$.mask,Be=null;return o!==Gt.API.image_compression.NONE&&typeof yf=="function"?(Be=(function(ge){var te;switch(ge){case Gt.API.image_compression.FAST:te=11;break;case Gt.API.image_compression.MEDIUM:te=13;break;case Gt.API.image_compression.SLOW:te=14;break;default:te=12}return te})(o),A=this.decode.FLATE_DECODE,R="/Predictor ".concat(Be," /Colors ").concat(D," /BitsPerComponent ").concat(j," /Columns ").concat(p),s=xp(Y,Math.ceil(p*D*j/8),D,j,o),G&&(w=xp(ee,Math.ceil(p*_/8),1,_,o))):(A=void 0,R=void 0,s=Y,G&&(w=ee)),(this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s))&&(s=this.__addimage__.arrayBufferToBinaryString(s)),(w&&this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),{alias:r,data:s,index:a,filter:A,decodeParameters:R,transparency:he,palette:fe,sMask:w,predictor:Be,width:p,height:m,bitsPerComponent:j,sMaskBitsPerComponent:_,colorSpace:F}}},(function(s){s.processGIF89A=function(a,r,o,d){var c=new ly(a),p=c.width,m=c.height,g=[];c.decodeAndBlitFrameRGBA(0,g);var v={data:g,width:p,height:m},j=new df(100).encode(v,100);return s.processJPEG.call(this,j,r,o,d)},s.processGIF87A=s.processGIF89A})(Gt.API),vo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var a=0;a<s;a++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:d,green:o,blue:r,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vo.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[s]()}catch(r){pr.log("bit decode error:"+r)}},vo.prototype.bit1=function(){var s,a=Math.ceil(this.width/8),r=a%4;for(s=this.height-1;s>=0;s--){for(var o=this.bottom_up?s:this.height-1-s,d=0;d<a;d++)for(var c=this.datav.getUint8(this.pos++,!0),p=o*this.width*4+8*d*4,m=0;m<8&&8*d+m<this.width;m++){var g=this.palette[c>>7-m&1];this.data[p+4*m]=g.blue,this.data[p+4*m+1]=g.green,this.data[p+4*m+2]=g.red,this.data[p+4*m+3]=255}r!==0&&(this.pos+=4-r)}},vo.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),a=s%4,r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,d=0;d<s;d++){var c=this.datav.getUint8(this.pos++,!0),p=o*this.width*4+2*d*4,m=c>>4,g=15&c,v=this.palette[m];if(this.data[p]=v.blue,this.data[p+1]=v.green,this.data[p+2]=v.red,this.data[p+3]=255,2*d+1>=this.width)break;v=this.palette[g],this.data[p+4]=v.blue,this.data[p+4+1]=v.green,this.data[p+4+2]=v.red,this.data[p+4+3]=255}a!==0&&(this.pos+=4-a)}},vo.prototype.bit8=function(){for(var s=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,o=0;o<this.width;o++){var d=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*o;if(d<this.palette.length){var p=this.palette[d];this.data[c]=p.red,this.data[c+1]=p.green,this.data[c+2]=p.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}s!==0&&(this.pos+=4-s)}},vo.prototype.bit15=function(){for(var s=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,d=0;d<this.width;d++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(c&a)/a*255|0,m=(c>>5&a)/a*255|0,g=(c>>10&a)/a*255|0,v=c>>15?255:0,j=o*this.width*4+4*d;this.data[j]=g,this.data[j+1]=m,this.data[j+2]=p,this.data[j+3]=v}this.pos+=s}},vo.prototype.bit16=function(){for(var s=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var d=this.bottom_up?o:this.height-1-o,c=0;c<this.width;c++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(p&a)/a*255|0,g=(p>>5&r)/r*255|0,v=(p>>11)/a*255|0,j=d*this.width*4+4*c;this.data[j]=v,this.data[j+1]=g,this.data[j+2]=m,this.data[j+3]=255}this.pos+=s}},vo.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=a*this.width*4+4*r;this.data[p]=c,this.data[p+1]=d,this.data[p+2]=o,this.data[p+3]=255}this.pos+=this.width%4}},vo.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var a=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+4*r;this.data[m]=c,this.data[m+1]=d,this.data[m+2]=o,this.data[m+3]=p}},vo.prototype.getData=function(){return this.data},(function(s){s.processBMP=function(a,r,o,d){var c=new vo(a,!1),p=c.width,m=c.height,g={data:c.getData(),width:p,height:m},v=new df(100).encode(g,100);return s.processJPEG.call(this,v,r,o,d)}})(Gt.API),Sp.prototype.getData=function(){return this.data},(function(s){s.processWEBP=function(a,r,o,d){var c=new Sp(a),p=c.width,m=c.height,g={data:c.getData(),width:p,height:m},v=new df(100).encode(g,100);return s.processJPEG.call(this,v,r,o,d)}})(Gt.API),Gt.API.processRGBA=function(s,a,r){for(var o=s.data,d=o.length,c=new Uint8Array(d/4*3),p=new Uint8Array(d/4),m=0,g=0,v=0;v<d;v+=4){var j=o[v],A=o[v+1],R=o[v+2],w=o[v+3];c[m++]=j,c[m++]=A,c[m++]=R,p[g++]=w}var $=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:$,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Gt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},xc=Gt.API,Td=xc.getCharWidthsArray=function(s,a){var r,o,d=(a=a||{}).font||this.internal.getFont(),c=a.fontSize||this.internal.getFontSize(),p=a.charSpace||this.internal.getCharSpace(),m=a.widths?a.widths:d.metadata.Unicode.widths,g=m.fof?m.fof:1,v=a.kerning?a.kerning:d.metadata.Unicode.kerning,j=v.fof?v.fof:1,A=a.doKerning!==!1,R=0,w=s.length,$=0,F=m[0]||g,D=[];for(r=0;r<w;r++)o=s.charCodeAt(r),typeof d.metadata.widthOfString=="function"?D.push((d.metadata.widthOfGlyph(d.metadata.characterToGlyph(o))+p*(1e3/c)||0)/1e3):(R=A&&dr(v[o])==="object"&&!isNaN(parseInt(v[o][$],10))?v[o][$]/j:0,D.push((m[o]||F)/g+R)),$=o;return D},mp=xc.getStringUnitWidth=function(s,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),o=a.font||this.internal.getFont(),d=a.charSpace||this.internal.getCharSpace();return xc.processArabic&&(s=xc.processArabic(s)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(s,r,d)/r:Td.apply(this,arguments).reduce(function(c,p){return c+p},0)},pp=function(s,a,r,o){for(var d=[],c=0,p=s.length,m=0;c!==p&&m+a[c]<r;)m+=a[c],c++;d.push(s.slice(0,c));var g=c;for(m=0;c!==p;)m+a[c]>o&&(d.push(s.slice(g,c)),m=0,g=c),m+=a[c],c++;return g!==c&&d.push(s.slice(g,c)),d},gp=function(s,a,r){r||(r={});var o,d,c,p,m,g,v,j=[],A=[j],R=r.textIndent||0,w=0,$=0,F=s.split(" "),D=Td.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?F[0].length+2:r.lineIndent||0){var _=Array(g).join(" "),Y=[];F.map(function(G){(G=G.split(/\s*\n/)).length>1?Y=Y.concat(G.map(function(fe,he){return(he&&fe.length?`
`:"")+fe})):Y.push(G[0])}),F=Y,g=mp.apply(this,[_,r])}for(c=0,p=F.length;c<p;c++){var ee=0;if(o=F[c],g&&o[0]==`
`&&(o=o.substr(1),ee=1),R+w+($=(d=Td.apply(this,[o,r])).reduce(function(G,fe){return G+fe},0))>a||ee){if($>a){for(m=pp.apply(this,[o,d,a-(R+w),a]),j.push(m.shift()),j=[m.pop()];m.length;)A.push([m.shift()]);$=d.slice(o.length-(j[0]?j[0].length:0)).reduce(function(G,fe){return G+fe},0)}else j=[o];A.push(j),R=$+g,w=D}else j.push(o),R+=w+$,w=D}return v=g?function(G,fe){return(fe?_:"")+G.join(" ")}:function(G){return G.join(" ")},A.map(v)},xc.splitTextToSize=function(s,a,r){var o,d=(r=r||{}).fontSize||this.internal.getFontSize(),c=(function(j){if(j.widths&&j.kerning)return{widths:j.widths,kerning:j.kerning};var A=this.internal.getFont(j.fontName,j.fontStyle),R="Unicode";return A.metadata[R]?{widths:A.metadata[R].widths||{0:1},kerning:A.metadata[R].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);o=Array.isArray(s)?s:String(s).split(/\r?\n/);var p=1*this.internal.scaleFactor*a/d;c.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/d:0,c.lineIndent=r.lineIndent;var m,g,v=[];for(m=0,g=o.length;m<g;m++)v=v.concat(gp.apply(this,[o[m],p,c]));return v},(function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var a="0123456789abcdef",r="klmnopqrstuvwxyz",o={},d={},c=0;c<16;c++)o[r[c]]=a[c],d[a[c]]=r[c];var p=function(R){return"0x"+parseInt(R,10).toString(16)},m=s.__fontmetrics__.compress=function(R){var w,$,F,D,_=["{"];for(var Y in R){if(w=R[Y],isNaN(parseInt(Y,10))?$="'"+Y+"'":(Y=parseInt(Y,10),$=($=p(Y).slice(2)).slice(0,-1)+d[$.slice(-1)]),typeof w=="number")w<0?(F=p(w).slice(3),D="-"):(F=p(w).slice(2),D=""),F=D+F.slice(0,-1)+d[F.slice(-1)];else{if(dr(w)!=="object")throw new Error("Don't know what to do with value type "+dr(w)+".");F=m(w)}_.push($+F)}return _.push("}"),_.join("")},g=s.__fontmetrics__.uncompress=function(R){if(typeof R!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,$,F,D,_={},Y=1,ee=_,G=[],fe="",he="",Be=R.length-1,ge=1;ge<Be;ge+=1)(D=R[ge])=="'"?w?(F=w.join(""),w=void 0):w=[]:w?w.push(D):D=="{"?(G.push([ee,F]),ee={},F=void 0):D=="}"?(($=G.pop())[0][$[1]]=ee,F=void 0,ee=$[0]):D=="-"?Y=-1:F===void 0?o.hasOwnProperty(D)?(fe+=o[D],F=parseInt(fe,16)*Y,Y=1,fe=""):fe+=D:o.hasOwnProperty(D)?(he+=o[D],ee[F]=parseInt(he,16)*Y,Y=1,F=void 0,he=""):he+=D;return _},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:g("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},j={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},A={Unicode:{"Courier-Oblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":g("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":g("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:g("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:g("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":g("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":g("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(R){var w=R.font,$=A.Unicode[w.postScriptName];$&&(w.metadata.Unicode={},w.metadata.Unicode.widths=$.widths,w.metadata.Unicode.kerning=$.kerning);var F=j.Unicode[w.postScriptName];F&&(w.metadata.Unicode.encoding=F,w.encoding=F.codePages[0])}])})(Gt.API),(function(s){var a=function(r){for(var o=r.length,d=new Uint8Array(o),c=0;c<o;c++)d[c]=r.charCodeAt(c);return d};s.API.events.push(["addFont",function(r){var o=void 0,d=r.font,c=r.instance;if(!d.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");if(typeof(o=c.existsFileInVFS(d.postScriptName)===!1?c.loadFile(d.postScriptName):c.getFileFromVFS(d.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");(function(p,m){m=/^\x00\x01\x00\x00/.test(m)?a(m):a(zd(m)),p.metadata=s.API.TTFFont.open(m),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(d,o)}}])})(Gt),Gt.API.addSvgAsImage=function(s,a,r,o,d,c,p,m){if(isNaN(a)||isNaN(r))throw pr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(d))throw pr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=d;var v=g.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,g.width,g.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(cn.canvg?Promise.resolve(cn.canvg):qu(()=>import("./index.es-CKCpUFLv.js"),[])).catch(function(R){return Promise.reject(new Error("Could not load canvg: "+R))}).then(function(R){return R.default?R.default:R}).then(function(R){return R.fromString(v,s,j)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(j)}).then(function(){A.addImage(g.toDataURL("image/jpeg",1),a,r,o,d,p,m)})},Gt.API.putTotalPages=function(s){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var d=0;d<this.internal.pages[o].length;d++)this.internal.pages[o][d]=this.internal.pages[o][d].replace(a,r);return this},Gt.API.viewerPreferences=function(s,a){var r;s=s||{},a=a||!1;var o,d,c,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},m=Object.keys(p),g=[],v=0,j=0,A=0;function R($,F){var D,_=!1;for(D=0;D<$.length;D+=1)$[D]===F&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||a===!0){var w=m.length;for(A=0;A<w;A+=1)r[m[A]].value=r[m[A]].defaultValue,r[m[A]].explicitSet=!1}if(dr(s)==="object"){for(d in s)if(c=s[d],R(m,d)&&c!==void 0){if(r[d].type==="boolean"&&typeof c=="boolean")r[d].value=c;else if(r[d].type==="name"&&R(r[d].valueSet,c))r[d].value=c;else if(r[d].type==="integer"&&Number.isInteger(c))r[d].value=c;else if(r[d].type==="array"){for(v=0;v<c.length;v+=1)if(o=!0,c[v].length===1&&typeof c[v][0]=="number")g.push(String(c[v]-1));else if(c[v].length>1){for(j=0;j<c[v].length;j+=1)typeof c[v][j]!="number"&&(o=!1);o===!0&&g.push([c[v][0]-1,c[v][1]-1].join(" "))}r[d].value="["+g.join(" ")+"]"}else r[d].value=r[d].defaultValue;r[d].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var $,F=[];for($ in r)r[$].explicitSet===!0&&(r[$].type==="name"?F.push("/"+$+" /"+r[$].value):F.push("/"+$+" "+r[$].value));F.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+F.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(s){var a=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',d=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(o)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),m=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),v=c.length+p.length+m.length+d.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(d+c+p+m+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(o,d){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:d||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}})(Gt.API),(function(s){var a=s.API,r=a.pdfEscape16=function(c,p){for(var m,g=p.metadata.Unicode.widths,v=["","0","00","000","0000"],j=[""],A=0,R=c.length;A<R;++A){if(m=p.metadata.characterToGlyph(c.charCodeAt(A)),p.metadata.glyIdsUsed.push(m),p.metadata.toUnicode[m]=c.charCodeAt(A),g.indexOf(m)==-1&&(g.push(m),g.push([parseInt(p.metadata.widthOfGlyph(m),10)])),m=="0")return j.join("");m=m.toString(16),j.push(v[4-m.length],m)}return j.join("")},o=function(c){var p,m,g,v,j,A,R;for(j=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],A=0,R=(m=Object.keys(c).sort(function(w,$){return w-$})).length;A<R;A++)p=m[A],g.length>=100&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),c[p]!==void 0&&c[p]!==null&&typeof c[p].toString=="function"&&(v=("0000"+c[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),g.push("<"+p+"><"+v+">"));return g.length&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),j+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(c){(function(p){var m=p.font,g=p.out,v=p.newObject,j=p.putStream;if(m.metadata instanceof s.API.TTFFont&&m.encoding==="Identity-H"){for(var A=m.metadata.Unicode.widths,R=m.metadata.subset.encode(m.metadata.glyIdsUsed,1),w="",$=0;$<R.length;$++)w+=String.fromCharCode(R[$]);var F=v();j({data:w,addLength1:!0,objectId:F}),g("endobj");var D=v();j({data:o(m.metadata.toUnicode),addLength1:!0,objectId:D}),g("endobj");var _=v();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+vc(m.fontName)),g("/FontFile2 "+F+" 0 R"),g("/FontBBox "+s.API.PDFObject.convert(m.metadata.bbox)),g("/Flags "+m.metadata.flags),g("/StemV "+m.metadata.stemV),g("/ItalicAngle "+m.metadata.italicAngle),g("/Ascent "+m.metadata.ascender),g("/Descent "+m.metadata.decender),g("/CapHeight "+m.metadata.capHeight),g(">>"),g("endobj");var Y=v();g("<<"),g("/Type /Font"),g("/BaseFont /"+vc(m.fontName)),g("/FontDescriptor "+_+" 0 R"),g("/W "+s.API.PDFObject.convert(A)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+m.encoding+")"),g(">>"),g(">>"),g("endobj"),m.objectNumber=v(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+D+" 0 R"),g("/BaseFont /"+vc(m.fontName)),g("/Encoding /"+m.encoding),g("/DescendantFonts ["+Y+" 0 R]"),g(">>"),g("endobj"),m.isAlreadyPutted=!0}})(c)}]),a.events.push(["putFont",function(c){(function(p){var m=p.font,g=p.out,v=p.newObject,j=p.putStream;if(m.metadata instanceof s.API.TTFFont&&m.encoding==="WinAnsiEncoding"){for(var A=m.metadata.rawData,R="",w=0;w<A.length;w++)R+=String.fromCharCode(A[w]);var $=v();j({data:R,addLength1:!0,objectId:$}),g("endobj");var F=v();j({data:o(m.metadata.toUnicode),addLength1:!0,objectId:F}),g("endobj");var D=v();g("<<"),g("/Descent "+m.metadata.decender),g("/CapHeight "+m.metadata.capHeight),g("/StemV "+m.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+$+" 0 R"),g("/Flags 96"),g("/FontBBox "+s.API.PDFObject.convert(m.metadata.bbox)),g("/FontName /"+vc(m.fontName)),g("/ItalicAngle "+m.metadata.italicAngle),g("/Ascent "+m.metadata.ascender),g(">>"),g("endobj"),m.objectNumber=v();for(var _=0;_<m.metadata.hmtx.widths.length;_++)m.metadata.hmtx.widths[_]=parseInt(m.metadata.hmtx.widths[_]*(1e3/m.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+F+" 0 R/BaseFont/"+vc(m.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+m.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(m.metadata.hmtx.widths)+">>"),g("endobj"),m.isAlreadyPutted=!0}})(c)}]);var d=function(c){var p,m=c.text||"",g=c.x,v=c.y,j=c.options||{},A=c.mutex||{},R=A.pdfEscape,w=A.activeFontKey,$=A.fonts,F=w,D="",_=0,Y="",ee=$[F].encoding;if($[F].encoding!=="Identity-H")return{text:m,x:g,y:v,options:j,mutex:A};for(Y=m,F=w,Array.isArray(m)&&(Y=m[0]),_=0;_<Y.length;_+=1)$[F].metadata.hasOwnProperty("cmap")&&(p=$[F].metadata.cmap.unicode.codeMap[Y[_].charCodeAt(0)]),p||Y[_].charCodeAt(0)<256&&$[F].metadata.hasOwnProperty("Unicode")?D+=Y[_]:D+="";var G="";return parseInt(F.slice(1))<14||ee==="WinAnsiEncoding"?G=R(D,F).split("").map(function(fe){return fe.charCodeAt(0).toString(16)}).join(""):ee==="Identity-H"&&(G=r(D,$[F])),A.isHex=!0,{text:G,x:g,y:v,options:j,mutex:A}};a.events.push(["postProcessText",function(c){var p=c.text||"",m=[],g={text:p,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(p)){var v=0;for(v=0;v<p.length;v+=1)Array.isArray(p[v])&&p[v].length===3?m.push([d(Object.assign({},g,{text:p[v][0]})).text,p[v][1],p[v][2]]):m.push(d(Object.assign({},g,{text:p[v]})).text);c.text=m}else c.text=d(Object.assign({},g,{text:p})).text}])})(Gt),(function(s){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,o){return a.call(this),this.internal.vFS[r]=o,this},s.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Gt.API),(function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(o){var d,c,p,m,g,v,j,A=a,R=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],$={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},F={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,ee=0;this.__bidiEngine__={};var G=function(z){var H=z.charCodeAt(),de=H>>8,ie=F[de];return ie!==void 0?A[256*ie+(255&H)]:de===252||de===253?"AL":_.test(de)?"L":de===8?"R":"N"},fe=function(z){for(var H,de=0;de<z.length;de++){if((H=G(z.charAt(de)))==="L")return!1;if(H==="R")return!0}return!1},he=function(z,H,de,ie){var ke,Me,Ee,me,Ie=H[ie];switch(Ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(Ie="AN");break;case"AL":Y=!0,Ie="R";break;case"WS":case"BN":Ie="N";break;case"CS":ie<1||ie+1>=H.length||(ke=de[ie-1])!=="EN"&&ke!=="AN"||(Me=H[ie+1])!=="EN"&&Me!=="AN"?Ie="N":Y&&(Me="AN"),Ie=Me===ke?Me:"N";break;case"ES":Ie=(ke=ie>0?de[ie-1]:"B")==="EN"&&ie+1<H.length&&H[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&de[ie-1]==="EN"){Ie="EN";break}if(Y){Ie="N";break}for(Ee=ie+1,me=H.length;Ee<me&&H[Ee]==="ET";)Ee++;Ie=Ee<me&&H[Ee]==="EN"?"EN":"N";break;case"NSM":if(p&&!m){for(me=H.length,Ee=ie+1;Ee<me&&H[Ee]==="NSM";)Ee++;if(Ee<me){var Ue=z[ie],se=Ue>=1425&&Ue<=2303||Ue===64286;if(ke=H[Ee],se&&(ke==="R"||ke==="AL")){Ie="R";break}}}Ie=ie<1||(ke=H[ie-1])==="B"?"N":de[ie-1];break;case"B":Y=!1,d=!0,Ie=ee;break;case"S":c=!0,Ie="N"}return Ie},Be=function(z,H,de){var ie=z.split("");return de&&ge(ie,de,{hiLevel:ee}),ie.reverse(),H&&H.reverse(),ie.join("")},ge=function(z,H,de){var ie,ke,Me,Ee,me,Ie=-1,Ue=z.length,se=0,C=[],K=ee?w:R,Z=[];for(Y=!1,d=!1,c=!1,ke=0;ke<Ue;ke++)Z[ke]=G(z[ke]);for(Me=0;Me<Ue;Me++){if(me=se,C[Me]=he(z,Z,C,Me),ie=240&(se=K[me][$[C[Me]]]),se&=15,H[Me]=Ee=K[se][5],ie>0)if(ie===16){for(ke=Ie;ke<Me;ke++)H[ke]=1;Ie=-1}else Ie=-1;if(K[se][6])Ie===-1&&(Ie=Me);else if(Ie>-1){for(ke=Ie;ke<Me;ke++)H[ke]=Ee;Ie=-1}Z[Me]==="B"&&(H[Me]=0),de.hiLevel|=Ee}c&&(function(ce,oe,je){for(var Fe=0;Fe<je;Fe++)if(ce[Fe]==="S"){oe[Fe]=ee;for(var Oe=Fe-1;Oe>=0&&ce[Oe]==="WS";Oe--)oe[Oe]=ee}})(Z,H,Ue)},te=function(z,H,de,ie,ke){if(!(ke.hiLevel<z)){if(z===1&&ee===1&&!d)return H.reverse(),void(de&&de.reverse());for(var Me,Ee,me,Ie,Ue=H.length,se=0;se<Ue;){if(ie[se]>=z){for(me=se+1;me<Ue&&ie[me]>=z;)me++;for(Ie=se,Ee=me-1;Ie<Ee;Ie++,Ee--)Me=H[Ie],H[Ie]=H[Ee],H[Ee]=Me,de&&(Me=de[Ie],de[Ie]=de[Ee],de[Ee]=Me);se=me}se++}}},ye=function(z,H,de){var ie=z.split(""),ke={hiLevel:ee};return de||(de=[]),ge(ie,de,ke),(function(Me,Ee,me){if(me.hiLevel!==0&&j)for(var Ie,Ue=0;Ue<Me.length;Ue++)Ee[Ue]===1&&(Ie=D.indexOf(Me[Ue]))>=0&&(Me[Ue]=D[Ie+1])})(ie,de,ke),te(2,ie,H,de,ke),te(1,ie,H,de,ke),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(z,H,de){if((function(ke,Me){if(Me)for(var Ee=0;Ee<ke.length;Ee++)Me[Ee]=Ee;m===void 0&&(m=fe(ke)),v===void 0&&(v=fe(ke))})(z,H),p||!g||v)if(p&&g&&m^v)ee=m?1:0,z=Be(z,H,de);else if(!p&&g&&v)ee=m?1:0,z=ye(z,H,de),z=Be(z,H);else if(!p||m||g||v){if(p&&!g&&m^v)z=Be(z,H),m?(ee=0,z=ye(z,H,de)):(ee=1,z=ye(z,H,de),z=Be(z,H));else if(p&&m&&!g&&v)ee=1,z=ye(z,H,de),z=Be(z,H);else if(!p&&!g&&m^v){var ie=j;m?(ee=1,z=ye(z,H,de),ee=0,j=!1,z=ye(z,H,de),j=ie):(ee=0,z=ye(z,H,de),z=Be(z,H),ee=1,j=!1,z=ye(z,H,de),j=ie,z=Be(z,H))}}else ee=0,z=ye(z,H,de);else ee=m?1:0,z=ye(z,H,de);return z},this.__bidiEngine__.setOptions=function(z){z&&(p=z.isInputVisual,g=z.isOutputVisual,m=z.isInputRtl,v=z.isOutputRtl,j=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(o){var d=o.text;o.x,o.y;var c=o.options||{};o.mutex,c.lang;var p=[];if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,r.setOptions(c),Object.prototype.toString.call(d)==="[object Array]"){var m=0;for(p=[],m=0;m<d.length;m+=1)Object.prototype.toString.call(d[m])==="[object Array]"?p.push([r.doBidiReorder(d[m][0]),d[m][1],d[m][2]]):p.push([r.doBidiReorder(d[m])]);o.text=p}else o.text=r.doBidiReorder(d);r.setOptions({isInputVisual:!0})}])})(Gt),Gt.API.TTFFont=(function(){function s(a){var r;if(this.rawData=a,r=this.contents=new Sl(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Ny(this),this.registerTTF()}return s.open=function(a){return new s(a)},s.prototype.parse=function(){return this.directory=new cy(this.contents),this.head=new uy(this),this.name=new gy(this),this.cmap=new Lg(this),this.toUnicode={},this.hhea=new fy(this),this.maxp=new xy(this),this.hmtx=new yy(this),this.post=new my(this),this.os2=new hy(this),this.loca=new jy(this),this.glyf=new vy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var a,r,o,d,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,m,g,v;for(v=[],p=0,m=(g=this.bbox).length;p<m;p++)a=g[p],v.push(Math.round(a*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(o=255&(d=this.post.italic_angle),32768&(r=d>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},s.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},s.prototype.widthOfString=function(a,r,o){var d,c,p,m;for(p=0,c=0,m=(a=""+a).length;0<=m?c<m:c>m;c=0<=m?++c:--c)d=a.charCodeAt(c),p+=this.widthOfGlyph(this.characterToGlyph(d))+o*(1e3/r)||0;return p*(r/1e3)},s.prototype.lineHeight=function(a,r){var o;return r==null&&(r=!1),o=r?this.lineGap:0,(this.ascender+o-this.decender)/1e3*a},s})();var No,Sl=(function(){function s(a){this.data=a??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(a){return this.data[this.pos++]=a},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},s.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},s.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},s.prototype.readString=function(a){var r,o;for(o=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)o[r]=String.fromCharCode(this.readByte());return o.join("")},s.prototype.writeString=function(a){var r,o,d;for(d=[],r=0,o=a.length;0<=o?r<o:r>o;r=0<=o?++r:--r)d.push(this.writeByte(a.charCodeAt(r)));return d},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(a){return this.writeInt16(a)},s.prototype.readLongLong=function(){var a,r,o,d,c,p,m,g;return a=this.readByte(),r=this.readByte(),o=this.readByte(),d=this.readByte(),c=this.readByte(),p=this.readByte(),m=this.readByte(),g=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^o)+4294967296*(255^d)+16777216*(255^c)+65536*(255^p)+256*(255^m)+(255^g)+1):72057594037927940*a+281474976710656*r+1099511627776*o+4294967296*d+16777216*c+65536*p+256*m+g},s.prototype.writeLongLong=function(a){var r,o;return r=Math.floor(a/4294967296),o=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(a){return this.writeInt32(a)},s.prototype.read=function(a){var r,o;for(r=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r.push(this.readByte());return r},s.prototype.write=function(a){var r,o,d,c;for(c=[],o=0,d=a.length;o<d;o++)r=a[o],c.push(this.writeByte(r));return c},s})(),cy=(function(){var s;function a(r){var o,d,c;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},d=0,c=this.tableCount;0<=c?d<c:d>c;d=0<=c?++d:--d)o={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[o.tag]=o}return a.prototype.encode=function(r){var o,d,c,p,m,g,v,j,A,R,w,$,F;for(F in w=Object.keys(r).length,g=Math.log(2),A=16*Math.floor(Math.log(w)/g),p=Math.floor(A/g),j=16*w-A,(d=new Sl).writeInt(this.scalarType),d.writeShort(w),d.writeShort(A),d.writeShort(p),d.writeShort(j),c=16*w,v=d.pos+c,m=null,$=[],r)for(R=r[F],d.writeString(F),d.writeInt(s(R)),d.writeInt(v),d.writeInt(R.length),$=$.concat(R),F==="head"&&(m=v),v+=R.length;v%4;)$.push(0),v++;return d.write($),o=2981146554-s(d.data),d.pos=m+8,d.writeUInt32(o),d.data},s=function(r){var o,d,c,p;for(r=_g.call(r);r.length%4;)r.push(0);for(c=new Sl(r),d=0,o=0,p=r.length;o<p;o=o+=4)d+=c.readUInt32();return 4294967295&d},a})(),dy={}.hasOwnProperty,Uo=function(s,a){for(var r in a)dy.call(a,r)&&(s[r]=a[r]);function o(){this.constructor=s}return o.prototype=a.prototype,s.prototype=new o,s.__super__=a.prototype,s};No=(function(){function s(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s})();var uy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="head",s.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},s.prototype.encode=function(a){var r;return(r=new Sl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},s})(),kp=(function(){function s(a,r){var o,d,c,p,m,g,v,j,A,R,w,$,F,D,_,Y,ee;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),A=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=a.readByte();break;case 4:for(w=a.readUInt16(),R=w/2,a.pos+=6,c=(function(){var G,fe;for(fe=[],g=G=0;0<=R?G<R:G>R;g=0<=R?++G:--G)fe.push(a.readUInt16());return fe})(),a.pos+=2,F=(function(){var G,fe;for(fe=[],g=G=0;0<=R?G<R:G>R;g=0<=R?++G:--G)fe.push(a.readUInt16());return fe})(),v=(function(){var G,fe;for(fe=[],g=G=0;0<=R?G<R:G>R;g=0<=R?++G:--G)fe.push(a.readUInt16());return fe})(),j=(function(){var G,fe;for(fe=[],g=G=0;0<=R?G<R:G>R;g=0<=R?++G:--G)fe.push(a.readUInt16());return fe})(),d=(this.length-a.pos+this.offset)/2,m=(function(){var G,fe;for(fe=[],g=G=0;0<=d?G<d:G>d;g=0<=d?++G:--G)fe.push(a.readUInt16());return fe})(),g=_=0,ee=c.length;_<ee;g=++_)for(D=c[g],o=Y=$=F[g];$<=D?Y<=D:Y>=D;o=$<=D?++Y:--Y)j[g]===0?p=o+v[g]:(p=m[j[g]/2+(o-$)-(R-g)]||0)!==0&&(p+=v[g]),this.codeMap[o]=65535&p}a.pos=A}return s.encode=function(a,r){var o,d,c,p,m,g,v,j,A,R,w,$,F,D,_,Y,ee,G,fe,he,Be,ge,te,ye,z,H,de,ie,ke,Me,Ee,me,Ie,Ue,se,C,K,Z,ce,oe,je,Fe,Oe,Ye,Te,Qe;switch(ie=new Sl,p=Object.keys(a).sort(function(ot,bt){return ot-bt}),r){case"macroman":for(F=0,D=(function(){var ot=[];for($=0;$<256;++$)ot.push(0);return ot})(),Y={0:0},c={},ke=0,Ie=p.length;ke<Ie;ke++)Y[Oe=a[d=p[ke]]]==null&&(Y[Oe]=++F),c[d]={old:a[d],new:Y[a[d]]},D[d]=Y[a[d]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(D),{charMap:c,subtable:ie.data,maxGlyphID:F+1};case"unicode":for(H=[],A=[],ee=0,Y={},o={},_=v=null,Me=0,Ue=p.length;Me<Ue;Me++)Y[fe=a[d=p[Me]]]==null&&(Y[fe]=++ee),o[d]={old:fe,new:Y[fe]},m=Y[fe]-d,_!=null&&m===v||(_&&A.push(_),H.push(d),v=m),_=d;for(_&&A.push(_),A.push(65535),H.push(65535),ye=2*(te=H.length),ge=2*Math.pow(Math.log(te)/Math.LN2,2),R=Math.log(ge/2)/Math.LN2,Be=2*te-ge,g=[],he=[],w=[],$=Ee=0,se=H.length;Ee<se;$=++Ee){if(z=H[$],j=A[$],z===65535){g.push(0),he.push(0);break}if(z-(de=o[z].new)>=32768)for(g.push(0),he.push(2*(w.length+te-$)),d=me=z;z<=j?me<=j:me>=j;d=z<=j?++me:--me)w.push(o[d].new);else g.push(de-z),he.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*te+2*w.length),ie.writeUInt16(0),ie.writeUInt16(ye),ie.writeUInt16(ge),ie.writeUInt16(R),ie.writeUInt16(Be),je=0,C=A.length;je<C;je++)d=A[je],ie.writeUInt16(d);for(ie.writeUInt16(0),Fe=0,K=H.length;Fe<K;Fe++)d=H[Fe],ie.writeUInt16(d);for(Ye=0,Z=g.length;Ye<Z;Ye++)m=g[Ye],ie.writeUInt16(m);for(Te=0,ce=he.length;Te<ce;Te++)G=he[Te],ie.writeUInt16(G);for(Qe=0,oe=w.length;Qe<oe;Qe++)F=w[Qe],ie.writeUInt16(F);return{charMap:o,subtable:ie.data,maxGlyphID:ee+1}}},s})(),Lg=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="cmap",s.prototype.parse=function(a){var r,o,d;for(a.pos=this.offset,this.version=a.readUInt16(),d=a.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=d?o<d:o>d;o=0<=d?++o:--o)r=new kp(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},s.encode=function(a,r){var o,d;return r==null&&(r="macroman"),o=kp.encode(a,r),(d=new Sl).writeUInt16(0),d.writeUInt16(1),o.table=d.data.concat(o.subtable),o},s})(),fy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="hhea",s.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},s})(),hy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="OS/2",s.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=(function(){var r,o;for(o=[],r=0;r<10;++r)o.push(a.readByte());return o})(),this.charRange=(function(){var r,o;for(o=[],r=0;r<4;++r)o.push(a.readInt());return o})(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=(function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(a.readInt());return o})(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},s})(),my=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="post",s.prototype.parse=function(a){var r,o,d;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var c;for(o=a.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],d=[];a.pos<this.offset+this.length;)r=a.readByte(),d.push(this.names.push(a.readString(r)));return d;case 151552:return o=a.readUInt16(),this.offsets=a.read(o);case 262144:return this.map=(function(){var p,m,g;for(g=[],c=p=0,m=this.file.maxp.numGlyphs;0<=m?p<m:p>m;c=0<=m?++p:--p)g.push(a.readUInt32());return g}).call(this)}},s})(),py=function(s,a){this.raw=s,this.length=s.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},gy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="name",s.prototype.parse=function(a){var r,o,d,c,p,m,g,v,j,A,R;for(a.pos=this.offset,a.readShort(),r=a.readShort(),m=a.readShort(),o=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)o.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+m+a.readShort()});for(g={},c=j=0,A=o.length;j<A;c=++j)d=o[c],a.pos=d.offset,v=a.readString(d.length),p=new py(v,d),g[R=d.nameID]==null&&(g[R]=[]),g[d.nameID].push(p);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},s})(),xy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="maxp",s.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},s})(),yy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="hmtx",s.prototype.parse=function(a){var r,o,d,c,p,m,g;for(a.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(d=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,j;for(j=[],r=v=0;0<=d?v<d:v>d;r=0<=d?++v:--v)j.push(a.readInt16());return j})(),this.widths=(function(){var v,j,A,R;for(R=[],v=0,j=(A=this.metrics).length;v<j;v++)c=A[v],R.push(c.advance);return R}).call(this),o=this.widths[this.widths.length-1],g=[],r=p=0;0<=d?p<d:p>d;r=0<=d?++p:--p)g.push(this.widths.push(o));return g},s.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},s})(),_g=[].slice,vy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(a){var r,o,d,c,p,m,g,v,j,A;return a in this.cache?this.cache[a]:(c=this.file.loca,r=this.file.contents,o=c.indexOf(a),(d=c.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+o,p=(m=new Sl(r.read(d))).readShort(),v=m.readShort(),A=m.readShort(),g=m.readShort(),j=m.readShort(),this.cache[a]=p===-1?new wy(m,v,A,g,j):new by(m,p,v,A,g,j),this.cache[a]))},s.prototype.encode=function(a,r,o){var d,c,p,m,g;for(p=[],c=[],m=0,g=r.length;m<g;m++)d=a[r[m]],c.push(p.length),d&&(p=p.concat(d.encode(o)));return c.push(p.length),{table:p,offsets:c}},s})(),by=(function(){function s(a,r,o,d,c,p){this.raw=a,this.numberOfContours=r,this.xMin=o,this.yMin=d,this.xMax=c,this.yMax=p,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s})(),wy=(function(){function s(a,r,o,d,c){var p,m;for(this.raw=a,this.xMin=r,this.yMin=o,this.xMax=d,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;m=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&m;)p.pos+=1&m?4:2,128&m?p.pos+=8:64&m?p.pos+=4:8&m&&(p.pos+=2)}return s.prototype.encode=function(){var a,r,o;for(r=new Sl(_g.call(this.raw.data)),a=0,o=this.glyphIDs.length;a<o;++a)r.pos=this.glyphOffsets[a];return r.data},s})(),jy=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Uo(s,No),s.prototype.tag="loca",s.prototype.parse=function(a){var r,o;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var d,c;for(c=[],o=0,d=this.length;o<d;o+=2)c.push(2*a.readUInt16());return c}).call(this):(function(){var d,c;for(c=[],o=0,d=this.length;o<d;o+=4)c.push(a.readUInt32());return c}).call(this)},s.prototype.indexOf=function(a){return this.offsets[a]},s.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},s.prototype.encode=function(a,r){for(var o=new Uint32Array(this.offsets.length),d=0,c=0,p=0;p<o.length;++p)if(o[p]=d,c<r.length&&r[c]==p){++c,o[p]=d;var m=this.offsets[p],g=this.offsets[p+1]-m;g>0&&(d+=g)}for(var v=new Array(4*o.length),j=0;j<o.length;++j)v[4*j+3]=255&o[j],v[4*j+2]=(65280&o[j])>>8,v[4*j+1]=(16711680&o[j])>>16,v[4*j]=(4278190080&o[j])>>24;return v},s})(),Ny=(function(){function s(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var a,r,o,d,c;for(r in d=this.font.cmap.tables[0].codeMap,a={},c=this.subset)o=c[r],a[r]=d[o];return a},s.prototype.glyphsFor=function(a){var r,o,d,c,p,m,g;for(d={},p=0,m=a.length;p<m;p++)d[c=a[p]]=this.font.glyf.glyphFor(c);for(c in r=[],d)(o=d[c])!=null&&o.compound&&r.push.apply(r,o.glyphIDs);if(r.length>0)for(c in g=this.glyphsFor(r))o=g[c],d[c]=o;return d},s.prototype.encode=function(a,r){var o,d,c,p,m,g,v,j,A,R,w,$,F,D,_;for(d in o=Lg.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(a),w={0:0},_=o.charMap)w[(g=_[d]).old]=g.new;for($ in R=o.maxGlyphID,p)$ in w||(w[$]=R++);return j=(function(Y){var ee,G;for(ee in G={},Y)G[Y[ee]]=ee;return G})(w),A=Object.keys(j).sort(function(Y,ee){return Y-ee}),F=(function(){var Y,ee,G;for(G=[],Y=0,ee=A.length;Y<ee;Y++)m=A[Y],G.push(j[m]);return G})(),c=this.font.glyf.encode(p,F,w),v=this.font.loca.encode(c.offsets,F),D={cmap:this.font.cmap.raw(),glyf:c.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},s})();Gt.API.PDFObject=(function(){var s;function a(){}return s=function(r,o){return(Array(o+1).join("0")+r).slice(-o)},a.convert=function(r){var o,d,c,p;if(Array.isArray(r))return"["+(function(){var m,g,v;for(v=[],m=0,g=r.length;m<g;m++)o=r[m],v.push(a.convert(o));return v})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(d in c=["<<"],r)p=r[d],c.push("/"+d+" "+a.convert(p));return c.push(">>"),c.join(`
`)}return""+r},a})();function Ig(){try{const s=localStorage.getItem("userLocale");if(s)return s;const a=navigator.language||navigator.userLanguage;if(a)return a}catch(s){console.error("Error getting user locale:",s)}return"en-US"}function Mr(s,a={}){try{const r=Ig(),o={minimumFractionDigits:0,maximumFractionDigits:2,...a};return new Intl.NumberFormat(r,o).format(s)}catch(r){return console.error("Error formatting number:",r),String(s||0)}}function Wc(s,a="USD",r={}){try{const o=Ig(),d={style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2,...r};return new Intl.NumberFormat(o,d).format(s)}catch(o){return console.error("Error formatting currency:",o),`$${parseFloat(s||0).toFixed(2)}`}}function Sy(){return[{value:"en-US",label:"English (United States)"},{value:"en-IN",label:"English (India)"},{value:"en-GB",label:"English (United Kingdom)"},{value:"en-AU",label:"English (Australia)"},{value:"en-CA",label:"English (Canada)"},{value:"fr-FR",label:"French (France)"},{value:"de-DE",label:"German (Germany)"},{value:"es-ES",label:"Spanish (Spain)"},{value:"es-MX",label:"Spanish (Mexico)"},{value:"it-IT",label:"Italian (Italy)"},{value:"pt-BR",label:"Portuguese (Brazil)"},{value:"pt-PT",label:"Portuguese (Portugal)"},{value:"nl-NL",label:"Dutch (Netherlands)"},{value:"ru-RU",label:"Russian (Russia)"},{value:"ja-JP",label:"Japanese (Japan)"},{value:"ko-KR",label:"Korean (Korea)"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"ar-SA",label:"Arabic (Saudi Arabia)"},{value:"hi-IN",label:"Hindi (India)"}]}function ky(){const{members:s,admins:a,invoices:r,payments:o,recentPayments:d,paymentHistory:c,communicationLog:p,paymentMethods:m,metrics:g,reminderRules:v,automationEnabled:j,setAutomationEnabled:A,reminderTemplates:R,organizationInfo:w,fetchAdmins:$,fetchInvoices:F,fetchPayments:D,fetchMembers:_,selectedMember:Y,setSelectedMember:ee,addMember:G,updateMember:fe,deleteMember:he,addInvoice:Be,updateInvoice:ge,deleteInvoice:te,addCommunication:ye,updatePaymentMethod:z,updateReminderRule:H,updateReminderTemplate:de,updateOrganizationInfo:ie,userLocale:ke,updateUserLocale:Me,addAdminUser:Ee,updateAdminUser:me,deleteAdminUser:Ie,resetAllData:Ue,addPayment:se,reminderLogs:C,fetchReminderLogs:K,passwordResetRequests:Z,fetchPasswordResetRequests:ce,donations:oe,fetchDonations:je,addDonation:Fe,deleteDonation:Oe,loading:Ye}=Xd(),Te=sessionStorage.getItem("adminRole")||"Viewer";let Qe=Te;Te==="Super Admin"?Qe="Owner":(Te==="Admin"||Te==="Finance"||Te==="Staff")&&(Qe="Finance Admin");const ot=Qe==="Owner"||Qe==="Finance Admin",bt=Qe==="Owner",X=Qe==="Viewer",et=Qe==="Owner"||Qe==="Finance Admin",xt=ot||bt,Ve=(()=>{const l=sessionStorage.getItem("organization_id");if(l)return l;const N=sessionStorage.getItem("adminId");if(N&&a&&a.length>0){const L=a.find(P=>P.id===N);if(L&&L.organization_id)return L.organization_id}return null})(),yt={Owner:"Owner Portal","Finance Admin":"Finance Admin Portal",Viewer:"Viewer Portal"}[Qe]||"Admin Portal",vt=[{id:"members-group",label:"Members",icon:"fa-users",items:[{id:"members",label:"Members List",roles:["Owner","Finance Admin","Viewer"]},{id:"member-detail",label:"Member Details",roles:["Owner","Finance Admin","Viewer"]},{id:"invoice-builder",label:"Subscriptions",roles:["Owner","Finance Admin"]}]},{id:"finance",label:"Finance",icon:"fa-dollar-sign",items:[{id:"invoices",label:"Invoices",roles:["Owner","Finance Admin"]},{id:"payments",label:"Payments",roles:["Owner","Finance Admin"]},{id:"donations",label:"Donations",roles:["Owner","Finance Admin"]}]},{id:"expenses",label:"Expenses",icon:"fa-receipt",items:[{id:"expense-list",label:"Expense List",roles:["Owner","Finance Admin","Viewer"]},{id:"expense-categories",label:"Expense Categories",roles:["Owner","Finance Admin","Viewer"]}]},{id:"communication",label:"Communication",icon:"fa-comments",items:[{id:"automation",label:"Reminders",roles:["Owner","Finance Admin"]},{id:"communications",label:"Reminder Logs",roles:["Owner","Finance Admin","Viewer"]}]},{id:"reports-group",label:"Reports",icon:"fa-chart-bar",items:[{id:"reports",label:"Financial Reports",roles:["Owner","Finance Admin","Viewer"]},{id:"export-reports",label:"Export Reports",roles:["Owner","Finance Admin"]}]},{id:"settings",label:"Settings",icon:"fa-cog",items:[{id:"users",label:"Users",roles:["Owner","Finance Admin"]},{id:"roles",label:"Roles",roles:["Owner"]},{id:"org-settings",label:"Organization Settings",roles:["Owner","Finance Admin"]}]}],Pt=[{id:"dashboard",label:"Dashboard"},...vt.flatMap(l=>l.items)],[pn,sn]=Tp(),[ht,Ot]=q.useState(()=>{const l=pn.get("section");return l&&Pt.find(L=>L.id===l)?l:Pt[0].id}),[Ce,qe]=q.useState("Invoices"),[nt,ft]=q.useState(()=>{const l={};return vt.forEach(N=>{l[N.id]=!1}),l}),[on,Se]=q.useState(!1),[xe,We]=q.useState(!1),[ct,st]=q.useState(null),[un,Ht]=q.useState(null),[Qt,Sn]=q.useState("success"),[Wt,le]=q.useState(null),[wt,Qr]=q.useState(!1),[Xn,Xr]=q.useState({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),[gn,Ft]=q.useState({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[rn,tr]=q.useState({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),[Zt,nr]=q.useState(null),[Gn,gr]=q.useState(!1),Sr=(l,N,L={})=>{let P="";switch(l){case"name":N.trim()?N.trim().length<2&&(P="Name must be at least 2 characters."):P="Name is required.";break;case"email":N.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.trim())||(P="Please enter a valid email address."):P="Email is required.";break;case"phone":(!N||N.trim()==="")&&(P="WhatsApp number is required.");break;case"nextDue":{N?isNaN(new Date(N).getTime())&&(P="Please select a valid start date."):P="Start date is required.";break}case"lastPayment":{N&&isNaN(new Date(N).getTime())&&(P="Please select a valid end date.");break}}return P},ei=()=>{const l=ct?["name","email","phone"]:["name","email","phone","nextDue","lastPayment"];tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1});for(const N of l){const L=Sr(N,gn[N]);if(L)return tr(P=>({...P,[N]:!0})),nr(N),Q(L,"error"),setTimeout(()=>{const P=document.querySelector("form.form-grid");if(!P)return;const I=l.indexOf(N);let U=null;I===0?U=P.querySelector('input[type="text"][required]'):I===1?U=P.querySelector('input[type="email"]'):I===2?U=P.querySelector('input[type="tel"]'):I===3?U=P.querySelectorAll('input[type="date"]')[0]:I===4&&(U=P.querySelectorAll('input[type="date"]')[1]),U&&(U.focus(),U.scrollIntoView({behavior:"smooth",block:"center"}))},100),!1}return tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),!0},$a=(l,N)=>{let L=N;if(l==="phone")L=N;else if(l==="balance")L=N.replace(/\D/g,"");else if(l==="subscriptionType"){N==="Yearly + Janaza Fund"?(L=N,Ft(P=>({...P,subscriptionType:N,balance:"500"}))):(L=N,Ft(P=>({...P,subscriptionType:N,balance:"250"})));return}Ft(P=>({...P,[l]:L})),Sr(l,L,l==="password"?{}:{})};gn.name.trim()&&gn.email.trim();const[ti,bi]=q.useState({name:"",email:"",password:""}),qr=()=>new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"}),[St,rr]=q.useState({memberId:"",period:qr(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),wi=()=>{const N=`INV-${new Date().getFullYear()}-`,P=(r||[]).map(U=>U.id).filter(Boolean).filter(U=>U.startsWith(N)).reduce((U,W)=>{const be=W.split("-")[2]||"",Je=parseInt(be,10);return isNaN(Je)?U:Math.max(U,Je)},0),I=String(P+1).padStart(3,"0");return`${N}${I}`},vs=q.useMemo(()=>wi(),[r]),[Hn,xr]=q.useState({donorName:!1,amount:!1,method:!1,date:!1,screenshot:!1}),[ur,$r]=q.useState(null),[Cl,Tn]=q.useState(!1),[ut,kr]=q.useState({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),[Zr,Pa]=q.useState(null),[Fs,os]=q.useState(null),[ls,La]=q.useState(()=>{try{const l=localStorage.getItem("expenseCategories");return l?JSON.parse(l):[]}catch{return[]}}),Rs=q.useMemo(()=>Ve?ls.filter(l=>l.organization_id===Ve):[],[ls,Ve]),[Fr,bs]=q.useState(!1),[Fi,ar]=q.useState(null),[Ar,yr]=q.useState({name:"",description:"",status:"Active"}),[Ts,la]=q.useState({name:!1}),[cs,qn]=q.useState(null),[Os,Bs]=q.useState(!1),[Ut,Rr]=q.useState({categoryName:"",categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),[ds,_a]=q.useState(null),[An,ca]=q.useState(null),[ws,Wa]=q.useState(""),[Ia,sr]=q.useState({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),[us,Jn]=q.useState(null),[Ea,fs]=q.useState(!1),[da,ua]=q.useState(()=>{try{const l=localStorage.getItem("expenses");return l?JSON.parse(l):[]}catch{return[]}}),[hs,Jt]=q.useState(null),[Va,nl]=q.useState("All"),[Ha,Ma]=q.useState({from:"",to:""}),[ms,qo]=q.useState("All"),[ni,Ri]=q.useState(""),[Ya,Ga]=q.useState(w),[Xi,ea]=q.useState(!1),[Wr,ri]=q.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[Ti,zs]=q.useState(!1),[fa,Da]=q.useState(""),Oi=l=>!l||!l.trim()?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.trim())?"":"Please enter a valid email address",[ta,Us]=q.useState({subject:"Payment Reminder - Outstanding Balance",htmlTemplate:`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: 2px solid #5a31ea; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`}),[fn,qs]=q.useState({emailService:"gmail",emailUser:"",emailPassword:"kuil uhbe zlqq oymd",scheduleTime:"09:00",scheduleEnabled:!0,reminderInterval:7}),[Zi,Ja]=q.useState("AM"),[ps,ha]=q.useState(!1),[$s,Bi]=q.useState("not_connected"),[x,M]=q.useState(!1),[ne,pe]=q.useState({from:"2025-01-01",to:"2025-12-31"}),[Pe,Ze]=q.useState({}),[at,_t]=q.useState("This Year"),[Bt,Xt]=q.useState(!1),[qt,xn]=q.useState(null),[Yt,On]=q.useState({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:"",selectedAdminId:"",adminMobile:""}),[Bn,Tr]=q.useState(!1),[In,zn]=q.useState({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),[vr,Vr]=q.useState(null),[ji,ai]=q.useState(!1),[yn,Ws]=q.useState(null),[eo,js]=q.useState(!1),[Ns,Cr]=q.useState(null),[si,Ss]=q.useState({newPassword:""}),[ks,So]=q.useState(null),[Na,Vs]=q.useState({x:0,y:0}),Ka=q.useRef(null),ko=l=>{if(Ka.current){const N=Ka.current.getBoundingClientRect();Vs({x:l.clientX-N.left,y:l.clientY-N.top})}},Sa=({icon:l,iconClass:N,label:L,value:P,description:I,onClick:U,valueClass:W=""})=>e.jsxs("button",{type:"button",className:"admin-dashboard-kpi-card admin-dashboard-kpi-button",onClick:U,children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:`${l} ${N||"admin-dashboard-kpi-icon"}`}),L]}),e.jsx("h4",{className:`admin-dashboard-kpi-value ${W}`,children:P}),I&&e.jsx("small",{className:"admin-dashboard-kpi-description",children:I})]}),[zi,to]=q.useState({}),[br,ii]=q.useState(!1),[Fa,Ra]=q.useState({}),[$n,Ni]=q.useState(!1),[oi,As]=q.useState(!1),[Si,Qa]=q.useState(!1),[Cn,Hs]=q.useState(null),[Hr,Ta]=q.useState(null),[Pn,Oa]=q.useState([]),[ir,no]=q.useState("All"),[Yr,Ui]=q.useState("All"),[na,ro]=q.useState("all"),[ma,ao]=q.useState("all"),[Kn,Xa]=q.useState(""),[Dn,Fn]=q.useState(1),[or,Or]=q.useState(10),[Br,Ao]=q.useState(""),[Za,ki]=q.useState("All"),[so,Co]=q.useState("none"),[Po,Pl]=q.useState(()=>{try{return JSON.parse(localStorage.getItem("memberNotes")||"{}")}catch{return{}}}),[Lo,qi]=q.useState(""),[Pr,$o]=q.useState(""),[Gr,Ai]=q.useState(""),[Wo,rl]=q.useState(!1),[Vo,$i]=q.useState(!1),[Ho,es]=q.useState(!1),[Ys,Jr]=q.useState(!1),[gs,Cs]=q.useState(!1),[ka,Ci]=q.useState(null),[al,li]=q.useState({memberId:!1,amount:!1,method:!1,screenshot:!1}),[En,io]=q.useState(null),[jt,Mn]=q.useState({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),[oo,Wi]=q.useState(1),[ci,sl]=q.useState(10),[di,_o]=q.useState(1),[ui,Kl]=q.useState(10),[il,Io]=q.useState(1),[Gs,Yo]=q.useState(10),[lo,Eo]=q.useState(1),[Ll,Lc]=q.useState(10),[_l,_c]=q.useState(1),[ol,Il]=q.useState(10),[lr,Ps]=q.useState("All"),[fr,fi]=q.useState("All"),Mo=wo();Bp(15),q.useEffect(()=>{pn.get("section")!==ht&&sn({section:ht},{replace:!1})},[ht,pn,sn]),q.useEffect(()=>{const l=()=>{const L=new URLSearchParams(window.location.search).get("section");L&&Pt.find(I=>I.id===L)&&L!==ht?Ot(L):!L&&ht!==Pt[0].id&&Ot(Pt[0].id)};return window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}},[ht]),q.useEffect(()=>{ht==="communications"&&(K(),ce())},[ht]);const Aa=()=>{const l=new Date,N=[],L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let I=11;I>=0;I--){const U=new Date(l.getFullYear(),l.getMonth()-I,1),W=`${L[U.getMonth()]} ${U.getFullYear()}`,ve=L[U.getMonth()],be=c.filter(Xe=>{if(!(Xe.status==="Completed"||Xe.status==="Paid")||!Xe.date)return!1;const mt=new Date(Xe.date);return mt.getMonth()===U.getMonth()&&mt.getFullYear()===U.getFullYear()}),Je=be.reduce((Xe,Nt)=>{const mt=parseFloat(Nt.amount?.replace(/[^0-9.]/g,"")||0);return Xe+mt},0);N.push({month:ve,monthKey:W,value:Je,count:be.length})}const P=Math.max(...N.map(I=>I.value),1);return N.map(I=>({...I,percentage:P>0?I.value/P*100:0}))},ts=()=>{const l=new Date,N=l.getFullYear(),L=l.getMonth(),P=new Set(s.map(Dt=>Dt.id).filter(Boolean)),I=new Set(s.map(Dt=>Dt.email?.toLowerCase()).filter(Boolean)),U=new Set(s.map(Dt=>Dt.name?.toLowerCase()).filter(Boolean)),W=c||[],ve=W.reduce((Dt,mr)=>{if(mr.status==="Completed"||mr.status==="Paid"){const Nn=parseFloat(mr.amount?.replace(/[^0-9.]/g,"")||0);return Dt+Nn}return Dt},0),Je=W.filter(Dt=>{if(!(Dt.status==="Completed"||Dt.status==="Paid")||!Dt.date)return!1;const Nn=new Date(Dt.date);return Nn.getMonth()===L&&Nn.getFullYear()===N}).reduce((Dt,mr)=>{if(mr.status==="Completed"||mr.status==="Paid"){const Nn=parseFloat(mr.amount?.replace(/[^0-9.]/g,"")||0);return Dt+Nn}return Dt},0),Nt=W.filter(Dt=>!(Dt.status==="Completed"||Dt.status==="Paid")||!Dt.date?!1:new Date(Dt.date).getFullYear()===N).reduce((Dt,mr)=>{if(mr.status==="Completed"||mr.status==="Paid"){const Nn=parseFloat(mr.amount?.replace(/[^0-9.]/g,"")||0);return Dt+Nn}return Dt},0),mt=s.reduce((Dt,mr)=>{if(!mr.balance)return Dt;const Nn=mr.balance.toString(),Ba=parseFloat(Nn.replace(/[^0-9.]/g,"")||0);return Dt+(Ba>0?Ba:0)},0),mn=r.filter(Dt=>(Dt.memberId&&P.has(Dt.memberId)||Dt.memberEmail&&I.has(Dt.memberEmail?.toLowerCase())||Dt.memberName&&U.has(Dt.memberName?.toLowerCase()))&&Dt.status==="Overdue"),Kt=new Set,jn=new Set,aa=new Set;mn.forEach(Dt=>{Dt.memberId&&Kt.add(Dt.memberId),Dt.memberEmail&&jn.add(Dt.memberEmail.toLowerCase()),Dt.memberName&&aa.add(Dt.memberName.toLowerCase())});const ga=new Set;s.forEach(Dt=>{let mr=!1;if(Dt.id&&Kt.has(Dt.id)||Dt.email&&jn.has(Dt.email?.toLowerCase())||Dt.name&&aa.has(Dt.name?.toLowerCase()))mr=!0;else if(Dt.status==="Overdue")mr=!0;else if(Dt.status!=="Inactive"&&Dt.status!=="Pending"&&Dt.balance){const Ba=Dt.balance.toString(),Ml=parseFloat(Ba.replace(/[^0-9.]/g,"")||0);(Ba.toLowerCase().includes("overdue")||Ml>0)&&(mr=!0)}mr&&(Dt.id?ga.add(Dt.id):Dt.email?ga.add(`email:${Dt.email.toLowerCase()}`):Dt.name&&ga.add(`name:${Dt.name.toLowerCase()}`))});const Do=ga.size,mi=s.length*800;return{totalCollected:ve,collectedMonth:Je,collectedYear:Nt,outstanding:mt,overdueMembers:Do,expectedAnnual:mi}},Pi=l=>l.paidToAdmin||l.paidToAdminName||l.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(l.method)?"Online Payment":l.method||"N/A",Ic=()=>c.filter(l=>l.status==="Paid"||l.status==="Completed"||l.status==="Pending Verification"||l.status==="Pending").sort((l,N)=>{const L=new Date(l.date||l.createdAt||0);return new Date(N.date||N.createdAt||0)-L}).slice(0,5).map(l=>({Member:l.member||"Unknown",Period:l.period||"N/A",Amount:l.amount||"$0",Method:Pi(l),Status:l.status||"Pending",Date:l.date||(l.createdAt?new Date(l.createdAt).toLocaleDateString():"N/A")})),Vi=Aa(),co=Ic(),Lr=q.useMemo(()=>ts(),[r,c,s]),Go=q.useMemo(()=>new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),[s,r,c,o]);q.useEffect(()=>{Y&&qi(Po[Y.id]||"")},[Y,Po]),q.useEffect(()=>{const l=vt.find(N=>N.items.some(L=>L.id===ht));l&&ft(N=>{if(N[l.id])return N;const L={};return vt.forEach(P=>{L[P.id]=P.id===l.id}),L})},[ht]);const Ln=(()=>{const l=new Date(ne.from),N=new Date(ne.to);N.setHours(23,59,59,999);const L=c.filter(mt=>{if(!mt.date)return!1;const mn=new Date(mt.date),Kt=mt.status==="Completed"||mt.status==="Paid";return mn>=l&&mn<=N&&Kt}),P=(Array.isArray(oe)?oe:[]).filter(mt=>{if(!mt||!mt.date&&!mt.createdAt)return!1;try{const mn=mt.createdAt?new Date(mt.createdAt):new Date(mt.date);return mn>=l&&mn<=N}catch{return!1}}),I=L.reduce((mt,mn)=>{const Kt=parseFloat(mn.amount?.replace(/[^0-9.]/g,"")||0);return mt+Kt},0),U=P.reduce((mt,mn)=>{const Kt=parseFloat(mn.amount?.replace(/[^0-9.]/g,"")||0);return mt+Kt},0),W=I+U,ve=s.filter(mt=>mt.status==="Active");let be=0;if(ve.forEach(mt=>{const mn=mt.subscriptionType||"Lifetime",Kt=mt.createdAt?new Date(mt.createdAt):new Date("2025-01-01");if(mn==="Yearly + Janaza Fund"){const jn=Math.max(l.getTime(),Kt.getTime()),aa=N.getTime(),ga=Math.max(0,(aa-jn)/(365.25*24*60*60*1e3));be+=Math.ceil(ga)*500}else{const jn=Math.max(l.getTime(),Kt.getTime()),aa=N.getTime(),ga=Math.max(0,(aa-jn)/(365.25*24*60*60*1e3));be+=Math.ceil(ga)*250}}),be===0&&ve.length>0){const mt=Math.max(0,(N-l)/315576e5);be=ve.length*250*Math.ceil(mt)}const Je=ve.length>0?Math.round(W/ve.length):0,Xe={};L.forEach(mt=>{const mn=Pi(mt);Xe[mn]=(Xe[mn]||0)+1});const Nt=Object.entries(Xe).map(([mt,mn])=>({label:mt,value:mn}));return Nt.length===0&&Nt.push({label:"No payments",value:0}),{collected:W,paymentsTotal:I,donationsTotal:U,paymentsCount:L.length,donationsCount:P.length,expected:be||1,averagePerMember:Je,methodMix:Nt,transactionCount:L.length+P.length,paymentsInRange:L,donationsInRange:P}})(),Js=()=>{try{const l=new Date(ne.from),N=new Date(ne.to);N.setHours(23,59,59,999);const L=c.filter(ve=>{if(!ve.date)return!1;const be=new Date(ve.date);return be>=l&&be<=N});let P=`Financial Report
`;P+=`Period,${ne.from} to ${ne.to}

`,P+=`Summary
`,P+=`Collected,$${Ln.collected.toFixed(2)}
`,P+=`Expected,$${Ln.expected.toFixed(2)}
`,P+=`Outstanding,$${Lr.outstanding.toFixed(2)}
`,P+=`Average per Member,$${Ln.averagePerMember.toFixed(2)}
`,P+=`Total Transactions,${Ln.transactionCount}

`,P+=`Payment Method Breakdown
`,Ln.methodMix.forEach(ve=>{P+=`${ve.label},${ve.value}
`}),P+=`
Detailed Transactions (Completed Payments Only)
`,P+=`Date,Member,Period,Amount,Method,Status,Reference
`,L.filter(ve=>ve.status==="Completed"||ve.status==="Paid").forEach(ve=>{const be=ve.date||"N/A",Je=ve.member||"Unknown",Xe=ve.period||"N/A",Nt=ve.amount||"$0",mt=Pi(ve),mn=ve.status||"N/A",Kt=ve.reference||"N/A";P+=`"${be}","${Je}","${Xe}","${Nt}","${mt}","${mn}","${Kt}"
`});const I=new Blob([P],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a"),W=URL.createObjectURL(I);U.setAttribute("href",W),U.setAttribute("download",`financial-report-${ne.from}-to-${ne.to}.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U),Q("CSV report downloaded successfully!")}catch(l){console.error("Error exporting CSV:",l),Q("Failed to export CSV","error")}},Un=()=>{if(!et){Q("You are not authorized to export reports","error");return}Js()},Wn=()=>{if(!et){Q("You are not authorized to export reports","error");return}Hi()},Hi=()=>{try{const l=new Gt,N=l.internal.pageSize.getWidth(),L=l.internal.pageSize.getHeight();let P=20;const I=20,U=7;l.setFontSize(18),l.setFont(void 0,"bold"),l.text("Financial Report",I,P),P+=10,l.setFontSize(12),l.setFont(void 0,"normal"),l.text(`Period: ${ne.from} to ${ne.to}`,I,P),P+=15,l.setFontSize(14),l.setFont(void 0,"bold"),l.text("Summary",I,P),P+=8,l.setFontSize(10),l.setFont(void 0,"normal"),l.text(`Collected: $${Ln.collected.toFixed(2)}`,I,P),P+=U,l.text(`Expected: $${Ln.expected.toFixed(2)}`,I,P),P+=U,l.text(`Outstanding: $${Lr.outstanding.toFixed(2)}`,I,P),P+=U,l.text(`Average per Member: $${Ln.averagePerMember.toFixed(2)}`,I,P),P+=U,l.text(`Total Transactions: ${Ln.transactionCount}`,I,P),P+=10,l.setFontSize(14),l.setFont(void 0,"bold"),l.text("Payment Method Breakdown",I,P),P+=8,l.setFontSize(10),l.setFont(void 0,"normal"),Ln.methodMix.forEach(Xe=>{l.text(`${Xe.label}: ${Xe.value}`,I,P),P+=U});const W=new Date(ne.from),ve=new Date(ne.to);ve.setHours(23,59,59,999);const be=c.filter(Xe=>{if(!Xe.date)return!1;const Nt=new Date(Xe.date);return Nt>=W&&Nt<=ve});if(be.length>0){P+=10,P>L-40&&(l.addPage(),P=20),l.setFontSize(14),l.setFont(void 0,"bold"),l.text("Recent Transactions",I,P),P+=8,l.setFontSize(9),l.setFont(void 0,"normal"),l.setFont(void 0,"bold"),l.text("Date",I,P),l.text("Member",I+40,P),l.text("Amount",I+90,P),l.text("Method",I+130,P),P+=U,l.setFont(void 0,"normal");const Xe=be.filter(mt=>mt.status==="Completed"||mt.status==="Paid"),Nt=Math.min(Xe.length,Math.floor((L-P-20)/U));Xe.slice(0,Nt).forEach(mt=>{P>L-20&&(l.addPage(),P=20),l.text(mt.date||"N/A",I,P),l.text((mt.member||"Unknown").substring(0,15),I+40,P),l.text(mt.amount||"$0",I+90,P),l.text(Pi(mt).substring(0,15),I+130,P),P+=U}),Xe.length>Nt&&l.text(`... and ${Xe.length-Nt} more transactions`,I,P)}const Je=l.internal.pages.length-1;for(let Xe=1;Xe<=Je;Xe++)l.setPage(Xe),l.setFontSize(8),l.text(`Generated on ${new Date().toLocaleDateString()} - Page ${Xe} of ${Je}`,I,L-10);l.save(`financial-report-${ne.from}-to-${ne.to}.pdf`),Q("PDF report downloaded successfully!")}catch(l){console.error("Error exporting PDF:",l),Q("Failed to export PDF","error")}};c.filter(l=>{if(!l.date)return!1;const N=new Date(l.date),L=new Date(ne.from),P=new Date(ne.to);return P.setHours(23,59,59,999),N>=L&&N<=P}).sort((l,N)=>{const L=new Date(l.date||0);return new Date(N.date||0)-L});const pa=async()=>{try{const N=await fetch("http://localhost:4000/api/email-settings");if(N.ok){const L=await N.json();if(L){const P=L.scheduleTime||"09:00",[I,U]=P.split(":").map(Number),W=I>=12?"PM":"AM",be=`${I%12||12}:${U.toString().padStart(2,"0")}`;qs({emailService:L.emailService||"gmail",emailUser:L.emailUser||"",emailPassword:L.emailPassword||"kuil uhbe zlqq oymd",scheduleTime:P,scheduleEnabled:L.scheduleEnabled!==void 0?L.scheduleEnabled:!0,reminderInterval:L.reminderInterval||7}),Ja(W),Bi(L.emailUser?"connected":"not_connected"),L.automationEnabled!==void 0&&A(L.automationEnabled)}}}catch(l){console.error("Error fetching email settings:",l)}},ns=async()=>{try{const N=await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fn)});if(N.ok)Q("Email settings saved successfully!"),Bi(fn.emailUser?"connected":"not_connected");else{const L=await N.json();Q(L.error||"Failed to save email settings","error")}}catch(l){console.error("Error saving email settings:",l),Q("Failed to save email settings","error")}},[hi,uo]=q.useState(!1),rs=async()=>{uo(!0);try{const l="http://localhost:4000",N=[];try{const L=await fetch(`${l}/api/email-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fn)});if(L.ok)Bi(fn.emailUser?"connected":"not_connected");else{const P=await L.json();N.push(P.error||"Failed to save email settings")}}catch{N.push("Failed to save email settings")}try{for(const L of v)await H(L.id,L)}catch{N.push("Failed to save reminder rules")}try{for(const L of m)await z(L.id,L)}catch{N.push("Failed to save payment methods")}try{await ie(Ya)}catch{N.push("Failed to save organization info")}N.length>0?Q(`Some settings failed to save: ${N.join(", ")}`,"error"):Q("All settings saved successfully!","success")}catch(l){console.error("Error saving all settings:",l),Q("Failed to save all settings","error")}finally{uo(!1)}},ll=async()=>{try{const N=await fetch("http://localhost:4000/api/email-settings/template");if(N.ok){const L=await N.json();L&&(L.subject||L.htmlTemplate)&&Us({subject:L.subject||"Payment Reminder - Outstanding Balance",htmlTemplate:L.htmlTemplate||`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: none; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`})}}catch(l){console.error("Error fetching email template:",l)}},Xl=()=>{As(!0)},El=()=>ta.htmlTemplate?ta.htmlTemplate.replace(/\{\{member_name\}\}/g,"John Doe").replace(/\{\{member_id\}\}/g,"MEMBER001").replace(/\{\{member_email\}\}/g,"john.doe@example.com").replace(/\{\{total_due\}\}/g,"$250.00").replace(/\{\{invoice_count\}\}/g,"3").replace(/\{\{invoice_list\}\}/g,`
        <li style="margin-bottom: 10px;">
          <strong>January 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Jan 2025)</span> - 
          <strong style="color: #ef4444">Overdue</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>February 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Feb 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>March 2025</strong>: $50.00 
          <span style="color: #666;">(Due: 15 Mar 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
      `).replace(/\{\{payment_methods\}\}/g,`
        <li>FPS: ID 1234567</li>
        <li>PayMe: Scan QR code in portal</li>
        <li>Bank Transfer: HSBC 123-456789-001</li>
      `).replace(/\{\{portal_link\}\}/g,`${window.location.origin}/member`):"",fo=async()=>{try{const N=await fetch("http://localhost:4000/api/email-settings/template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ta)});if(N.ok)Q("Email template saved successfully!");else{const L=await N.json();Q(L.error||"Failed to save email template","error")}}catch(l){console.error("Error saving email template:",l),Q("Failed to save email template","error")}},Zl=async()=>{if(!fn.emailUser||!fn.emailPassword){Q("Please configure email credentials first","error");return}ha(!0);try{const N=await fetch("http://localhost:4000/api/email-settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailService:fn.emailService,emailUser:fn.emailUser,emailPassword:fn.emailPassword,testEmail:fn.emailUser})});if(N.ok)Q("Test email sent successfully! Check your inbox.");else{const L=await N.json();Q(L.error||"Failed to send test email","error")}}catch(l){console.error("Error testing email:",l),Q("Failed to send test email","error")}finally{ha(!1)}},Li=async l=>{if(!fn.emailUser||!fn.emailPassword){Q("Please configure email credentials first","error");return}to(N=>({...N,[l]:!0}));try{const L=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberId:l,sendToAll:!1})}),P=await L.json();if(L.ok){const I=s.find(W=>W.id===l),U={channel:"Email",type:"Manual Reminder",memberId:l,memberEmail:I?.email||"",memberName:I?.name||"",message:`Reminder email sent to ${I?.name||"member"}`,status:"Delivered"};ye(U),Q(`Reminder email sent to ${I?.name||"member"}!`)}else Q(P.error||"Failed to send reminder email","error")}catch(N){console.error("Error sending reminder:",N),Q("Failed to send reminder email","error")}finally{to(N=>({...N,[l]:!1}))}},Jo=l=>r.filter(I=>I.memberId===l||I.memberEmail&&s.find(U=>U.id===l)?.email?.toLowerCase()===I.memberEmail.toLowerCase()||I.memberName&&s.find(U=>U.id===l)?.name?.toLowerCase()===I.memberName.toLowerCase()).filter(I=>{const U=wn(I);return U==="Unpaid"||U==="Overdue"}).reduce((I,U)=>{const W=parseFloat(U.amount?.replace(/[^0-9.]/g,"")||0);return I+W},0),u=async l=>{try{const N="http://localhost:4000",L=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",P=await fetch(`${N}/api/payments/${l}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:L,adminName:sessionStorage.getItem("adminName")||"Admin"})});if(!P.ok){const U=await P.json().catch(()=>({}));throw new Error(U.error||"Failed to approve payment")}await D(),await F();const I=c.find(U=>U.id===l)||o.find(U=>U.id===l);if(I&&I.memberId){const U=Jo(I.memberId),W=U>0?`$${U.toFixed(2)} Outstanding`:"$0";try{await fe(I.memberId,{balance:W})}catch(ve){console.error("Error updating member balance:",ve)}}Q("Payment approved successfully!")}catch(N){console.error("Error approving payment:",N),Q(N.message||"Failed to approve payment","error")}},h=async l=>{try{const N=window.prompt("Enter rejection reason (optional):")||"",L="http://localhost:4000",P=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",I=await fetch(`${L}/api/payments/${l}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:P,adminName:sessionStorage.getItem("adminName")||"Admin",reason:N})});if(!I.ok){const U=await I.json().catch(()=>({}));throw new Error(U.error||"Failed to reject payment")}await D(),await F(),Q("Payment rejected successfully!")}catch(N){console.error("Error rejecting payment:",N),Q(N.message||"Failed to reject payment","error")}},b=()=>{const l=["memberId","amount","method","screenshot"];if(En){let N=!0,L="";if(En==="memberId"&&!jt.memberId?(N=!1,L="Member is required"):En==="amount"&&(!jt.amount||parseFloat(jt.amount)<=0)?(N=!1,L="Amount must be a positive number"):En==="method"&&!jt.method?(N=!1,L="Payment method is required"):En==="screenshot"&&jt.method==="Cash"&&!jt.screenshot&&(N=!1,L="Screenshot upload is required for Cash payments"),N)li(P=>({...P,[En]:!1})),io(null);else return li(P=>({...P,[En]:!0})),Q(L,"error"),!1}for(const N of l){let L=!0,P="";if(N==="memberId"&&!jt.memberId?(L=!1,P="Member is required"):N==="amount"&&(!jt.amount||parseFloat(jt.amount)<=0)?(L=!1,P="Amount must be a positive number"):N==="method"&&!jt.method?(L=!1,P="Payment method is required"):N==="screenshot"&&jt.method==="Cash"&&!jt.screenshot&&(L=!1,P="Screenshot upload is required for Cash payments"),!L)return li({memberId:!1,amount:!1,method:!1,screenshot:!1}),li(I=>({...I,[N]:!0})),io(N),Q(P,"error"),!1}return li({memberId:!1,amount:!1,method:!1,screenshot:!1}),io(null),!0},k=async l=>{if(l.preventDefault(),!!b())try{await se(jt),Q("Payment added successfully!"),Cs(!1),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await D()}catch(N){console.error("Error adding payment:",N),Q(N.message||"Failed to add payment","error")}},E=l=>{Ci(l),Mn({memberId:l.memberId||"",member:l.member||"",invoiceId:l.invoiceId||"",amount:l.amount||"",method:l.method||"",reference:l.reference||"",date:l.date||l.createdAt?new Date(l.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:l.status||"Pending",screenshot:l.screenshot||"",notes:l.notes||""}),Cs(!0)},O=async l=>{l.preventDefault();try{if(!jt.memberId||!jt.amount){Q("Please fill all required fields","error");return}if(jt.method==="Cash"&&!jt.screenshot){Q("Screenshot upload is required for Cash payments","error");return}const N="http://localhost:4000",L=ka._id||ka.id,P=await fetch(`${N}/api/payments/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(jt)});if(!P.ok){const I=await P.json().catch(()=>({}));throw new Error(I.error||"Failed to update payment")}Q("Payment updated successfully!"),Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await D(),await F()}catch(N){console.error("Error updating payment:",N),Q(N.message||"Failed to update payment","error")}},B=async l=>{De("Are you sure you want to delete this payment? This action cannot be undone.",async()=>{try{const L=await fetch(`http://localhost:4000/api/payments/${l}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!L.ok){const P=await L.json().catch(()=>({}));throw new Error(P.error||"Failed to delete payment")}Q("Payment deleted successfully!"),await D(),await F()}catch(N){console.error("Error deleting payment:",N),Q(N.message||"Failed to delete payment","error")}})},V=async()=>{if(!xt){Q("Only Owner and Finance Admin can send bulk reminders","error");return}if(!fn.emailUser||!fn.emailPassword){Q("Please configure email credentials first","error");return}ii(!0);try{const N=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sendToAll:!0})}),L=await N.json();N.ok?Q(L.message||"Reminder emails sent successfully!"):Q(L.error||"Failed to send reminder emails","error")}catch(l){console.error("Error sending reminders:",l),Q("Failed to send reminder emails","error")}finally{ii(!1)}},J=async()=>{if(!xt){Q("Only Owner and Finance Admin can send bulk reminders","error");return}const l=s.filter(N=>{if(!N.balance||!N.phone)return!1;const L=N.balance.toString();return parseFloat(L.replace(/[^0-9.]/g,"")||0)>0});if(l.length===0){Q("No outstanding members with phone numbers found","error");return}Ni(!0);try{for(let N=0;N<l.length;N++){const L=l[N],P=r.filter(Je=>Je.memberId===L.id&&(Je.status==="Unpaid"||Je.status==="Overdue")),I=P.reduce((Je,Xe)=>Je+parseFloat(Xe.amount.replace("$","")),0),U=P.map((Je,Xe)=>`${Xe+1}. *${Je.period}*: ${Je.amount} (Due: ${Je.due}) - _${Je.status}_`).join(`
`),W=`    

Dear *${L.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${L.id}
*Email:* ${L.email}
*Total Outstanding:* $${I}

* Outstanding Invoices (${P.length}):*
${U}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,be=`https://wa.me/${L.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(W)}`;setTimeout(()=>{window.open(be,"_blank");const Je={channel:"WhatsApp",type:"Bulk Outstanding Reminder",memberId:L.id,memberEmail:L.email,memberName:L.name,message:`WhatsApp reminder sent to ${L.name} (${L.phone}) - $${I} due (${P.length} invoice${P.length>1?"s":""})`,status:"Delivered"};ye(Je)},N*1e3)}Q(` Opening WhatsApp for ${l.length} members. Please review and send each message.`)}catch(N){console.error("Error sending WhatsApp reminders:",N),Q("Failed to open WhatsApp","error")}finally{Ni(!1)}};q.useEffect(()=>{ht==="donations"&&je()},[ht]),q.useEffect(()=>{Wi(1)},[Br]),q.useEffect(()=>{_o(1)},[ir]),q.useEffect(()=>{ht==="members"?Wi(1):ht==="payment-approvals"?_o(1):ht==="donations"?Io(1):ht==="reports"&&Fn(1)},[ht]),q.useEffect(()=>{Fn(1)},[Kn,na,ma]),q.useEffect(()=>{const l=s.filter(L=>!Br||L.name?.toLowerCase().includes(Br.toLowerCase())),N=Math.ceil(l.length/ci);oo>N&&N>0&&Wi(1)},[s,Br,ci,oo]),q.useEffect(()=>{const l=(o||[]).filter(L=>ir==="All"?!0:L.status===ir),N=Math.ceil(l.length/ui);di>N&&N>0&&_o(1)},[o,ir,ui,di]),q.useEffect(()=>{const N=(Array.isArray(oe)?oe:[]).filter(P=>P!==null),L=Math.ceil(N.length/Gs);il>L&&L>0&&Io(1)},[oe,Gs,il]),q.useEffect(()=>{try{localStorage.setItem("expenseCategories",JSON.stringify(ls))}catch(l){console.error("Error saving expense categories to localStorage:",l)}},[ls]),q.useEffect(()=>{const l=sessionStorage.getItem("adminId");if(l&&a&&a.length>0){const N=a.find(L=>L.id===l);N&&N.organization_id&&sessionStorage.getItem("organization_id")!==N.organization_id&&sessionStorage.setItem("organization_id",N.organization_id)}},[a]),q.useEffect(()=>{try{const l=localStorage.getItem("expenses"),N=l?JSON.parse(l):[];if(Ve){const L=N.filter(P=>P.organization_id===Ve);ua(L)}else ua([])}catch(l){console.error("Error loading expenses:",l),ua([])}},[Ve]);const ae=q.useMemo(()=>{let l=[...da];if(Va!=="All"&&(l=l.filter(N=>N.categoryId===Va)),Ha.from){const N=new Date(Ha.from);N.setHours(0,0,0,0),l=l.filter(L=>new Date(L.date)>=N)}if(Ha.to){const N=new Date(Ha.to);N.setHours(23,59,59,999),l=l.filter(L=>new Date(L.date)<=N)}if(ms!=="All"&&(l=l.filter(N=>N.paymentMode===ms)),ni){const N=ni.toLowerCase();l=l.filter(L=>(L.description||"").toLowerCase().includes(N)||(L.categoryName||"").toLowerCase().includes(N))}return l.sort((N,L)=>{const P=new Date(N.date||N.createdAt||0);return new Date(L.date||L.createdAt||0)-P})},[da,Va,Ha,ms,ni]);q.useEffect(()=>(Ys?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[Ys]),q.useEffect(()=>{pa().catch(l=>{console.error("Failed to fetch email settings:",l)}),ll().catch(l=>{console.error("Failed to fetch email template:",l)})},[]);const we=l=>{if(l==="dashboard")return[{id:"dashboard",label:"Dashboard"}];for(const L of vt){const P=L.items.find(I=>I.id===l);if(P)return[{id:"dashboard",label:"Dashboard"},{id:L.id,label:L.label},{id:l,label:P.label}]}const N=Pt.find(L=>L.id===l);return N?[{id:"dashboard",label:"Dashboard"},{id:l,label:N.label}]:[{id:"dashboard",label:"Dashboard"}]},_e=l=>{const N=we(l),L=vt.find(P=>P.items.some(I=>I.id===l));return e.jsxs("div",{className:"admin-breadcrumb-tabs-container",children:[N.length>1&&e.jsx("div",{className:"admin-breadcrumb-container admin-breadcrumb-container--small",children:N.map((P,I)=>e.jsxs("span",{children:[I>0&&e.jsx("span",{className:"admin-breadcrumb-separator",children:" > "}),I===N.length-1?e.jsx("span",{className:"admin-breadcrumb-current",children:P.label}):I===0?e.jsx("span",{onClick:()=>re(P.id),className:"admin-breadcrumb-link--inline",children:P.label}):e.jsx("span",{className:"admin-breadcrumb-link--inline admin-breadcrumb-link--no-click",children:P.label})]},P.id))}),L&&L.items.length>1&&e.jsx("div",{className:"admin-breadcrumb-tabs",children:L.items.map(P=>e.jsx("button",{className:`admin-breadcrumb-tab ${l===P.id?"admin-breadcrumb-tab--active":""}`,onClick:()=>re(P.id),children:P.label},P.id))})]})},re=l=>{console.log("Navigating to section:",l),Ot(l),Se(!1),We(!1),Tn(!1),Jr(!1);const N=vt.find(L=>L.items.some(P=>P.id===l));N&&!nt[N.id]&&ft(L=>{const P={};return vt.forEach(I=>{P[I.id]=I.id===N.id}),P})},Ae=()=>{Q("You have been logged out","success"),setTimeout(()=>{Mo("/login",{replace:!0})},500)},Re=async(l,N)=>{try{const L="http://localhost:4000",P=sessionStorage.getItem("adminEmail")||"Owner",I=await fetch(`${L}/api/auth/password-reset-requests/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:N,handledBy:P})}),U=await I.json();I.ok?(Q(U.message||"Password updated and email sent successfully"),js(!1),Cr(null),Ss({newPassword:""}),ce()):Q(U.error||"Failed to update password","error")}catch(L){console.error("Error updating password:",L),Q("Failed to update password","error")}},Q=(l,N="success")=>{Ht(l),Sn(N),setTimeout(()=>Ht(null),3e3)},De=(l,N,L=null,P="Confirm")=>{Xr({isOpen:!0,message:l,confirmButtonText:P,onConfirm:()=>{Xr({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),N&&N()},onCancel:()=>{Xr({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),L&&L()}})},Ge=()=>(la({name:!1}),!Ar.name||!Ar.name.trim()?(la(l=>({...l,name:!0})),qn("name"),Q("Category name is required","error"),!1):(qn(null),!0)),Ke=l=>{if(l.preventDefault(),!Ge())return;if(!Ve){Q("Organization ID not found. Please log in again.","error");return}const N={id:`expense-cat-${Date.now()}`,name:Ar.name.trim(),description:Ar.description.trim()||"",status:Ar.status||"Active",organization_id:Ve,createdAt:new Date().toISOString()};La([...ls,N]),yr({name:"",description:"",status:"Active"}),la({name:!1}),qn(null),bs(!1),Q("Category added successfully!","success")},tt=l=>{ar(l),yr({name:l.name||"",description:l.description||"",status:l.status||"Active"}),la({name:!1}),qn(null),bs(!0)},rt=l=>{if(l.preventDefault(),!Ge())return;if(!Fi){Q("No category selected for editing.","error");return}if(!Ve){Q("Organization ID not found. Please log in again.","error");return}if(Fi.organization_id!==Ve){Q("You can only edit categories from your organization.","error");return}const N=ls.map(L=>L.id===Fi.id&&L.organization_id===Ve?{...L,name:Ar.name.trim(),description:Ar.description.trim()||"",status:Ar.status||"Active",updatedAt:new Date().toISOString()}:L);La(N),yr({name:"",description:"",status:"Active"}),la({name:!1}),qn(null),ar(null),bs(!1),Q("Category updated successfully!","success")},zt=l=>{const N=Rs.find(P=>P.id===l),L=N?N.name:"this category";if(!Ve){Q("Organization ID not found. Please log in again.","error");return}if(N&&N.organization_id!==Ve){Q("You can only delete categories from your organization.","error");return}De(`Are you sure you want to delete "${L}"? This action cannot be undone.`,async()=>{try{La(ls.filter(P=>!(P.id===l&&P.organization_id===Ve))),Q("Category deleted successfully!","success")}catch(P){console.error("Failed to delete category:",P),Q("Failed to delete category. Please try again.","error")}},null,"Delete")};q.useMemo(()=>Ve?Rs.filter(l=>l.status==="Active"):[],[Rs,Ve]);const kt=q.useCallback(l=>{if(!l||!Ve)return null;const N=Rs.find(L=>L.id===l&&L.organization_id===Ve);return N?N.name:null},[Rs,Ve]),an=()=>{if(sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),!Ut.categoryName||!Ut.categoryName.trim())return sr(N=>({...N,categoryId:!0})),Jn("categoryId"),Q("Expense category is required","error"),!1;if(!Ut.amount||!Ut.amount.trim())return sr(N=>({...N,amount:!0})),Jn("amount"),Q("Amount is required","error"),!1;const l=parseFloat(Ut.amount);return isNaN(l)||l<=0?(sr(N=>({...N,amount:!0})),Jn("amount"),Q("Amount must be a valid positive number","error"),!1):!Ut.date||!Ut.date.trim()?(sr(N=>({...N,date:!0})),Jn("date"),Q("Date is required","error"),!1):isNaN(new Date(Ut.date).getTime())?(sr(N=>({...N,date:!0})),Jn("date"),Q("Please select a valid date","error"),!1):!Ut.paymentMode||!Ut.paymentMode.trim()?(sr(N=>({...N,paymentMode:!0})),Jn("paymentMode"),Q("Payment mode is required","error"),!1):(Jn(null),!0)},It=q.useMemo(()=>{if(!Ut.categoryName||!Ut.categoryName.trim()||!Ut.amount||!Ut.amount.trim())return!1;const l=parseFloat(Ut.amount);return!(isNaN(l)||l<=0||!Ut.date||!Ut.date.trim()||isNaN(new Date(Ut.date).getTime())||!Ut.paymentMode||!Ut.paymentMode.trim())},[Ut]),bn=async l=>{if(l.preventDefault(),!!an()){if(!Ve){Q("Organization ID not found. Please log in again.","error");return}fs(!0);try{let N=Ut.attachment;if(ds){const I="http://localhost:4000",U=new FormData;U.append("attachment",ds),U.append("uploadType","expense-attachment");const W=await fetch(`${I}/api/upload/attachment`,{method:"POST",body:U});if(!W.ok){let be="Failed to upload attachment";try{be=(await W.json()).error||be}catch{be=`Upload failed with status ${W.status}`}throw new Error(be)}const ve=await W.json();N=ve.url||ve.secure_url}const L={id:`expense-${Date.now()}`,categoryId:"",categoryName:Ut.categoryName.trim(),description:Ut.description.trim()||"",amount:parseFloat(Ut.amount),date:Ut.date,paymentMode:Ut.paymentMode,attachment:N||"",attachmentFileName:ws||"",organization_id:Ve,createdAt:new Date().toISOString()},P=JSON.parse(localStorage.getItem("expenses")||"[]");if(P.push(L),localStorage.setItem("expenses",JSON.stringify(P)),Ve){const I=P.filter(U=>U.organization_id===Ve);ua(I)}Rr({categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Bs(!1),Q("Expense added successfully!","success"),ht!=="expense-list"&&re("expense-list")}catch(N){console.error("Failed to add expense:",N),Q(N.message||"Failed to add expense. Please try again.","error")}finally{fs(!1)}}},wr=l=>{Jt(l),Rr({categoryName:l.categoryName||"",categoryId:l.categoryId||"",description:l.description||"",amount:l.amount?.toString()||"",date:l.date||"",paymentMode:l.paymentMode||"",attachment:l.attachment||""}),_a(null),ca(l.attachment||null),Wa(l.attachmentFileName||""),sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Bs(!0)},dn=async l=>{if(l.preventDefault(),!!an()){if(!hs){Q("No expense selected for editing.","error");return}if(!Ve){Q("Organization ID not found. Please log in again.","error");return}if(hs.organization_id!==Ve){Q("You can only edit expenses from your organization.","error");return}fs(!0);try{let N=Ut.attachment;if(ds){const U="http://localhost:4000",W=new FormData;W.append("attachment",ds),W.append("uploadType","expense-attachment");const ve=await fetch(`${U}/api/upload/attachment`,{method:"POST",body:W});if(!ve.ok){let Je="Failed to upload attachment";try{Je=(await ve.json()).error||Je}catch{Je=`Upload failed with status ${ve.status}`}throw new Error(Je)}const be=await ve.json();N=be.url||be.secure_url}const L={...hs,categoryId:"",categoryName:Ut.categoryName.trim(),description:Ut.description.trim()||"",amount:parseFloat(Ut.amount),date:Ut.date,paymentMode:Ut.paymentMode,attachment:N||Ut.attachment||"",attachmentFileName:ws||hs.attachmentFileName||"",updatedAt:new Date().toISOString()},I=JSON.parse(localStorage.getItem("expenses")||"[]").map(U=>U.id===hs.id?L:U);if(localStorage.setItem("expenses",JSON.stringify(I)),Ve){const U=I.filter(W=>W.organization_id===Ve);ua(U)}Rr({categoryName:"",categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Jt(null),Bs(!1),Q("Expense updated successfully!","success")}catch(N){console.error("Failed to update expense:",N),Q(N.message||"Failed to update expense. Please try again.","error")}finally{fs(!1)}}},At=l=>{const N=da.find(P=>P.id===l),L=N&&(N.description||N.categoryName)||"this expense";if(!Ve){Q("Organization ID not found. Please log in again.","error");return}if(N&&N.organization_id!==Ve){Q("You can only delete expenses from your organization.","error");return}De(`Are you sure you want to delete "${L}"? This action cannot be undone.`,async()=>{try{const I=JSON.parse(localStorage.getItem("expenses")||"[]").filter(U=>!(U.id===l&&U.organization_id===Ve));if(localStorage.setItem("expenses",JSON.stringify(I)),Ve){const U=I.filter(W=>W.organization_id===Ve);ua(U)}Q("Expense deleted successfully!","success")}catch(P){console.error("Failed to delete expense:",P),Q("Failed to delete expense. Please try again.","error")}},null,"Delete")},gt=async l=>{if(l.preventDefault(),!!ei())try{gr(!0),await G(gn),Ft({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),Se(!1),Q("Member added successfully!","success")}catch(N){console.error("Failed to add member:",N),Q("Failed to add member. Please try again.","error")}finally{gr(!1)}},_r=l=>{tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),st(l),Ft({name:l.name||"",email:l.email||"",phone:l.phone||"",status:l.status||"Active"}),Se(!0)},nn=async l=>{if(l.preventDefault(),!!ei())try{if(!ct){Q("No member selected for editing.","error");return}const N={},L=ct;if(gn.name!==(L.name||"")&&(N.name=gn.name),gn.email!==(L.email||"")&&(N.email=gn.email),gn.phone!==(L.phone||"")&&(N.phone=gn.phone),gn.status!==(L.status||"Active")&&(N.status=gn.status),gn.password&&gn.password.trim()!==""&&(N.password=gn.password),Object.keys(N).length===0){Q("No changes to update.","error");return}await fe(ct.id,N),st(null),Ft({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),Se(!1),Q("Member updated successfully!")}catch{Q("Failed to update member. Please try again.","error")}},vn=async l=>{De("Are you sure you want to delete this member?",async()=>{try{await he(l),Q("Member deleted successfully!")}catch{Q("Failed to delete member. Please try again.","error")}})},Zn=l=>{if(l.preventDefault(),!St.memberId||!St.period||!St.due){Q("Please fill all required fields","error");return}const N=parseFloat(St.amount);if(!N||N<=0||isNaN(N)){Q("Amount must be a positive number","error");return}const L=s.find(I=>I.id===St.memberId),P={id:wi(),memberId:St.memberId,memberName:L?.name||"",period:St.period,amount:`$${N.toFixed(2)}`,status:"Unpaid",due:St.due,method:"-",reference:"-",notes:St.notes||""};Be(P),le({...P,member:L}),Qr(!0),rr({memberId:"",period:qr(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),We(!1),Q("Invoice created successfully!")},ra=async(l,N="Cash",L=null,P=null)=>{try{const I=r.find(Kt=>Kt.id===l);if(!I){Q("Invoice not found","error");return}if(I.status==="Paid"){Q("Invoice is already marked as paid","error");return}const U=sessionStorage.getItem("adminEmail"),W=a.find(Kt=>Kt.email===U),ve=sessionStorage.getItem("adminId")||W?.id||"Admin",be=sessionStorage.getItem("adminName")||W?.name||"Admin";let Je="Cash to Admin",Xe;N==="Online"?(Je="Online Payment",Xe=P||`ONL_${Date.now()}`):Xe=`CASH_${Date.now()}`;const mt=await fetch("http://localhost:4000/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceId:l,amount:I.amount,method:Je,reference:Xe,member:I.memberName||"Member",memberId:I.memberId,memberEmail:I.memberEmail,period:I.period,status:"Completed",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),paidToAdmin:ve,paidToAdminName:be,approvedBy:be,approvedAt:new Date().toISOString(),screenshot:L||I.screenshot||null})});if(!mt.ok){const Kt=await mt.json().catch(()=>({}));throw new Error(Kt.error||"Failed to create payment record")}const mn=await mt.json();if(await ge(l,{status:"Paid",method:Je,reference:Xe,paidToAdmin:ve,paidToAdminName:be}),await Promise.all([F(),D(),_()]),I.memberId){const Kt=s.find(jn=>jn.id===I.memberId);Q(Kt?`Invoice marked as paid (${Je})! Balance updated.`:`Invoice marked as paid (${Je})!`,"success")}else Q(`Invoice marked as paid (${Je})!`,"success")}catch(I){console.error("Error marking invoice as paid:",I),Q(I.message||"Failed to mark invoice as paid","error")}},Ir=l=>{const N=r.find(L=>L.id===l);if(!N){Q("Invoice not found","error");return}if(N.status==="Paid"||N.status==="Completed"){Q("Paid invoices cannot be deleted","error");return}De("Are you sure you want to delete this invoice? This cannot be undone.",()=>{te(l),Q("Invoice deleted successfully!")})},hr=l=>{if(!l){Q("No member selected","error");return}if(!l.phone){Q("This member has no phone number","error");return}Ra(be=>({...be,[l.id]:!0}));const N=r.filter(be=>be.memberId===l.id&&(be.status==="Unpaid"||be.status==="Overdue"));if(N.length===0){Q("This member has no outstanding payments","error"),Ra(be=>({...be,[l.id]:!1}));return}const L=N.reduce((be,Je)=>be+parseFloat(Je.amount.replace("$","")),0),P=N.map((be,Je)=>`${Je+1}. *${be.period}*: ${be.amount} (Due: ${be.due}) - _${be.status}_`).join(`
`),I=`    

Dear *${l.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${l.id}
*Email:* ${l.email}
*Total Outstanding:* $${L}

* Outstanding Invoices (${N.length}):*
${P}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,W=`https://wa.me/${l.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(I)}`;window.open(W,"_blank");const ve={channel:"WhatsApp",type:"Manual Outstanding Reminder",memberId:l.id,memberEmail:l.email,memberName:l.name,message:`WhatsApp reminder sent to ${l.name} (${l.phone}) - $${L} due (${N.length} invoice${N.length>1?"s":""})`,status:"Delivered"};ye(ve),Q(` WhatsApp opened for ${l.name}! Review and send the message.`),setTimeout(()=>{Ra(be=>({...be,[l.id]:!1}))},2e3)},zr=(l,N=!1,L=null)=>{N||(Ta({type:L?"manual":"single",memberData:l||null,memberId:L||null}),Oa([]),Qa(!0))},Er=l=>{Hr?.type==="bulk"?Oa(N=>N.includes(l)?N.filter(L=>L!==l):[...N,l]):kn(l)},cr=async()=>{if(Pn.length===0){Q("Please select at least one channel","error");return}const l=Pn.length===2?"Are you sure you want to send reminders via Email AND WhatsApp to ALL outstanding members?":Pn.includes("Email")?"Are you sure you want to send reminder emails to ALL outstanding members?":"Are you sure you want to open WhatsApp for all outstanding members? This will open multiple WhatsApp windows.";De(l,async()=>{try{Pn.includes("Email")&&await V(),Pn.includes("WhatsApp")&&(Pn.includes("Email")&&await new Promise(N=>setTimeout(N,1e3)),await J()),Oa([])}catch(N){console.error("Error sending bulk reminders:",N)}})},kn=async l=>{if(Qa(!1),Hr?.memberData)l==="Email"?await Rn(Hr.memberData):l==="WhatsApp"&&hr(Hr.memberData);else if(Hr?.memberId){if(l==="Email")await Li(Hr.memberId);else if(l==="WhatsApp"){const N=s.find(L=>L.id===Hr.memberId);N&&hr(N)}}Ta(null),Oa([])},Rn=async l=>{if(!l){Q("No member selected","error");return}const N=r.filter(U=>U.memberId===l.id&&(U.status==="Unpaid"||U.status==="Overdue"));if(N.length===0){Q("This member has no outstanding payments","error");return}const L=N.reduce((U,W)=>U+parseFloat(W.amount.replace("$","").replace(",","")||0),0),P=N.map(U=>` ${U.period}: ${U.amount} (Due: ${U.due}) - ${U.status}`).join(`
`),I=N.map(U=>`<li style="margin-bottom: 10px;">
            <strong>${U.period}</strong>: ${U.amount} 
            <span style="color: #666;">(Due: ${U.due})</span> - 
            <strong style="color: ${U.status==="Overdue","#ef4444"}">${U.status}</strong>
          </li>`).join("");try{Q("Sending reminder email...");const W=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:l.email,toName:l.name,memberId:l.id,totalDue:`$${L.toFixed(2)}`,invoiceCount:N.length,invoiceListText:P,invoiceListHTML:I,paymentMethods:"FPS, PayMe, or Bank Transfer",portalLink:`${window.location.origin}/member`})}),ve=await W.json();if(!W.ok)throw new Error(ve.error||"Failed to send email");console.log(" Email sent successfully:",ve);const be={channel:"Email",type:"Manual Outstanding Reminder",memberId:l.id,memberEmail:l.email,memberName:l.name,message:`Payment reminder: ${l.name} (${l.email}) - $${L.toFixed(2)} due (${N.length} invoice${N.length>1?"s":""})`,status:"Delivered"};ye(be),Q(` Reminder email sent to ${l.name} for $${L.toFixed(2)} outstanding!`)}catch(U){console.error(" Email send error:",U);const W={channel:"Email",type:"Manual Outstanding Reminder",memberId:l.id,memberEmail:l.email,memberName:l.name,message:`Reminder attempt to ${l.name} - $${L.toFixed(2)} due`,status:"Failed"};ye(W),Q(U.message||"Failed to send email. Please check email configuration.","error")}},Qn=l=>{ee(l),Ot("member-detail")},wn=l=>(c||[]).find(L=>L.invoiceId===l.id&&(L.status==="Completed"||L.status==="Paid"))?"Paid":l.status,er=l=>r.filter(N=>N.memberId===l),jr=async l=>{try{const L=await fetch(`http://localhost:4000/api/members/${l}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!L.ok){const P=await L.json().catch(()=>({}));throw new Error(P.error||"Failed to approve member")}await _(),Q("Member approved successfully! Approval email sent.")}catch(N){console.error("Error approving member:",N),Q(N.message||"Failed to approve member","error")}};return e.jsxs(e.Fragment,{children:[e.jsx(Zc,{showCTA:!1,showLogout:!0,onLogout:Ae,showMobileMenu:!0,isMobileMenuOpen:Ys,onMobileMenuToggle:()=>Jr(!Ys),isSticky:!0}),Xn.isOpen&&e.jsx("div",{className:"confirmation-dialog-overlay",onClick:l=>{l.stopPropagation()},children:e.jsxs("div",{className:"confirmation-dialog",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"confirmation-dialog-content",children:e.jsx("p",{className:"confirmation-dialog-message",children:Xn.message})}),e.jsx("div",{className:"confirmation-dialog-divider"}),e.jsxs("div",{className:"confirmation-dialog-actions",children:[e.jsx("button",{className:"secondary-btn",onClick:Xn.onCancel||(()=>Xr({isOpen:!1,message:"",onConfirm:null,onCancel:null})),children:"Cancel"}),e.jsx("button",{className:"danger-btn admin-confirmation-button-success",onClick:Xn.onConfirm,children:Xn.confirmButtonText||"Confirm"})]})]})}),oi&&e.jsx("div",{className:"modal-overlay modal-overlay-high",onClick:l=>{l.target===l.currentTarget&&As(!1)},children:e.jsxs("div",{className:"card admin-template-preview-modal modal-container modal-container-800",style:{maxWidth:"900px"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header mb-2xl",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-eye text-primary"}),"Email Template Preview"]}),e.jsx("button",{type:"button",onClick:()=>As(!1),className:"close-btn-simple","aria-label":"Close template preview",children:""})]}),e.jsx("div",{className:"admin-template-preview-content",dangerouslySetInnerHTML:{__html:El()}}),e.jsx("div",{className:"mt-2xl pt-xl border-t flex justify-end",children:e.jsx("button",{className:"secondary-btn",onClick:()=>As(!1),children:"Close"})})]})}),Si&&e.jsx("div",{className:"modal-overlay modal-overlay-high",onClick:()=>{Qa(!1),Ta(null)},children:e.jsxs("div",{className:"admin-modal-card admin-modal-card--small",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header mb-2xl",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon-spacing-sm",style:{verticalAlign:"middle",display:"inline-block"},children:e.jsx("path",{d:"M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z",fill:"#5a31ea"})}),"Select Channel"]}),e.jsx("button",{type:"button",onClick:()=>{Qa(!1),Ta(null)},className:"close-btn-simple",children:""})]}),e.jsx("p",{className:"mb-2xl text-muted",children:Hr?.type==="bulk"?Pn.length>0?`Selected: ${Pn.join(" and ")}. Click "Send" to send reminders to all outstanding members.`:"Select one or both channels to send reminders to all outstanding members:":`Select the channel to send reminder to ${Hr?.memberData?.name||"member"}:`}),e.jsx("div",{className:"admin-channel-buttons-container",children:Hr?.type==="bulk"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`admin-channel-button ${Pn.includes("Email")?"admin-channel-button--selected":""}`,onClick:()=>Er("Email"),children:[e.jsxs("div",{className:"admin-channel-button-content",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"#ffffff"})}),e.jsx("span",{className:"admin-channel-button-text-white",children:"Email"})]}),Pn.includes("Email")&&e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginLeft:"8px"},children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",fill:"#ffffff"})})]}),e.jsxs("button",{className:`admin-channel-button ${Pn.includes("WhatsApp")?"admin-channel-button--selected":""}`,onClick:()=>Er("WhatsApp"),children:[e.jsxs("div",{className:"admin-channel-button-content",children:[e.jsx("i",{className:"fab fa-whatsapp admin-channel-button-icon-white"}),e.jsx("span",{className:"admin-channel-button-text-white",children:"WhatsApp"})]}),Pn.includes("WhatsApp")&&e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginLeft:"8px"},children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",fill:"#ffffff"})})]}),Pn.length>0&&e.jsx("button",{className:`admin-channel-send-button ${br||$n?"admin-channel-send-button-loading":""}`,onClick:cr,disabled:br||$n,children:br||$n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"login-btn-spinner",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z",fill:"#ffffff"})}),"Send"]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"admin-channel-action-button",onClick:()=>Er("Email"),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"currentColor"})}),"Email"]}),e.jsxs("button",{className:"admin-channel-action-button admin-channel-action-button--whatsapp",onClick:()=>Er("WhatsApp"),children:[e.jsx("i",{className:"fab fa-whatsapp admin-channel-action-icon-large"}),"WhatsApp"]})]})}),e.jsx("div",{className:"admin-modal-footer",children:e.jsx("button",{className:"secondary-btn",onClick:()=>{Qa(!1),Ta(null),Oa([])},children:"Cancel"})})]})}),e.jsx(Yl,{message:un,type:Qt,onClose:()=>Ht(null),duration:3e3}),e.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[Ys&&e.jsx("div",{className:"mobile-menu-overlay",onClick:()=>Jr(!1)}),e.jsxs("div",{className:"admin-layout",children:[e.jsxs("aside",{className:`admin-menu ${Ys?"mobile-open":""}`,onClick:l=>l.stopPropagation(),children:[e.jsx("p",{className:"eyebrow light",children:yt}),e.jsxs("nav",{className:"admin-nav-grouped",children:[e.jsx("div",{className:"nav-group",children:e.jsxs("button",{className:`admin-tab ${ht==="dashboard"?"active":""}`,onClick:()=>{re("dashboard"),Jr(!1)},children:[e.jsx("i",{className:"fas fa-chart-line admin-nav-icon"}),"Dashboard"]})}),vt.map(l=>e.jsxs("div",{className:"nav-group",children:[e.jsxs("button",{className:"nav-group-header",onClick:()=>{ft(N=>{if(N[l.id])return{...N,[l.id]:!1};{const P={};return vt.forEach(I=>{P[I.id]=I.id===l.id}),P}})},type:"button",children:[e.jsx("i",{className:`fas ${l.icon} admin-nav-icon`}),e.jsx("span",{className:"nav-group-label",children:l.label}),e.jsx("i",{className:`fas fa-chevron-down nav-group-chevron admin-nav-chevron ${nt[l.id]?"expanded":""}`})]}),e.jsx("div",{className:`nav-group-items ${nt[l.id]?"expanded":""}`,children:l.items.map(N=>e.jsx("button",{className:`admin-tab admin-tab-nested ${ht===N.id?"active":""}`,onClick:()=>{re(N.id),Jr(!1)},children:N.label},N.id))})]},l.id))]})]}),e.jsxs("div",{className:"admin-body",children:[ht==="dashboard"&&e.jsxs("article",{className:"screen-card",id:"dashboard",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("dashboard"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-chart-line admin-section-icon"}),"Dashboard"]}),e.jsx("p",{children:"Key KPIs, monthly collections, recent payments."})]})}),e.jsxs("div",{className:"admin-dashboard-main-card",children:[e.jsxs("div",{className:"kpi-grid",children:[e.jsx(Sa,{icon:"fas fa-users",label:"Total Members",value:Mr(s.length),description:"Active members",onClick:()=>re("members")}),e.jsx(Sa,{icon:"fas fa-dollar-sign",iconClass:"admin-dashboard-kpi-icon--green",label:"Total Collected",value:`$${Mr(Lr.collectedMonth,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:`$${Mr(Lr.collectedYear,{minimumFractionDigits:2,maximumFractionDigits:2})} YTD`,onClick:()=>re("payments")}),e.jsx(Sa,{icon:"fas fa-exclamation-triangle",iconClass:"admin-dashboard-kpi-icon--red",label:"Total Outstanding",value:`$${Mr(Lr.outstanding,{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:`Expected $${Mr(Lr.expectedAnnual,{minimumFractionDigits:2,maximumFractionDigits:2})}`,onClick:()=>re("members"),valueClass:Lr.outstanding>0?"admin-dashboard-kpi-value--red":"admin-dashboard-kpi-value--default"}),e.jsx(Sa,{icon:"fas fa-exclamation-circle",iconClass:Lr.overdueMembers>0?"admin-dashboard-kpi-icon--red":"admin-dashboard-kpi-icon--gray",label:"Overdue Members",value:Mr(Lr.overdueMembers),description:"Requires attention",onClick:()=>re("members"),valueClass:Lr.overdueMembers>0?"admin-dashboard-kpi-value--red":"admin-dashboard-kpi-value--default"})]}),e.jsxs("div",{className:"admin-dashboard-last-updated",children:["Last updated: ",Go]}),e.jsxs("div",{className:"admin-dashboard-chart-card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-chart-bar admin-dashboard-chart-header-icon"}),"Monthly Collections  Last 12 Months"]}),e.jsx("p",{children:"Expected contribution is $800 per member per year"})]})}),e.jsxs("div",{ref:Ka,className:"chart admin-dashboard-chart-container",onMouseMove:l=>{ks&&ko(l)},children:[Vi.map(l=>e.jsx("div",{className:"admin-dashboard-chart-bar",style:{height:`${l.percentage}%`},"data-month":l.month,onMouseEnter:N=>{So(l),ko(N)},onMouseMove:N=>{ks?.monthKey===l.monthKey&&ko(N)},onMouseLeave:()=>So(null)},l.monthKey)),ks&&Ka.current&&(()=>{const L=Ka.current.getBoundingClientRect(),P=window.innerHeight;let I=Na.x-220-15;I<10&&(I=10);let U=Na.y-80/2;return L.top+U<10&&(U=10-L.top),L.top+U+80>P-10&&(U=P-10-L.top-80,L.top+U<10&&(U=10-L.top)),e.jsxs("div",{className:"admin-dashboard-chart-tooltip",style:{left:`${I}px`,top:`${U}px`},children:[e.jsx("div",{className:"admin-dashboard-chart-tooltip-header",children:e.jsx("strong",{children:ks.monthKey})}),e.jsxs("div",{className:"admin-dashboard-chart-tooltip-content",children:[e.jsxs("div",{className:"admin-dashboard-chart-tooltip-row",children:[e.jsx("span",{children:"Amount:"}),e.jsx("strong",{children:Wc(ks.value)})]}),ks.count>0&&e.jsxs("div",{className:"admin-dashboard-chart-tooltip-row",children:[e.jsx("span",{children:"Payments:"}),e.jsxs("strong",{children:[ks.count," payment",ks.count>1?"s":""]})]})]})]})})()]})]}),e.jsxs("div",{className:"admin-dashboard-payments-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-clock admin-icon",style:{marginRight:"10px"}}),"Recent Payments"]}),e.jsx("button",{className:"text-btn",onClick:()=>re("members"),children:"View all"})]}),e.jsx(Ua,{columns:["Member","Period","Amount","Method","Status","Date"],rows:co.length>0?co:[{Member:"No payments yet",Period:"-",Amount:"-",Method:"-",Status:"-",Date:"-"}]})]})]})]}),ht==="members"&&e.jsxs("article",{className:"screen-card",id:"members",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{className:"flex justify-between items-center w-full flex-wrap gap-md",children:[e.jsxs("div",{children:[_e("members"),e.jsx("h3",{children:"Members List"}),e.jsx("p",{children:"Manage all members and their subscriptions."})]}),(s||[]).filter(l=>l.status==="Pending").length>0&&e.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending Approval: ",(s||[]).filter(l=>l.status==="Pending").length]}),e.jsx("div",{className:"flex gap-sm flex-wrap",children:e.jsx("button",{className:"primary-btn",onClick:()=>{Se(!0),st(null),Ft({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},children:"+ Add Member"})})]})}),on&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),Se(!1),st(null))},children:e.jsx("div",{className:"admin-members-form-container",onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"admin-members-form-header",children:[e.jsxs("div",{className:"admin-members-form-header-top",children:[e.jsxs("h4",{className:"admin-members-form-title",children:[e.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),ct?"Edit Member":"Add New Member"]}),e.jsx("button",{type:"button",className:"admin-members-form-close",onClick:()=>{tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),Se(!1),st(null)},"aria-label":"Close add member form",children:""})]}),e.jsxs("form",{className:"form-grid",onSubmit:ct?nn:gt,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user admin-members-form-icon","aria-hidden":"true"}),"Name ",e.jsx("span",{className:"admin-members-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:gn.name,onChange:l=>{$a("name",l.target.value),(rn.name||Zt==="name")&&(tr(N=>({...N,name:!1})),Zt==="name"&&nr(null))},className:rn.name&&Zt==="name"?"admin-members-form-input-error":"","aria-invalid":rn.name,onFocus:l=>{rn.name&&Zt==="name"&&(l.target.style.borderColor="#ef4444",l.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")},onBlur:l=>{rn.name&&Zt==="name"&&(l.target.style.borderColor="#ef4444")}})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope","aria-hidden":"true",style:{marginRight:6}}),"Email ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:gn.email,onChange:l=>{$a("email",l.target.value),(rn.email||Zt==="email")&&(tr(N=>({...N,email:!1})),Zt==="email"&&nr(null))},style:{borderColor:rn.email&&Zt==="email"?"#ef4444":void 0,borderWidth:rn.email&&Zt==="email"?"2px":void 0,borderStyle:rn.email&&Zt==="email"?"solid":void 0,outline:rn.email&&Zt==="email"?"none":void 0,boxShadow:rn.email&&Zt==="email"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":rn.email,onFocus:l=>{rn.email&&Zt==="email"&&(l.target.style.borderColor="#ef4444",l.target.style.outline="none",l.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")},onBlur:l=>{rn.email&&Zt==="email"&&(l.target.style.borderColor="#ef4444",l.target.style.outline="none")}})]}),e.jsx("div",{children:e.jsx(Jc,{label:e.jsxs("span",{className:"admin-phone-input-label",children:[e.jsx("i",{className:"fas fa-phone admin-phone-input-label-icon","aria-hidden":"true"}),"WhatsApp Number ",e.jsx("span",{className:"admin-phone-input-required",children:"*"})]}),value:gn.phone,onChange:l=>{$a("phone",l.target.value),(rn.phone||Zt==="phone")&&(tr(N=>({...N,phone:!1})),Zt==="phone"&&nr(null))},onError:l=>{Q(l,"error"),tr(N=>({...N,phone:!0})),nr("phone")},required:!0,className:rn.phone&&Zt==="phone"?"admin-phone-input-error":"",placeholder:"Enter phone number"})}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-toggle-on","aria-hidden":"true",style:{marginRight:6}}),"Status"]}),e.jsxs("select",{value:gn.status,onChange:l=>$a("status",l.target.value),children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"}),e.jsx("option",{children:"Pending"})]})]}),!ct&&e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-id-card","aria-hidden":"true",style:{marginRight:6}}),"Subscription Type"]}),e.jsxs("select",{value:gn.subscriptionType||"Lifetime",onChange:l=>$a("subscriptionType",l.target.value),children:[e.jsx("option",{value:"Lifetime",children:"Lifetime - $250/year"}),e.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500/year"})]})]}),!ct&&e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-wallet","aria-hidden":"true",style:{marginRight:6}}),"Balance"]}),e.jsx("input",{type:"number",inputMode:"numeric",value:gn.balance,readOnly:!0,style:{background:"#f9fafb",cursor:"not-allowed",color:"#666"}})]}),!ct&&e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"Start Date ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:gn.nextDue,onChange:l=>{const N=l.target.value;$a("nextDue",N),(rn.nextDue||Zt==="nextDue")&&(tr(L=>({...L,nextDue:!1})),Zt==="nextDue"&&nr(null))},onBlur:l=>{const N=l.target.value;if(N){const L=new Date(N);if(isNaN(L.getTime())){Q("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[P,I,U]=N.split("-").map(Number);if(I<1||I>12){Q("Invalid month. Please enter a month between 01 and 12","error");return}if(U<1||U>31){Q("Invalid day. Please enter a valid day for the selected month","error");return}const W=new Date(P,I,0).getDate();if(U>W){Q(`Invalid date. ${I}/${P} only has ${W} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:rn.nextDue&&Zt==="nextDue"?"#ef4444":void 0,borderWidth:rn.nextDue&&Zt==="nextDue"?"2px":void 0,borderStyle:rn.nextDue&&Zt==="nextDue"?"solid":void 0,outline:rn.nextDue&&Zt==="nextDue"?"none":void 0,boxShadow:rn.nextDue&&Zt==="nextDue"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":rn.nextDue,onFocus:l=>{rn.nextDue&&Zt==="nextDue"&&(l.target.style.borderColor="#ef4444",l.target.style.outline="none",l.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")}})]}),!ct&&e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"End Date (optional)"]}),e.jsx("input",{type:"date",value:gn.lastPayment,onChange:l=>{const N=l.target.value;$a("lastPayment",N),(rn.lastPayment||Zt==="lastPayment")&&(tr(L=>({...L,lastPayment:!1})),Zt==="lastPayment"&&nr(null))},onBlur:l=>{const N=l.target.value;if(N){const L=new Date(N);if(isNaN(L.getTime())){Q("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[P,I,U]=N.split("-").map(Number);if(I<1||I>12){Q("Invalid month. Please enter a month between 01 and 12","error");return}if(U<1||U>31){Q("Invalid day. Please enter a valid day for the selected month","error");return}const W=new Date(P,I,0).getDate();if(U>W){Q(`Invalid date. ${I}/${P} only has ${W} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:rn.lastPayment&&Zt==="lastPayment"?"#ef4444":void 0,borderWidth:rn.lastPayment&&Zt==="lastPayment"?"2px":void 0,borderStyle:rn.lastPayment&&Zt==="lastPayment"?"solid":void 0,outline:rn.lastPayment&&Zt==="lastPayment"?"none":void 0,boxShadow:rn.lastPayment&&Zt==="lastPayment"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":rn.lastPayment&&Zt==="lastPayment",onFocus:l=>{rn.lastPayment&&Zt==="lastPayment"&&(l.target.style.borderColor="#ef4444",l.target.style.outline="none",l.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")}})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{tr({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),nr(null),Se(!1),st(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn",disabled:Gn,style:{position:"sticky",bottom:0,backgroundColor:"#5a31ea",zIndex:1},children:Gn?"Saving...":ct?"Update Member":"Add Member"})]})]})]})})}),s.filter(l=>l.status==="Pending").length>0&&e.jsxs("div",{style:{background:"#fee2e2",border:"2px solid #ef4444",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:e.jsxs("h4",{className:"m-0 text-danger flex items-center gap-sm",children:[" Pending Approval (",s.filter(l=>l.status==="Pending").length,")"]})}),e.jsx("div",{className:"flex flex-col gap-md",children:s.filter(l=>l.status==="Pending").map(l=>e.jsxs("div",{className:"flex items-center justify-between p-lg bg-white rounded border flex-wrap gap-md",style:{borderColor:"#ef4444"},children:[e.jsxs("div",{className:"flex-1",style:{minWidth:"300px",flexBasis:"300px"},children:[e.jsx("div",{className:"font-semibold mb-xs text-base",children:l.name}),e.jsx("div",{className:"text-sm text-muted mb-xs",children:l.email}),e.jsxs("div",{className:"text-sm text-muted mb-xs",children:[" ",l.phone||"No phone"]}),e.jsxs("div",{className:"text-xs text-danger",style:{marginTop:"8px"},children:[" Subscription: ",l.subscriptionType||"Lifetime"]})]}),e.jsxs("div",{className:"flex gap-sm flex-shrink-0",children:[e.jsx("button",{className:"primary-btn",onClick:()=>jr(l.id),children:" Approve"}),e.jsx("button",{className:"ghost-btn",onClick:()=>Qn(l),children:"View Details"})]})]},l.id))})]}),e.jsx("div",{className:"admin-members-search-card",children:e.jsxs("div",{className:"admin-members-search-container",children:[e.jsxs("label",{className:"admin-members-search-label",children:[e.jsx("span",{className:"admin-members-search-label-text",children:" Search Members:"}),e.jsx("input",{type:"text",placeholder:"Search by member name...",value:Br,onChange:l=>Ao(l.target.value),style:{flex:"1",padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s"},onFocus:l=>l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",onBlur:l=>l.target.style.borderColor="#e0e0e0"})]}),Br&&e.jsx("button",{type:"button",onClick:()=>Ao(""),style:{padding:"10px 16px",background:"#f9fafb",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",color:"#666"},children:"Clear"}),e.jsx("div",{className:"text-sm text-muted",children:`${s.filter(N=>!Br||N.name?.toLowerCase().includes(Br.toLowerCase())).length} of ${s.length} members`})]})}),e.jsx("div",{className:"admin-members-table-card",children:e.jsx("div",{className:"table-wrapper",children:(()=>{const N=[...s.filter(be=>!Br||be.name?.toLowerCase().includes(Br.toLowerCase())).filter(be=>{if(Za==="All")return!0;const Je=be.balance?.toString()||"",Xe=parseFloat(Je.replace(/[^0-9.]/g,"")||0)||0;return(be.status==="Inactive"?"Inactive":be.status==="Pending"?"Pending":Je.toLowerCase().includes("overdue")||Xe>0?"Overdue":"Active")===Za})].sort((be,Je)=>{if(so==="none")return 0;const Xe=mn=>{if(!mn)return 0;const Kt=mn.toString(),jn=parseFloat(Kt.replace(/[^0-9.]/g,"")||0);return isNaN(jn)?0:jn},Nt=Xe(be.balance),mt=Xe(Je.balance);return so==="asc"?Nt-mt:so==="desc"?mt-Nt:0}),L=Math.ceil(N.length/ci)||1,P=Math.min(oo,L),I=(P-1)*ci,U=I+ci,W=N.slice(I,U),ve=Qe==="Owner";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-lg flex gap-md flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"flex gap-md flex-wrap items-center",children:[e.jsx("label",{className:"font-semibold",style:{color:"#1a1a1a"},children:"Filter by Status:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Active",label:"Active"},{value:"Overdue",label:"Overdue"},{value:"Inactive",label:"Inactive"},{value:"Pending",label:"Pending"}].map(be=>e.jsx("button",{type:"button",onClick:()=>ki(be.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Za===be.value?"#5a31ea":"transparent",color:Za===be.value?"#ffffff":"#6b7280",boxShadow:Za===be.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:Je=>{Za!==be.value&&(Je.target.style.background="#e5e7eb",Je.target.style.color="#374151")},onMouseLeave:Je=>{Za!==be.value&&(Je.target.style.background="transparent",Je.target.style.color="#6b7280")},children:be.label},be.value))})]}),e.jsxs("label",{className:"member-sort-by-outstanding text-sm text-muted",children:["Sort by Outstanding:",e.jsxs("select",{value:so,onChange:be=>Co(be.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"#ffffff",fontSize:"0.875rem"},children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"asc",children:"Lowest first"}),e.jsx("option",{value:"desc",children:"Highest first"})]})]})]}),N.length===0?e.jsx("div",{className:"admin-empty-state",children:e.jsx("p",{className:"admin-empty-state-message",children:Za!=="All"?`No ${Za.toLowerCase()} members found.`:"No members found."})}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{columns:["Member Name","Status","Outstanding","Actions"],rows:W.map(be=>{const Je=be.balance?.toString()||"",Xe=parseFloat(Je.replace(/[^0-9.]/g,"")||0)||0,Nt=be.status==="Inactive"?"Inactive":be.status==="Pending"?"Pending":Je.toLowerCase().includes("overdue")||Xe>0?"Overdue":"Active",mt=Nt==="Active"?"badge badge-active":Nt==="Overdue"?"badge badge-overdue":Nt==="Inactive"?"badge badge-inactive":"badge badge-pending";return{"Member Name":be.name,Status:{render:()=>e.jsx("span",{className:mt,children:Nt})},Outstanding:{render:()=>e.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.jsxs("span",{style:{color:Xe>0?"#ef4444":"#111827",fontWeight:Xe>0?600:500},children:["$",Mr(Xe,{minimumFractionDigits:2,maximumFractionDigits:2})]})})},Actions:{render:()=>e.jsxs("div",{className:"flex gap-sm flex-wrap justify-end",children:[e.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>Qn(be),title:"View member","aria-label":"View member",children:e.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),e.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>_r(be),title:"Edit member","aria-label":"Edit member",children:e.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),ve&&e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{De(`Delete member ${be.name}? This cannot be undone.`,()=>vn(be.id))},"aria-label":"Delete member",children:e.jsx(E1,{text:"Delete member",position:"top",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})})]})}}})}),L>0&&N.length>0&&e.jsx(mc,{currentPage:P,totalPages:L,onPageChange:Wi,pageSize:ci,onPageSizeChange:sl,totalItems:N.length})]})]})})()})})]}),ht==="member-detail"&&!Y&&e.jsxs("article",{className:"screen-card",id:"member-detail",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("member-detail"),e.jsx("h3",{children:"Member Detail"}),e.jsx("p",{children:"360 view with invoices, payment history, communications."})]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"80px 40px",textAlign:"center",minHeight:"400px"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"24px",color:"#d1d5db",opacity:.7},children:e.jsx("i",{className:"fas fa-user-circle"})}),e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px"},children:"No Member Selected"}),e.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"32px",maxWidth:"500px",lineHeight:"1.6"},children:"Please select a member from the members list to view their detailed information, invoices, payment history, and communications."}),e.jsxs("button",{className:"primary-btn",onClick:()=>Ot("members"),style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-users"}),"Go to Members List"]})]})]}),ht==="member-detail"&&Y&&e.jsxs("article",{className:"screen-card",id:"member-detail",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("member-detail"),e.jsx("h3",{children:"Member Detail"}),e.jsx("p",{children:"360 view with invoices, payment history, communications."})]})}),e.jsxs("div",{className:"admin-members-detail-card",children:[e.jsxs("div",{className:"admin-members-detail-header",children:[e.jsxs("div",{className:"admin-members-detail-header-info",children:[e.jsx("div",{className:"admin-members-detail-avatar",children:Y.name.split(" ").map(l=>l[0]).join("")}),e.jsxs("div",{children:[e.jsx("h4",{className:"admin-members-detail-name",children:Y.name}),e.jsxs("p",{className:"admin-members-detail-meta",children:["Member ID ",Y.id,"  ",Y.email,"  WhatsApp ",Y.phone]})]})]}),e.jsx("div",{className:"admin-members-detail-header-actions",children:!X&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"secondary-btn",onClick:()=>{rr({...St,memberId:Y.id}),Ot("invoice-builder")},children:"Create Invoice"}),e.jsxs("button",{className:"primary-btn admin-members-detail-reminder-btn",onClick:()=>zr(Y,!1),title:"Send reminder",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.89 22 12 22ZM18 16V11C18 7.93 16.36 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.63 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z",fill:"#ffffff"})}),"Send Reminder"]})]})})]}),e.jsxs("div",{className:"kpi-grid",children:[e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-exclamation-triangle admin-dashboard-kpi-icon--red"}),"Outstanding Balance"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:`$${er(Y.id).filter(P=>{const I=wn(P);return I==="Unpaid"||I==="Overdue"}).reduce((P,I)=>{const U=parseFloat(I.amount?.replace(/[^0-9.]/g,"")||0);return P+U},0).toFixed(2)}`})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-calendar-day admin-dashboard-kpi-icon"}),"Next Due Date"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Y.nextDue})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--green"}),"Last Payment"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Y.lastPayment})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-info-circle admin-dashboard-kpi-icon"}),"Status"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Y.status})]})]}),(()=>{const N=er(Y.id).filter(P=>wn(P)==="Overdue"),L=N.reduce((P,I)=>{const U=parseFloat(I.amount?.replace(/[^0-9.]/g,"")||0);return P+U},0);return N.length===0&&L<=0?null:e.jsxs("div",{style:{marginTop:"20px",padding:"16px 20px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("i",{className:"fas fa-exclamation-triangle","aria-hidden":"true",style:{fontSize:"1.125rem"}}),e.jsxs("span",{children:["This member has"," ",e.jsxs("strong",{children:[N.length," overdue invoice",N.length>1?"s":""]})," ","totaling"," ",e.jsxs("strong",{children:["$",Mr(L,{minimumFractionDigits:2,maximumFractionDigits:2})]}),". Please follow up as soon as possible."]})]})})(),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${Ce==="Invoices"?"active":""}`,onClick:()=>qe("Invoices"),children:"Invoices"}),e.jsx("button",{className:`tab ${Ce==="Payment History"?"active":""}`,onClick:()=>qe("Payment History"),children:"Payment History"}),e.jsx("button",{className:`tab ${Ce==="Communication"?"active":""}`,onClick:()=>qe("Communication"),children:"Communication"}),e.jsx("button",{className:`tab ${Ce==="Activity"?"active":""}`,onClick:()=>qe("Activity"),children:"Activity"}),e.jsx("button",{className:`tab ${Ce==="Notes"?"active":""}`,onClick:()=>qe("Notes"),children:"Notes"})]}),Ce==="Invoices"&&e.jsxs("div",{className:"tab-panel",children:[e.jsxs("div",{className:"table-header",children:[e.jsxs("div",{children:[e.jsx("h4",{children:"Invoices"}),(()=>{const N=er(Y.id).filter(P=>{const I=wn(P);return I==="Unpaid"||I==="Overdue"}),L=N.reduce((P,I)=>{const U=parseFloat(I.amount?.replace(/[^0-9.]/g,"")||0);return P+U},0);return e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:["Total Outstanding: ",e.jsxs("strong",{style:{color:"#1a1a1a"},children:["$",L.toFixed(2)]}),N.length>0&&e.jsxs("span",{style:{marginLeft:"8px",color:"#666"},children:["(",N.length," unpaid invoice",N.length>1?"s":"",")"]})]})})()]}),e.jsx("div",{children:e.jsx("button",{className:"secondary-btn",onClick:()=>{rr({...St,memberId:Y.id}),Ot("invoice-builder")},children:"Create Invoice"})})]}),e.jsx(Ua,{columns:["Invoice #","Period","Amount","Status","Due Date","Actions"],rows:er(Y.id).map(l=>{const N=wn(l),L=N==="Unpaid"||N==="Overdue",P=N==="Paid"||N==="Completed";return{"Invoice #":l.id,Period:l.period,Amount:l.amount,Status:{render:()=>e.jsx("span",{className:qa[l.status],children:l.status})},"Due Date":l.due,Screenshot:l.screenshot?{render:()=>e.jsx("button",{onClick:()=>{const I=window.open();I&&I.document.write(`
                                      <html>
                                        <head><title>Payment Screenshot - ${l.id}</title></head>
                                        <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                          <img src="${l.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                        </body>
                                      </html>
                                    `)},style:{padding:"4px 10px",background:"#5a31ea",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.3)"},onMouseEnter:I=>{I.target.style.background="#4a28d0",I.target.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.4)"},onMouseLeave:I=>{I.target.style.background="#5a31ea",I.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.3)"},children:e.jsx("i",{className:"fas fa-image","aria-hidden":"true"})})}:"-",Actions:{render:()=>e.jsxs("div",{className:"flex gap-sm flex-wrap",children:[L&&!X&&e.jsx("button",{className:"primary-btn",style:{padding:"4px 10px",fontSize:"0.85rem",background:"#10b981",border:"none",color:"#ffffff",fontWeight:"600",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},onMouseEnter:I=>{I.target.style.background="#059669",I.target.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.4)"},onMouseLeave:I=>{I.target.style.background="#10b981",I.target.style.boxShadow="0 2px 4px rgba(16, 185, 129, 0.3)"},onClick:()=>{xn(l),On({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:l.screenshot||"",reference:"",selectedAdminId:"",adminMobile:""}),zn({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),Vr(null),Xt(!0)},children:"Pay"}),!P&&!X&&e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:()=>{De(`Delete invoice ${l.id}? This cannot be undone.`,()=>Ir(l.id))},title:"Delete Invoice","aria-label":"Delete Invoice",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})})]}),Ce==="Payment History"&&e.jsx("div",{className:"tab-panel tab-panel--payment-history",children:(()=>{const l=c.filter(N=>N.memberId===Y.id||N.memberEmail===Y.email||N.member===Y.name).sort((N,L)=>{const P=new Date(N.date||0);return new Date(L.date||0)-P});return l.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:e.jsx("p",{className:"m-0 text-base",children:"No payment history available for this member."})}):e.jsx("div",{className:"payment-history-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:l.map((N,L)=>e.jsxs("div",{className:"payment-history-card",onClick:()=>{Ws(N),ai(!0)},style:{background:"#fff",border:"none",borderRadius:"12px",padding:"20px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.08)",cursor:"pointer"},onMouseEnter:P=>{P.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.08)",P.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{className:"payment-history-card__main",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsx("div",{children:e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000"},children:N.member||N.memberName||N.memberId||"N/A"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[N.amount&&e.jsx("strong",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#5a31ea"},children:N.amount}),N.status&&e.jsx("span",{className:`badge ${N.status==="Paid"||N.status==="Completed"?"badge-paid":N.status==="Pending Verification"||N.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.75rem",padding:"4px 10px"},children:N.status}),e.jsx("i",{className:"fas fa-chevron-right",style:{fontSize:"0.875rem",color:"#999"}})]})]}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[N.date&&e.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:N.date}),e.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:Pi(N)})]}),N.screenshot&&e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"4px",overflow:"hidden",border:"2px solid #e0e0e0",flexShrink:0,marginLeft:"12px"},children:e.jsx("img",{src:N.screenshot,alt:"Payment attachment",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})]},L))})})()}),Ce==="Communication"&&e.jsxs("div",{className:"tab-panel",children:[e.jsx("h4",{children:"Communication History"}),(()=>{const l=p.filter(I=>I.memberId===Y.id||I.memberEmail&&Y.email&&I.memberEmail.toLowerCase()===Y.email.toLowerCase()||I.memberName&&Y.name&&I.memberName.toLowerCase()===Y.name.toLowerCase()).sort((I,U)=>{const W=new Date(I.date||I.timestamp||0);return new Date(U.date||U.timestamp||0)-W});if(l.length===0)return e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:e.jsx("p",{className:"m-0 text-base",children:"No communication history available for this member."})});const N=l.length,L=l.filter(I=>I.channel==="Email").length,P=l.filter(I=>I.channel==="WhatsApp").length;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",padding:"12px 16px",borderRadius:"4px",background:"#f9fafb",border:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.95rem"},children:"Reminders sent to this member:"}),e.jsxs("span",{className:"badge badge-paid",children:["Total: ",N]}),e.jsxs("span",{className:"badge badge-unpaid",children:["Email: ",L]}),e.jsxs("span",{className:"badge badge-pending",children:["WhatsApp: ",P]})]}),e.jsx("ul",{className:"timeline",children:l.map((I,U)=>e.jsxs("li",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:I.channel||"N/A"}),I.type?`  ${I.type}`:"","  ",I.message||"N/A","  ",I.date?new Date(I.date).toLocaleString():I.timestamp?new Date(I.timestamp).toLocaleString():"N/A"]}),I.status&&e.jsx("span",{className:qa[I.status]||"badge",children:I.status})]},U))})]})})()]}),Ce==="Activity"&&e.jsxs("div",{className:"tab-panel",children:[e.jsx("h4",{children:"Activity Timeline"}),(()=>{const l=er(Y.id).map(I=>{const U=wn(I),W=I.createdAt||I.date||I.due||null;return{type:"Invoice",date:W?new Date(W):null,label:`Invoice ${I.id||""}  ${I.period||""}  ${I.amount||""}  ${U||"N/A"}`}}),N=(c||[]).filter(I=>I.memberId===Y.id||I.memberEmail&&Y.email&&I.memberEmail.toLowerCase()===Y.email.toLowerCase()||I.member&&Y.name&&I.member.toLowerCase()===Y.name.toLowerCase()).map(I=>({type:"Payment",date:I.date?new Date(I.date):null,label:`${I.method||"Payment"}  ${I.amount||""}  ${I.status||""}`})),L=(p||[]).filter(I=>{const U=I.memberEmail&&Y.email&&I.memberEmail.toLowerCase()===Y.email.toLowerCase(),W=I.memberName&&Y.name&&I.memberName.toLowerCase()===Y.name.toLowerCase();return U||W}).map(I=>({type:I.type||I.channel||"Communication",date:I.date?new Date(I.date):I.timestamp?new Date(I.timestamp):null,label:I.message||"Communication sent"})),P=[...l,...N,...L].filter(I=>I.date).sort((I,U)=>U.date-I.date);return P.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:e.jsx("p",{className:"m-0 text-base",children:"No activity recorded for this member yet."})}):e.jsx("div",{className:"payment-history-list",children:P.map((I,U)=>e.jsxs("div",{className:"payment-history-card",children:[e.jsx("div",{className:"payment-card-header",children:e.jsxs("div",{className:"payment-card-main",children:[e.jsx("span",{className:"payment-amount",children:I.type}),e.jsx("span",{className:"payment-meta",children:I.date?.toLocaleString()})]})}),e.jsx("div",{className:"payment-card-body",children:e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#4b5563"},children:I.label})})]},U))})})()]}),Ce==="Notes"&&e.jsxs("div",{className:"tab-panel",children:[e.jsx("h4",{children:"Internal Notes"}),e.jsxs("p",{className:"text-sm mb-md",style:{color:"#6b7280"},children:["These notes are ",e.jsx("strong",{children:"internal only"})," and are not visible to members."]}),e.jsx("textarea",{value:Lo,onChange:l=>qi(l.target.value),rows:5,className:"settings-form__input",placeholder:"Add any internal notes about this member (e.g., context, special arrangements, follow-up actions)...",disabled:X}),!X&&e.jsx("div",{style:{marginTop:"12px",textAlign:"right"},children:e.jsx("button",{className:"primary-btn",onClick:()=>{const l={...Po,[Y.id]:Lo};Pl(l),localStorage.setItem("memberNotes",JSON.stringify(l)),Q("Internal note saved")},children:"Save Note"})}),X&&e.jsx("p",{style:{marginTop:"8px",fontSize:"0.8rem",color:"#6b7280"},children:"You have read-only access. Contact an Owner or Admin to update notes."})]})]})]}),ht==="invoice-builder"&&e.jsxs("article",{className:"screen-card",id:"invoice-builder",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("invoice-builder"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoice Builder"]}),e.jsx("p",{children:"Create invoices for Lifetime or Yearly + Janaza Fund subscriptions."})]})}),wt&&Wt&&e.jsxs("div",{style:{marginBottom:"24px",padding:"24px",background:"#f0f9ff",borderRadius:"12px",border:"2px solid #5a31ea",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.15)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"mb-lg",children:e.jsxs("div",{className:"flex items-center gap-md",children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#5a31ea",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#fff"},children:""}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:"Invoice Has Been Created"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666"},children:["Invoice for ",Wt.memberName," - ",Wt.period," (",Wt.amount,")"]})]})]})}),e.jsxs("div",{className:"success-card-actions",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"16px"},children:[e.jsxs("button",{className:"primary-btn",onClick:()=>{Wt.member&&(Qn(Wt.member),Ot("member-detail"),Qr(!1))},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px"}}),"Member Detail"]}),e.jsxs("button",{className:"secondary-btn",onClick:async()=>{Wt.member&&await Rn(Wt.member)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"currentColor"})}),"Send Reminder"]}),e.jsx("button",{className:"ghost-btn",onClick:()=>{Qr(!1),le(null)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:"Close"})]})]}),e.jsxs("form",{className:"card form-grid",onSubmit:Zn,noValidate:!0,style:{padding:"20px",background:"#ffffff",boxShadow:"0 4px 16px rgba(90, 49, 234, 0.1)"},children:[e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Number"]}),e.jsx("input",{type:"text",value:vs,readOnly:!0,className:"mono-input",style:{color:"#6b7280",background:"#f3f4f6",cursor:"not-allowed"}})]}),e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},"data-member-dropdown":!0,children:[e.jsxs("div",{onClick:()=>rl(!Wo),style:{padding:"14px 16px",border:"none",borderRadius:"10px",background:"#f8f9ff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:St.memberId?"#1a1a1a":"#9ca3af",minHeight:"48px",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.12)"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[e.jsx("span",{children:St.memberId?(()=>{const l=s.find(N=>N.id===St.memberId);return l?`${l.name} (${l.id})`:"Select Member"})():"Select Member"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Wo?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Wo&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"none",borderRadius:"10px",marginTop:"8px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 8px 24px rgba(90, 49, 234, 0.15)"},children:[e.jsxs("div",{style:{padding:"12px",borderBottom:"none",background:"#ffffff",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.05)"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:Pr,onChange:l=>$o(l.target.value),onClick:l=>l.stopPropagation(),onKeyDown:l=>l.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"12px 36px 12px 16px",border:"none",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#ffffff",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",color:"#1a1a1a"},onFocus:l=>{l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:l=>{l.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"}}),Pr&&e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),$o("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),Pr&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[s.filter(l=>!Pr||l.name?.toLowerCase().includes(Pr.toLowerCase())||l.id?.toLowerCase().includes(Pr.toLowerCase())).length," member",s.filter(l=>!Pr||l.name?.toLowerCase().includes(Pr.toLowerCase())||l.id?.toLowerCase().includes(Pr.toLowerCase())).length!==1?"s":""," found"]})]}),e.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[s.filter(l=>!Pr||l.name?.toLowerCase().includes(Pr.toLowerCase())||l.id?.toLowerCase().includes(Pr.toLowerCase())).map(l=>e.jsxs("div",{onClick:()=>{rr({...St,memberId:l.id}),rl(!1),$o("")},style:{padding:"14px 16px",cursor:"pointer",borderBottom:"none",background:St.memberId===l.id?"#f0f4ff":"#fff",transition:"all 0.2s",boxShadow:St.memberId===l.id?"0 2px 4px rgba(90, 49, 234, 0.1)":"none"},onMouseEnter:N=>{St.memberId!==l.id&&(N.currentTarget.style.background="#f8f9ff")},onMouseLeave:N=>{St.memberId!==l.id&&(N.currentTarget.style.background="#fff")},children:[e.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:l.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[l.id," ",l.email?` ${l.email}`:""]})]},l.id)),s.filter(l=>!Pr||l.name?.toLowerCase().includes(Pr.toLowerCase())||l.id?.toLowerCase().includes(Pr.toLowerCase())).length===0&&e.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!St.memberId&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]}),e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Type ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{required:!0,value:St.invoiceType,onChange:l=>{const N=l.target.value;rr({...St,invoiceType:N,amount:N==="Yearly + Janaza Fund"?"500":"250"})},style:{color:"#1a1a1a",background:"#ffffff",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s"},className:"mono-input",onFocus:l=>{l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:l=>{l.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[e.jsx("option",{value:"",children:"Select Invoice Type"}),e.jsx("option",{value:"Lifetime",children:"Lifetime - $250"}),e.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500"})]})]}),e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Period ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"month",required:!0,value:St.period?(()=>{try{if(St.period.match(/^[A-Za-z]{3} \d{4}$/)){const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=St.period.split(" "),L=N[0],P=parseInt(N[1],10),I=l.findIndex(U=>U.toLowerCase()===L.toLowerCase());if(I!==-1&&!isNaN(P)&&P>0){const U=String(I+1).padStart(2,"0");return`${P}-${U}`}}if(St.period.match(/^\d{4}-\d{2}$/))return St.period}catch(l){console.error("Error parsing period:",l)}return""})():"",onChange:l=>{const N=l.target.value;if(N&&N.match(/^\d{4}-\d{2}$/))try{const L=new Date(N+"-01");if(isNaN(L.getTime()))rr({...St,period:""});else{const P=L.toLocaleDateString("en-US",{month:"short",year:"numeric"});rr({...St,period:P})}}catch(L){console.error("Error formatting period:",L),rr({...St,period:""})}else N||rr({...St,period:""})},onFocus:l=>{l.currentTarget.select()},className:"mono-input",style:{color:"#1a1a1a"}})]}),e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ($) ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",inputMode:"numeric",required:!0,value:St.amount,onChange:l=>{const N=l.target.value.replace(/\\D/g,"");rr({...St,amount:N})},className:"mono-input",style:{color:"#1a1a1a"}})]}),e.jsxs("label",{style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Due Date ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:St.due,onChange:l=>{const N=l.target.value;rr({...St,due:N})},onBlur:l=>{const N=l.target.value;if(N){const L=new Date(N);if(isNaN(L.getTime())){Q("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[P,I,U]=N.split("-").map(Number);if(I<1||I>12){Q("Invalid month. Please enter a month between 01 and 12","error");return}if(U<1||U>31){Q("Invalid day. Please enter a valid day for the selected month","error");return}const W=new Date(P,I,0).getDate();if(U>W){Q(`Invalid date. ${I}/${P} only has ${W} days`,"error");return}}},className:"mono-input",style:{color:"#1a1a1a",borderRadius:"4px",width:"100%"}})]}),e.jsxs("label",{className:"notes",style:{marginBottom:"24px"},children:[e.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[e.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),e.jsx("textarea",{placeholder:"Add context for this invoice",value:St.notes,onChange:l=>rr({...St,notes:l.target.value}),className:"mono-input",style:{color:"#1a1a1a",minHeight:"100px"}})]}),e.jsxs("div",{style:{marginBottom:"16px",padding:"16px 18px",borderRadius:"10px",background:"#f9fafb",border:"1px solid #e5e7eb",fontSize:"0.875rem",color:"#4b5563"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",color:"#111827"},children:"Invoice Preview"}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Invoice #:"})," ",vs]}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Member:"})," ",St.memberId?(()=>{const l=s.find(N=>N.id===St.memberId);return l?`${l.name} (${l.id})`:"Not selected"})():"Not selected"]}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Period:"})," ",St.period||"N/A"]}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Amount:"})," ",St.amount?`$${Number(St.amount||0).toFixed(2)}`:"$0.00"]}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Due Date:"})," ",St.due?new Date(St.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"]}),e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Status:"})," Unpaid"]}),St.notes&&e.jsxs("p",{style:{margin:"4px 0"},children:[e.jsx("strong",{children:"Notes:"})," ",St.notes]})]}),e.jsxs("div",{className:"form-actions",style:{marginTop:"8px",gap:"12px"},children:[e.jsxs("button",{type:"submit",className:"primary-btn",style:{padding:"14px 28px",fontSize:"1rem",fontWeight:"600"},children:[e.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),"Create Invoice"]}),e.jsx("button",{type:"button",className:"secondary-btn",onClick:async()=>{const l=s.find(be=>be.id===St.memberId);if(!l){Q("Please select a member","error");return}if(!St.memberId||!St.period||!St.due){Q("Please fill all required fields","error");return}const N=parseFloat(St.amount);if(!N||N<=0||isNaN(N)){Q("Amount must be a positive number","error");return}const L={id:wi(),memberId:St.memberId,memberName:l?.name||"",period:St.period,amount:`$${N.toFixed(2)}`,status:"Unpaid",due:St.due,method:"-",reference:"-",notes:St.notes||""};Be(L),le({...L,member:l}),Qr(!0);const I=[...r.filter(be=>be.memberId===l.id&&(be.status==="Unpaid"||be.status==="Overdue")),L],U=I.reduce((be,Je)=>be+parseFloat(Je.amount.replace("$","")),0),W=I.map(be=>` ${be.period}: ${be.amount} (Due: ${be.due}) - ${be.status}`).join(`
`),ve=I.map(be=>`<li style="margin-bottom: 10px;">
                                <strong>${be.period}</strong>: ${be.amount} 
                                <span style="color: #666;">(Due: ${be.due})</span> - 
                                <strong>${be.status}</strong>
                              </li>`).join("");try{Q("Sending reminder email...");const Je=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:l.email,toName:l.name,memberId:l.id,totalDue:`$${U.toFixed(2)}`,invoiceCount:I.length,invoiceListText:W,invoiceListHTML:ve,paymentMethods:"FPS, PayMe, or Bank Transfer",portalLink:`${window.location.origin}/member`})}),Xe=await Je.json();if(!Je.ok)throw new Error(Xe.error||"Failed to send email");console.log(" Email sent successfully:",Xe);const Nt={channel:"Email",message:`Payment reminder: ${l.name} (${l.email}) - $${U.toFixed(2)} due (${I.length} invoice${I.length>1?"s":""})`,status:"Delivered"};ye(Nt),rr({memberId:"",period:qr(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),We(!1),Q(` Invoice created and reminder sent to ${l.name} for $${U.toFixed(2)}!`),le({...L,member:l}),Qr(!0)}catch(be){console.error(" Email send error:",be);const Je={channel:"Email",message:`Reminder attempt to ${l.name} - $${U.toFixed(2)} due`,status:"Failed"};ye(Je),Q(be.message||"Invoice created but failed to send email. Please check email configuration.","error"),le({...L,member:l}),Qr(!0)}},children:"Create & Send Reminder"})]})]})]}),ht==="expense-list"&&e.jsxs("article",{className:"screen-card",id:"expense-list",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{className:"flex justify-between items-center w-full flex-wrap gap-md",children:[e.jsxs("div",{children:[_e("expense-list"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-receipt admin-section-icon"}),"Expense List"]}),e.jsx("p",{children:"View and manage all expenses."})]}),(Qe==="Owner"||Qe==="Finance Admin")&&e.jsxs("button",{className:"primary-btn",onClick:()=>{Jt(null),Rr({categoryName:"",categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Bs(!0)},children:[e.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Add Expense"]})]})}),Os&&(Qe==="Owner"||Qe==="Finance Admin")&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(Bs(!1),Rr({categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null))},children:e.jsxs("div",{className:"admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h4",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-receipt","aria-hidden":"true"}),hs?"Edit Expense":"Add Expense"]}),e.jsx("button",{type:"button",className:"close-btn close-btn-danger",onClick:()=>{sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Bs(!1),Rr({categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),Jt(null)},"aria-label":"Close expense form",children:""})]}),e.jsxs("form",{noValidate:!0,onSubmit:hs?dn:bn,children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-tag"}),"Expense Category ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`expense-form-input ${Ia.categoryId?"error":""}`,value:Ut.categoryName,onChange:l=>{Rr({...Ut,categoryName:l.target.value}),Ia.categoryId&&(sr(N=>({...N,categoryId:!1})),us==="categoryId"&&Jn(null))},onBlur:()=>{us==="categoryId"&&Ut.categoryName&&(sr(l=>({...l,categoryId:!1})),Jn(null))},placeholder:"Enter category name",required:!0}),Ia.categoryId&&e.jsx("span",{className:"expense-form-error",children:"Expense category is required"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-credit-card"}),"Payment Mode ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`expense-form-select ${Ia.paymentMode?"error":""}`,value:Ut.paymentMode,onChange:l=>{Rr({...Ut,paymentMode:l.target.value}),Ia.paymentMode&&(sr(N=>({...N,paymentMode:!1})),us==="paymentMode"&&Jn(null))},onBlur:()=>{us==="paymentMode"&&Ut.paymentMode&&(sr(l=>({...l,paymentMode:!1})),Jn(null))},required:!0,children:[e.jsx("option",{value:"",children:"Select payment mode"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"Card",children:"Card"}),e.jsx("option",{value:"Cheque",children:"Cheque"})]}),Ia.paymentMode&&e.jsx("span",{className:"expense-form-error",children:"Payment mode is required"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-dollar-sign"}),"Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:`expense-form-input ${Ia.amount?"error":""}`,value:Ut.amount,onChange:l=>{Rr({...Ut,amount:l.target.value}),Ia.amount&&(sr(N=>({...N,amount:!1})),us==="amount"&&Jn(null))},onBlur:()=>{if(us==="amount"){const l=parseFloat(Ut.amount);Ut.amount&&!isNaN(l)&&l>0&&(sr(N=>({...N,amount:!1})),Jn(null))}},placeholder:"0.00",required:!0}),Ia.amount&&e.jsx("span",{className:"expense-form-error",children:Ut.amount?"Amount must be a valid positive number":"Amount is required"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-calendar-day"}),"Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:`expense-form-input ${Ia.date?"error":""}`,value:Ut.date,onChange:l=>{Rr({...Ut,date:l.target.value}),Ia.date&&(sr(N=>({...N,date:!1})),us==="date"&&Jn(null))},onBlur:()=>{us==="date"&&Ut.date&&(isNaN(new Date(Ut.date).getTime())||(sr(l=>({...l,date:!1})),Jn(null)))},required:!0}),Ia.date&&e.jsx("span",{className:"expense-form-error",children:"Date is required"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-align-left"}),"Description"]}),e.jsx("textarea",{className:"expense-form-textarea",value:Ut.description,onChange:l=>{Rr({...Ut,description:l.target.value})},placeholder:"Enter expense description (optional)",rows:"3"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-paperclip"}),"Attachment (Optional)"]}),e.jsx("div",{className:`expense-upload-area ${An||Ut.attachment?"has-file":""}`,onClick:()=>{const l=document.createElement("input");l.type="file",l.accept="image/*,.pdf",l.onchange=async N=>{const L=N.target.files[0];if(!L)return;if(!(L.type.startsWith("image/")||L.type==="application/pdf")){Q("Please upload an image or PDF file","error");return}if(L.size>10*1024*1024){Q("File size must be less than 10MB","error");return}if(_a(L),Wa(L.name),L.type.startsWith("image/")){const I=new FileReader;I.onloadend=()=>{ca(I.result)},I.readAsDataURL(L)}else ca(null)},l.click()},children:An?e.jsxs("div",{className:"expense-upload-preview",children:[e.jsx("img",{src:An,alt:"Preview",className:"expense-upload-preview-img"}),e.jsx("button",{type:"button",className:"expense-upload-remove-btn",onClick:l=>{l.stopPropagation(),_a(null),ca(null),Wa(""),Rr({...Ut,attachment:""})},children:""}),e.jsx("div",{className:"expense-upload-file-name",children:ws})]}):ws?e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-file expense-upload-icon"}),e.jsx("div",{className:"expense-upload-file-name",children:ws}),e.jsx("button",{type:"button",className:"danger-btn expense-upload-remove-file-btn",onClick:l=>{l.stopPropagation(),_a(null),ca(null),Wa(""),Rr({...Ut,attachment:""})},children:"Remove"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-cloud-upload-alt expense-upload-icon"}),e.jsx("div",{className:"expense-upload-text",children:"Click to upload image or PDF"}),e.jsx("div",{className:"expense-upload-hint",children:"PNG, JPG, PDF up to 10MB"})]})})]})]}),e.jsxs("div",{className:"expense-form-actions",children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{sr({categoryId:!1,amount:!1,date:!1,paymentMode:!1}),Jn(null),Bs(!1),Rr({categoryName:"",categoryId:"",description:"",amount:"",date:"",paymentMode:"",attachment:""}),_a(null),ca(null),Wa(""),Jt(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn",disabled:!It||Ea,children:Ea?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin icon-spacing-sm"}),"Saving..."]}):"Save"})]})]})]})}),e.jsxs("div",{className:"expense-filters-section",children:[e.jsxs("div",{className:"expense-filters-grid",children:[e.jsxs("label",{children:[e.jsx("span",{className:"expense-filter-label",children:"Category"}),e.jsxs("select",{className:"expense-filter-select",value:Va,onChange:l=>nl(l.target.value),children:[e.jsx("option",{value:"All",children:"All Categories"}),Rs.map(l=>e.jsxs("option",{value:l.id,children:[l.name," ",l.status==="Inactive"?"(Inactive)":""]},l.id))]})]}),e.jsxs("label",{children:[e.jsx("span",{className:"expense-filter-label",children:"Date From"}),e.jsx("input",{type:"date",className:"expense-filter-input",value:Ha.from,onChange:l=>Ma({...Ha,from:l.target.value})})]}),e.jsxs("label",{children:[e.jsx("span",{className:"expense-filter-label",children:"Date To"}),e.jsx("input",{type:"date",className:"expense-filter-input",value:Ha.to,onChange:l=>Ma({...Ha,to:l.target.value})})]}),e.jsxs("label",{children:[e.jsx("span",{className:"expense-filter-label",children:"Payment Mode"}),e.jsxs("select",{className:"expense-filter-select",value:ms,onChange:l=>qo(l.target.value),children:[e.jsx("option",{value:"All",children:"All Modes"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"Card",children:"Card"}),e.jsx("option",{value:"Cheque",children:"Cheque"})]})]}),e.jsxs("label",{children:[e.jsx("span",{className:"expense-filter-label",children:"Search Description"}),e.jsx("input",{type:"text",className:"expense-filter-input",value:ni,onChange:l=>Ri(l.target.value),placeholder:"Search by description..."})]})]}),(Va!=="All"||Ha.from||Ha.to||ms!=="All"||ni)&&e.jsx("button",{type:"button",className:"ghost-btn expense-filter-clear-btn",onClick:()=>{nl("All"),Ma({from:"",to:""}),qo("All"),Ri("")},children:"Clear Filters"})]}),e.jsx("div",{className:"expense-table-section",children:ae.length===0?e.jsx("div",{className:"admin-empty-state",children:e.jsx("p",{className:"admin-empty-state-message",children:da.length===0?"No expenses found. Add your first expense to get started.":"No expenses match the current filters."})}):e.jsx(Ua,{columns:["Date","Category","Description","Amount","Payment Mode","Attachment","Actions"],rows:ae.map(l=>({Date:l.date?new Date(l.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Category:l.categoryName||kt(l.categoryId)||"-",Description:l.description||"-",Amount:{render:()=>e.jsxs("span",{className:"expense-amount-cell",children:["$",Mr(l.amount||0,{minimumFractionDigits:2,maximumFractionDigits:2})]})},"Payment Mode":l.paymentMode||"-",Attachment:{render:()=>l.attachment?e.jsx("a",{href:l.attachment,target:"_blank",rel:"noopener noreferrer",className:"expense-attachment-link",title:"View attachment",children:e.jsx("i",{className:"fas fa-paperclip"})}):e.jsx("span",{className:"expense-attachment-empty",children:"-"})},Actions:{render:()=>Qe==="Owner"||Qe==="Finance Admin"?e.jsxs("div",{className:"server-action-buttons",children:[e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>wr(l),title:"Edit Expense","aria-label":"Edit Expense",children:[e.jsx("i",{className:"fas fa-edit","aria-hidden":"true"}),"Edit"]}),e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>At(l.id),title:"Delete Expense","aria-label":"Delete Expense",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]}):e.jsx("span",{className:"expense-attachment-empty",children:"-"})}}))})})]}),ht==="expense-categories"&&e.jsxs("article",{className:"screen-card",id:"expense-categories",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{className:"flex justify-between items-center w-full flex-wrap gap-md",children:[e.jsxs("div",{children:[_e("expense-categories"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-tags admin-section-icon"}),"Expense Categories"]}),e.jsx("p",{children:"Manage expense categories for organizing expenses."})]}),(Qe==="Owner"||Qe==="Finance Admin")&&e.jsxs("button",{className:"primary-btn",onClick:()=>{ar(null),yr({name:"",description:"",status:"Active"}),la({name:!1}),qn(null),bs(!0)},children:[e.jsx("i",{className:"fas fa-plus icon-spacing-sm"}),"Add Category"]})]})}),Fr&&(Qe==="Owner"||Qe==="Finance Admin")&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(bs(!1),ar(null),yr({name:"",description:"",status:"Active"}),la({name:!1}),qn(null))},children:e.jsxs("div",{className:"admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h4",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-tag","aria-hidden":"true"}),Fi?"Edit Category":"Add Category"]}),e.jsx("button",{type:"button",className:"close-btn close-btn-danger",onClick:()=>{la({name:!1}),qn(null),bs(!1),ar(null),yr({name:"",description:"",status:"Active"})},"aria-label":"Close category form",children:""})]}),e.jsxs("form",{noValidate:!0,onSubmit:Fi?rt:Ke,children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-tag"}),"Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`expense-form-input ${Ts.name?"error":""}`,value:Ar.name,onChange:l=>{yr({...Ar,name:l.target.value}),Ts.name&&(la(N=>({...N,name:!1})),cs==="name"&&qn(null))},onBlur:()=>{cs==="name"&&Ar.name.trim()&&(la(l=>({...l,name:!1})),qn(null))},placeholder:"Enter category name",required:!0})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-align-left"}),"Description"]}),e.jsx("textarea",{className:"expense-form-textarea",value:Ar.description,onChange:l=>{yr({...Ar,description:l.target.value})},placeholder:"Enter category description (optional)",rows:"3"})]}),e.jsxs("label",{children:[e.jsxs("span",{className:"expense-form-label",children:[e.jsx("i",{className:"fas fa-toggle-on"}),"Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"expense-form-select",value:Ar.status,onChange:l=>{yr({...Ar,status:l.target.value})},children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"expense-form-actions",children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{la({name:!1}),qn(null),bs(!1),ar(null),yr({name:"",description:"",status:"Active"})},children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn",children:Fi?"Update":"Save"})]})]})]})}),e.jsx("div",{className:"expense-table-section",children:Rs.length===0?e.jsx("div",{className:"admin-empty-state",children:e.jsx("p",{className:"admin-empty-state-message",children:"No expense categories found. Add your first category to get started."})}):e.jsx(Ua,{columns:["Category Name","Description","Status","Actions"],rows:Rs.map(l=>({"Category Name":l.name||"-",Description:l.description||"-",Status:{render:()=>e.jsx("span",{className:l.status==="Active"?"server-badge server-badge--active":"server-badge server-badge--inactive",children:l.status})},Actions:{render:()=>Qe==="Owner"||Qe==="Finance Admin"?e.jsxs("div",{className:"server-action-buttons",children:[e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>tt(l),title:"Edit Category","aria-label":"Edit Category",children:[e.jsx("i",{className:"fas fa-edit","aria-hidden":"true"}),"Edit"]}),e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>zt(l.id),title:"Delete Category","aria-label":"Delete Category",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]}):e.jsx("span",{className:"expense-attachment-empty",children:"-"})}}))})})]}),ht==="automation"&&e.jsxs("article",{className:"screen-card",id:"automation",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("automation"),e.jsx("h3",{children:"Reminders & Automation"}),e.jsx("p",{children:"Configure automated payment reminders and email templates."})]})}),e.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"clamp(16px, 3vw, 24px)",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 300px",minWidth:"250px"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Automation Control"}),e.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Enable or disable automated payment reminders system-wide"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"clamp(12px, 2vw, 16px)",flexShrink:0},children:[e.jsx("span",{style:{fontSize:"clamp(0.75rem, 1.5vw, 0.875rem)",fontWeight:"600",color:j?"#000":"#999",textTransform:"uppercase",letterSpacing:"0.5px",minWidth:"28px",textAlign:"right"},children:j?"ON":"OFF"}),e.jsx("button",{type:"button",role:"switch","aria-checked":j,onClick:async()=>{const l=!j;A(l);try{await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...fn,automationEnabled:l})}),Q(l?"Automation enabled!":"Automation disabled!")}catch(N){console.error("Error saving automation status:",N),Q("Failed to save automation status","error"),A(!l)}},style:{position:"relative",width:"clamp(60px, 8vw, 72px)",height:"clamp(34px, 5vw, 40px)",borderRadius:"999px",border:"none",background:j?"#5a31ea":"#f3f4f6",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",padding:0,display:"flex",alignItems:"center",boxShadow:j?"0 4px 12px rgba(0,0,0,0.15)":"inset 0 2px 4px rgba(0,0,0,0.1)",WebkitTapHighlightColor:"transparent"},onMouseEnter:l=>{l.currentTarget.style.transform="scale(1.05)"},onMouseLeave:l=>{l.currentTarget.style.transform="scale(1)"},children:e.jsx("span",{style:{position:"absolute",width:"clamp(26px, 4vw, 30px)",height:"clamp(26px, 4vw, 30px)",borderRadius:"50%",background:j?"#ffffff":"#5a31ea",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",left:j?"auto":"4px",right:j?"4px":"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(0,0,0,0.1)"}})})]})]})}),e.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Outstanding Members"}),e.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Send manual reminder emails or WhatsApp messages to members with outstanding invoices"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:()=>{Pn.includes("Email")?Oa(l=>l.filter(N=>N!=="Email")):Oa(l=>[...l,"Email"])},disabled:br||$n||!xt,title:"Email",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:br||$n||!xt?"not-allowed":"pointer",transition:"all 0.2s ease",background:Pn.includes("Email")?"#5a31ea":"#ffffff",color:Pn.includes("Email")?"#ffffff":"#6b7280",border:Pn.includes("Email")?"2px solid #5a31ea":"2px solid #e5e7eb",boxShadow:Pn.includes("Email")?"0 2px 8px rgba(90, 49, 234, 0.3)":"none",opacity:br||$n||!xt?.5:1,width:"48px",height:"48px"},onMouseEnter:l=>{!br&&!$n&&xt&&!Pn.includes("Email")&&(l.target.style.background="#f3f4f6",l.target.style.color="#374151")},onMouseLeave:l=>{!br&&!$n&&xt&&!Pn.includes("Email")&&(l.target.style.background="#ffffff",l.target.style.color="#6b7280")},children:e.jsx("i",{className:"fas fa-envelope"})}),e.jsx("button",{type:"button",onClick:()=>{Pn.includes("WhatsApp")?Oa(l=>l.filter(N=>N!=="WhatsApp")):Oa(l=>[...l,"WhatsApp"])},disabled:br||$n||!xt,title:"WhatsApp",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:br||$n||!xt?"not-allowed":"pointer",transition:"all 0.2s ease",background:Pn.includes("WhatsApp")?"#25D366":"#ffffff",color:Pn.includes("WhatsApp")?"#ffffff":"#25D366",border:(Pn.includes("WhatsApp"),"2px solid #25D366"),boxShadow:Pn.includes("WhatsApp")?"0 2px 8px rgba(37, 211, 102, 0.3)":"none",opacity:br||$n||!xt?.5:1,width:"48px",height:"48px"},onMouseEnter:l=>{!br&&!$n&&xt&&!Pn.includes("WhatsApp")&&(l.target.style.background="#dcfce7",l.target.style.color="#16a34a")},onMouseLeave:l=>{!br&&!$n&&xt&&!Pn.includes("WhatsApp")&&(l.target.style.background="#ffffff",l.target.style.color="#25D366")},children:e.jsx("i",{className:"fab fa-whatsapp"})}),Pn.length>0&&e.jsx("button",{className:"primary-btn",onClick:cr,disabled:br||$n||!xt,style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:br||$n||!xt?.5:1,cursor:br||$n||!xt?"not-allowed":"pointer"},children:br||$n?"Sending...":"Send All"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.filter(l=>r.filter(L=>L.memberId===l.id&&(L.status==="Unpaid"||L.status==="Overdue")).length>0).map(l=>{const N=r.filter(W=>W.memberId===l.id&&(W.status==="Unpaid"||W.status==="Overdue")),L=N.reduce((W,ve)=>{const be=parseFloat(ve.amount?.replace(/[^0-9.]/g,"")||0);return W+be},0),P=N.filter(W=>W.status==="Overdue").length,I=N.filter(W=>W.status==="Unpaid").length,U=zi[l.id];return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"#f9f9f9",borderRadius:"4px",border:"1px solid #e0e0e0",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 300px",minWidth:"200px"},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000",marginBottom:"4px"},children:l.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:l.email}),e.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"0.8125rem",color:"#666"},children:[e.jsxs("span",{children:[e.jsxs("strong",{style:{color:"#000"},children:["$",L.toFixed(2)]})," outstanding"]}),P>0&&e.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[P," overdue"]}),I>0&&e.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[I," unpaid"]})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:e.jsx("button",{className:"secondary-btn",onClick:()=>zr(l,!1),disabled:U||Fa[l.id],style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:U||Fa[l.id]?.5:1,cursor:U||Fa[l.id]?"not-allowed":"pointer"},children:U||Fa[l.id]?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.89 22 12 22ZM18 16V11C18 7.93 16.36 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.63 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z",fill:"#5a31ea"})}),"Send Reminder"]})})})]},l.id)}),s.filter(l=>r.filter(L=>L.memberId===l.id&&(L.status==="Unpaid"||L.status==="Overdue")).length>0).length===0&&e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#666",fontSize:"0.9375rem"},children:"No members with outstanding invoices"})]})]}),e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Template"}),e.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Subject"}),e.jsx("input",{type:"text",value:ta.subject,onChange:l=>Us({...ta,subject:l.target.value}),placeholder:"Payment Reminder - Outstanding Balance",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),e.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["You can use placeholders: ","{{member_name}}",", ","{{total_due}}",", ","{{invoice_count}}"]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"HTML Email Template"}),e.jsx("textarea",{value:ta.htmlTemplate,onChange:l=>Us({...ta,htmlTemplate:l.target.value}),rows:20,style:{width:"100%",padding:"14px",border:"1.5px solid #e0e0e0",borderRadius:"10px",fontSize:"0.875rem",fontFamily:"monospace",resize:"vertical",transition:"all 0.2s ease"},onFocus:l=>{l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",l.target.style.boxShadow="0 0 0 3px rgba(0,0,0,0.05)"},onBlur:l=>{l.target.style.borderColor="#e0e0e0",l.target.style.boxShadow="none"},placeholder:"Enter HTML email template..."}),e.jsxs("div",{className:"mt-md p-md bg-gray-50 rounded text-xs text-muted",children:[e.jsx("strong",{children:"Available Placeholders:"}),e.jsxs("ul",{className:"m-0",style:{marginTop:"8px",paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("code",{children:"{{member_name}}"})," - Member's full name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{member_id}}"})," - Member ID"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{member_email}}"})," - Member email"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{total_due}}"})," - Total outstanding amount"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{invoice_count}}"})," - Number of unpaid invoices"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{invoice_list}}"})," - HTML list of invoices"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{payment_methods}}"})," - Payment methods list"]}),e.jsxs("li",{children:[e.jsx("code",{children:"{{portal_link}}"})," - Member portal URL"]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[e.jsxs("button",{className:"secondary-btn",onClick:Xl,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",fill:"currentColor"})}),"Preview Template"]}),e.jsxs("button",{className:"primary-btn",onClick:fo,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12ZM6 6H15V10H6V6Z",fill:"#ffffff"})}),"Save Email Template"]})]})]})]}),e.jsxs("div",{id:"email-config-section",style:{marginTop:"32px"},children:[e.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Automation Configuration"}),e.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Service"}),e.jsxs("select",{value:fn.emailService,onChange:l=>qs({...fn,emailService:l.target.value}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"},children:[e.jsx("option",{value:"gmail",children:"Gmail"}),e.jsx("option",{value:"outlook",children:"Outlook"}),e.jsx("option",{value:"yahoo",children:"Yahoo"}),e.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Email Address ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"email",value:fn.emailUser,onChange:l=>qs({...fn,emailUser:l.target.value}),placeholder:"your-email@gmail.com",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["App Password ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:x?"text":"password",value:fn.emailPassword,onChange:l=>qs({...fn,emailPassword:l.target.value}),placeholder:"Enter app password",style:{width:"100%",padding:"12px",paddingRight:"45px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),e.jsx("button",{type:"button",onClick:()=>M(!x),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":x?"Hide password":"Show password",children:x?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),e.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"For Gmail: Use App Password (not regular password)"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Schedule Time"}),e.jsxs("div",{className:"flex gap-sm items-center",children:[e.jsx("input",{type:"time",value:fn.scheduleTime,onChange:l=>{const N=l.target.value;qs({...fn,scheduleTime:N});const[L]=N.split(":").map(Number);Ja(L>=12?"PM":"AM")},style:{flex:1,padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),e.jsxs("select",{value:Zi,onChange:l=>{const N=l.target.value;Ja(N);const[L,P]=fn.scheduleTime.split(":").map(Number);let I=L;N==="AM"&&L===12?I=0:N==="PM"&&L!==12?I=L+12:N==="AM"&&L>=12?I=L-12:N==="PM"&&L<12&&(I=L+12);const U=`${I.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`;qs({...fn,scheduleTime:U})},style:{padding:"12px 16px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit",background:"white",cursor:"pointer",fontWeight:"500"},children:[e.jsx("option",{value:"AM",children:"AM"}),e.jsx("option",{value:"PM",children:"PM"})]})]}),e.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["Daily reminder time (24-hour format stored: ",fn.scheduleTime,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Reminder Interval (days)"}),e.jsx("input",{type:"number",min:"1",max:"30",value:fn.reminderInterval,onChange:l=>qs({...fn,reminderInterval:parseInt(l.target.value)||7}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),e.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"Days between reminder emails (min: 1, max: 30)"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[e.jsx("button",{className:"secondary-btn",onClick:Zl,disabled:ps||!fn.emailUser||!fn.emailPassword,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600",opacity:ps||!fn.emailUser||!fn.emailPassword?.5:1,cursor:ps||!fn.emailUser||!fn.emailPassword?"not-allowed":"pointer"},children:ps?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"currentColor"})}),"Test Email"]})}),e.jsxs("button",{className:"primary-btn",onClick:ns,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"8px",verticalAlign:"middle"},children:e.jsx("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12ZM6 6H15V10H6V6Z",fill:"#ffffff"})}),"Save Email Settings"]})]})]})]}),e.jsx("div",{className:"mt-2xl flex justify-end",children:e.jsx("button",{className:"primary-btn",onClick:rs,disabled:hi,style:{padding:"12px 24px",fontSize:"0.9375rem",fontWeight:"600",borderRadius:"4px",color:"#ffffff",opacity:hi?.6:1,cursor:hi?"not-allowed":"pointer"},children:hi?e.jsxs("span",{className:"flex items-center gap-sm",style:{color:"#ffffff"},children:[e.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Saving..."]}):e.jsxs("span",{className:"flex items-center gap-sm",style:{color:"#ffffff"},children:[e.jsx("i",{className:"fas fa-save"}),"Save All Settings"]})})})]}),ht==="communications"&&e.jsxs("article",{className:"screen-card",id:"communications",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("communications"),e.jsx("h3",{children:"Reminders Log"}),e.jsx("p",{children:"See all reminder emails and WhatsApp messages sent to members."})]})}),(()=>{const l=(C||[]).map(Je=>{const Xe=Je.status?String(Je.status).trim():"",Nt=Xe.toLowerCase();let mt="Delivered";return Nt==="failed"?mt="Failed":Nt==="pending"?mt="Pending":Xe&&(mt=Xe),{status:mt}}),N=(p||[]).filter(Je=>Je.channel==="WhatsApp").map(Je=>({status:(Je.status?String(Je.status).trim():"")||"Delivered"})),L=[...l,...N],P=L.length,I=l.length,U=N.length,W=L.filter(Je=>Je.status==="Delivered").length,ve=L.filter(Je=>Je.status==="Failed").length,be=L.filter(Je=>Je.status==="Pending").length;return e.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-bell admin-dashboard-kpi-icon"}),"Total Reminders"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Mr(P)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-envelope admin-dashboard-kpi-icon"}),"Email Reminders"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Mr(I)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fab fa-whatsapp admin-dashboard-kpi-icon--green"}),"WhatsApp Reminders"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Mr(U)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-check-circle admin-dashboard-kpi-icon--green"}),"Delivered"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:Mr(W)})]}),ve>0&&e.jsxs("div",{className:"admin-dashboard-kpi-card admin-dashboard-kpi-card--error",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label admin-dashboard-kpi-label--error",children:[e.jsx("i",{className:"fas fa-times-circle admin-dashboard-kpi-icon--red"}),"Failed"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Mr(ve)})]}),be>0&&e.jsxs("div",{className:"admin-dashboard-kpi-card admin-dashboard-kpi-card--error",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label admin-dashboard-kpi-label--error",children:[e.jsx("i",{className:"fas fa-clock admin-dashboard-kpi-icon--red"}),"Pending"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Mr(be)})]})]})})(),e.jsxs("div",{className:"admin-communications-filter-card",children:[e.jsxs("div",{className:"admin-communications-filters-container",children:[e.jsxs("div",{className:"flex gap-md flex-wrap items-center",children:[e.jsx("label",{className:"font-semibold",style:{color:"#1a1a1a"},children:"Filter by Status:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Delivered",label:"Delivered"},{value:"Failed",label:"Failed"},{value:"Pending",label:"Pending"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{Ps(l.value),Eo(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:lr===l.value?"#5a31ea":"transparent",color:lr===l.value?"#ffffff":"#6b7280",boxShadow:lr===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{lr!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{lr!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))})]}),e.jsxs("div",{className:"flex gap-md flex-wrap items-center",children:[e.jsx("label",{className:"font-semibold",style:{color:"#1a1a1a"},children:"Filter by Channel:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Email",label:"Email"},{value:"WhatsApp",label:"WhatsApp"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{fi(l.value),Eo(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:fr===l.value?"#5a31ea":"transparent",color:fr===l.value?"#ffffff":"#6b7280",boxShadow:fr===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{fr!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{fr!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))})]})]}),(()=>{const l=(C||[]).map(I=>({memberName:(s.find(W=>W.id===I.memberId)||s.find(W=>W.email&&I.memberEmail&&W.email.toLowerCase()===I.memberEmail.toLowerCase()))?.name||I.memberEmail||"N/A",memberId:I.memberId,channel:"Email",type:I.reminderType==="overdue"?"Overdue (auto/manual)":"Upcoming (auto/manual)",message:`Email reminder - ${I.amount}  ${I.invoiceCount} invoice(s)`,date:I.sentAt?new Date(I.sentAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",status:(()=>{const W=I.status?String(I.status).trim():"",ve=W.toLowerCase();return ve==="failed"?"Failed":ve==="pending"?"Pending":W||"Delivered"})(),rawDate:I.sentAt||null,raw:I})),N=(p||[]).filter(I=>I.channel==="WhatsApp").map(I=>{const W=(I.status?String(I.status).trim():"")||"Delivered";return{memberName:I.memberName||I.member||"N/A",memberId:I.memberId,channel:"WhatsApp",type:I.type||"Manual Outstanding Reminder",message:I.message,date:I.date,status:W,rawDate:I.timestamp||null,raw:I}});let L=[...l,...N];L=L.filter(I=>{const U=I.status?String(I.status).trim():"Delivered";let W=!1;if(lr==="All")W=!0;else{const Je=lr.toLowerCase(),Xe=U.toLowerCase();W=Je===Xe}const ve=I.channel?String(I.channel).trim():"";return W&&(fr==="All"||ve===fr)}),L.sort((I,U)=>{const W=I.rawDate?new Date(I.rawDate).getTime():0;return(U.rawDate?new Date(U.rawDate).getTime():0)-W});const P=L.length;if(P===0){const I=(C||[]).map(be=>{const Je=be.status?String(be.status).trim():"",Xe=Je.toLowerCase();let Nt="Delivered";return Xe==="failed"?Nt="Failed":Xe==="pending"?Nt="Pending":Je&&(Nt=Je),{status:Nt,channel:"Email"}}),U=(p||[]).filter(be=>be.channel==="WhatsApp").map(be=>({status:be.status||"Delivered",channel:"WhatsApp"})),W=I.length+U.length;let ve="No reminders have been sent yet.";return W>0&&(lr!=="All"&&fr!=="All"?ve=`No ${lr.toLowerCase()} ${fr.toLowerCase()} reminders found.`:lr!=="All"?ve=`No ${lr.toLowerCase()} reminders found.`:fr!=="All"&&(ve=`No ${fr.toLowerCase()} reminders found.`)),e.jsx("div",{style:{padding:"32px 20px",textAlign:"center",color:"#666"},children:e.jsx("p",{style:{margin:0},children:ve})})}return e.jsx(e.Fragment,{children:(()=>{const I=Math.max(Ll,10),U=Math.max(1,Math.ceil(P/I)),W=Math.min(lo,U),ve=(W-1)*I,be=ve+I,Je=L.slice(ve,be);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{overflowX:"auto"},className:"reminder-logs-table-wrapper",children:e.jsxs("table",{className:"table data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Member"}),e.jsx("th",{children:"Channel"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Je.map((Xe,Nt)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[Xe.memberName||Xe.member||"N/A",Xe.memberId?` (${Xe.memberId})`:""]}),e.jsx("td",{children:Xe.channel||"N/A"}),e.jsx("td",{children:Xe.type||"-"}),e.jsx("td",{style:{maxWidth:"320px",whiteSpace:"normal"},children:Xe.message||"N/A"}),e.jsx("td",{children:Xe.date||"N/A"}),e.jsx("td",{children:e.jsx("span",{className:qa[Xe.status]||"badge",children:Xe.status||"N/A"})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"6px"},onClick:mt=>mt.stopPropagation(),children:[e.jsx("button",{type:"button",className:"icon-btn icon-btn--view",title:"View full message","aria-label":"View full message",onClick:()=>{Hs(Xe)},children:e.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),Xe.channel==="Email"&&Xe.status==="Failed"&&!X&&e.jsx("button",{type:"button",className:"icon-btn icon-btn--edit",title:"Retry sending","aria-label":"Retry sending reminder",onClick:async()=>{try{const mt=Xe.raw,mn=mt?._id||mt?.id,jn=await fetch("http://localhost:4000/api/reminders/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reminderId:mn})}),aa=await jn.json();jn.ok?(Q(aa.message||"Reminder retry queued"),typeof K=="function"&&K()):Q(aa.error||"Failed to retry reminder","error")}catch(mt){console.error("Retry reminder failed",mt),Q("Failed to retry reminder","error")}},children:e.jsx("i",{className:"fas fa-redo","aria-hidden":"true"})})]})})]},`${Xe.memberId||Xe.memberName||"row"}-${ve+Nt}`))})]})}),e.jsx("div",{className:"mobile-table-cards reminder-logs-mobile-cards",children:Je.map((Xe,Nt)=>e.jsx("div",{className:"mobile-table-card",onClick:()=>Hs(Xe),children:e.jsx("div",{className:"mobile-table-card-header",children:e.jsxs("div",{className:"mobile-table-card-header-content",children:[e.jsxs("div",{className:"mobile-table-card-title-section",children:[e.jsxs("div",{className:"mobile-table-card-title",children:[Xe.memberName||Xe.member||"N/A",Xe.memberId?` (${Xe.memberId})`:""]}),e.jsxs("div",{className:"mobile-table-card-metric",children:[e.jsx("i",{className:`fas ${Xe.channel==="Email"?"fa-envelope":"fa-whatsapp"}`,style:{fontSize:"0.75rem",marginRight:"4px"}}),e.jsx("span",{children:Xe.channel||"N/A"})]})]}),e.jsxs("div",{className:"mobile-table-card-header-right",children:[e.jsx("div",{className:"mobile-table-card-status",children:e.jsx("span",{className:qa[Xe.status]||"badge",children:Xe.status||"N/A"})}),e.jsx("i",{className:"fas fa-chevron-right mobile-table-card-arrow"})]})]})})},`${Xe.memberId||Xe.memberName||"row"}-${ve+Nt}`))}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{style:{fontSize:"0.875rem",color:"#555"},children:["Showing"," ",e.jsxs("strong",{children:[ve+1,"-",Math.min(be,P)]})," ","of ",e.jsx("strong",{children:P})," reminders"]}),e.jsxs("div",{className:"flex items-center gap-sm",children:[e.jsx("button",{type:"button",className:"secondary-btn",disabled:W<=1,onClick:()=>Eo(Math.max(1,W-1)),children:"Previous"}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:["Page ",e.jsx("strong",{children:W})," of ",e.jsx("strong",{children:U})]}),e.jsx("button",{type:"button",className:"secondary-btn",disabled:W>=U,onClick:()=>Eo(Math.min(U,W+1)),children:"Next"})]})]})]})})()})})()]})]}),ht==="communications"&&Qe==="Owner"&&e.jsxs("article",{className:"screen-card",id:"password-reset-requests",style:{marginTop:"24px"},children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-key",style:{marginRight:"10px"}}),"Password Reset Requests"]}),e.jsx("p",{children:"Manage password reset requests from admin users."})]})}),e.jsx("div",{className:"card-communications",children:e.jsx("div",{style:{padding:"24px"},children:Z&&Z.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Email"}),e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Requested At"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Handled By"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Z.sort((l,N)=>new Date(N.requestedAt)-new Date(l.requestedAt)).map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:l.userEmail}),e.jsx("td",{children:l.userName||"N/A"}),e.jsx("td",{children:l.requestedAt?new Date(l.requestedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),e.jsx("td",{children:e.jsx("span",{className:l.status==="Pending"?"badge badge--warning":l.status==="Approved"?"badge badge--success":"badge badge--error",children:l.status||"Pending"})}),e.jsx("td",{children:l.handledBy?`${l.handledBy}${l.handledAt?` - ${new Date(l.handledAt).toLocaleDateString("en-GB")}`:""}`:"-"}),e.jsxs("td",{children:[l.status==="Pending"&&e.jsxs("button",{className:"primary-btn",style:{fontSize:"0.875rem",padding:"6px 12px"},onClick:()=>{Cr(l),Ss({newPassword:""}),js(!0)},children:[e.jsx("i",{className:"fas fa-key",style:{marginRight:"6px"}}),"Set Password"]}),l.status==="Approved"&&l.newPassword&&e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Password sent"})]})]},l._id))})]})}):e.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#666"},children:e.jsx("p",{children:"No password reset requests found."})})})})]}),ht==="payment-methods"&&e.jsxs("article",{className:"screen-card",id:"payment-methods",children:[e.jsxs("header",{className:"screen-card__header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Payment Methods"}),e.jsx("p",{children:"Configure payment methods and QR codes for member payments."})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"8px 16px",background:"#f8f9fa",borderRadius:"8px",fontSize:"0.875rem"},children:[e.jsx("span",{style:{color:"#666"},children:"Active Methods:"}),e.jsx("strong",{style:{color:"#000"},children:m.filter(l=>(l.name==="Alipay"||l.name==="PayMe"||l.name==="FPS"||l.name==="Direct Bank Transfer")&&l.visible).length})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px",marginTop:"32px"},children:m.filter(l=>l.name==="PayMe"||l.name==="FPS"||l.name==="Direct Bank Transfer").map(l=>{const N=l.name==="PayMe",L=async(P,I)=>{const U=P.target.files[0];if(U){if(!U.type.startsWith("image/")){Q("Please upload an image file","error");return}Ze(W=>({...W,[I]:!0}));try{const W="http://localhost:4000",ve=new FormData;ve.append("screenshot",U),ve.append("uploadType","qr-code");const be=await fetch(`${W}/api/upload/screenshot`,{method:"POST",body:ve});if(!be.ok){let Nt="Failed to upload QR code";try{const mt=await be.json();Nt=mt.error||Nt,console.error("Upload error response:",mt)}catch(mt){console.error("Failed to parse error response:",mt),Nt=`Upload failed with status ${be.status}`}throw new Error(Nt)}const Je=await be.json();if(!Je.url)throw new Error("No URL returned from upload. Please try again.");const Xe=Je.url;await z(I,{qrImageUrl:Xe}),Q(`${I} QR code uploaded successfully!`)}catch(W){console.error("Error uploading QR code:",W),Q(W.message||"Failed to upload QR code. Please try again.","error")}finally{Ze(W=>({...W,[I]:!1}))}}};return e.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"20px",padding:"28px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",boxShadow:l.visible?"0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)":"0 2px 8px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column",gap:"20px",overflow:"hidden"},onMouseEnter:P=>{l.visible&&(P.currentTarget.style.boxShadow="0 12px 36px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.08)",P.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:P=>{l.visible&&(P.currentTarget.style.boxShadow="0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)",P.currentTarget.style.transform="translateY(0)")},children:[e.jsx("div",{onClick:async()=>{try{await z(l.name,{visible:!l.visible})}catch(P){console.error("Error updating payment method:",P)}},style:{position:"absolute",top:"20px",right:"20px",padding:"6px 14px",borderRadius:"20px",fontSize:"0.7rem",fontWeight:"700",background:l.visible?"#e8f5e9":"#f5f5f5",color:l.visible?"#1b5e20":"#757575",textTransform:"uppercase",letterSpacing:"0.8px",cursor:"pointer",transition:"all 0.2s ease",userSelect:"none",border:l.visible?"1px solid #a5d6a7":"1px solid #e0e0e0",boxShadow:l.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},onMouseEnter:P=>{P.target.style.transform="scale(1.08)",P.target.style.boxShadow=l.visible?"0 4px 8px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)"},onMouseLeave:P=>{P.target.style.transform="scale(1)",P.target.style.boxShadow=l.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:l.visible?" Active":" Inactive"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px",marginBottom:"4px",paddingBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:l.name==="PayMe"?"#00C300":l.name==="FPS"?"#0066CC":"#E60012",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",fontWeight:"700",color:"#fff",boxShadow:"0 6px 16px rgba(0,0,0,0.15)",position:"relative"},children:[l.name==="PayMe"?"P":l.name==="FPS"?"F":"B",l.visible&&e.jsx("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",borderRadius:"50%",background:"#4caf50",border:"2px solid #fff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:"10px",color:"#fff"},children:""})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,fontSize:"1.625rem",fontWeight:"700",color:"#000",letterSpacing:"-0.5px",marginBottom:"6px"},children:l.name==="Direct Bank Transfer"?"Bank Transfer":l.name}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:l.name==="PayMe"?"PayMe by HSBC":l.name==="FPS"?"Faster Payment System":"Direct Bank Transfer"})]})]}),N?e.jsx("div",{style:{background:"#f9fafb",borderRadius:"16px",padding:"28px",border:l.qrImageUrl?"1px solid #e0e0e0":"2px dashed #d0d0d0",minHeight:"300px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"20px",position:"relative",transition:"all 0.3s ease"},children:l.qrImageUrl?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"16px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:e.jsx("img",{src:l.qrImageUrl,alt:`${l.name} QR Code`,style:{maxWidth:"260px",maxHeight:"260px",width:"100%",height:"auto",borderRadius:"4px",display:"block",objectFit:"contain"}})}),e.jsx("button",{onClick:()=>{const P=document.createElement("input");P.type="file",P.accept="image/*",P.onchange=I=>L(I,l.name),P.click()},disabled:Pe[l.name],style:{padding:"10px 20px",background:"#fff",border:"none",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.1)",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",cursor:Pe[l.name]?"not-allowed":"pointer",transition:"all 0.2s ease",color:"#000",opacity:Pe[l.name]?.6:1},onMouseEnter:P=>{Pe[l.name]||(P.target.style.background="#000",P.target.style.color="#fff",P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)")},onMouseLeave:P=>{Pe[l.name]||(P.target.style.background="#fff",P.target.style.color="#000",P.target.style.transform="translateY(0)",P.target.style.boxShadow="none")},children:Pe[l.name]?" Uploading...":" Change QR Code"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"#bbb",marginBottom:"12px",border:"2px dashed #d0d0d0"},children:""}),e.jsx("p",{style:{margin:0,fontSize:"0.9375rem",color:"#666",textAlign:"center",marginBottom:"4px",fontWeight:"500"},children:"No QR code uploaded"}),e.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"#999",textAlign:"center",marginBottom:"16px"},children:"Upload a QR code image to enable this payment method"}),e.jsxs("label",{style:{padding:"12px 24px",background:"#1a1a1a",color:"#fff",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",cursor:Pe[l.name]?"not-allowed":"pointer",display:"inline-block",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",opacity:Pe[l.name]?.6:1},onMouseEnter:P=>{Pe[l.name]||(P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)")},onMouseLeave:P=>{Pe[l.name]||(P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)")},children:[Pe[l.name]?" Uploading...":" Upload QR Code",e.jsx("input",{type:"file",accept:"image/*",onChange:P=>L(P,l.name),style:{display:"none"},disabled:Pe[l.name]})]})]})}):e.jsxs("div",{style:{background:"#f9fafb",borderRadius:"16px",padding:"24px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{fontSize:"0.8125rem",fontWeight:"700",color:"#666",marginBottom:"18px",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Payment Details"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:l.details&&l.details.map((P,I)=>e.jsx("div",{style:{padding:"16px 18px",background:"#fff",borderRadius:"10px",fontSize:"0.9375rem",color:"#333",borderLeft:"4px solid #5a31ea",fontWeight:"500",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",transition:"all 0.2s ease"},onMouseEnter:U=>{U.currentTarget.style.boxShadow="0 4px 10px rgba(0,0,0,0.1)",U.currentTarget.style.transform="translateX(4px)"},onMouseLeave:U=>{U.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.06)",U.currentTarget.style.transform="translateX(0)"},children:P},`${l.name}-detail-${I}`))})]}),e.jsxs("div",{onClick:async()=>{try{await z(l.name,{visible:!l.visible})}catch(P){console.error("Error updating payment method:",P)}},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 20px",background:l.visible?"#f8f9ff":"#f9fafb",borderRadius:"12px",border:`2px solid ${l.visible?"#2196F3":"#e0e0e0"}`,cursor:"pointer",transition:"all 0.3s ease",marginTop:"4px"},onMouseEnter:P=>{P.currentTarget.style.background=l.visible?"#bbdefb":"#f3f4f6",P.currentTarget.style.borderColor=l.visible?"#1976D2":"#ccc",P.currentTarget.style.transform="scale(1.01)"},onMouseLeave:P=>{P.currentTarget.style.background=l.visible?"#f8f9ff":"#fafafa",P.currentTarget.style.borderColor=l.visible?"#2196F3":"#e0e0e0",P.currentTarget.style.transform="scale(1)"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:l.visible?"#1565C0":"#666",display:"block",marginBottom:"6px"},children:l.visible?" Enabled for members":" Disabled for members"}),e.jsx("span",{style:{fontSize:"0.8125rem",color:l.visible?"#1976D2":"#999",lineHeight:"1.4"},children:l.visible?"This payment method is visible to all members":"This payment method is hidden from members"})]}),e.jsxs("label",{className:"switch",style:{margin:0,marginLeft:"16px"},onClick:P=>P.stopPropagation(),children:[e.jsx("input",{type:"checkbox",checked:l.visible,onChange:async P=>{P.stopPropagation();try{await z(l.name,{visible:P.target.checked})}catch(I){console.error("Error updating payment method:",I)}},tabIndex:-1,onFocus:P=>P.target.blur()}),e.jsx("span",{})]})]})]},l.name)})})]}),ht==="payment-approvals"&&e.jsxs("article",{className:"screen-card",id:"payment-approvals",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Payment Approvals"}),e.jsx("p",{children:"Review and approve member payment submissions."})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"primary-btn",onClick:()=>{Cs(!0),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"+ Add Payment"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Approved"},{value:"Rejected",label:"Rejected"}].map(l=>e.jsx("button",{type:"button",onClick:()=>no(l.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:ir===l.value?"#5a31ea":"transparent",color:ir===l.value?"#ffffff":"#6b7280",boxShadow:ir===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{ir!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{ir!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))}),e.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending: ",(o||[]).filter(l=>l.status==="Pending").length]})]})]})}),gs&&e.jsx("div",{className:"modal-overlay",onClick:l=>{l.target,l.currentTarget},children:e.jsxs("div",{className:"card modal-container modal-container-640",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header mb-xl",children:[e.jsx("h4",{className:"m-0",children:ka?"Edit Payment":"Add New Payment"}),e.jsx("button",{className:"ghost-btn",type:"button",onClick:()=>{li({memberId:!1,amount:!1,method:!1,screenshot:!1}),io(null),Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:l=>{l.target.style.background="#fee2e2"},onMouseLeave:l=>{l.target.style.background="transparent"},children:""})]}),e.jsxs("form",{className:"form-grid",onSubmit:ka?O:k,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:jt.memberId,onChange:l=>{const N=s.find(L=>L.id===l.target.value);Mn({...jt,memberId:l.target.value,member:N?N.name:""})},required:!0,children:[e.jsx("option",{value:"",children:"Select Member"}),s.map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.id,")"]},l.id))]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),e.jsx("input",{type:"text",value:jt.invoiceId,onChange:l=>Mn({...jt,invoiceId:l.target.value}),placeholder:"INV-2025-001"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:jt.amount,onChange:l=>Mn({...jt,amount:l.target.value}),placeholder:"$50",required:!0})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:jt.method,onChange:l=>Mn({...jt,method:l.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Method"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"FPS",children:"FPS"}),e.jsx("option",{value:"PayMe",children:"PayMe"}),e.jsx("option",{value:"Cash",children:"Cash"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),e.jsx("input",{type:"text",value:jt.reference,onChange:l=>Mn({...jt,reference:l.target.value}),placeholder:"Transaction reference"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),e.jsx("input",{type:"text",value:jt.date,onChange:l=>Mn({...jt,date:l.target.value}),placeholder:"01 Jan 2025"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:jt.status,onChange:l=>Mn({...jt,status:l.target.value}),required:!0,children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL"," ",jt.method==="Cash"&&e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:jt.screenshot,onChange:l=>Mn({...jt,screenshot:l.target.value}),placeholder:"https://...",required:jt.method==="Cash"}),jt.method==="Cash"&&!jt.screenshot&&e.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),e.jsx("textarea",{value:jt.notes,onChange:l=>Mn({...jt,notes:l.target.value}),rows:3,placeholder:"Additional notes..."})]}),e.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[ka?"Update":"Add"," Payment"]})]})]})]})}),e.jsx("div",{className:"card-payment-approvals",children:e.jsx("div",{className:"table-wrapper",children:(()=>{const l=(o||[]).filter(W=>ir==="All"?!0:W.status===ir).sort((W,ve)=>{if(W.status==="Pending"&&ve.status!=="Pending")return-1;if(W.status!=="Pending"&&ve.status==="Pending")return 1;const be=W.createdAt?new Date(W.createdAt):new Date(W.date||0);return(ve.createdAt?new Date(ve.createdAt):new Date(ve.date||0))-be}),N=Math.ceil(l.length/ui)||1,L=Math.min(di,N),P=(L-1)*ui,I=P+ui,U=l.slice(P,I);return e.jsxs(e.Fragment,{children:[e.jsx(Ua,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:U.map(W=>{const ve=W._id||W.id,be=ve?.toString?ve.toString():ve;return{Date:W.date||(W.createdAt?new Date(W.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:W.member||"Unknown","Invoice ID":W.invoiceId||"N/A",Amount:W.amount||"$0",Method:Pi(W),Screenshot:{render:()=>W.screenshot?e.jsx("a",{href:W.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:e.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>e.jsx("span",{className:qa[W.status]||"badge badge-unpaid",children:W.status})},Actions:{render:()=>e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[W.status==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"icon-btn icon-btn--view",onClick:()=>{be&&u(be)},title:"Approve payment (By Admin)","aria-label":"Approve payment (By Admin)",children:e.jsx("i",{className:"fas fa-check","aria-hidden":"true"})}),e.jsx("button",{className:"icon-btn icon-btn--delete",onClick:()=>{be&&h(be)},title:"Reject payment (By Admin)","aria-label":"Reject payment (By Admin)",children:e.jsx("i",{className:"fas fa-times","aria-hidden":"true"})})]}),W.status==="Rejected"&&W.rejectionReason&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666",fontStyle:"italic"},children:["Reason: ",W.rejectionReason]}),W.status==="Completed"&&(()=>{const Je=W.paidToAdmin||W.paidToAdminName,Nt=["Screenshot","Bank Transfer","FPS","PayMe","Online Payment"].includes(W.method);return Je?e.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#4caf50",cursor:"default",padding:"4px 8px"},title:"Paid by Admin (Cash)","aria-label":"Paid by Admin (Cash)",children:e.jsx("i",{className:"fas fa-user-shield","aria-hidden":"true"})}):Nt?e.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#2196F3",cursor:"default",padding:"4px 8px"},title:"Paid Online","aria-label":"Paid Online",children:e.jsx("i",{className:"fas fa-globe","aria-hidden":"true"})}):e.jsxs("span",{style:{fontSize:"0.75rem",color:"#4caf50"},children:[" Approved by ",W.approvedBy||"Admin"]})})(),e.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>E(W),title:"Edit Payment",children:e.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:()=>{be&&B(be)},title:"Delete Payment",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),N>0&&l.length>0&&e.jsx(mc,{currentPage:L,totalPages:N,onPageChange:_o,pageSize:ui,onPageSizeChange:Kl,totalItems:l.length})]})})()})})]}),ht==="invoices"&&e.jsxs("article",{className:"screen-card",id:"invoices",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[_e("invoices"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoices"]}),e.jsx("p",{children:"View and manage all invoices."})]}),e.jsxs("button",{className:"primary-btn",onClick:()=>{re("invoice-builder"),Q("Redirecting to Invoice Builder...")},children:[e.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Invoice"]})]})}),(()=>{const l=r||[],N=l.length,L=l.filter(ve=>{const be=ve?.status||"Unpaid";return be!=="Paid"&&be!=="Completed"}),P=l.filter(ve=>{const be=ve?.status||"Unpaid";return be==="Paid"||be==="Completed"}),I=l.filter(ve=>ve?.status==="Overdue"),U=L.reduce((ve,be)=>{const Je=parseFloat((be?.amount||"0").replace(/[^0-9.]/g,"")||0);return ve+Je},0),W=P.reduce((ve,be)=>{const Je=parseFloat((be?.amount||"0").replace(/[^0-9.]/g,"")||0);return ve+Je},0);return e.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-file-invoice admin-dashboard-kpi-icon"}),"Total Invoices"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value",children:Mr(N)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-check-circle admin-dashboard-kpi-icon--green"}),"Paid"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:Mr(P.length)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-exclamation-circle admin-dashboard-kpi-icon--red"}),"Unpaid"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Mr(L.length)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-exclamation-triangle admin-dashboard-kpi-icon--red"}),"Overdue"]}),e.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Mr(I.length)})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--red"}),"Total Unpaid"]}),e.jsxs("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:["$",Mr(U,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"admin-dashboard-kpi-card",children:[e.jsxs("p",{className:"admin-dashboard-kpi-label",children:[e.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--green"}),"Total Collected"]}),e.jsxs("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:["$",Mr(W,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})(),e.jsx("div",{className:"card-invoices",children:e.jsx("div",{className:"table-wrapper",children:(()=>{let l=r||[];Yr!=="All"&&(l=l.filter(U=>{const W=U.status||"Unpaid";return Yr==="Paid"?W==="Paid"||W==="Completed":Yr==="Unpaid"?W!=="Paid"&&W!=="Completed"&&W!=="Overdue":W===Yr}));const N=(_l-1)*ol,L=N+ol,P=l.slice(N,L),I=Math.ceil(l.length/ol);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Paid",label:"Paid"},{value:"Unpaid",label:"Unpaid"},{value:"Overdue",label:"Overdue"},{value:"Pending",label:"Pending"}].map(U=>e.jsx("button",{type:"button",onClick:()=>Ui(U.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Yr===U.value?"#5a31ea":"transparent",color:Yr===U.value?"#ffffff":"#6b7280",boxShadow:Yr===U.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:W=>{Yr!==U.value&&(W.target.style.background="#e5e7eb",W.target.style.color="#374151")},onMouseLeave:W=>{Yr!==U.value&&(W.target.style.background="transparent",W.target.style.color="#6b7280")},children:U.label},U.value))})]}),l.length===0?e.jsx("div",{className:"admin-empty-state",children:e.jsx("p",{className:"admin-empty-state-message",children:Yr!=="All"?`No ${Yr.toLowerCase()} invoices found.`:"No invoices found."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-wrapper",children:e.jsx(Ua,{columns:["Invoice ID","Member","Period","Amount","Due Date","Status","Actions"],rows:P.map(U=>{const W=U.status==="Paid"||U.status==="Completed";return U.status,{"Invoice ID":U.id||U.invoiceId||"N/A",Member:U.memberName||U.member||"Unknown",Period:U.period||"N/A",Amount:U.amount||"$0","Due Date":U.due?new Date(U.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Status:{render:()=>e.jsx("span",{className:U.status==="Paid"?"badge badge-paid":U.status==="Overdue"?"badge badge-overdue":U.status==="Pending"?"badge badge-pending":"badge badge-unpaid",children:U.status||"Unpaid"})},Actions:{render:()=>e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-start"},children:[e.jsx("button",{className:"icon-btn icon-btn--view",onClick:()=>{const ve=s.find(be=>be.id===U.memberId||be.email===U.memberEmail||be.name===U.memberName);ve&&(Qn(ve),Ot("member-detail"),qe("Invoices"))},title:"View Invoice Details","aria-label":"View Invoice Details",children:e.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),!W&&e.jsx("button",{className:"icon-btn icon-btn--delete",onClick:()=>{(U.id||U._id)&&Ir(U.id||U._id)},title:"Delete Invoice","aria-label":"Delete Invoice",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})})}),I>0&&r.length>0&&e.jsx(mc,{currentPage:_l,totalPages:I,onPageChange:_c,pageSize:ol,onPageSizeChange:Il,totalItems:l.length})]})]})})()})})]}),ht==="payments"&&e.jsxs("article",{className:"screen-card",id:"payments",children:[e.jsx("header",{className:"screen-card__header",children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:e.jsxs("div",{children:[_e("payments"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Payments"]}),e.jsx("p",{children:"View and all payment transactions."})]})})}),gs&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}))},children:e.jsxs("div",{className:"payments-card admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),ka?"Edit Payment":"Add New Payment"]}),e.jsx("button",{type:"button",onClick:()=>{Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:l=>{l.target.style.background="#f3f4f6",l.target.style.color="#1a1a1a"},onMouseLeave:l=>{l.target.style.background="transparent",l.target.style.color="#666"},children:""})]}),e.jsxs("form",{className:"form-grid",onSubmit:ka?O:k,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{ref:l=>{l&&ka&&setTimeout(()=>l.focus(),100)},value:jt.memberId,onChange:l=>{const N=s.find(L=>L.id===l.target.value);Mn({...jt,memberId:l.target.value,member:N?N.name:""})},required:!0,children:[e.jsx("option",{value:"",children:"Select Member"}),s.map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.id,")"]},l.id))]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),e.jsx("input",{type:"text",value:jt.invoiceId,onChange:l=>Mn({...jt,invoiceId:l.target.value}),placeholder:"INV-2025-001"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:jt.amount,onChange:l=>Mn({...jt,amount:l.target.value}),placeholder:"$50",required:!0})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:jt.method,onChange:l=>Mn({...jt,method:l.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Method"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"FPS",children:"FPS"}),e.jsx("option",{value:"PayMe",children:"PayMe"}),e.jsx("option",{value:"Alipay",children:"Alipay"}),e.jsx("option",{value:"Credit Card",children:"Credit Card"}),e.jsx("option",{value:"Cash",children:"Cash"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),e.jsx("input",{type:"text",value:jt.reference,onChange:l=>Mn({...jt,reference:l.target.value}),placeholder:"Transaction reference"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),e.jsx("input",{type:"text",value:jt.date,onChange:l=>Mn({...jt,date:l.target.value}),placeholder:"01 Jan 2025"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:jt.status,onChange:l=>Mn({...jt,status:l.target.value}),required:!0,children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL ",jt.method==="Cash"&&e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:jt.screenshot,onChange:l=>Mn({...jt,screenshot:l.target.value}),placeholder:"https://...",required:jt.method==="Cash"}),jt.method==="Cash"&&!jt.screenshot&&e.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),e.jsx("textarea",{value:jt.notes,onChange:l=>Mn({...jt,notes:l.target.value}),rows:3,placeholder:"Additional notes..."})]}),e.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Cs(!1),Ci(null),Mn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[ka?"Update":"Add"," Payment"]})]})]})]})}),e.jsx("div",{className:" card-payments",children:e.jsxs("div",{style:{padding:"2px"},children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Paid",label:"Paid"},{value:"Rejected",label:"Rejected"}].map(l=>e.jsx("button",{type:"button",onClick:()=>no(l.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:ir===l.value?"#5a31ea":"transparent",color:ir===l.value?"#ffffff":"#6b7280",boxShadow:ir===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{ir!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{ir!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))})]}),(()=>{const l=(o||[]).filter(W=>ir==="All"?!0:W.status===ir).sort((W,ve)=>{if(W.status==="Pending"&&ve.status!=="Pending")return-1;if(W.status!=="Pending"&&ve.status==="Pending")return 1;const be=W.createdAt?new Date(W.createdAt):new Date(W.date||0);return(ve.createdAt?new Date(ve.createdAt):new Date(ve.date||0))-be}),N=Math.ceil(l.length/ui)||1,L=Math.min(di,N),P=(L-1)*ui,I=P+ui,U=l.slice(P,I);return l.length===0?e.jsx("div",{className:"admin-empty-state",children:e.jsx("p",{className:"admin-empty-state-message",children:ir!=="All"?`No ${ir.toLowerCase()} payments found.`:"No payments found."})}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:U.map(W=>{const ve=W._id||W.id,be=ve?.toString?ve.toString():ve;return{Date:W.date||(W.createdAt?new Date(W.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:W.member||"Unknown","Invoice ID":W.invoiceId||"N/A",Amount:W.amount||"$0",Method:Pi(W),Screenshot:{render:()=>W.screenshot?e.jsxs("a",{href:W.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},children:[e.jsx("i",{className:"fas fa-image",style:{marginRight:"4px"}}),"View"]}):"N/A"},Status:{render:()=>e.jsx("span",{className:W.status==="Paid"||W.status==="Completed"?"badge badge-paid":W.status==="Pending"?"badge badge-pending":W.status==="Rejected"?"badge badge-overdue":"badge badge-active",children:W.status})},Actions:{render:()=>e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"ghost-btn icon-btn icon-btn--edit",onClick:()=>E(W),title:"Edit Payment",children:e.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:()=>{be&&B(be)},title:"Delete Payment",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),N>0&&l.length>0&&e.jsx(mc,{currentPage:L,totalPages:N,onPageChange:_o,pageSize:ui,onPageSizeChange:Kl,totalItems:l.length})]})})()]})})]}),ht==="donations"&&e.jsxs("article",{className:"screen-card",id:"donations",style:{minHeight:"400px"},children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{children:[_e("donations"),e.jsx("h3",{children:"Donations"}),e.jsx("p",{children:"Manage donation records from members and non-members."})]}),e.jsx("button",{className:"primary-btn",onClick:()=>Tn(!0),children:"+ Add Donation"})]})}),Cl&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(Tn(!1),kr({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Pa(null),os(null),Ai(""),$i(!1),es(!1))},children:e.jsxs("div",{className:"admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h4",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-heart","aria-hidden":"true"}),"Add Donation"]}),e.jsx("button",{type:"button",className:"close-btn close-btn-danger",onClick:()=>{xr({donorName:!1,amount:!1,method:!1,date:!1,screenshot:!1}),$r(null),Tn(!1),kr({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Pa(null),os(null),Ai(""),$i(!1),es(!1)},"aria-label":"Close add donation form",children:""})]}),e.jsxs("form",{noValidate:!0,onSubmit:async l=>{if(l.preventDefault(),!!(()=>{const L=["donorName","amount","method","date","screenshot"];if(ur){let P=!0,I="";if(ur==="donorName"&&!ut.donorName)P=!1,I="Donor name is required";else if(ur==="amount")if(!ut.amount)P=!1,I="Amount is required";else{const U=parseFloat(ut.amount);(!U||U<=0||isNaN(U))&&(P=!1,I="Amount must be a positive number")}else ur==="method"&&!ut.method?(P=!1,I="Payment method is required"):ur==="date"&&!ut.date?(P=!1,I="Date is required"):ur==="screenshot"&&(ut.method==="Cash Payment"&&!ut.screenshot&&!Zr||ut.method==="Online Payment"&&!ut.screenshot&&!Zr)&&(P=!1,I="Proof image is required");if(P)xr(U=>({...U,[ur]:!1})),$r(null);else return xr(U=>({...U,[ur]:!0})),Q(I,"error"),!1}for(const P of L){let I=!0,U="";if(P==="donorName"&&!ut.donorName)I=!1,U="Donor name is required";else if(P==="amount")if(!ut.amount)I=!1,U="Amount is required";else{const W=parseFloat(ut.amount);(!W||W<=0||isNaN(W))&&(I=!1,U="Amount must be a positive number")}else P==="method"&&!ut.method?(I=!1,U="Payment method is required"):P==="date"&&!ut.date?(I=!1,U="Date is required"):P==="screenshot"&&(ut.method==="Cash Payment"&&!ut.screenshot&&!Zr||ut.method==="Online Payment"&&!ut.screenshot&&!Zr)&&(I=!1,U="Proof image is required");if(!I)return xr({donorName:!1,amount:!1,method:!1,date:!1,screenshot:!1}),xr(W=>({...W,[P]:!0})),$r(P),Q(U,"error"),setTimeout(()=>{if(P==="donorName"){const W=document.querySelectorAll('input[type="text"]'),ve=Array.from(W).find(be=>be.placeholder?.includes("donor name")||be.placeholder?.includes("Donor name"));ve?.focus(),ve?.scrollIntoView({behavior:"smooth",block:"center"})}else if(P==="amount"){const W=document.querySelector('input[type="number"][inputmode="numeric"]');W?.focus(),W?.scrollIntoView({behavior:"smooth",block:"center"})}else if(P==="method"){const W=document.querySelectorAll("select"),ve=Array.from(W).find(be=>be.options[0]?.text==="Select method");ve?.focus(),ve?.scrollIntoView({behavior:"smooth",block:"center"})}else if(P==="date"){const W=document.querySelector('input[type="date"]');W?.focus(),W?.scrollIntoView({behavior:"smooth",block:"center"})}else if(P==="screenshot"){const W=document.querySelectorAll('[style*="border"]');Array.from(W).find(be=>be.style.border.includes("dashed"))?.scrollIntoView({behavior:"smooth",block:"center"})}},100),!1}return xr({donorName:!1,amount:!1,method:!1,date:!1,screenshot:!1}),$r(null),!0})())try{let L=ut.screenshot;if(Zr){const P="http://localhost:4000",I=new FormData;I.append("screenshot",Zr),I.append("uploadType","donation-proof");const U=await fetch(`${P}/api/upload/screenshot`,{method:"POST",body:I});if(!U.ok){let ve="Failed to upload image";try{ve=(await U.json()).error||ve}catch{ve=`Upload failed with status ${U.status}`}throw new Error(ve)}const W=await U.json();if(!W.url)throw new Error("No URL returned from upload. Please try again.");L=W.url}await Fe({...ut,amount:amountNum.toFixed(2),screenshot:L}),Q("Donation added successfully!"),Tn(!1),kr({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Pa(null),os(null),Ai(""),$i(!1),await je()}catch(L){Q(L.message||"Failed to add donation","error")}},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Donor Name ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:ut.donorName,onChange:l=>{kr({...ut,donorName:l.target.value}),Hn.donorName&&(xr(N=>({...N,donorName:!1})),ur==="donorName"&&$r(null))},required:!0,placeholder:ut.isMember?"Will be filled automatically when member is selected":"Enter donor name",disabled:!!(ut.isMember&&ut.memberId),style:{background:ut.isMember&&ut.memberId?"#f9fafb":"#fff",cursor:ut.isMember&&ut.memberId?"not-allowed":"text",border:Hn.donorName?"2px solid #ef4444":void 0}}),ut.isMember&&ut.memberId&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px",display:"block"},children:"Donor name is automatically set from selected member"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",inputMode:"numeric",value:ut.amount,onChange:l=>{const N=l.target.value.replace(/[^0-9.]/g,"");kr({...ut,amount:N}),Hn.amount&&(xr(L=>({...L,amount:!1})),ur==="amount"&&$r(null))},placeholder:"100",required:!0,style:{border:Hn.amount?"2px solid #ef4444":void 0}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Donor Type"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{type:"button",onClick:()=>kr({...ut,isMember:!0,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"#5a31ea":"#f8f9ff",color:ut.isMember?"#ffffff":"#1a1a1a",boxShadow:ut.isMember?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:l=>{ut.isMember||(l.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",l.currentTarget.style.background="#f8f8f8")},onMouseLeave:l=>{ut.isMember||(l.currentTarget.style.borderColor="#e0e0e0",l.currentTarget.style.background="#fff")},children:[e.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:""}),e.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:"Member"})]}),e.jsxs("button",{type:"button",onClick:()=>kr({...ut,isMember:!1,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"#f8f9ff":"#5a31ea",color:ut.isMember?"#1a1a1a":"#ffffff",boxShadow:ut.isMember?"0 2px 4px rgba(90, 49, 234, 0.08)":"0 4px 12px rgba(90, 49, 234, 0.3)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:l=>{ut.isMember&&(l.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",l.currentTarget.style.background="#f8f8f8")},onMouseLeave:l=>{ut.isMember&&(l.currentTarget.style.borderColor="#e0e0e0",l.currentTarget.style.background="#fff")},children:[e.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:""}),e.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:"Non-Member"})]})]})]}),ut.isMember&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("label",{children:["Select Member ",e.jsx("span",{style:{color:"#ef4444"},children:"*"}),e.jsxs("div",{style:{position:"relative"},"data-donation-member-dropdown":!0,children:[e.jsxs("div",{onClick:()=>$i(!Vo),style:{padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",background:"#fff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:ut.memberId?"#000":"#999",minHeight:"42px"},children:[e.jsx("span",{children:ut.memberId?(()=>{const l=s.find(N=>N.id===ut.memberId);return l?`${l.name} (${l.id})`:"Select Member"})():"Select Member"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Vo?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Vo&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"1px solid #e0e0e0",borderRadius:"4px",marginTop:"4px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #e0e0e0",background:"#f9fafb"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:Gr,onChange:l=>Ai(l.target.value),onClick:l=>l.stopPropagation(),onKeyDown:l=>l.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"10px 36px 10px 12px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#fff",transition:"border-color 0.2s"},onFocus:l=>{l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",l.target.style.boxShadow="0 0 0 2px rgba(0,0,0,0.05)"},onBlur:l=>{l.target.style.borderColor="#e0e0e0",l.target.style.boxShadow="none"}}),Gr&&e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),Ai("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),Gr&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[s.filter(l=>!Gr||l.name?.toLowerCase().includes(Gr.toLowerCase())||l.id?.toLowerCase().includes(Gr.toLowerCase())).length," member",s.filter(l=>!Gr||l.name?.toLowerCase().includes(Gr.toLowerCase())||l.id?.toLowerCase().includes(Gr.toLowerCase())).length!==1?"s":""," found"]})]}),e.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[s.filter(l=>!Gr||l.name?.toLowerCase().includes(Gr.toLowerCase())||l.id?.toLowerCase().includes(Gr.toLowerCase())).map(l=>e.jsxs("div",{onClick:()=>{kr({...ut,memberId:l.id,donorName:l.name||""}),$i(!1),Ai("")},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid #e5e7eb",background:ut.memberId===l.id?"#f9fafb":"#fff",transition:"background 0.2s"},onMouseEnter:N=>{ut.memberId!==l.id&&(N.target.style.background="#f9f9f9")},onMouseLeave:N=>{ut.memberId!==l.id&&(N.target.style.background="#fff")},children:[e.jsx("div",{style:{fontWeight:"500",color:"#000"},children:l.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[l.id," ",l.email?` ${l.email}`:""]})]},l.id)),s.filter(l=>!Gr||l.name?.toLowerCase().includes(Gr.toLowerCase())||l.id?.toLowerCase().includes(Gr.toLowerCase())).length===0&&e.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!ut.memberId&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]})}),e.jsxs("label",{children:["Payment Method ",e.jsx("span",{style:{color:"#ef4444"},children:"*"}),e.jsxs("div",{className:"donation-payment-method-select-wrapper",children:[e.jsxs("select",{className:"donation-payment-method-select-default",value:ut.method,onChange:l=>{kr({...ut,method:l.target.value}),Hn.method&&(xr(N=>({...N,method:!1})),ur==="method"&&$r(null))},required:!0,style:{border:Hn.method?"2px solid #ef4444":void 0},children:[e.jsx("option",{value:"",children:"Select method"}),e.jsx("option",{value:"Online Payment",children:"Online Payment"}),e.jsx("option",{value:"Cash Payment",children:"Cash Payment"})]}),e.jsxs("div",{className:"donation-payment-method-select-custom","data-donation-payment-method-dropdown":!0,children:[e.jsxs("div",{onClick:()=>es(!Ho),style:{padding:"10px 16px",border:Hn.method?"2px solid #ef4444":"1px solid #e0e0e0",borderRadius:"4px",background:"#fff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:ut.method?"#000":"#999",minHeight:"42px"},children:[e.jsx("span",{children:ut.method||"Select method"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Ho?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Ho&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"1px solid #e0e0e0",borderRadius:"4px",marginTop:"4px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onClick:l=>l.stopPropagation(),children:[e.jsx("div",{onClick:()=>{kr({...ut,method:"Online Payment"}),es(!1),Hn.method&&(xr(l=>({...l,method:!1})),ur==="method"&&$r(null))},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid #e5e7eb",background:ut.method==="Online Payment"?"#f9fafb":"#fff",transition:"background 0.2s",color:"#1a1a1a"},onMouseEnter:l=>{ut.method!=="Online Payment"&&(l.currentTarget.style.background="#f3f4f6")},onMouseLeave:l=>{ut.method!=="Online Payment"&&(l.currentTarget.style.background="#fff")},children:"Online Payment"}),e.jsx("div",{onClick:()=>{kr({...ut,method:"Cash Payment"}),es(!1),Hn.method&&(xr(l=>({...l,method:!1})),ur==="method"&&$r(null))},style:{padding:"12px 16px",cursor:"pointer",background:ut.method==="Cash Payment"?"#f9fafb":"#fff",transition:"background 0.2s",color:"#1a1a1a"},onMouseEnter:l=>{ut.method!=="Cash Payment"&&(l.currentTarget.style.background="#f3f4f6")},onMouseLeave:l=>{ut.method!=="Cash Payment"&&(l.currentTarget.style.background="#fff")},children:"Cash Payment"})]})]})]})]}),ut.method==="Cash Payment"&&e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",e.jsx("span",{style:{color:"#ef4444"},children:"*"}),e.jsx("div",{style:{border:Hn.screenshot?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:Fs||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:l=>{Hn.screenshot||(l.currentTarget.style.borderColor="#5a31ea"),l.currentTarget.style.background="#f8f9ff"},onMouseLeave:l=>{l.currentTarget.style.borderColor=Hn.screenshot?"#ef4444":"#d0d0d0",l.currentTarget.style.background=Fs||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async N=>{const L=N.target.files[0];if(!L)return;if(!L.type.startsWith("image/")){Q("Please upload an image file","error");return}const P=new FileReader;P.onloadend=()=>{Pa(L),os(P.result),Hn.screenshot&&(xr(I=>({...I,screenshot:!1})),ur==="screenshot"&&$r(null))},P.readAsDataURL(L)},l.click()},children:Fs||ut.screenshot?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:Fs||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),Pa(null),os(null),kr({...ut,screenshot:""}),Hn.screenshot&&(xr(N=>({...N,screenshot:!1})),ur==="screenshot"&&$r(null))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})})]}),ut.method==="Online Payment"&&e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",e.jsx("span",{style:{color:"#ef4444"},children:"*"}),e.jsx("div",{style:{border:Hn.screenshot?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:Fs||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:l=>{Hn.screenshot||(l.currentTarget.style.borderColor="#5a31ea"),l.currentTarget.style.background="#f8f9ff"},onMouseLeave:l=>{l.currentTarget.style.borderColor=Hn.screenshot?"#ef4444":"#d0d0d0",l.currentTarget.style.background=Fs||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async N=>{const L=N.target.files[0];if(!L)return;if(!L.type.startsWith("image/")){Q("Please upload an image file","error");return}const P=new FileReader;P.onloadend=()=>{Pa(L),os(P.result),Hn.screenshot&&(xr(I=>({...I,screenshot:!1})),ur==="screenshot"&&$r(null))},P.readAsDataURL(L)},l.click()},children:Fs||ut.screenshot?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:Fs||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),Pa(null),os(null),kr({...ut,screenshot:""}),Hn.screenshot&&(xr(N=>({...N,screenshot:!1})),ur==="screenshot"&&$r(null))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:ut.date,onChange:l=>{const N=l.target.value;kr({...ut,date:N}),Hn.date&&(xr(L=>({...L,date:!1})),ur==="date"&&$r(null))},onBlur:l=>{const N=l.target.value;if(N){const L=new Date(N);if(isNaN(L.getTime())){Q("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[P,I,U]=N.split("-").map(Number);if(I<1||I>12){Q("Invalid month. Please enter a month between 01 and 12","error");return}if(U<1||U>31){Q("Invalid day. Please enter a valid day for the selected month","error");return}const W=new Date(P,I,0).getDate();if(U>W){Q(`Invalid date. ${I}/${P} only has ${W} days`,"error");return}}},required:!0,style:{borderRadius:"4px",width:"100%",border:Hn.date?"2px solid #ef4444":void 0}})]}),e.jsxs("label",{children:["Notes (Optional)",e.jsx("textarea",{value:ut.notes,onChange:l=>kr({...ut,notes:l.target.value}),rows:3,placeholder:"Additional notes about this donation..."})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e.jsx("button",{type:"submit",className:"primary-btn",children:"Save Donation"}),e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Tn(!1),kr({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Pa(null),os(null),Ai(""),$i(!1)},children:"Cancel"})]})]})]})}),e.jsx("div",{className:"card-donations",children:!oe||Array.isArray(oe)&&oe.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No donations yet"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:'Click "Add Donation" to record your first donation'})]}):e.jsx("div",{className:"table-wrapper",children:(()=>{const N=(Array.isArray(oe)?oe:[]).filter(ve=>ve!==null),L=Math.ceil(N.length/Gs)||1,P=Math.min(il,L),I=(P-1)*Gs,U=I+Gs,W=N.slice(I,U);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{className:"text-sm text-muted",children:["Total donations:"," ",e.jsxs("strong",{children:["$",Mr(N.reduce((ve,be)=>{const Je=parseFloat(be?.amount||0);return ve+(isNaN(Je)?0:Je)},0),{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{try{const ve=N.map(Kt=>({Date:Kt.date||(Kt.createdAt?new Date(Kt.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),DonorName:Kt.donorName||"",Type:Kt.isMember?"Member":"Non-Member",Amount:Kt.amount||"0",Method:Kt.method||"",Notes:(Kt.notes||"").replace(/\r?\n/g," ")})),be=["Date","DonorName","Type","Amount","Method","Notes"],Je=[be.join(","),...ve.map(Kt=>be.map(jn=>{const aa=Kt[jn]??"";return`"${String(aa).replace(/"/g,'""')}"`}).join(","))],Xe=new Blob([Je.join(`
`)],{type:"text/csv;charset=utf-8;"}),Nt=URL.createObjectURL(Xe),mt=document.createElement("a");mt.href=Nt;const mn=new Date().toISOString().slice(0,10);mt.download=`donations-report-${mn}.csv`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(Nt),Q("Donations report exported as CSV")}catch(ve){console.error("Export donations CSV failed",ve),Q("Failed to export donations report","error")}},children:" Export Donations CSV"})]}),e.jsx(Ua,{columns:["Date","Donor Name","Type","Amount","Method","Notes","Actions"],rows:W.map(ve=>ve?{Date:ve.date||(ve.createdAt?new Date(ve.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),"Donor Name":ve.donorName||"Unknown",Type:ve.isMember?e.jsx("span",{className:"badge badge-active",children:"Member"}):e.jsx("span",{className:"badge badge-inactive",children:"Non-Member"}),Amount:ve.amount?`$${Mr(Number(ve.amount),{minimumFractionDigits:2,maximumFractionDigits:2})}`:"$0.00",Method:ve.method||"-",Notes:ve.notes||"-",Actions:{render:()=>e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{De("Are you sure you want to delete this donation?",async()=>{try{const Je=ve._id||ve.id;await Oe(Je),Q("Donation deleted successfully!"),await je()}catch(Je){Q(Je.message||"Failed to delete donation","error")}})},title:"Delete Donation","aria-label":"Delete Donation",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})}}:null).filter(ve=>ve!==null)}),L>0&&N.length>0&&e.jsx(mc,{currentPage:P,totalPages:L,onPageChange:Io,pageSize:Gs,onPageSizeChange:Yo,totalItems:N.length})]})})()})})]}),ht==="reports"&&e.jsxs("article",{className:"screen-card",id:"reports",children:[e.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[_e("reports"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px"}}),"Financial Reports"]}),e.jsx("p",{children:"Comprehensive financial overview and payment analytics."})]}),et&&e.jsxs("div",{className:"financial-reports-export-buttons",style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:Un,title:"Export CSV",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"#ffffff",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:l=>{l.target.style.background="#5a31ea",l.target.style.color="#ffffff",l.target.style.border="2px solid #5a31ea",l.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:l=>{l.target.style.background="#ffffff",l.target.style.color="#5a31ea",l.target.style.border="2px solid #e5e7eb",l.target.style.boxShadow="none"},children:e.jsx("i",{className:"fas fa-file-csv"})}),e.jsx("button",{type:"button",onClick:Wn,title:"Export PDF",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"#ffffff",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:l=>{l.target.style.background="#5a31ea",l.target.style.color="#ffffff",l.target.style.border="2px solid #5a31ea",l.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:l=>{l.target.style.background="#ffffff",l.target.style.color="#5a31ea",l.target.style.border="2px solid #e5e7eb",l.target.style.boxShadow="none"},children:e.jsx("i",{className:"fas fa-file-pdf"})})]})]}),e.jsx("div",{className:"card card-reports",style:{marginBottom:"24px",padding:"20px",background:"#ffffff"},children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[e.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"6px",color:"#5a31ea"}}),"Date From"]}),e.jsx("input",{type:"date",value:ne.from,onChange:l=>{const N=l.target.value;pe({...ne,from:N})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:l=>{l.target.style.borderColor="#5a31ea",l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:l=>{l.target.style.borderColor="#e5e7eb",l.target.style.boxShadow="none"}})]}),e.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[e.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"6px",color:"#5a31ea"}}),"Date To"]}),e.jsx("input",{type:"date",value:ne.to,onChange:l=>{const N=l.target.value;pe({...ne,to:N})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:l=>{l.target.style.borderColor="#5a31ea",l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:l=>{l.target.style.borderColor="#e5e7eb",l.target.style.boxShadow="none"}})]}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["This Year","This Quarter","This Month"].map(l=>e.jsx("button",{onClick:()=>{_t(l);const N=new Date;if(l==="This Year")pe({from:`${N.getFullYear()}-01-01`,to:`${N.getFullYear()}-12-31`});else if(l==="This Quarter"){const P=Math.floor(N.getMonth()/3)*3;pe({from:`${N.getFullYear()}-${String(P+1).padStart(2,"0")}-01`,to:`${N.getFullYear()}-${String(P+3).padStart(2,"0")}-31`})}else pe({from:`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-01`,to:`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-31`})},style:{padding:"12px 20px",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:at===l?"#5a31ea":"#ffffff",color:at===l?"#ffffff":"#6b7280",border:at===l?"none":"2px solid #e5e7eb",boxShadow:at===l?"0 4px 12px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{at!==l&&(N.target.style.background="#f3f4f6",N.target.style.borderColor="#d1d5db")},onMouseLeave:N=>{at!==l&&(N.target.style.background="#ffffff",N.target.style.borderColor="#e5e7eb")},children:l},l))})]})}),e.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Total Collected"]}),e.jsxs("h4",{children:["$",Ln.collected.toLocaleString()]}),e.jsxs("small",{children:[Math.round(Ln.collected/Ln.expected*100),"% of $",Ln.expected.toLocaleString()," expected"]})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding"]}),e.jsxs("h4",{children:["$",Mr(Lr.outstanding)]}),e.jsx("small",{children:"Pending collection"})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-users",style:{marginRight:"8px",color:"#5a31ea"}}),"Avg per Member"]}),e.jsxs("h4",{children:["$",Ln.averagePerMember]}),e.jsx("small",{children:"Goal: $800"})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-exchange-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Transactions"]}),e.jsx("h4",{children:Ln.transactionCount}),e.jsx("small",{children:"In selected period"})]})]}),e.jsxs("div",{className:"admin-reports-charts-grid",children:[e.jsxs("div",{className:"admin-reports-chart-card--collected",children:[e.jsxs("div",{className:"admin-settings-section-header",children:[e.jsx("h4",{className:"admin-settings-section-title",children:"Collected vs Outstanding"}),e.jsx("p",{className:"admin-settings-section-description",children:"Financial overview for selected period"})]}),(()=>{const l=Ln.collected+Lr.outstanding,N=Math.max(60,Math.round(Ln.collected/l*200)||0),L=Math.max(60,Math.round(Lr.outstanding/l*200)||0),P=Math.round(Ln.collected/l*100),I=Math.round(Lr.outstanding/l*100);return e.jsxs("div",{className:"admin-reports-collected-chart",children:[e.jsxs("div",{className:"admin-reports-collected-bar-wrapper",children:[e.jsx("div",{className:"admin-reports-collected-bar",style:{height:`${N}px`},children:Wc(Ln.collected)}),e.jsxs("div",{className:"admin-reports-collected-label",children:[e.jsx("span",{className:"admin-reports-collected-label-title",children:"Collected"}),e.jsxs("span",{className:"admin-reports-collected-label-percent",children:[P,"%"]})]})]}),e.jsxs("div",{className:"admin-reports-collected-bar-wrapper",children:[e.jsx("div",{className:"admin-reports-collected-bar admin-reports-collected-bar--outstanding",style:{height:`${L}px`},children:Wc(Lr.outstanding)}),e.jsxs("div",{className:"admin-reports-collected-label",children:[e.jsx("span",{className:"admin-reports-collected-label-title",children:"Outstanding"}),e.jsxs("span",{className:"admin-reports-collected-label-percent",children:[I,"%"]})]})]})]})})()]}),e.jsxs("div",{className:"admin-settings-users-card",children:[e.jsxs("div",{className:"admin-settings-section-header",children:[e.jsx("h4",{className:"admin-settings-section-title",children:"Payments Over Time"}),e.jsx("p",{className:"admin-settings-section-description",children:"Payment trends for selected period"})]}),e.jsx("div",{className:"admin-reports-payments-chart",children:(()=>{const l={},N=new Date(ne.from),L=new Date(ne.to),P=Math.ceil((L-N)/(1e3*60*60*24));Ln.paymentsInRange.forEach(W=>{const ve=W.date?new Date(W.date):W.createdAt?new Date(W.createdAt):new Date;let be;if(P<=7)be=ve.toLocaleDateString("en-US",{month:"short",day:"numeric"});else if(P<=30){const Xe=new Date(ve);Xe.setDate(ve.getDate()-ve.getDay()),be=Xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}else be=ve.toLocaleDateString("en-US",{month:"short",year:"numeric"});l[be]||(l[be]=0);const Je=parseFloat(W.amount?.replace(/[^0-9.]/g,"")||0);l[be]+=Je});const I=Object.keys(l).sort((W,ve)=>new Date(W)-new Date(ve)).slice(-10),U=Math.max(...I.map(W=>l[W]),1);return e.jsx("div",{className:"admin-reports-payments-chart-bars",children:I.length>0?I.map((W,ve)=>{const be=l[W],Je=Math.max(30,be/U*180);return e.jsxs("div",{className:"admin-reports-payments-bar-wrapper",children:[e.jsx("div",{className:"admin-reports-payments-bar",style:{height:`${Je}px`},title:`${W}: ${Wc(be)}`,children:Je>40&&Wc(Math.round(be))}),e.jsx("span",{className:"admin-reports-payments-label",children:W.length>10?W.substring(0,8)+"...":W})]},`${W}-${ve}`)}):e.jsx("div",{className:"admin-reports-payments-empty",children:"No payment data in selected period"})})})()})]})]}),e.jsxs("div",{className:"card card-reports",style:{marginBottom:"24px",padding:"24px",background:"#ffffff",border:"1px solid #e5e7eb"},children:[e.jsxs("h4",{style:{marginBottom:"20px",fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px",color:"#5a31ea"}}),"Payment Method Breakdown"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:Ln.methodMix.map(l=>{const L={FPS:"#10b981",PayMe:"#25D366","Bank Transfer":"#3b82f6",Cash:"#f59e0b",Other:"#6b7280"}[l.label]||"#6b7280";return e.jsxs("div",{style:{padding:"16px",borderRadius:"12px",background:"#ffffff",border:`2px solid ${L}`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-2px)",P.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.12)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0)",P.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:L,flexShrink:0}}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",flex:1},children:l.label})]}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:L,marginLeft:"24px"},children:l.value})]},l.label)})})]}),e.jsxs("div",{className:"card card-reports",style:{padding:"24px",background:"#ffffff",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{marginBottom:"24px",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:[e.jsx("i",{className:"fas fa-filter",style:{marginRight:"6px",color:"#5a31ea"}}),"Filter by Type:"]}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"payments",label:"Payments"},{value:"donations",label:"Donations"}].map(l=>e.jsx("button",{type:"button",onClick:()=>ro(l.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:na===l.value?"#5a31ea":"transparent",color:na===l.value?"#ffffff":"#6b7280",boxShadow:na===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{na!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{na!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))})]}),na==="donations"&&e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:"Filter by Donor Type:"}),e.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"member",label:"Members"},{value:"non-member",label:"Non-Members"}].map(l=>e.jsx("button",{type:"button",onClick:()=>ao(l.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:ma===l.value?"#5a31ea":"transparent",color:ma===l.value?"#ffffff":"#6b7280",boxShadow:ma===l.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:N=>{ma!==l.value&&(N.target.style.background="#e5e7eb",N.target.style.color="#374151")},onMouseLeave:N=>{ma!==l.value&&(N.target.style.background="transparent",N.target.style.color="#6b7280")},children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[e.jsx("i",{className:"fas fa-list",style:{marginRight:"10px",color:"#5a31ea"}}),"Transactions"]}),e.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:e.jsx("input",{type:"text",placeholder:"Search transactions...",value:Kn,onChange:l=>{Xa(l.target.value),Fn(1)},style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.9375rem",minWidth:"250px",background:"#ffffff"}})})]}),e.jsxs("div",{style:{overflow:"hidden",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{className:"table-wrapper",style:{overflowX:"auto",width:"100%",maxWidth:"100%"},children:e.jsx(Ua,{columns:["Date","Type","Member / Donor","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:(()=>{let N=[...(Ln.paymentsInRange||[]).map(W=>({...W,type:"Payment",source:W.member||"Unknown",amount:W.amount,method:W.method,screenshot:W.screenshot,status:W.status||"Completed",invoiceId:W.invoiceId,period:W.period,date:W.date||(W.createdAt?new Date(W.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:W.createdAt||new Date(W.date||0)})),...(Ln.donationsInRange||[]).map(W=>({...W,type:"Donation",source:W.donorName,amount:W.amount,method:W.method||"N/A",screenshot:W.screenshot||null,status:"Completed",invoiceId:null,period:null,date:W.date||(W.createdAt?new Date(W.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:W.createdAt||new Date(W.date||0),isMember:W.isMember}))].sort((W,ve)=>{const be=W.createdAt?new Date(W.createdAt):new Date(W.date||0);return(ve.createdAt?new Date(ve.createdAt):new Date(ve.date||0))-be}).filter(W=>!(na==="payments"&&W.type!=="Payment"||na==="donations"&&W.type!=="Donation"||W.type==="Donation"&&(ma==="member"&&!W.isMember||ma==="non-member"&&W.isMember)));if(Kn.trim()){const W=Kn.toLowerCase();N=N.filter(ve=>ve.source&&ve.source.toLowerCase().includes(W)||ve.invoiceId&&ve.invoiceId.toString().toLowerCase().includes(W)||ve.amount&&ve.amount.toString().toLowerCase().includes(W)||ve.method&&ve.method.toLowerCase().includes(W)||ve.status&&ve.status.toLowerCase().includes(W)||ve.date&&ve.date.toLowerCase().includes(W))}N.length;const L=(Dn-1)*or,P=L+or;return N.slice(L,P).map(W=>(W._id||W.id,{Date:W.date||"N/A",Type:{render:()=>W.type==="Payment"?e.jsx("span",{className:"badge badge-paid",children:"Payment"}):e.jsx("span",{className:"badge badge-active",children:"Donation"})},"Member / Donor":W.source||"Unknown","Invoice ID":W.invoiceId||(W.type==="Donation","N/A"),Amount:W.amount||"$0",Method:W.type==="Payment"?Pi(W):W.method||"N/A",Screenshot:{render:()=>W.screenshot?e.jsx("a",{href:W.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:e.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>e.jsx("span",{className:qa[W.status]||"badge badge-paid",children:W.status})},Actions:{render:()=>e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:W.type==="Payment"&&W.invoiceId&&e.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>{const ve=r.find(Je=>Je.id===W.invoiceId||Je._id===W.invoiceId);if(!ve){Q("Invoice not found for this transaction","error");return}const be=s.find(Je=>Je.id===ve.memberId)||s.find(Je=>Je.name&&ve.memberName&&Je.name.toLowerCase()===ve.memberName.toLowerCase());if(!be){Q("Member not found for this invoice","error");return}ee(be),Ot("member-detail"),qe("Invoices")},title:"View Invoice",children:e.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})})})}}))})()})}),(()=>{let N=[...(Ln.paymentsInRange||[]).map(U=>({...U,type:"Payment",source:U.member||"Unknown",amount:U.amount,method:U.method,screenshot:U.screenshot,status:U.status||"Completed",invoiceId:U.invoiceId,period:U.period,date:U.date||(U.createdAt?new Date(U.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:U.createdAt||new Date(U.date||0)})),...(Ln.donationsInRange||[]).map(U=>({...U,type:"Donation",source:U.donorName,amount:U.amount,method:U.method||"N/A",screenshot:U.screenshot||null,status:"Completed",invoiceId:null,period:null,date:U.date||(U.createdAt?new Date(U.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:U.createdAt||new Date(U.date||0),isMember:U.isMember}))].sort((U,W)=>{const ve=U.createdAt?new Date(U.createdAt):new Date(U.date||0);return(W.createdAt?new Date(W.createdAt):new Date(W.date||0))-ve}).filter(U=>!(na==="payments"&&U.type!=="Payment"||na==="donations"&&U.type!=="Donation"||U.type==="Donation"&&(ma==="member"&&!U.isMember||ma==="non-member"&&U.isMember)));if(Kn.trim()){const U=Kn.toLowerCase();N=N.filter(W=>W.source&&W.source.toLowerCase().includes(U)||W.invoiceId&&W.invoiceId.toString().toLowerCase().includes(U)||W.amount&&W.amount.toString().toLowerCase().includes(U)||W.method&&W.method.toLowerCase().includes(U)||W.status&&W.status.toLowerCase().includes(U)||W.date&&W.date.toLowerCase().includes(U))}const L=N.length,P=Math.ceil(L/or),I=Math.min(Dn,P||1);return e.jsx(mc,{currentPage:I,totalPages:P||1,onPageChange:Fn,pageSize:or,onPageSizeChange:U=>{Or(U),Fn(1)},totalItems:L})})()]})]})]})]}),ht==="export-reports"&&e.jsxs("article",{className:"screen-card",id:"export-reports",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("export-reports"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-file-export",style:{marginRight:"10px"}}),"Export Reports"]}),e.jsx("p",{children:"Export financial data in various formats."})]})}),e.jsx("div",{className:"card-exports",children:e.jsxs("div",{style:{padding:"2px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{marginBottom:"12px"},children:"Export Options"}),e.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Export your financial data in CSV or PDF format. Select a date range to export specific periods."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card card-export-reports",style:{padding:"20px",background:"#ffffff",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{marginBottom:"8px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-file-csv",style:{color:"#5a31ea"}}),"CSV Export"]}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Export all transactions as a CSV file for Excel or spreadsheet applications."})]}),e.jsxs("button",{className:"secondary-btn",onClick:Un,style:{width:"100%",marginTop:"auto"},disabled:!et,title:et?"Export CSV":"Export allowed only for finance roles",children:[e.jsx("i",{className:"fas fa-file-csv",style:{marginRight:"8px"}}),"Export CSV"]})]}),e.jsxs("div",{className:"card card-export-reports",style:{padding:"20px",background:"#ffffff",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{marginBottom:"8px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-file-pdf",style:{color:"#5a31ea"}}),"PDF Export"]}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Generate a formatted PDF report with charts and summaries."})]}),e.jsxs("button",{className:"secondary-btn",onClick:Wn,style:{width:"100%",marginTop:"auto"},disabled:!et,title:et?"Export PDF":"Export allowed only for finance roles",children:[e.jsx("i",{className:"fas fa-file-pdf",style:{marginRight:"8px"}}),"Export PDF"]})]})]}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:[e.jsx("strong",{children:"Note:"})," For detailed reports with date filters and analytics, visit the Financial Reports section."]}),e.jsxs("button",{className:"ghost-btn",onClick:()=>{re("reports"),Q("Redirecting to Financial Reports...")},children:[e.jsx("i",{className:"fas fa-chart-bar",style:{marginRight:"8px"}}),"Go to Financial Reports"]})]})]})})]}),ht==="roles"&&ot&&e.jsxs("article",{className:"screen-card",id:"roles",children:[e.jsx("header",{className:"screen-card__header",children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:e.jsxs("div",{children:[_e("roles"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-user-shield",style:{marginRight:"10px"}}),"Roles"]}),e.jsx("p",{children:"Manage admin roles and permissions."})]})})}),e.jsx("div",{className:"card-roles",children:e.jsxs("div",{style:{padding:"2px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{marginBottom:"12px"},children:"Available Roles"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"24px"},children:[e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"2px solid #5a31ea"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",color:"#5a31ea"},children:"Owner"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Full access to all features and settings"})]}),e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Finance Admin"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Can manage finances, invoices, and payments"})]}),e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Viewer"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Read-only access to view data"})]})]})]}),e.jsx("div",{className:"table-wrapper",children:e.jsx(Ua,{columns:["Name","Email","Role","Status","Actions"],rows:a.map(l=>({Name:l.name||"N/A",Email:l.email||"N/A",Role:{render:()=>e.jsx("span",{className:"badge badge-active",children:l.role||"Viewer"})},Status:{render:()=>e.jsx("span",{className:l.status==="Active"?"badge badge-active":l.status==="Pending"?"badge badge-pending":"badge badge-overdue",children:l.status||"Active"})},Actions:{render:()=>e.jsx("div",{style:{display:"flex",gap:"8px"},children:(l.role||"Viewer")!=="Owner"&&(l.role||"Viewer")!=="Finance Admin"&&e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:async()=>{De(`Remove ${l.name} from admin users?`,async()=>{try{await Ie(l.id),Q(`${l.name} removed`),await $()}catch(N){Q(N.message||"Failed to delete admin","error")}})},title:"Delete Admin",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})})}}))})})]})})]}),ht==="org-settings"&&e.jsxs("article",{className:"screen-card",id:"org-settings",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("org-settings"),e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-building",style:{marginRight:"10px"}}),"Organization Settings"]}),e.jsx("p",{children:"Manage organization information and preferences."})]})}),e.jsx("div",{className:"settings-container",children:e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"settings-card__header",children:[e.jsx("h4",{className:"settings-card__title",children:"Organization Info"}),e.jsx("p",{className:"settings-card__subtitle",children:"Update your organization's contact information"})]}),e.jsxs("form",{noValidate:!0,onSubmit:l=>{l.preventDefault(),ie(Ya),Q("Organization info updated!")},className:"settings-form",children:[e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Organization Name",e.jsx("input",{type:"text",className:"settings-form__input",value:Ya.name,onChange:l=>Ga({...Ya,name:l.target.value}),placeholder:"Subscription Manager HK"})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Email",e.jsx("input",{type:"email",className:"settings-form__input",value:Ya.email,onChange:l=>Ga({...Ya,email:l.target.value}),placeholder:"support@subscriptionhk.org"})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Phone",e.jsx("input",{type:"text",className:"settings-form__input",value:Ya.phone,onChange:l=>Ga({...Ya,phone:l.target.value}),placeholder:"+852 2800 1122"})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Address",e.jsx("textarea",{className:"settings-form__input",value:Ya.address,onChange:l=>Ga({...Ya,address:l.target.value}),placeholder:"123 Central Street, Hong Kong",rows:3})]})}),e.jsxs("div",{className:"settings-form__group",children:[e.jsxs("label",{className:"settings-form__label",children:[e.jsx("i",{className:"fas fa-globe",style:{marginRight:"8px",color:"#5a31ea"}}),"Number Format Locale ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("select",{className:"settings-form__input",value:ke,onChange:l=>{Me(l.target.value),Q("Number format locale updated! Numbers will refresh automatically.","success")},style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"0.875rem",color:"#1a1a1a",backgroundColor:"#ffffff",cursor:"pointer"},children:Sy().map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#666"},children:["Choose your preferred number format. Example: ",Mr(123456789e-2,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"settings-form__actions",children:e.jsx("button",{type:"submit",className:"primary-btn",children:"Save Changes"})})]})]})})]}),ht==="users"&&ot&&e.jsxs("article",{className:"screen-card",id:"settings",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[_e("users"),e.jsx("h3",{children:"Admin Settings"}),e.jsx("p",{children:"Organization profile and admin accounts."})]})}),e.jsx("div",{className:"settings-container",children:e.jsxs("div",{className:"settings-card",children:[e.jsx("div",{className:"settings-card__header",children:e.jsxs("div",{className:"settings-card__header-content",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"settings-card__title",children:"User Management"}),e.jsx("p",{className:"settings-card__subtitle",children:"Manage admin users and their permissions"})]}),e.jsx("button",{className:"settings-card__add-btn secondary-btn",onClick:()=>{if(!ot){Q("Only Owner and Finance Admin can add new admin users","error");return}ea(!0),ri({name:"",email:"",password:"",role:"Viewer",status:"Active"}),zs(!1),Da("")},disabled:!ot,title:ot?"Add a new admin user":"Only Owner and Finance Admin can add admins",children:"+ Add Admin"})]})}),e.jsx("div",{className:"settings-table-wrapper",children:e.jsx(Ua,{columns:["User","Role","Status","Actions"],rows:a.map(l=>({User:l.name,Role:l.role||"Viewer",Status:{render:()=>e.jsx("span",{className:(l.status||"Active")==="Active"?"badge badge-active":"badge badge-inactive",children:l.status||"Active"})},Actions:{render:()=>e.jsxs("div",{className:"settings-table__actions",children:[(l.status||"Active")==="Active"?e.jsx("button",{className:"ghost-btn settings-table__action-btn",onClick:async()=>{try{await me(l.id,{status:"Inactive"}),Q(`${l.name} deactivated`)}catch(N){Q(N.message||"Failed to update admin","error")}},children:"Deactivate"}):e.jsx("button",{className:"secondary-btn settings-table__action-btn",onClick:async()=>{try{await me(l.id,{status:"Active"}),Q(`${l.name} activated`)}catch(N){Q(N.message||"Failed to update admin","error")}},children:"Activate"}),(l.role||"Viewer")!=="Owner"&&(l.role||"Viewer")!=="Finance Admin"&&e.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{De(`Remove ${l.name} from admin users?`,async()=>{try{await Ie(l.id),Q(`${l.name} removed`),await $()}catch(N){Q(N.message||"Failed to delete admin","error")}})},title:"Remove Admin","aria-label":"Remove Admin",children:e.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}))})})]})}),Xi&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(ea(!1),zs(!1),Da(""))},children:e.jsxs("div",{className:"admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h4",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),"Add New Admin"]}),e.jsx("button",{type:"button",className:"close-btn close-btn-danger",onClick:()=>{ea(!1),zs(!1),Da("")},"aria-label":"Close add admin form",children:""})]}),e.jsxs("form",{noValidate:!0,onSubmit:async l=>{if(l.preventDefault(),!Wr.name||!Wr.name.trim()){Q("Please enter name","error");return}const N=Oi(Wr.email);if(N){Da(N),Q(N,"error");return}if(Da(""),!Wr.password||!Wr.password.trim()){Q("Please enter password","error");return}try{await Ee(Wr),ea(!1),ri({name:"",email:"",password:"",role:"Viewer",status:"Active"}),zs(!1),Da(""),Q("Admin user added!")}catch(L){Q(L.message||"Failed to add admin user","error")}},className:"settings-form",children:[e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Name",e.jsx("input",{type:"text",className:"settings-form__input",required:!0,value:Wr.name,onChange:l=>ri({...Wr,name:l.target.value}),placeholder:"Enter admin name"})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Email",e.jsx("input",{type:"email",className:"settings-form__input",required:!0,value:Wr.email,onChange:l=>{ri({...Wr,email:l.target.value}),fa&&Da("")},onBlur:l=>{const N=Oi(l.target.value);Da(N)},placeholder:"Enter admin email",style:{borderColor:fa?"#ef4444":void 0,borderWidth:fa?"2px":void 0},"aria-invalid":!!fa}),fa&&e.jsx("span",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"4px",display:"block"},children:fa})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Password",e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:Ti?"text":"password",className:"settings-form__input",required:!0,value:Wr.password,onChange:l=>ri({...Wr,password:l.target.value}),placeholder:"Set a password",style:{paddingRight:"40px"}}),e.jsx("button",{type:"button",onClick:()=>zs(!Ti),className:"login-password-toggle",style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},"aria-label":Ti?"Hide password":"Show password",children:e.jsx("i",{className:`fas ${Ti?"fa-eye-slash":"fa-eye"}`})})]})]})}),e.jsx("div",{className:"settings-form__group",children:e.jsxs("label",{className:"settings-form__label",children:["Role",e.jsxs("select",{className:"settings-form__select",value:Wr.role,onChange:l=>ri({...Wr,role:l.target.value}),children:[e.jsx("option",{children:"Owner"}),e.jsx("option",{children:"Finance Admin"}),e.jsx("option",{children:"Viewer"})]})]})}),e.jsxs("div",{className:"settings-form__actions",children:[e.jsx("button",{type:"button",className:"ghost-btn settings-form__cancel",onClick:()=>{ea(!1),zs(!1),Da("")},children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn settings-form__submit-btn",children:"Add Admin"})]})]})]})})]})]})]})]}),Bt&&qt&&e.jsx("div",{className:"admin-members-form-overlay",onClick:l=>{l.target===l.currentTarget&&(Xt(!1),xn(null),On({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:"",reference:"",selectedAdminId:"",adminMobile:""}))},children:e.jsxs("div",{className:"card admin-members-form-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[e.jsx("i",{className:"fas fa-money-bill-wave",style:{marginRight:"8px",color:"#5a31ea"}}),"Pay Invoice #",qt.id]}),e.jsx("button",{type:"button",className:"close-btn close-btn-simple",onClick:()=>{Xt(!1),xn(null),On({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:""})},"aria-label":"Close payment modal",children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),e.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1.125rem"},children:qt.amount})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),e.jsx("span",{style:{color:"#1a1a1a"},children:qt.period})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),e.jsx("span",{style:{color:"#1a1a1a"},children:qt.due})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Payment Method"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{type:"button",onClick:()=>On({...Yt,paymentMethod:"Admin"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:Yt.paymentMethod==="Admin"?"#5a31ea":"#f8f9ff",color:Yt.paymentMethod==="Admin"?"#ffffff":"#1a1a1a",boxShadow:Yt.paymentMethod==="Admin"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-user-shield"}),"Paid Cash"]}),e.jsxs("button",{type:"button",onClick:()=>On({...Yt,paymentMethod:"Online"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:Yt.paymentMethod==="Online"?"#5a31ea":"#f8f9ff",color:Yt.paymentMethod==="Online"?"#ffffff":"#1a1a1a",boxShadow:Yt.paymentMethod==="Online"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-globe"}),"Paid Online"]})]})]}),(Yt.paymentMethod==="Admin"||Yt.paymentMethod==="Online")&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Choose Admin ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Yt.selectedAdminId,onChange:l=>{On({...Yt,selectedAdminId:l.target.value}),(In.selectedAdminId||vr==="selectedAdminId")&&(zn(N=>({...N,selectedAdminId:!1})),vr==="selectedAdminId"&&Vr(null))},style:{width:"100%",padding:"10px 12px",border:In.selectedAdminId&&vr==="selectedAdminId"?"2px solid #ef4444":"1px solid #e0e0e0",borderRadius:"8px",fontSize:"0.875rem",background:"#fff",outline:"none",cursor:"pointer",transition:"border-color 0.2s"},onFocus:l=>{(!In.selectedAdminId||vr!=="selectedAdminId")&&(l.target.style.borderColor="#5a31ea",l.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)")},onBlur:l=>{In.selectedAdminId&&vr==="selectedAdminId"?(l.target.style.borderColor="#ef4444",l.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)"):(l.target.style.borderColor="#e0e0e0",l.target.style.boxShadow="none")},children:[e.jsx("option",{value:"",children:"Select an admin"}),a.filter(l=>l.status==="Active").map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.email,")"]},l.id))]})]}),e.jsx("div",{children:e.jsx(Jc,{label:e.jsxs("span",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Mobile Number ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),value:Yt.adminMobile,onChange:l=>{On({...Yt,adminMobile:l.target.value}),(In.adminMobile||vr==="adminMobile")&&(zn(N=>({...N,adminMobile:!1})),vr==="adminMobile"&&Vr(null))},onError:l=>{Q(l,"error"),zn(N=>({...N,adminMobile:!0})),Vr("adminMobile")},required:!0,className:In.adminMobile&&vr==="adminMobile"?"admin-phone-input-error":"",placeholder:"Enter mobile number"})})]}),(Yt.paymentMethod==="Admin"||Yt.paymentMethod==="Online")&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:["Attachment Image ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("div",{style:{border:In.image?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"8px",padding:"20px",textAlign:"center",background:In.image?"#fef2f2":"#fafafa",cursor:"pointer",transition:"all 0.2s ease",boxShadow:In.image?"0 0 0 3px rgba(239, 68, 68, 0.1)":"none"},onMouseEnter:l=>{In.image||(l.currentTarget.style.borderColor="#5a31ea",l.currentTarget.style.background="#f8f9ff")},onMouseLeave:l=>{In.image?(l.currentTarget.style.borderColor="#ef4444",l.currentTarget.style.background="#fef2f2"):(l.currentTarget.style.borderColor="#d0d0d0",l.currentTarget.style.background="#fafafa")},onClick:()=>{In.image&&zn({...In,image:!1});const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async N=>{const L=N.target.files[0];if(!L)return;if(!L.type.startsWith("image/")){Q("Please upload an image file","error");return}const P=new FileReader;P.onloadend=()=>{On(I=>({...I,imageFile:L,imagePreview:P.result})),zn(I=>({...I,image:!1}))},P.readAsDataURL(L)},l.click()},children:Yt.imagePreview||qt.screenshot&&!Yt.imageFile?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:Yt.imagePreview||qt.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),On({...Yt,imageFile:null,imagePreview:null,imageUrl:""}),zn(N=>({...N,image:!1}))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),e.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.875rem"},children:"Click to upload image"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#999",fontSize:"0.75rem"},children:"PNG, JPG, GIF up to 5MB"})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"8px"},children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Xt(!1),xn(null),On({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:"",selectedAdminId:"",adminMobile:""}),zn({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),Vr(null)},disabled:Bn,children:"Cancel"}),Yt.paymentMethod&&e.jsx("button",{type:"button",className:"primary-btn",disabled:Bn,onClick:async()=>{(()=>{const N=["selectedAdminId","adminMobile","image"];if(vr){let L=!0,P="";if(vr==="selectedAdminId"&&!Yt.selectedAdminId?(L=!1,P="Please select an admin"):vr==="adminMobile"&&!Yt.adminMobile.trim()?(L=!1,P="Mobile number is required"):vr==="image"&&(Yt.imageFile||Yt.imageUrl||qt?.screenshot||(L=!1,P="Image has not been uploaded. Please upload an image attachment.")),L)zn(I=>({...I,[vr]:!1})),Vr(null);else return zn(I=>({...I,[vr]:!0})),Q(P,"error"),!1}for(const L of N){let P=!0,I="";if(L==="selectedAdminId"&&!Yt.selectedAdminId?(P=!1,I="Please select an admin"):L==="adminMobile"&&!Yt.adminMobile.trim()?(P=!1,I="Mobile number is required"):L==="image"&&(Yt.imageFile||Yt.imageUrl||qt?.screenshot||(P=!1,I="Image has not been uploaded. Please upload an image attachment.")),!P)return zn({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),zn(U=>({...U,[L]:!0})),Vr(L),Q(I,"error"),setTimeout(()=>{if(L==="selectedAdminId"){const U=document.querySelectorAll("select"),W=Array.from(U).find(ve=>ve.options[0]?.text==="Select an admin");W?.focus(),W?.scrollIntoView({behavior:"smooth",block:"center"})}else if(L==="adminMobile"){const U=document.querySelectorAll(".phone-input-field"),W=Array.from(U).find(ve=>ve.placeholder?.includes("mobile number"));W?.focus(),W?.scrollIntoView({behavior:"smooth",block:"center"})}else if(L==="image"){const U=document.querySelectorAll('[style*="border"]');Array.from(U).find(ve=>ve.style.border.includes("dashed"))?.scrollIntoView({behavior:"smooth",block:"center"})}},100),!1}return zn({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),Vr(null),!0})()&&De(`Are you sure you want to mark Invoice #${qt.id} as paid?`,async()=>{Tr(!0);try{const N="http://localhost:4000";let L=Yt.imageUrl||qt.screenshot;if(Yt.imageFile){const I=new FormData;I.append("screenshot",Yt.imageFile),I.append("uploadType","invoice-payment-attachment");const U=await fetch(`${N}/api/upload/screenshot`,{method:"POST",body:I});if(!U.ok){let ve="Failed to upload image";try{const be=await U.json();ve=be.error||ve,console.error("Upload error response:",be)}catch(be){console.error("Failed to parse error response:",be),ve=`Upload failed with status ${U.status}`}throw new Error(ve)}const W=await U.json();if(!W.url)throw new Error("No URL returned from upload. Please try again.");L=W.url}if(!L)throw new Error("Image upload is required for all payments");L&&L!==qt.screenshot&&await ge(qt.id,{screenshot:L});const P=Yt.paymentMethod==="Admin"?"Cash":"Online";await ra(qt.id,P,L,null),Xt(!1),xn(null),On({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:"",selectedAdminId:"",adminMobile:""}),zn({image:!1,reference:!1,selectedAdminId:!1,adminMobile:!1}),Vr(null),Q(`Invoice #${qt.id} marked as paid!`,"success")}catch(N){console.error("Error processing payment:",N),Q(N.message||"Failed to process payment","error")}finally{Tr(!1)}},null,"Confirm")},style:{opacity:Bn?.6:1,cursor:Bn?"not-allowed":"pointer"},children:Bn?"Processing...":"Mark as Paid"})]})]})]})}),Cn&&e.jsx("div",{className:"admin-members-form-overlay",onClick:()=>Hs(null),children:e.jsxs("div",{className:"admin-members-form-container reminder-log-modal-card",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"admin-members-form-header",children:e.jsxs("div",{className:"admin-members-form-header-top",children:[e.jsxs("h3",{className:"admin-members-form-title",children:[e.jsx("i",{className:"fas fa-eye"}),"Reminder Log Details"]}),e.jsx("button",{className:"admin-members-form-close",onClick:()=>Hs(null),"aria-label":"Close",children:e.jsx("i",{className:"fa-solid fa-times"})})]})}),e.jsxs("div",{className:"reminder-log-modal-content",children:[e.jsxs("div",{className:"reminder-log-modal-row",children:[e.jsxs("div",{className:"reminder-log-modal-field",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member"]}),e.jsxs("div",{className:"reminder-log-modal-value",children:[Cn.memberName||Cn.member||"N/A",Cn.memberId?` (${Cn.memberId})`:""]})]}),e.jsxs("div",{className:"reminder-log-modal-field",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Channel"]}),e.jsx("div",{className:"reminder-log-modal-value",children:Cn.channel||"N/A"})]})]}),e.jsxs("div",{className:"reminder-log-modal-row",children:[e.jsxs("div",{className:"reminder-log-modal-field",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-tag",style:{marginRight:"8px",color:"#5a31ea"}}),"Type"]}),e.jsx("div",{className:"reminder-log-modal-value",children:Cn.type||"-"})]}),e.jsxs("div",{className:"reminder-log-modal-field",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),e.jsx("div",{className:"reminder-log-modal-value",children:Cn.date||"N/A"})]})]}),e.jsx("div",{className:"reminder-log-modal-row",children:e.jsxs("div",{className:"reminder-log-modal-field",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-info-circle",style:{marginRight:"8px",color:"#5a31ea"}}),"Status"]}),e.jsx("div",{className:"reminder-log-modal-value",children:e.jsx("span",{className:qa[Cn.status]||"badge",children:Cn.status||"N/A"})})]})}),e.jsx("div",{className:"reminder-log-modal-row",children:e.jsxs("div",{className:"reminder-log-modal-field reminder-log-modal-field-full",children:[e.jsxs("label",{className:"reminder-log-modal-label",children:[e.jsx("i",{className:"fas fa-file-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Message"]}),e.jsx("div",{className:"reminder-log-modal-value",children:Cn.message||"N/A"})]})}),Cn.channel==="Email"&&Cn.status==="Failed"&&!X&&e.jsx("div",{className:"reminder-log-modal-row",children:e.jsxs("div",{className:"reminder-log-modal-field reminder-log-modal-actions reminder-log-modal-field-full",children:[e.jsx("label",{className:"reminder-log-modal-label",children:"Actions"}),e.jsx("div",{className:"reminder-log-modal-value",children:e.jsxs("button",{type:"button",className:"secondary-btn",onClick:async()=>{try{const l=Cn.raw,N=l?._id||l?.id,P=await fetch("http://localhost:4000/api/reminders/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reminderId:N})}),I=await P.json();P.ok?(Q(I.message||"Reminder retry queued"),typeof K=="function"&&K(),Hs(null)):Q(I.error||"Failed to retry reminder","error")}catch(l){console.error("Retry reminder failed",l),Q("Failed to retry reminder","error")}},children:[e.jsx("i",{className:"fas fa-redo",style:{marginRight:"6px"}}),"Retry Sending"]})})]})})]})]})}),ji&&yn&&e.jsx("div",{className:"modal-overlay",onClick:l=>{l.target===l.currentTarget&&(ai(!1),Ws(null))},children:e.jsxs("div",{className:"card modal-container",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header mb-2xl",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-receipt icon-spacing-sm text-primary"}),"Payment Details"]}),e.jsx("button",{type:"button",onClick:()=>{ai(!1),Ws(null)},className:"close-btn-simple",children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[yn.date&&e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Date"}),e.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:yn.date})]}),yn.amount&&e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Amount"}),e.jsx("strong",{style:{color:"#5a31ea",fontSize:"1.25rem",fontWeight:"700"},children:yn.amount})]}),yn.status&&e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Status"}),e.jsx("span",{className:`badge ${yn.status==="Paid"||yn.status==="Completed"?"badge-paid":yn.status==="Pending Verification"||yn.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.875rem",padding:"6px 12px",display:"inline-block",marginTop:"4px"},children:yn.status})]}),e.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Payment Method"}),e.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:Pi(yn)})]})]}),e.jsxs("div",{style:{padding:"20px",background:"#fafafa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:"Additional Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[yn.reference&&yn.reference!=="N/A"&&yn.reference!=="-"&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Reference:"}),e.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:yn.reference})]}),yn.paidToAdminName&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Paid to:"}),e.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:yn.paidToAdminName})]}),yn.period&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Period:"}),e.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:yn.period})]}),yn.member&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Member:"}),e.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:yn.member})]}),yn.memberEmail&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Email:"}),e.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:yn.memberEmail})]}),yn.invoiceId&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Invoice ID:"}),e.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:yn.invoiceId})]}),yn.notes&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #e0e0e0"},children:[e.jsx("span",{style:{display:"block",fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:"Notes:"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1a1a1a"},children:yn.notes})]})]})]}),yn.screenshot&&e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:[e.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Screenshot"]}),e.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",background:"#fafafa"},children:e.jsx("img",{src:yn.screenshot,alt:"Payment Screenshot",style:{width:"100%",height:"auto",display:"block",cursor:"pointer"},onClick:()=>{const l=window.open();l&&l.document.write(`
                            <html>
                              <head><title>Payment Screenshot</title></head>
                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                <img src="${yn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                              </body>
                            </html>
                          `)}})}),e.jsxs("button",{type:"button",onClick:()=>{const l=window.open();l&&l.document.write(`
                          <html>
                            <head><title>Payment Screenshot</title></head>
                            <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                              <img src="${yn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                            </body>
                          </html>
                        `)},className:"primary-btn",style:{width:"100%",marginTop:"12px",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-expand"}),"Open Screenshot in New Window"]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{ai(!1),Ws(null)},children:"Close"})})]})]})}),eo&&Ns&&e.jsx("div",{className:"modal-overlay",onClick:l=>{l.target===l.currentTarget&&(js(!1),Cr(null),Ss({newPassword:""}))},children:e.jsxs("div",{className:"card modal-container modal-container-500",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h4",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-key","aria-hidden":"true"}),"Set New Password"]}),e.jsx("button",{type:"button",className:"ghost-btn close-btn close-btn-danger",onClick:()=>{js(!1),Cr(null),Ss({newPassword:""})},"aria-label":"Close password reset modal",children:""})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:"Set a new password for:"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#1a1a1a"},children:Ns.userEmail}),Ns.userName&&e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666"},children:Ns.userName})]}),e.jsxs("form",{noValidate:!0,onSubmit:async l=>{if(l.preventDefault(),!si.newPassword||si.newPassword.trim().length<6){Q("Password must be at least 6 characters","error");return}await Re(Ns._id,si.newPassword.trim())},className:"settings-form",children:[e.jsxs("div",{className:"settings-form__group",children:[e.jsxs("label",{className:"settings-form__label",children:["New Password",e.jsx("input",{type:"password",className:"settings-form__input",required:!0,minLength:6,value:si.newPassword,onChange:l=>Ss({newPassword:l.target.value}),placeholder:"Enter new password (min 6 characters)",autoFocus:!0})]}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#666"},children:"Password must be at least 6 characters long. The new password will be sent to the user via email."})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{js(!1),Cr(null),Ss({newPassword:""})},children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[e.jsx("i",{className:"fas fa-key",style:{marginRight:"6px"}}),"Set Password & Send Email"]})]})]})]})}),e.jsx(ed,{})]})}function Ay(){const{members:s,admins:a,invoices:r,payments:o,paymentHistory:d,addPayment:c,updateInvoice:p,updateMember:m,fetchInvoices:g,fetchPayments:v,fetchMembers:j,loading:A}=Xd(),R=[{id:"dashboard",label:"Dashboard"},{id:"pay",label:"Pay Now"},{id:"invoices",label:"Invoices"},{id:"history",label:"Payment History"},{id:"profile",label:"Profile"}],[w,$]=q.useState(R[0].id),[F,D]=q.useState("Online Payment"),[_,Y]=q.useState([]),[ee,G]=q.useState(""),[fe,he]=q.useState(null),[Be,ge]=q.useState(!1),[te,ye]=q.useState(null),[z,H]=q.useState(!1),[de,ie]=q.useState(null),[ke,Me]=q.useState("success"),[Ee,me]=q.useState(!1),[Ie,Ue]=q.useState(!1),[se,C]=q.useState(!1),[K,Z]=q.useState(!1),[ce,oe]=q.useState(1),[je,Fe]=q.useState(10),Oe=sessionStorage.getItem("memberEmail"),Ye=sessionStorage.getItem("memberId"),Te=Ye?s.find(Ce=>Ce.id===Ye):Oe?s.find(Ce=>Ce.email&&Ce.email.toLowerCase()===Oe.toLowerCase()):null,[Qe,ot]=q.useState(()=>Te?{name:Te.name||"",email:Te.email||"",phone:Te.phone||"",password:"",emailReminders:!0,whatsappReminders:!0}:{name:"",email:"",phone:"",password:"",emailReminders:!0,whatsappReminders:!0});q.useEffect(()=>{Te&&ot({name:Te.name||"",email:Te.email||"",phone:Te.phone||"",password:"",emailReminders:!0,whatsappReminders:!0})},[Te,s]),q.useEffect(()=>{(Oe||Ye)&&!Te&&!A&&s.length===0&&j()},[Oe,Ye,Te,A,s.length]),q.useEffect(()=>{w==="history"&&oe(1)},[je,w]),q.useEffect(()=>{(w==="invoices"||w==="history")&&(g(),v())},[w]),q.useEffect(()=>{const Ce=qe=>{se&&!qe.target.closest(".admin-menu")&&!qe.target.closest(".mobile-menu-toggle")&&C(!1)};return se?(document.addEventListener("click",Ce),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("click",Ce),document.body.style.overflow=""}},[se]);const bt=wo();Bp(15);const X=Ce=>{$(Ce),H(!1)},et=()=>{xt("You have been logged out","success"),setTimeout(()=>{bt("/login",{replace:!0})},500)},xt=(Ce,qe="success")=>{ie(Ce),Me(qe),setTimeout(()=>ie(null),3e3)},Lt=Ce=>{const qe=(o||d||[]).find(nt=>nt.invoiceId===Ce.id);if(qe){if(qe.status==="Pending")return"Pending Verification";if(qe.status==="Completed")return"Paid";if(qe.status==="Rejected")return"Unpaid"}return Ce.status},Ve=()=>Te?r.filter(Ce=>{const qe=Lt(Ce);return(Ce.memberId===Te.id||Ce.memberEmail===Te.email||Ce.memberName===Te.name)&&(qe==="Unpaid"||qe==="Overdue")}):[],Mt=()=>Ve().map(qe=>({label:qe.period,due:qe.due,amount:qe.amount,status:qe.status,id:qe.id})),yt=()=>_.reduce((Ce,qe)=>{const nt=r.find(ft=>ft.id===qe);return nt?Ce+parseFloat(nt.amount.replace("$","")):Ce},0),vt=Ce=>{_.includes(Ce)?Y(_.filter(qe=>qe!==Ce)):Y([..._,Ce])},Pt=async Ce=>{if(Ce.preventDefault(),_.length===0){xt("Please select at least one invoice","error");return}if(!fe){xt("Please upload a payment screenshot","error");return}ge(!0);try{const qe="http://localhost:4000",nt=new FormData;nt.append("screenshot",fe);const ft=await fetch(`${qe}/api/upload-screenshot`,{method:"POST",body:nt});if(!ft.ok){let xe="Failed to upload screenshot";try{const We=await ft.json();xe=We.error||xe,console.error("Upload error response:",We)}catch(We){console.error("Failed to parse error response:",We),xe=`Upload failed with status ${ft.status}`}throw new Error(xe)}const on=await ft.json();if(!on.url)throw new Error("No URL returned from upload. Please try again.");const Se=on.url;for(const xe of _){const We=r.find(ct=>ct.id===xe);We&&(await p(xe,{status:"Pending Verification",method:"Screenshot",reference:`PENDING_${Date.now()}`,screenshot:Se}),await c({invoiceId:xe,amount:We.amount,method:"Screenshot",reference:`PENDING_${Date.now()}`,member:Te?.name||"Member",memberId:Te?.id,memberEmail:Te?.email,period:We.period,status:"Pending",screenshot:Se}))}he(null),Y([]),H(!0),xt(`Payment proof submitted successfully! ${_.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),xt(qe.message||"Failed to submit payment. Please try again.","error")}finally{ge(!1)}},pn=async Ce=>{if(Ce.preventDefault(),_.length===0){xt("Please select at least one invoice","error");return}if(!ee){xt("Please select the admin you paid to","error");return}ge(!0);try{const qe=a.find(ft=>ft.id===ee);if(!qe){xt("Admin not found","error");return}let nt=null;if(fe){const ft="http://localhost:4000",on=new FormData;on.append("screenshot",fe);const Se=await fetch(`${ft}/api/upload-screenshot`,{method:"POST",body:on});if(!Se.ok){let We="Failed to upload screenshot";try{const ct=await Se.json();We=ct.error||We,console.error("Upload error response:",ct)}catch(ct){console.error("Failed to parse error response:",ct),We=`Upload failed with status ${Se.status}`}throw new Error(We)}const xe=await Se.json();if(!xe.url)throw new Error("No URL returned from upload. Please try again.");nt=xe.url}for(const ft of _){const on=r.find(Se=>Se.id===ft);on&&(await p(ft,{status:"Pending Verification",method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:nt}),await c({invoiceId:ft,amount:on.amount,method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,member:Te?.name||"Member",memberId:Te?.id,memberEmail:Te?.email,period:on.period,status:"Pending",paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:nt}))}Y([]),G(""),he(null),H(!0),xt(`Payment submitted successfully! ${_.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),xt(qe.message||"Failed to submit payment. Please try again.","error")}finally{ge(!1)}},sn=async Ce=>{if(Ce.preventDefault(),!Te){xt("Member not found","error");return}try{const qe={name:Qe.name,email:Qe.email,phone:Qe.phone};if(Qe.password&&Qe.password.trim()!==""){if(Qe.password.length<6){xt("Password must be at least 6 characters long","error");return}qe.password=Qe.password}await m(Te.id,qe),xt("Profile updated successfully!"),me(!1),ot({...Qe,password:""})}catch(qe){console.error("Error updating profile:",qe),xt("Failed to update profile. Please try again.","error")}},Ot=(()=>{const Ce=Ve(),qe=Ce.reduce((We,ct)=>{const st=parseFloat(ct.amount?.replace(/[^0-9.]/g,"")||0);return We+st},0),nt=new Date().getFullYear();let Se=(Te?d.filter(We=>(We.memberId===Te.id||We.memberEmail===Te.email||We.member===Te.name)&&(We.status==="Paid"||We.status==="Completed")):d.filter(We=>We.status==="Paid"||We.status==="Completed")).filter(We=>We.date?new Date(We.date).getFullYear()===nt:!1).reduce((We,ct)=>{const st=parseFloat(ct.amount?.replace(/[^0-9.]/g,"")||0);return We+st},0);Se===0&&(Se=r.filter(st=>st.status==="Paid"&&(st.memberId===Te?.id||st.memberEmail===Te?.email||st.memberName===Te?.name)).filter(st=>st.due?new Date(st.due).getFullYear()===nt:!0).reduce((st,un)=>st+parseFloat(un.amount.replace("$","")),0));const xe=Ce.sort((We,ct)=>new Date(We.due)-new Date(ct.due))[0];return{outstanding:qe,paidThisYear:Se,nextDue:xe?.due||"N/A",nextDueAmount:xe?.amount||"$0"}})();return A||(Oe||Ye)&&!Te&&s.length===0?e.jsxs("div",{className:"member-loading-container",children:[e.jsx("div",{className:"member-loading-spinner"}),e.jsx("p",{className:"member-loading-text",children:A?"Loading data from server...":"Loading member information..."})]}):(Oe||Ye)&&!A&&s.length>0&&!Te?e.jsxs("div",{className:"member-not-found-container",children:[e.jsx("div",{className:"member-not-found-icon",children:""}),e.jsx("p",{className:"member-not-found-title",children:"Member Not Found"}),e.jsx("p",{className:"member-not-found-text",children:"We couldn't find your member account. Please contact support or try logging in again."}),e.jsx("button",{onClick:()=>{sessionStorage.clear(),bt("/login")},className:"primary-btn member-not-found-button",children:"Return to Login"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zc,{showCTA:!1,showLogout:!0,onLogout:et,showMobileMenu:!0,isMobileMenuOpen:se,onMobileMenuToggle:()=>C(!se),isSticky:!0}),e.jsx(Yl,{message:de,type:ke,onClose:()=>ie(null),duration:3e3}),e.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[se&&e.jsx("div",{className:"mobile-menu-overlay",onClick:()=>C(!1)}),e.jsxs("div",{className:"admin-layout",children:[e.jsxs("aside",{className:`admin-menu ${se?"mobile-open":""}`,onClick:Ce=>Ce.stopPropagation(),children:[e.jsx("p",{className:"eyebrow light",children:"Member Portal"}),e.jsx("h3",{children:Te?.name||"Member"}),e.jsx("nav",{children:R.map(Ce=>e.jsx("button",{className:`admin-tab ${w===Ce.id?"active":""}`,onClick:()=>{X(Ce.id),C(!1)},children:Ce.label},Ce.id))})]}),e.jsxs("div",{className:"admin-body",children:[w==="dashboard"&&e.jsxs("article",{className:"screen-card",id:"dashboard",children:[e.jsx("header",{className:"screen-card__header",children:e.jsxs("div",{children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-chart-line member-dashboard-icon"}),"Dashboard"]}),e.jsxs("p",{children:["Welcome back, ",Te?.name?.split(" ")[0]||"Member",". Here's an overview of your membership account."]})]})}),e.jsxs("div",{className:"card dashboard-card",children:[Ot.outstanding>0&&!Ie&&e.jsxs("div",{className:"alert-banner alert-warning member-alert-banner",children:[e.jsxs("div",{className:"alert-content",children:[e.jsx("strong",{children:"Payment Due Soon"}),e.jsxs("p",{children:["You have an outstanding balance of $",Ot.outstanding.toFixed(2),". Please pay to avoid late fees."]})]}),e.jsx("button",{className:"alert-dismiss member-alert-dismiss",onClick:()=>Ue(!0),children:""})]}),e.jsxs("div",{className:"kpi-grid",children:[e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding Balance"]}),e.jsxs("h4",{children:["$",Ot.outstanding.toFixed(2)]}),e.jsxs("small",{children:[Ve().length," invoice(s) pending"]})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Next Due Date"]}),e.jsx("h4",{children:Ot.nextDue}),e.jsx("small",{children:Ot.nextDueAmount})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#10b981"}}),"Paid This Year"]}),e.jsxs("h4",{children:["$",parseFloat(Ot.paidThisYear).toFixed(2)]}),e.jsx("small",{children:"On track"})]}),e.jsxs("div",{className:"card kpi",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-user-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Membership Plan"]}),e.jsx("h4",{children:"Active"}),e.jsx("small",{children:"Lifetime: $250/year or Yearly + Janaza Fund: $500/year"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginTop:"24px"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header-flex",children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-clock",style:{marginRight:"8px"}}),"Upcoming Payments"]}),e.jsx("span",{className:"badge-count",children:Mt().length})]}),e.jsx("div",{className:"payment-list",children:Mt().slice(0,3).map(Ce=>e.jsxs("div",{className:"payment-item",children:[e.jsxs("div",{className:"payment-info",children:[e.jsx("strong",{className:"payment-title",children:Ce.label}),e.jsxs("span",{className:"payment-date",children:["Due ",Ce.due]})]}),e.jsxs("div",{className:"payment-right",children:[e.jsx("span",{className:"payment-amount",children:Ce.amount}),e.jsx("span",{className:qa[Ce.status],children:Ce.status})]})]},Ce.id))}),e.jsx("button",{className:"btn-link",onClick:()=>X("invoices"),children:"View All Invoices "})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header-flex",children:e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-history",style:{marginRight:"8px"}}),"Recent Activity"]})}),e.jsx("div",{className:"activity-list",children:(()=>{const qe=(Te?d.filter(nt=>nt.memberId===Te.id||nt.memberEmail===Te.email||nt.member===Te.name):d).slice(0,3);return qe.length===0?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",fontSize:"0.9rem"},children:"No recent payments"}):qe.map((nt,ft)=>e.jsx("div",{className:"activity-item",children:e.jsxs("div",{className:"activity-details",children:[e.jsx("strong",{children:"Payment Made"}),e.jsxs("span",{children:[nt.date,"  ",nt.amount," via ",nt.paidToAdmin||nt.paidToAdminName||nt.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(nt.method)?"Online Payment":nt.method||"N/A",nt.paidToAdminName&&`  Paid to ${nt.paidToAdminName}`,nt.reference&&`  Ref: ${nt.reference}`]})]})},ft))})()}),(Te?d.filter(qe=>qe.memberId===Te.id||qe.memberEmail===Te.email||qe.member===Te.name):d).length>0&&e.jsx("button",{className:"btn-link",onClick:()=>X("history"),children:"View Payment History "})]}),e.jsxs("div",{className:"card quick-actions-card",children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fas fa-bolt",style:{marginRight:"8px"}}),"Quick Actions"]}),e.jsxs("div",{className:"quick-actions-grid",children:[e.jsxs("button",{className:"quick-action-btn",onClick:()=>X("pay"),children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px"}}),e.jsx("span",{className:"action-label",children:"Pay Now"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>X("invoices"),children:[e.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),e.jsx("span",{className:"action-label",children:"View Invoices"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>X("history"),children:[e.jsx("i",{className:"fas fa-list-alt",style:{marginRight:"8px"}}),e.jsx("span",{className:"action-label",children:"Payment History"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>X("profile"),children:[e.jsx("i",{className:"fas fa-cog",style:{marginRight:"8px"}}),e.jsx("span",{className:"action-label",children:"Settings"})]})]})]})]})]})]}),w==="pay"&&e.jsxs("article",{className:"screen-card",id:"pay",children:[e.jsxs("header",{className:"screen-card__header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Pay Now"]}),e.jsx("p",{children:"Select invoices and choose your payment method."})]}),z?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h2",{children:"Payment Submitted"}),e.jsx("p",{style:{color:"#666",marginBottom:"24px"},children:"Your payment has been submitted successfully."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{className:"primary-btn",onClick:()=>X("dashboard"),children:"Back to Dashboard"}),e.jsx("button",{className:"secondary-btn",onClick:()=>{H(!1),X("invoices")},children:"View Invoices"})]})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"invoice-selection-section",style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"12px"},children:[e.jsx("h4",{style:{margin:0},children:"Select Invoices to Pay"}),Ve().length>0&&e.jsx("button",{type:"button",className:"ghost-btn",style:{fontSize:"0.875rem",padding:"6px 12px"},onClick:()=>{_.length===Ve().length?Y([]):Y(Ve().map(Ce=>Ce.id))},children:_.length===Ve().length?"Deselect All":"Select All"})]}),Ve().length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:e.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No unpaid invoices available."})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginBottom:"24px"},children:Ve().map(Ce=>{const qe=_.includes(Ce.id);return e.jsxs("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:`2px solid ${qe?"#5a31ea":"#e0e0e0"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:qe?"rgba(0, 0, 0, 0.02)":"#fff",position:"relative"},onMouseEnter:nt=>{qe||(nt.currentTarget.style.borderColor="#ccc")},onMouseLeave:nt=>{qe||(nt.currentTarget.style.borderColor="#e0e0e0")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("input",{type:"checkbox",checked:qe,onChange:()=>vt(Ce.id),style:{marginTop:"2px",width:"18px",height:"18px",cursor:"pointer",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"4px",color:"#5a31ea"},children:Ce.period}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:["Due: ",Ce.due]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1a1a1a"},children:Ce.amount}),e.jsx("span",{className:qa[Lt(Ce)],style:{fontSize:"0.75rem",padding:"4px 8px"},children:Lt(Ce)})]})]},Ce.id)})}),_.length>0&&e.jsx("div",{style:{padding:"20px",backgroundColor:"#f8f8f8",borderRadius:"8px",border:"1px solid #e0e0e0"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:[_.length," invoice",_.length>1?"s":""," selected"]}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#5a31ea"},children:["Total: $",yt().toFixed(2)]})]})})})]}),_.length>0&&e.jsxs("div",{className:"payment-methods",children:[e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${F==="Online Payment"?"active":""}`,onClick:()=>D("Online Payment"),children:"Online Payment"}),e.jsx("button",{className:`tab ${F==="Cash Payment"?"active":""}`,onClick:()=>D("Cash Payment"),children:"Cash Payment"})]}),F==="Online Payment"&&e.jsxs("form",{className:"method-panel",onSubmit:Pt,noValidate:!0,children:[e.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Upload a screenshot of your payment confirmation for the selected invoice(s). All selected invoices will be marked as paid once the screenshot is uploaded."}),e.jsxs("label",{children:["Upload Payment Screenshot *",e.jsx("input",{type:"file",accept:"image/*",required:!0,onInvalid:Ce=>Ce.preventDefault(),onChange:Ce=>he(Ce.target.files[0])}),fe&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),e.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Be,children:Be?"Uploading...":`Pay $${yt().toFixed(2)}`})]}),F==="Cash Payment"&&e.jsxs("form",{className:"method-panel",onSubmit:pn,noValidate:!0,children:[e.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Select the admin you paid to. You can optionally upload a payment screenshot as proof. All selected invoices will be pending admin approval."}),e.jsxs("label",{children:["Select Admin You Paid To *",e.jsxs("select",{required:!0,onInvalid:Ce=>Ce.preventDefault(),value:ee||"",onChange:Ce=>G(Ce.target.value),style:{color:"#000"},children:[e.jsx("option",{value:"",children:"Choose an admin"}),a.filter(Ce=>Ce.status==="Active").map(Ce=>e.jsxs("option",{value:Ce.id,children:[Ce.name," (",Ce.email,")"]},Ce.id))]})]}),e.jsxs("label",{children:["Upload Payment Screenshot (Optional)",e.jsx("input",{type:"file",accept:"image/*",onChange:Ce=>he(Ce.target.files[0])}),fe&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),e.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Be,children:Be?"Uploading...":`Pay $${yt().toFixed(2)}`})]})]}),_.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",border:"2px dashed #e0e0e0",borderRadius:"8px"},children:e.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"Please select at least one invoice above to proceed with payment."})})]})]}),w==="invoices"&&e.jsxs("article",{className:"screen-card",id:"invoices",children:[e.jsxs("header",{className:"screen-card__header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-file-invoice-dollar",style:{marginRight:"10px"}}),"My Invoices"]}),e.jsx("p",{children:"View all your invoices and payment status."})]}),e.jsx("div",{className:"card",children:(()=>{if(!r||!Array.isArray(r))return e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading invoices..."});const Ce=Te?r.filter(qe=>qe&&(qe.memberId===Te.id||qe.memberEmail===Te.email||qe.memberName===Te.name)):r;return Ce.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:e.jsx("p",{children:"No invoices found."})}):e.jsx(Ua,{columns:["Invoice No","Period","Amount","Status","Due Date","Action"],rows:Ce.map(qe=>{if(!qe)return null;const nt=Lt(qe);return{"Invoice No":qe.id||"N/A",Period:qe.period||"N/A",Amount:qe.amount||"$0",Status:{render:()=>e.jsx("span",{className:qa[nt]||"badge badge-unpaid",children:nt})},"Due Date":qe.due||"N/A",Action:{render:()=>nt==="Paid"||nt==="Pending Verification"?e.jsx("button",{className:"ghost-btn",style:{padding:"6px 12px"},onClick:()=>ye(qe),children:"View"}):e.jsx("button",{className:"primary-btn",style:{padding:"6px 12px"},onClick:()=>{Y([qe.id]),X("pay")},children:"Pay Now"})}}}).filter(qe=>qe!==null)})})()})]}),te&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},onClick:()=>ye(null),children:e.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700"},children:"Invoice Details"}),e.jsx("button",{onClick:()=>ye(null),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:Ce=>{Ce.target.style.background="#f3f4f6",Ce.target.style.color="#000"},onMouseLeave:Ce=>{Ce.target.style.background="transparent",Ce.target.style.color="#666"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Invoice ID:"}),e.jsx("strong",{children:te.id})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),e.jsx("strong",{children:te.period})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),e.jsx("strong",{style:{fontSize:"1.25rem",color:"#000"},children:te.amount})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),e.jsx("strong",{children:te.due})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Status:"}),e.jsx("span",{className:qa[Lt(te)],children:Lt(te)})]})]}),Lt(te)==="Pending Verification"&&e.jsxs("div",{style:{padding:"16px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"1.25rem"},children:""}),e.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#856404"},children:"Payment Pending Approval"})]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#856404"},children:"Your payment has been submitted and is awaiting admin approval. You will be notified once it's reviewed."}),te.method&&e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #ffc107"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#856404",fontSize:"0.875rem"},children:"Payment Method:"}),e.jsx("strong",{style:{color:"#856404"},children:te.method})]})})]}),Lt(te)==="Paid"&&e.jsxs("div",{style:{padding:"16px",background:"#f0f8ff",borderRadius:"8px",border:"1px solid #1677FF"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Payment Method:"}),e.jsx("strong",{children:te.paidToAdmin||te.paidToAdminName||te.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(te.method)?"Online Payment":te.method||"N/A"})]}),te.reference&&te.reference!=="-"&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Reference:"}),e.jsx("strong",{children:te.reference})]}),te.paidToAdminName&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Paid to:"}),e.jsx("strong",{children:te.paidToAdminName})]})]})]}),te.screenshot&&e.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Screenshot"}),e.jsx("button",{onClick:()=>{const Ce=window.open();Ce&&Ce.document.write(`
                                <html>
                                  <head><title>Payment Screenshot - ${te.id}</title></head>
                                  <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                    <img src="${te.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                  </body>
                                </html>
                              `)},style:{width:"100%",padding:"12px",background:"#5a31ea",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:Ce=>{Ce.target.style.background="#4a28d0",Ce.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:Ce=>{Ce.target.style.background="#5a31ea",Ce.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:e.jsx("span",{style:{color:"#ffffff"},children:" View Full Screenshot"})}),e.jsx("img",{src:te.screenshot,alt:"Payment Screenshot Preview",style:{width:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"8px",marginTop:"12px",border:"1px solid #e0e0e0"}})]})]}),e.jsx("div",{style:{marginTop:"24px",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>ye(null),style:{padding:"10px 20px",background:"#5a31ea",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:Ce=>{Ce.target.style.background="#4a28d0",Ce.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:Ce=>{Ce.target.style.background="#5a31ea",Ce.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:"Close"})})]})}),w==="history"&&e.jsxs("article",{className:"screen-card",id:"history",children:[e.jsxs("header",{className:"screen-card__header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-history",style:{marginRight:"10px"}}),"Payment History"]}),e.jsx("p",{children:"Complete record of all your payments."})]}),e.jsx("div",{style:{marginTop:"24px"},children:(()=>{const Ce=Te?d.filter(xe=>xe.memberId===Te.id||xe.memberEmail===Te.email||xe.member===Te.name):d,qe=Math.ceil(Ce.length/je),nt=Math.min(Math.max(1,ce),qe||1),ft=nt*je,on=ft-je,Se=Ce.slice(on,ft);return Ce.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No payment history yet"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:"Your payment records will appear here"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:"fas fa-list",style:{color:"#5a31ea"}}),"Show:"]}),e.jsxs("select",{value:je,onChange:xe=>{Fe(Number(xe.target.value)),oe(1)},style:{padding:"8px 12px",border:"none",borderRadius:"8px",background:"#f8f9ff",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",outline:"none"},children:[e.jsx("option",{value:2,children:"2"}),e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"per page"})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",on+1," to ",Math.min(ft,Ce.length)," of ",Ce.length," payments"]})]}),e.jsx("div",{className:"payment-history-list",style:{marginBottom:"24px"},children:Se.map((xe,We)=>{const ct=xe.paidToAdmin||xe.paidToAdminName||xe.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(xe.method)?"Online Payment":xe.method||"N/A";return e.jsxs("div",{className:"payment-history-card",children:[e.jsxs("div",{className:"payment-history-card__main",children:[e.jsxs("div",{children:[e.jsx("p",{className:"payment-history-card__amount",children:xe.amount||"$0"}),e.jsx("p",{className:"payment-history-card__date",children:xe.date||"N/A"})]}),e.jsx("div",{className:"payment-history-card__status",children:e.jsx("span",{className:qa[xe.status]||"payment-history-card__status-pill",children:xe.status||"Pending"})})]}),e.jsxs("div",{className:"payment-history-card__meta",children:[e.jsxs("div",{children:[e.jsx("span",{className:"label",children:"Method"}),e.jsx("span",{className:"value",children:ct})]}),xe.reference&&xe.reference!=="-"&&e.jsxs("div",{children:[e.jsx("span",{className:"label",children:"Reference"}),e.jsx("span",{className:"value code",children:xe.reference})]}),xe.paidToAdminName&&e.jsxs("div",{children:[e.jsx("span",{className:"label",children:"Paid to"}),e.jsx("span",{className:"value",children:xe.paidToAdminName})]}),xe.period&&e.jsxs("div",{children:[e.jsx("span",{className:"label",children:"Period"}),e.jsx("span",{className:"value",children:xe.period})]})]}),xe.status==="Pending"&&e.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",fontSize:"0.8rem",color:"#856404"},children:" Your payment is pending admin approval. You will be notified once it's reviewed."}),xe.status==="Rejected"&&xe.rejectionReason&&e.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb",fontSize:"0.8rem",color:"#721c24"},children:[" Payment rejected: ",xe.rejectionReason]}),xe.screenshot&&e.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("button",{onClick:()=>{const st=window.open();st&&st.document.write(`
                                            <html>
                                              <head><title>Payment Screenshot</title></head>
                                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                                <img src="${xe.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                              </body>
                                            </html>
                                          `)},style:{width:"100%",padding:"8px 12px",background:"#5a31ea",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},children:[e.jsx("span",{style:{color:"#ffffff"},children:""}),e.jsx("span",{style:{color:"#ffffff"},children:"View Screenshot"})]})})]},We)})}),qe>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"32px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>oe(xe=>Math.max(1,xe-1)),disabled:nt===1,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:nt===1?"#f3f4f6":"#5a31ea",color:nt===1?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:nt===1?"not-allowed":"pointer",boxShadow:nt===1?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:xe=>{nt!==1&&(xe.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:xe=>{nt!==1&&(xe.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:[e.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),e.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:Array.from({length:qe},(xe,We)=>We+1).map(xe=>xe===1||xe===qe||xe>=nt-1&&xe<=nt+1?e.jsx("button",{onClick:()=>oe(xe),style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:nt===xe?"#5a31ea":"#f8f9ff",color:nt===xe?"#ffffff":"#1a1a1a",fontSize:"0.875rem",fontWeight:nt===xe?"600":"500",cursor:"pointer",boxShadow:nt===xe?"0 2px 8px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:ct=>{nt!==xe&&(ct.target.style.background="#ffffff",ct.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)")},onMouseLeave:ct=>{nt!==xe&&(ct.target.style.background="#f8f9ff",ct.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)")},children:xe},xe):xe===nt-2||xe===nt+2?e.jsx("span",{style:{padding:"10px 8px",color:"#666",fontSize:"0.875rem"},children:"..."},xe):null)}),e.jsxs("button",{onClick:()=>oe(xe=>Math.min(qe,xe+1)),disabled:nt===qe,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:nt===qe?"#f3f4f6":"#5a31ea",color:nt===qe?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:nt===qe?"not-allowed":"pointer",boxShadow:nt===qe?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:xe=>{nt!==qe&&(xe.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:xe=>{nt!==qe&&(xe.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:["Next",e.jsx("i",{className:"fas fa-chevron-right"})]})]})]})})()})]}),w==="profile"&&e.jsxs("article",{className:"screen-card",id:"profile",children:[e.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-user-cog",style:{marginRight:"10px"}}),"Profile Settings"]}),e.jsx("p",{children:"Manage your account information and preferences."})]}),!Ee&&e.jsx("button",{type:"button",className:"primary-btn",onClick:()=>me(!0),style:{padding:"10px 20px",fontSize:"0.9rem"},children:"Edit Profile"})]}),e.jsxs("form",{onSubmit:sn,noValidate:!0,children:[e.jsx("div",{className:"card",style:{padding:"24px",marginBottom:"24px",background:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#5a31ea",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"2rem",fontWeight:"600",flexShrink:0},children:Te?.name?.charAt(0)?.toUpperCase()||"M"}),e.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",fontWeight:"600"},children:Te?.name||"Member"}),e.jsx("p",{style:{margin:"0 0 4px 0",color:"#666",fontSize:"0.9rem"},children:Te?.email||"No email"}),e.jsx("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:Te?.phone||"No phone"})]}),e.jsx("div",{style:{padding:"8px 16px",background:Te?.status==="Active"?"#d1fae5":"#fee2e2",color:Te?.status==="Active"?"#065f46":"#991b1b",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500"},children:Te?.status||"Active"})]})}),e.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Personal Information"}),Ee?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Full Name ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{required:!0,onInvalid:Ce=>Ce.preventDefault(),value:Qe.name,onChange:Ce=>ot({...Qe,name:Ce.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:Ce=>Ce.target.style.borderColor="#5a31ea",onBlur:Ce=>Ce.target.style.borderColor="#ddd"})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Email Address ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{required:!0,type:"email",onInvalid:Ce=>Ce.preventDefault(),value:Qe.email,onChange:Ce=>ot({...Qe,email:Ce.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:Ce=>Ce.target.style.borderColor="#5a31ea",onBlur:Ce=>Ce.target.style.borderColor="#ddd"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.jsx(Jc,{label:e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Phone Number (WhatsApp) ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),value:Qe.phone,onChange:Ce=>ot({...Qe,phone:Ce.target.value}),onError:Ce=>{xt(Ce,"error")},placeholder:"Enter phone number",required:!0})}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("i",{className:"fas fa-lock",style:{color:"#5a31ea",fontSize:"0.875rem"}}),"New Password (leave blank to keep current)"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:K?"text":"password",value:Qe.password,onChange:Ce=>ot({...Qe,password:Ce.target.value}),placeholder:"Enter new password (min. 6 characters)",minLength:6,style:{padding:"12px 45px 12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",width:"100%",transition:"border-color 0.2s"},onFocus:Ce=>Ce.target.style.borderColor="#5a31ea",onBlur:Ce=>Ce.target.style.borderColor="#ddd"}),e.jsx("button",{type:"button",onClick:()=>Z(!K),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":K?"Hide password":"Show password",children:K?e.jsx("i",{className:"fas fa-eye-slash",style:{fontSize:"0.875rem"}}):e.jsx("i",{className:"fas fa-eye",style:{fontSize:"0.875rem"}})})]}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#666",marginTop:"-4px"},children:"Leave blank if you don't want to change your password"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Full Name"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:Te?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Email Address"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:Te?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Phone Number"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:Te?.phone||"N/A"})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Notification Preferences"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["Email Reminders",e.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders and updates via email"})]}),e.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:e.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["WhatsApp Reminders",e.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders via WhatsApp"})]}),e.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:e.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]})]})]}),Ee&&e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"24px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{me(!1),Te&&ot({name:Te.name||"",email:Te.email||"",phone:Te.phone||"",emailReminders:!0,whatsappReminders:!0})},style:{padding:"12px 24px",minWidth:"120px"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn",style:{padding:"12px 24px",minWidth:"120px"},children:"Save Changes"})]})]})]})]})]})]}),e.jsx(ed,{})]})}function Cy(){const{members:s,fetchMembers:a}=Xd(),[r,o]=q.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",subscriptionType:"Lifetime"}),[d,c]=q.useState(!1),[p,m]=q.useState(!1),[g,v]=q.useState(!1),[j,A]=q.useState(null),[R,w]=q.useState("error"),[$,F]=q.useState({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),D=wo();q.useEffect(()=>{a()},[a]);const _=fe=>{if(!fe)return!1;const he=fe.trim().toLowerCase();return s.some(ge=>ge.email&&ge.email.toLowerCase()===he)?(A("This email has already been registered. Please use a different email or try logging in."),w("error"),setTimeout(()=>A(null),3e3),!0):!1},Y=fe=>{const he=fe.target.value;o({...r,email:he})},ee=fe=>{const he=fe.target.value.trim();he&&_(he)},G=async fe=>{fe.preventDefault();const he={name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1};if(!r.name||!r.name.trim()){he.name=!0,A("Name is required"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(!r.email||!r.email.trim()){he.email=!0,A("Email is required"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email.trim())){he.email=!0,A("Please enter a valid email address"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(_(r.email)){he.email=!0,A("This email has already been registered. Please use a different email or try logging in."),w("error"),F(he);return}if(!r.phone||!r.phone.trim()){he.phone=!0,A("Phone number is required"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(!r.password){he.password=!0,A("Password is required"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(r.password.length<6){he.password=!0,A("Password must be at least 6 characters long"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}if(r.password!==r.confirmPassword){he.confirmPassword=!0,A("Passwords do not match"),w("error"),setTimeout(()=>A(null),3e3),F(he);return}F({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),c(!0);try{const te=await fetch("http://localhost:4000/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name.trim(),email:r.email.trim().toLowerCase(),phone:r.phone.trim(),password:r.password,status:"Pending",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:r.subscriptionType})}),ye=await te.json();if(!te.ok){const z=ye.message||ye.error||"Failed to create account";throw z.toLowerCase().includes("email")||z.toLowerCase().includes("already exists")||z.toLowerCase().includes("duplicate")?new Error("This email has already been registered. Please use a different email or try logging in."):new Error(z)}A("Account created successfully! Your account is pending approval. You will be able to login once an admin approves your account."),w("success"),setTimeout(()=>{D("/login",{replace:!0,state:{message:"Account created successfully! Your account is pending approval. Please wait for admin approval before logging in.",email:r.email}})},3e3)}catch(ge){console.error("Signup error:",ge),A(ge.message||"Failed to create account. Please try again."),w("error")}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Zc,{showCTA:!1}),e.jsx("main",{className:"login-main",children:e.jsxs("div",{className:"login-shell",children:[e.jsxs("aside",{className:"login-menu",children:[e.jsx("p",{className:"eyebrow light",children:"Welcome"}),e.jsx("h2",{children:"Subscription Manager HK"}),e.jsx("p",{children:"Create your member account to access the subscription portal."}),e.jsxs("ul",{children:[e.jsx("li",{children:"Track your subscription payments"}),e.jsx("li",{children:"View invoices and payment history"}),e.jsx("li",{children:"Manage your profile and preferences"})]})]}),e.jsxs("div",{className:"login-form-card",children:[e.jsxs("div",{className:"login-form-card__header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fas fa-user-plus login-title-icon"}),"Create Account"]}),e.jsxs("p",{children:["Already have an account? ",e.jsx(Xc,{to:"/login",className:"signup-link",children:"Sign in"})]})]}),e.jsxs("form",{onSubmit:G,noValidate:!0,children:[e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user login-icon"}),"Full Name ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.name,onChange:fe=>{o({...r,name:fe.target.value}),$.name&&F(he=>({...he,name:!1}))},placeholder:"Enter your full name",className:`mono-input ${$.name?"signup-input-error":""}`})]}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsx("input",{type:"email",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.email,onChange:fe=>{Y(fe),$.email&&F(he=>({...he,email:!1}))},onBlur:ee,placeholder:"Enter your email address",className:`mono-input ${$.email?"signup-input-error":""}`})]}),e.jsx("div",{className:"mono-label",children:e.jsx(Jc,{label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-phone login-icon"}),"Phone Number ",e.jsx("span",{className:"login-required",children:"*"})]}),value:r.phone,onChange:fe=>{o({...r,phone:fe.target.value}),$.phone&&F(he=>({...he,phone:!1}))},onError:fe=>{A(fe),w("error"),F(he=>({...he,phone:!0}))},placeholder:"Enter your phone number",required:!0,className:`mono-input ${$.phone?"signup-input-error":""}`})}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-id-card login-icon"}),"Subscription Type ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"signup-subscription-grid",children:[e.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Lifetime"}),className:`signup-subscription-button ${r.subscriptionType==="Lifetime"?"signup-subscription-button--active":"signup-subscription-button--default"}`,children:[e.jsx("div",{className:"signup-subscription-button-title",children:"Lifetime"}),e.jsx("div",{className:"signup-subscription-button-price",children:"$250/year"})]}),e.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Yearly + Janaza Fund"}),className:`signup-subscription-button ${r.subscriptionType==="Yearly + Janaza Fund"?"signup-subscription-button--active":"signup-subscription-button--default"}`,children:[e.jsx("div",{className:"signup-subscription-button-title",children:"Yearly + Janaza Fund"}),e.jsx("div",{className:"signup-subscription-button-price",children:"$500/year"})]})]})]}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock login-icon"}),"Password ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx("input",{type:p?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.password,onChange:fe=>o({...r,password:fe.target.value}),placeholder:"Create a password (min. 6 characters)",className:"mono-input login-input--with-icon",minLength:6}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"login-password-toggle","aria-label":p?"Hide password":"Show password",children:p?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock login-icon"}),"Confirm Password ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx("input",{type:g?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.confirmPassword,onChange:fe=>{o({...r,confirmPassword:fe.target.value}),$.confirmPassword&&F(he=>({...he,confirmPassword:!1}))},placeholder:"Confirm your password",className:`mono-input login-input--with-icon ${$.confirmPassword?"signup-input-error":""}`,minLength:6}),e.jsx("button",{type:"button",onClick:()=>v(!g),className:"login-password-toggle","aria-label":g?"Hide password":"Show password",children:g?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsx("button",{type:"submit",className:"primary-btn signup-submit-button",disabled:d,children:d?"Creating Account...":"Create Account"})]}),e.jsx(Hd,{isOpen:!!error,message:error,type:"error",onClose:()=>setError(null)}),e.jsx(Hd,{isOpen:!!success,message:success,type:"success",onClose:()=>setSuccess(null)}),e.jsx(Yl,{message:j,type:R,onClose:()=>A(null),duration:3e3})]})]})}),e.jsx(ed,{})]})}function Py(){const{members:s,admins:a,invoices:r,payments:o,paymentHistory:d,donations:c,paymentMethods:p,communicationLog:m,fetchMembers:g,fetchAdmins:v,fetchInvoices:j,fetchPayments:A,fetchDonations:R,fetchPaymentMethods:w,addMember:$,updateMember:F,deleteMember:D,addAdminUser:_,updateAdminUser:Y,deleteAdminUser:ee,addInvoice:G,updateInvoice:fe,deleteInvoice:he,addDonation:Be,deleteDonation:ge,updatePaymentMethod:te,loading:ye}=Xd(),z=wo(),[H,de]=q.useState("members"),[ie,ke]=q.useState(!1),[Me,Ee]=q.useState(null),[me,Ie]=q.useState(null),[Ue,se]=q.useState("success"),[C,K]=q.useState({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[Z,ce]=q.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[oe,je]=q.useState({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""}),[Fe,Oe]=q.useState(!1),[Ye,Te]=q.useState(!1),[Qe,ot]=q.useState({donorName:"",isMember:!1,memberId:"",amount:"",notes:""}),[bt,X]=q.useState({name:"",visible:!0,qrImageUrl:"",details:[]});q.useEffect(()=>{g(),v(),j(),A(),R(),w()},[]);const et=(le,wt="success")=>{Ie(le),se(wt)},xt=()=>{et("You have been logged out","success"),setTimeout(()=>{sessionStorage.clear(),z("/login",{replace:!0})},500)},Lt=async le=>{le.preventDefault();try{await $(C),et("Member added successfully!"),ke(!1),vt(),g()}catch(wt){et(wt.message||"Failed to add member","error")}},Ve=async le=>{le.preventDefault();try{await F(Me.id,C),et("Member updated successfully!"),ke(!1),Ee(null),vt(),g()}catch(wt){et(wt.message||"Failed to update member","error")}},Mt=async le=>{if(window.confirm("Are you sure you want to delete this member?"))try{await D(le),et("Member deleted successfully!"),g()}catch(wt){et(wt.message||"Failed to delete member","error")}},yt=le=>{Ee(le),K({name:le.name||"",email:le.email||"",phone:le.phone||"",password:"",status:le.status||"Active",balance:le.balance||"$0",nextDue:le.nextDue||"",lastPayment:le.lastPayment||"",subscriptionType:le.subscriptionType||"Lifetime"}),ke(!0)},vt=()=>{K({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},Pt=async le=>{le.preventDefault();try{await _(Z),et("Admin added successfully!"),ke(!1),Ot(),v()}catch(wt){et(wt.message||"Failed to add admin","error")}},pn=async le=>{le.preventDefault();try{await Y(Me.id,Z),et("Admin updated successfully!"),ke(!1),Ee(null),Ot(),v()}catch(wt){et(wt.message||"Failed to update admin","error")}},sn=async le=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await ee(le),et("Admin deleted successfully!"),v()}catch(wt){et(wt.message||"Failed to delete admin","error")}},ht=le=>{Ee(le),ce({name:le.name||"",email:le.email||"",password:"",role:le.role||"Viewer",status:le.status||"Active"}),ke(!0)},Ot=()=>{ce({name:"",email:"",password:"",role:"Viewer",status:"Active"})},Ce=async le=>{le.preventDefault();try{const wt={...oe,amount:oe.amount.startsWith("$")?oe.amount:`$${oe.amount}`};await G(wt),et("Invoice added successfully!"),ke(!1),on(),j()}catch(wt){et(wt.message||"Failed to add invoice","error")}},qe=async le=>{le.preventDefault();try{const wt={...oe,amount:oe.amount.startsWith("$")?oe.amount:`$${oe.amount}`};await fe(Me.id,wt),et("Invoice updated successfully!"),ke(!1),Ee(null),on(),j()}catch(wt){et(wt.message||"Failed to update invoice","error")}},nt=async le=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await he(le),et("Invoice deleted successfully!"),j()}catch(wt){et(wt.message||"Failed to delete invoice","error")}},ft=le=>{Ee(le),je({memberId:le.memberId||"",memberName:le.memberName||"",period:le.period||"",amount:le.amount?.replace("$","")||"",invoiceType:le.invoiceType||"Lifetime",due:le.due||"",status:le.status||"Unpaid",notes:le.notes||""}),ke(!0)},on=()=>{je({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""})},Se=async le=>{le.preventDefault();try{await Be(Qe),et("Donation added successfully!"),ke(!1),ct(),R()}catch(wt){et(wt.message||"Failed to add donation","error")}},xe=async le=>{le.preventDefault();try{et("Donation update functionality not available","error"),ke(!1),Ee(null),ct()}catch(wt){et(wt.message||"Failed to update donation","error")}},We=async le=>{if(window.confirm("Are you sure you want to delete this donation?"))try{await ge(le),et("Donation deleted successfully!"),R()}catch(wt){et(wt.message||"Failed to delete donation","error")}},ct=()=>{ot({donorName:"",isMember:!1,memberId:"",amount:"",notes:""})},st=async le=>{le.preventDefault();try{const Qr=await fetch("http://localhost:4000/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(bt)});if(!Qr.ok){const Xn=await Qr.json().catch(()=>({}));throw new Error(Xn.error||"Failed to add payment method")}et("Payment method added successfully!"),ke(!1),Qt(),w()}catch(wt){et(wt.message||"Failed to add payment method","error")}},un=async le=>{le.preventDefault();try{await te(Me.name,bt),et("Payment method updated successfully!"),ke(!1),Ee(null),Qt(),w()}catch(wt){et(wt.message||"Failed to update payment method","error")}},Ht=le=>{Ee(le),X({name:le.name||"",visible:le.visible!==void 0?le.visible:!0,qrImageUrl:le.qrImageUrl||"",details:Array.isArray(le.details)?le.details:[]}),ke(!0)},Qt=()=>{X({name:"",visible:!0,qrImageUrl:"",details:[]})},Sn=()=>{Ee(null),H==="members"?vt():H==="admins"?Ot():H==="invoices"?on():H==="donations"?ct():H==="payment-methods"&&Qt(),ke(!0)},Wt=()=>{ke(!1),Ee(null),H==="members"?vt():H==="admins"?Ot():H==="invoices"?on():H==="donations"?ct():H==="payment-methods"&&Qt()};return ye?e.jsxs("div",{className:"server-loading",children:[e.jsx("div",{className:"server-loading-spinner"}),e.jsx("p",{className:"server-loading-text",children:"Loading data from server..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zc,{showCTA:!1,showLogout:!0,onLogout:xt,isSticky:!0}),e.jsx(Yl,{message:me,type:Ue,onClose:()=>Ie(null),duration:3e3}),e.jsx("main",{className:"server-main server-main--sticky-header",children:e.jsx("div",{className:"server-layout",children:e.jsxs("article",{className:"server-card",children:[e.jsxs("header",{className:"server-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-server"}),"Server Management"]}),e.jsx("p",{children:"Manage all data entities: Members, Admins, Invoices, Payments, Donations, and Payment Methods"})]}),e.jsxs("div",{className:"server-nav",children:[e.jsxs("button",{className:`server-nav-btn ${H==="members"?"active":""}`,onClick:()=>{de("members"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-users"}),"Members (",s.length,")"]}),e.jsxs("button",{className:`server-nav-btn ${H==="admins"?"active":""}`,onClick:()=>{de("admins"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-user-shield"}),"Admins (",a.length,")"]}),e.jsxs("button",{className:`server-nav-btn ${H==="invoices"?"active":""}`,onClick:()=>{de("invoices"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-file-invoice"}),"Invoices (",r.length,")"]}),e.jsxs("button",{className:`server-nav-btn ${H==="payments"?"active":""}`,onClick:()=>{de("payments"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-credit-card"}),"Payments (",d?.length||0,")"]}),e.jsxs("button",{className:`server-nav-btn ${H==="donations"?"active":""}`,onClick:()=>{de("donations"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-hand-holding-heart"}),"Donations (",c?.length||0,")"]}),e.jsxs("button",{className:`server-nav-btn ${H==="payment-methods"?"active":""}`,onClick:()=>{de("payment-methods"),ke(!1),Ee(null)},children:[e.jsx("i",{className:"fas fa-wallet"}),"Payment Methods (",p?.length||0,")"]})]}),e.jsxs("div",{className:"server-content",children:[H==="members"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"server-section-header",children:[e.jsx("h4",{children:"Members Management"}),e.jsxs("button",{className:"server-add-btn",onClick:Sn,children:[e.jsx("i",{className:"fas fa-plus"}),"Add Member"]})]}),ie&&e.jsxs("div",{className:"server-form-card",children:[e.jsx("h4",{children:Me?"Edit Member":"Add New Member"}),e.jsxs("form",{className:"server-form-grid",onSubmit:Me?Ve:Lt,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Name ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:C.name,onChange:le=>K({...C,name:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope server-form-icon"}),"Email ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:C.email,onChange:le=>K({...C,email:le.target.value}),className:"mono-input"})]}),e.jsx("div",{children:e.jsx(Jc,{label:e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-phone server-form-icon"}),"Phone"]}),value:C.phone,onChange:le=>K({...C,phone:le.target.value}),onError:le=>{et(le,"error")},placeholder:"Enter phone number",className:"mono-input"})}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock server-form-icon"}),"Password ",Me?"(leave blank to keep current)":e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsxs("div",{className:"server-form-input-wrapper",children:[e.jsx("input",{type:Fe?"text":"password",required:!Me,value:C.password,onChange:le=>K({...C,password:le.target.value}),className:"mono-input login-input--with-icon"}),e.jsx("button",{type:"button",onClick:()=>Oe(!Fe),className:"login-password-toggle",children:e.jsx("i",{className:`fas ${Fe?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-toggle-on server-form-icon"}),"Status"]}),e.jsxs("select",{value:C.status,onChange:le=>K({...C,status:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Balance"]}),e.jsx("input",{type:"text",value:C.balance,onChange:le=>K({...C,balance:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar server-form-icon"}),"Next Due"]}),e.jsx("input",{type:"text",value:C.nextDue,onChange:le=>K({...C,nextDue:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-check server-form-icon"}),"Last Payment"]}),e.jsx("input",{type:"text",value:C.lastPayment,onChange:le=>K({...C,lastPayment:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-id-card server-form-icon"}),"Subscription Type"]}),e.jsxs("select",{value:C.subscriptionType,onChange:le=>K({...C,subscriptionType:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Lifetime",children:"Lifetime"}),e.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),e.jsxs("div",{className:"server-form-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:Wt,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[Me?"Update":"Add"," Member"]})]})]})]}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["ID","Name","Email","Phone","Status","Balance","Actions"],rows:s.map(le=>({ID:le.id,Name:le.name,Email:le.email,Phone:le.phone||"-",Status:{render:()=>e.jsx("span",{className:le.status==="Active"?"server-badge server-badge--active":le.status==="Pending"?"server-badge server-badge--pending":"server-badge server-badge--inactive",children:le.status})},Balance:le.balance||"$0",Actions:{render:()=>e.jsxs("div",{className:"server-action-buttons",children:[e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>yt(le),children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>Mt(le.id),title:"Delete Member","aria-label":"Delete Member",children:e.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),H==="admins"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"server-section-header",children:[e.jsx("h4",{children:"Admins Management"}),e.jsxs("button",{className:"server-add-btn",onClick:Sn,children:[e.jsx("i",{className:"fas fa-plus"}),"Add Admin"]})]}),ie&&e.jsxs("div",{className:"server-form-card",children:[e.jsx("h4",{children:Me?"Edit Admin":"Add New Admin"}),e.jsxs("form",{className:"server-form-grid",onSubmit:Me?pn:Pt,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Name ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:Z.name,onChange:le=>ce({...Z,name:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope server-form-icon"}),"Email ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:Z.email,onChange:le=>ce({...Z,email:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock server-form-icon"}),"Password ",Me?"(leave blank to keep current)":e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsxs("div",{className:"server-form-input-wrapper",children:[e.jsx("input",{type:Ye?"text":"password",required:!Me,value:Z.password,onChange:le=>ce({...Z,password:le.target.value}),className:"mono-input login-input--with-icon"}),e.jsx("button",{type:"button",onClick:()=>Te(!Ye),className:"login-password-toggle",children:e.jsx("i",{className:`fas ${Ye?"fa-eye-slash":"fa-eye"}`})})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user-tag server-form-icon"}),"Role"]}),e.jsxs("select",{value:Z.role,onChange:le=>ce({...Z,role:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Owner",children:"Owner"}),e.jsx("option",{value:"Finance Admin",children:"Finance Admin"}),e.jsx("option",{value:"Viewer",children:"Viewer"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-toggle-on server-form-icon"}),"Status"]}),e.jsxs("select",{value:Z.status,onChange:le=>ce({...Z,status:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"server-form-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:Wt,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[Me?"Update":"Add"," Admin"]})]})]})]}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["ID","Name","Email","Role","Status","Actions"],rows:a.map(le=>({ID:le.id,Name:le.name,Email:le.email,Role:le.role||"Viewer",Status:{render:()=>e.jsx("span",{className:le.status==="Active"?"server-badge server-badge--active":"server-badge server-badge--inactive",children:le.status})},Actions:{render:()=>e.jsxs("div",{className:"server-action-buttons",children:[e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>ht(le),children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>sn(le.id),title:"Delete Admin","aria-label":"Delete Admin",children:e.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),H==="invoices"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"server-section-header",children:[e.jsx("h4",{children:"Invoices Management"}),e.jsxs("button",{className:"server-add-btn",onClick:Sn,children:[e.jsx("i",{className:"fas fa-plus"}),"Add Invoice"]})]}),ie&&e.jsxs("div",{className:"server-form-card",children:[e.jsx("h4",{children:Me?"Edit Invoice":"Add New Invoice"}),e.jsxs("form",{className:"server-form-grid",onSubmit:Me?qe:Ce,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Member ID ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:oe.memberId,onChange:le=>je({...oe,memberId:le.target.value}),className:"mono-input",placeholder:"e.g. HK1001"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Member Name ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:oe.memberName,onChange:le=>je({...oe,memberName:le.target.value}),className:"mono-input"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar server-form-icon"}),"Period ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:oe.period,onChange:le=>je({...oe,period:le.target.value}),className:"mono-input",placeholder:"e.g. Nov 2025"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-id-card server-form-icon"}),"Invoice Type"]}),e.jsxs("select",{value:oe.invoiceType,onChange:le=>je({...oe,invoiceType:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Lifetime",children:"Lifetime"}),e.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Amount ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:oe.amount,onChange:le=>je({...oe,amount:le.target.value}),className:"mono-input",placeholder:"e.g. 50"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-calendar-check server-form-icon"}),"Due Date ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:oe.due,onChange:le=>{const wt=le.target.value;je({...oe,due:wt})},onBlur:le=>{const wt=le.target.value;if(wt){const Qr=new Date(wt);if(isNaN(Qr.getTime())){et("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[Xn,Xr,gn]=wt.split("-").map(Number);if(Xr<1||Xr>12){et("Invalid month. Please enter a month between 01 and 12","error");return}if(gn<1||gn>31){et("Invalid day. Please enter a valid day for the selected month","error");return}const Ft=new Date(Xn,Xr,0).getDate();if(gn>Ft){et(`Invalid date. ${Xr}/${Xn} only has ${Ft} days`,"error");return}}},className:"mono-input server-form-input-full-width"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-info-circle server-form-icon"}),"Status"]}),e.jsxs("select",{value:oe.status,onChange:le=>je({...oe,status:le.target.value}),className:"mono-input",children:[e.jsx("option",{value:"Unpaid",children:"Unpaid"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Overdue",children:"Overdue"}),e.jsx("option",{value:"Pending Verification",children:"Pending Verification"})]})]}),e.jsxs("label",{className:"notes server-form-notes-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),e.jsx("textarea",{value:oe.notes,onChange:le=>je({...oe,notes:le.target.value}),className:"mono-input server-form-textarea"})]}),e.jsxs("div",{className:"server-form-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:Wt,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[Me?"Update":"Add"," Invoice"]})]})]})]}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["Invoice #","Member","Period","Amount","Status","Due Date","Actions"],rows:r.map(le=>({"Invoice #":le.id,Member:le.memberName||le.memberId||"-",Period:le.period,Amount:le.amount,Status:{render:()=>e.jsx("span",{className:le.status==="Paid"?"server-badge server-badge--success":le.status==="Overdue"?"server-badge server-badge--danger":le.status==="Pending Verification"?"server-badge server-badge--pending":"server-badge server-badge--warning",children:le.status})},"Due Date":le.due,Actions:{render:()=>e.jsxs("div",{className:"server-action-buttons",children:[e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>ft(le),children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>nt(le.id),title:"Delete Invoice","aria-label":"Delete Invoice",children:e.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),H==="payments"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"server-section-header",children:e.jsx("h4",{children:"Payments Management"})}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["Date","Member","Amount","Method","Status","Reference","Period"],rows:(d||[]).map(le=>({Date:le.date||"-",Member:le.member||le.memberName||le.memberId||"-",Amount:le.amount||"$0",Method:le.method||"-",Status:{render:()=>e.jsx("span",{className:le.status==="Paid"||le.status==="Completed"?"server-badge server-badge--success":le.status==="Pending"||le.status==="Pending Verification"?"server-badge server-badge--pending":le.status==="Rejected"?"server-badge server-badge--danger":"server-badge server-badge--warning",children:le.status})},Reference:le.reference||"-",Period:le.period||"-"}))})})]}),H==="donations"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"server-section-header",children:[e.jsx("h4",{children:"Donations Management"}),e.jsxs("button",{className:"server-add-btn",onClick:Sn,children:[e.jsx("i",{className:"fas fa-plus"}),"Add Donation"]})]}),ie&&e.jsxs("div",{className:"server-form-card",children:[e.jsx("h4",{children:Me?"Edit Donation":"Add New Donation"}),e.jsxs("form",{className:"server-form-grid",onSubmit:Me?xe:Se,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Donor Name ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:Qe.donorName,onChange:le=>ot({...Qe,donorName:le.target.value}),className:"mono-input",placeholder:"Enter donor name"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Amount ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"number",required:!0,value:Qe.amount,onChange:le=>ot({...Qe,amount:le.target.value}),className:"mono-input",placeholder:"Enter amount"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-check-circle server-form-icon"}),"Is Member"]}),e.jsxs("select",{value:Qe.isMember?"true":"false",onChange:le=>ot({...Qe,isMember:le.target.value==="true"}),className:"mono-input",children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]}),Qe.isMember&&e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-user server-form-icon"}),"Member ID"]}),e.jsx("input",{type:"text",value:Qe.memberId,onChange:le=>ot({...Qe,memberId:le.target.value}),className:"mono-input",placeholder:"Enter member ID"})]}),e.jsxs("label",{className:"notes server-form-notes-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),e.jsx("textarea",{value:Qe.notes,onChange:le=>ot({...Qe,notes:le.target.value}),className:"mono-input server-form-textarea"})]}),e.jsxs("div",{className:"server-form-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:Wt,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[Me?"Update":"Add"," Donation"]})]})]})]}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["Donor","Amount","Is Member","Member ID","Date","Actions"],rows:(c||[]).map(le=>({Donor:le.donorName||"-",Amount:le.amount?`$${le.amount}`:"$0","Is Member":le.isMember?"Yes":"No","Member ID":le.memberId||"-",Date:le.date||"-",Actions:{render:()=>e.jsx("div",{className:"server-action-buttons",children:e.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>We(le._id||le.id),title:"Delete Donation","aria-label":"Delete Donation",children:e.jsx("i",{className:"fas fa-trash"})})})}}))})})]}),H==="payment-methods"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"server-section-header",children:[e.jsx("h4",{children:"Payment Methods Management"}),e.jsxs("button",{className:"server-add-btn",onClick:Sn,children:[e.jsx("i",{className:"fas fa-plus"}),"Add Payment Method"]})]}),ie&&e.jsxs("div",{className:"server-form-card",children:[e.jsx("h4",{children:Me?"Edit Payment Method":"Add New Payment Method"}),e.jsxs("form",{className:"server-form-grid",onSubmit:Me?un:st,noValidate:!0,children:[e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-wallet server-form-icon"}),"Name ",e.jsx("span",{className:"server-form-required",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:bt.name,onChange:le=>X({...bt,name:le.target.value}),className:"mono-input",placeholder:"e.g. FPS, PayMe, Bank Transfer"})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-eye server-form-icon"}),"Visible"]}),e.jsxs("select",{value:bt.visible?"true":"false",onChange:le=>X({...bt,visible:le.target.value==="true"}),className:"mono-input",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("label",{children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-image server-form-icon"}),"QR Image URL"]}),e.jsx("input",{type:"url",value:bt.qrImageUrl,onChange:le=>X({...bt,qrImageUrl:le.target.value}),className:"mono-input",placeholder:"Enter QR code image URL"})]}),e.jsxs("label",{className:"notes server-form-notes-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-list server-form-icon"}),"Details (one per line)"]}),e.jsx("textarea",{value:Array.isArray(bt.details)?bt.details.join(`
`):"",onChange:le=>X({...bt,details:le.target.value.split(`
`).filter(wt=>wt.trim())}),className:"mono-input server-form-textarea",placeholder:"Enter details, one per line"})]}),e.jsxs("div",{className:"server-form-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:Wt,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"primary-btn",children:[Me?"Update":"Add"," Payment Method"]})]})]})]}),e.jsx("div",{className:"server-table-container",children:e.jsx(Ua,{columns:["Name","Visible","QR Image","Details","Actions"],rows:(p||[]).map(le=>({Name:le.name||"-",Visible:{render:()=>e.jsx("span",{className:le.visible?"server-badge server-badge--success":"server-badge server-badge--inactive",children:le.visible?"Yes":"No"})},"QR Image":le.qrImageUrl?e.jsx("a",{href:le.qrImageUrl,target:"_blank",rel:"noopener noreferrer",className:"server-link",children:"View Image"}):"-",Details:Array.isArray(le.details)?le.details.join(", "):"-",Actions:{render:()=>e.jsx("div",{className:"server-action-buttons",children:e.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>Ht(le),children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]})})}}))})})]})]})]})})}),e.jsx(ed,{})]})}function Ly(){const[s,a]=q.useState(""),[r,o]=q.useState(!1),[d,c]=q.useState(!1),[p,m]=q.useState(""),[g,v]=q.useState(null),[j,A]=q.useState("error"),R=wo();q.useEffect(()=>(document.body.classList.add("login-page-body"),()=>{document.body.classList.remove("login-page-body")}),[]);const w=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),$=async F=>{if(F.preventDefault(),!r){if(m(""),v(null),!s.trim()){m("Email is required"),v("Email is required"),A("error");return}if(!w(s.trim())){m("Please enter a valid email address"),v("Please enter a valid email address"),A("error");return}o(!0),v(null);try{const _=await fetch("http://localhost:4000/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.trim()})});let Y;try{Y=await _.json()}catch(ee){console.error("Failed to parse response:",ee),v("Server returned an invalid response. Please try again."),A("error"),o(!1);return}if(!_.ok||!Y.success){const ee=Y.message||"Failed to send reset request. Please try again.";v(ee),A("error"),o(!1);return}c(!0),o(!1)}catch(D){console.error("Forgot password error:",D),v("Unable to connect. Please check your connection and try again."),A("error"),o(!1)}}};return e.jsx(e.Fragment,{children:e.jsx("main",{className:"login-main",children:e.jsxs("div",{className:"login-shell",children:[e.jsxs("aside",{className:"login-menu",children:[e.jsx("p",{className:"eyebrow light",children:"Password Recovery"}),e.jsx("h2",{children:"Request Password Reset"}),e.jsx("p",{children:"Enter your email address to request a password reset. Your request will be sent to the administrator for manual approval."}),e.jsxs("ul",{children:[e.jsx("li",{children:"Submit your email address"}),e.jsx("li",{children:"Administrator will review your request"}),e.jsx("li",{children:"You'll receive your new password after verification"})]})]}),e.jsxs("div",{className:"login-form-card",children:[e.jsx("div",{className:"login-form-card__header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fas fa-key login-title-icon"}),"Forgot Password"]})}),d?e.jsxs("div",{className:"forgot-password-success",children:[e.jsx("div",{className:"forgot-password-success-icon",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx("h3",{className:"forgot-password-success-title",children:"Request Sent"}),e.jsx("p",{className:"forgot-password-success-message",children:"Your request has been sent to the administrator. You will receive your new password after verification."}),e.jsx("div",{className:"login-buttons",children:e.jsx("button",{type:"button",className:"btn-admin login-btn-full-width",onClick:()=>R("/login"),children:"Back to Login"})})]}):e.jsxs("form",{onSubmit:$,noValidate:!0,children:[e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsx("input",{type:"email",value:s,onChange:F=>{a(F.target.value),p&&m("")},onInvalid:F=>F.preventDefault(),placeholder:"Enter your email address",className:`mono-input ${p?"input-error":""}`,disabled:r})]}),e.jsx("div",{className:"login-buttons",children:e.jsx("button",{type:"submit",className:`btn-admin login-btn-wrapper login-btn-full-width ${r?"login-btn--loading":""}`,disabled:r,children:r?e.jsxs("span",{className:"login-btn-spinner",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):"Request Password Reset"})}),e.jsx("div",{className:"forgot-password-back-link",children:e.jsxs(Xc,{to:"/login",children:[e.jsx("i",{className:"fas fa-arrow-left forgot-password-back-link-icon"}),"Back to Login"]})})]}),e.jsx(Yl,{message:g,type:j,onClose:()=>v(null),duration:3e3})]})]})})})}function _y(){const[s]=Tp(),[a,r]=q.useState(""),[o,d]=q.useState(""),[c,p]=q.useState(!1),[m,g]=q.useState(!1),[v,j]=q.useState(null),[A,R]=q.useState(!1),[w,$]=q.useState(!1),[F,D]=q.useState({password:"",confirmPassword:""}),[_,Y]=q.useState(null),[ee,G]=q.useState("error"),fe=wo(),he=s.get("token"),Be=s.get("role")||"admin";q.useEffect(()=>{he||j({type:"error",text:"Invalid reset link. Please request a new password reset."})},[he]);const ge=ye=>ye?ye.length<6?"Password must be at least 6 characters long":"":"Password is required",te=async ye=>{ye.preventDefault();const z=ge(a),H=a!==o?"Passwords do not match":ge(o);if(D({password:z,confirmPassword:H}),z||H){Y(z||H),G("error");return}if(!he){j({type:"error",text:"Invalid reset token. Please request a new password reset."});return}R(!0),j(null);try{const ie=await fetch("http://localhost:4000/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:he,newPassword:a,role:Be})}),ke=await ie.json();if(!ie.ok||!ke.success){j({type:"error",text:ke.message||"Failed to reset password. Please try again."}),R(!1);return}$(!0),j({type:"success",text:ke.message||"Password has been reset successfully!"}),R(!1),setTimeout(()=>{fe("/login")},3e3)}catch(de){console.error("Reset password error:",de),j({type:"error",text:"Unable to connect. Please check your connection and try again."}),R(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Zc,{showCTA:!1}),e.jsx("main",{className:"login-main",children:e.jsxs("div",{className:"login-shell",children:[e.jsxs("aside",{className:"login-menu",children:[e.jsx("p",{className:"eyebrow light",children:"Password Reset"}),e.jsx("h2",{children:"Create New Password"}),e.jsx("p",{children:"Enter your new password below. Make sure it's strong and secure."}),e.jsxs("ul",{children:[e.jsx("li",{children:"At least 6 characters long"}),e.jsx("li",{children:"Use a combination of letters and numbers"}),e.jsx("li",{children:"Don't reuse your old password"})]})]}),e.jsxs("div",{className:"login-form-card",children:[e.jsx("div",{className:"login-form-card__header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fas fa-lock login-title-icon"}),"Reset Password"]})}),w?e.jsxs("div",{className:"forgot-password-success",children:[e.jsx("div",{className:"forgot-password-success-icon",children:e.jsx("i",{className:"fas fa-check"})}),e.jsx("h3",{className:"forgot-password-success-title",children:"Password Reset Successful!"}),e.jsx("p",{className:"forgot-password-success-message",children:"Your password has been reset successfully. You can now login with your new password."}),e.jsx("p",{className:"forgot-password-success-message forgot-password-success-message--small",children:"Redirecting to login page in a few seconds..."}),e.jsx("div",{className:"login-buttons",children:e.jsx("button",{type:"button",className:"btn-admin login-btn-full-width",onClick:()=>fe("/login"),children:"Go to Login"})})]}):e.jsxs("form",{onSubmit:te,noValidate:!0,children:[e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock login-icon"}),"New Password ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx("input",{type:c?"text":"password",value:a,onChange:ye=>{r(ye.target.value),F.password&&D({...F,password:""})},onBlur:()=>{const ye=ge(a);D({...F,password:ye}),ye&&(Y(ye),G("error"))},onInvalid:ye=>ye.preventDefault(),placeholder:"Enter new password",className:`mono-input login-input--with-icon ${F.password?"input-error":""}`,disabled:A||!he,required:!0}),e.jsx("button",{type:"button",onClick:()=>p(!c),className:"login-password-toggle","aria-label":c?"Hide password":"Show password",disabled:A,children:c?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsxs("label",{className:"mono-label",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-lock login-icon"}),"Confirm Password ",e.jsx("span",{className:"login-required",children:"*"})]}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx("input",{type:m?"text":"password",value:o,onChange:ye=>{d(ye.target.value),F.confirmPassword&&D({...F,confirmPassword:""})},onBlur:()=>{const ye=a!==o?"Passwords do not match":ge(o);D({...F,confirmPassword:ye}),ye&&(Y(ye),G("error"))},onInvalid:ye=>ye.preventDefault(),placeholder:"Confirm new password",className:`mono-input login-input--with-icon ${F.confirmPassword?"input-error":""}`,disabled:A||!he,required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!m),className:"login-password-toggle","aria-label":m?"Hide password":"Show password",disabled:A,children:m?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),e.jsx("div",{className:"login-buttons",children:e.jsx("button",{type:"submit",className:`btn-admin login-btn-wrapper login-btn-full-width ${A||!he?"login-btn--loading":""}`,disabled:A||!he,children:A?e.jsxs("span",{className:"login-btn-spinner",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Resetting..."]}):"Reset Password"})}),e.jsx("div",{className:"forgot-password-back-link",children:e.jsxs(Xc,{to:"/login",children:[e.jsx("i",{className:"fas fa-arrow-left forgot-password-back-link-icon"}),"Back to Login"]})})]}),e.jsx(Hd,{isOpen:!!v,message:v?.text,type:v?.type||"error",onClose:()=>j(null)}),e.jsx(Yl,{message:_,type:ee,onClose:()=>Y(null),duration:3e3})]})]})}),e.jsx(ed,{})]})}function Iy(){return e.jsx(M1,{children:e.jsx(w1,{future:{v7_startTransition:!0},children:e.jsxs(h1,{children:[e.jsx(Oo,{path:"/",element:e.jsx(tm,{to:"/login",replace:!0})}),e.jsx(Oo,{path:"/login",element:e.jsx(I1,{})}),e.jsx(Oo,{path:"/signup",element:e.jsx(Cy,{})}),e.jsx(Oo,{path:"/forgot-password",element:e.jsx(Ly,{})}),e.jsx(Oo,{path:"/reset-password",element:e.jsx(_y,{})}),e.jsx(Oo,{path:"/admin",element:e.jsx(ky,{})}),e.jsx(Oo,{path:"/member",element:e.jsx(Ay,{})}),e.jsx(Oo,{path:"/server",element:e.jsx(Py,{})}),e.jsx(Oo,{path:"*",element:e.jsx(tm,{to:"/login",replace:!0})})]})})})}const Ey="867870699456-djt0cnrakntduqs6g2gm3pk24vj6qoc9.apps.googleusercontent.com",Eg=()=>{document.querySelectorAll("input[title], select[title], textarea[title], input[pattern], select[pattern], textarea[pattern]").forEach(a=>{a.removeAttribute("title"),a.removeAttribute("pattern")})},My=()=>{const s=()=>{document.querySelectorAll("input[required], select[required], textarea[required]").forEach(o=>{o.hasAttribute("data-invalid-handler-added")||(o.addEventListener("invalid",d=>{d.preventDefault(),d.stopPropagation()},{capture:!0}),o.setAttribute("data-invalid-handler-added","true"))})};s();const a=new MutationObserver(()=>{Eg(),s()});document.body?a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]}):document.addEventListener("DOMContentLoaded",()=>{a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]})})};Eg();My();w0.createRoot(document.getElementById("root")).render(e.jsx(Cf.StrictMode,{children:e.jsx(_1,{clientId:Ey,children:e.jsx(Iy,{})})}));export{dr as _,Dy as c,Ap as g};
